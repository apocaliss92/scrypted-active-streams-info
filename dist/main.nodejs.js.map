{"version":3,"file":"main.nodejs.js","mappings":"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","sources":["../node_modules/@scrypted/sdk/dist/src/index.js","../node_modules/@scrypted/sdk/dist/src/storage-settings.js","../node_modules/@scrypted/sdk/dist/types/gen/index.js","../src/main.ts","../src/types.ts","../../scrypted-apocaliss-base/src/baseMixin.ts","../../scrypted-apocaliss-base/src/basePlugin.ts","../../scrypted-apocaliss-base/src/mqtt-client.ts","../../scrypted-apocaliss-base/node_modules/@scrypted/sdk/dist/src/index.js","../../scrypted-apocaliss-base/node_modules/@scrypted/sdk/dist/src/storage-settings.js","../../scrypted-apocaliss-base/node_modules/@scrypted/sdk/dist/types/gen/index.js","../../scrypted-apocaliss-base/node_modules/abort-controller/dist/abort-controller.js","../../scrypted-apocaliss-base/node_modules/bl/BufferList.js","../../scrypted-apocaliss-base/node_modules/bl/bl.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/internal/streams/add-abort-signal.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/internal/streams/buffer_list.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/internal/streams/compose.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/internal/streams/destroy.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/internal/streams/duplex.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/internal/streams/duplexify.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/internal/streams/end-of-stream.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/internal/streams/from.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/internal/streams/legacy.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/internal/streams/operators.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/internal/streams/passthrough.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/internal/streams/pipeline.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/internal/streams/readable.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/internal/streams/state.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/internal/streams/transform.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/internal/streams/utils.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/internal/streams/writable.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/internal/validators.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/ours/errors.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/ours/index.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/ours/primordials.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/ours/util.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/stream.js","../../scrypted-apocaliss-base/node_modules/bl/node_modules/readable-stream/lib/stream/promises.js","../../scrypted-apocaliss-base/node_modules/debug/src/browser.js","../../scrypted-apocaliss-base/node_modules/debug/src/common.js","../../scrypted-apocaliss-base/node_modules/debug/src/index.js","../../scrypted-apocaliss-base/node_modules/debug/src/node.js","../../scrypted-apocaliss-base/node_modules/event-target-shim/dist/event-target-shim.js","../../scrypted-apocaliss-base/node_modules/has-flag/index.js","../../scrypted-apocaliss-base/node_modules/inherits/inherits.js","../../scrypted-apocaliss-base/node_modules/inherits/inherits_browser.js","../../scrypted-apocaliss-base/node_modules/js-sdsl/dist/esm/container/TreeContainer/Base/TreeNode.js","../../scrypted-apocaliss-base/node_modules/js-sdsl/dist/esm/container/ContainerBase/index.js","../../scrypted-apocaliss-base/node_modules/js-sdsl/dist/esm/utils/throwError.js","../../scrypted-apocaliss-base/node_modules/js-sdsl/dist/esm/container/TreeContainer/Base/index.js","../../scrypted-apocaliss-base/node_modules/js-sdsl/dist/esm/container/TreeContainer/Base/TreeIterator.js","../../scrypted-apocaliss-base/node_modules/js-sdsl/dist/esm/container/TreeContainer/OrderedSet.js","../../scrypted-apocaliss-base/node_modules/mqtt-packet/constants.js","../../scrypted-apocaliss-base/node_modules/mqtt-packet/generate.js","../../scrypted-apocaliss-base/node_modules/mqtt-packet/mqtt.js","../../scrypted-apocaliss-base/node_modules/mqtt-packet/numbers.js","../../scrypted-apocaliss-base/node_modules/mqtt-packet/packet.js","../../scrypted-apocaliss-base/node_modules/mqtt-packet/parser.js","../../scrypted-apocaliss-base/node_modules/mqtt-packet/writeToStream.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/index.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/BufferedDuplex.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/KeepaliveManager.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/TypedEmitter.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/client.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/connect/ali.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/connect/index.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/connect/tcp.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/connect/tls.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/connect/ws.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/connect/wx.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/default-message-id-provider.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/get-timer.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/handlers/ack.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/handlers/auth.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/handlers/connack.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/handlers/index.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/handlers/publish.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/handlers/pubrel.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/is-browser.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/shared.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/store.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/topic-alias-recv.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/topic-alias-send.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/unique-message-id-provider.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/lib/validations.js","../../scrypted-apocaliss-base/node_modules/mqtt/build/mqtt.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/internal/streams/add-abort-signal.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/internal/streams/buffer_list.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/internal/streams/compose.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/internal/streams/destroy.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/internal/streams/duplex.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/internal/streams/duplexify.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/internal/streams/end-of-stream.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/internal/streams/from.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/internal/streams/legacy.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/internal/streams/operators.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/internal/streams/passthrough.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/internal/streams/pipeline.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/internal/streams/readable.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/internal/streams/state.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/internal/streams/transform.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/internal/streams/utils.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/internal/streams/writable.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/internal/validators.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/ours/errors.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/ours/index.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/ours/primordials.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/ours/util.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/stream.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/readable-stream/lib/stream/promises.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/ws/index.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/ws/lib/buffer-util.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/ws/lib/constants.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/ws/lib/event-target.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/ws/lib/extension.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/ws/lib/limiter.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/ws/lib/permessage-deflate.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/ws/lib/receiver.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/ws/lib/sender.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/ws/lib/stream.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/ws/lib/subprotocol.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/ws/lib/validation.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/ws/lib/websocket-server.js","../../scrypted-apocaliss-base/node_modules/mqtt/node_modules/ws/lib/websocket.js","../../scrypted-apocaliss-base/node_modules/ms/index.js","../../scrypted-apocaliss-base/node_modules/number-allocator/index.js","../../scrypted-apocaliss-base/node_modules/number-allocator/lib/number-allocator.js","../../scrypted-apocaliss-base/node_modules/process-nextick-args/index.js","../../scrypted-apocaliss-base/node_modules/process/index.js","../../scrypted-apocaliss-base/node_modules/rfdc/default.js","../../scrypted-apocaliss-base/node_modules/rfdc/index.js","../../scrypted-apocaliss-base/node_modules/supports-color/index.js","../../scrypted-apocaliss-base/node_modules/fast-unique-numbers/build/es2019/factories/add-unique-number.js","../../scrypted-apocaliss-base/node_modules/fast-unique-numbers/build/es2019/factories/generate-unique-number.js","../../scrypted-apocaliss-base/node_modules/fast-unique-numbers/build/es2019/module.js","../../scrypted-apocaliss-base/node_modules/fast-unique-numbers/build/es2019/factories/cache.js","../../scrypted-apocaliss-base/node_modules/worker-timers/build/es2019/module.js","../../scrypted-apocaliss-base/node_modules/worker-timers/build/es2019/factories/load-or-return-broker.js","../../scrypted-apocaliss-base/node_modules/worker-timers-broker/build/es2019/module.js","../../scrypted-apocaliss-base/node_modules/worker-timers-broker/build/es2019/guards/call-notification.js","../../scrypted-apocaliss-base/node_modules/worker-timers-broker/build/es2019/guards/clear-response.js","../../scrypted-apocaliss-base/node_modules/worker-timers/build/es2019/worker/worker.js","../external node-commonjs \"buffer\"","../external node-commonjs \"crypto\"","../external node-commonjs \"events\"","../external node-commonjs \"http\"","../external node-commonjs \"https\"","../external node-commonjs \"net\"","../external node-commonjs \"os\"","../external node-commonjs \"stream\"","../external node-commonjs \"string_decoder\"","../external node-commonjs \"tls\"","../external node-commonjs \"tty\"","../external node-commonjs \"url\"","../external node-commonjs \"util\"","../external node-commonjs \"zlib\"","../../scrypted-apocaliss-base/node_modules/lru-cache/dist/commonjs/index.js","../webpack/bootstrap","../webpack/runtime/define property getters","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/make namespace object","../webpack/startup"],"sourcesContent":["\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sdk = exports.MixinDeviceBase = exports.ScryptedDeviceBase = void 0;\n__exportStar(require(\"../types/gen/index\"), exports);\nconst index_1 = require(\"../types/gen/index\");\n/**\n * @category Core Reference\n */\nclass ScryptedDeviceBase extends index_1.DeviceBase {\n    constructor(nativeId) {\n        super();\n        this.nativeId = nativeId;\n    }\n    get storage() {\n        if (!this._storage) {\n            this._storage = deviceManager.getDeviceStorage(this.nativeId);\n        }\n        return this._storage;\n    }\n    get log() {\n        if (!this._log) {\n            this._log = deviceManager.getDeviceLogger(this.nativeId);\n        }\n        return this._log;\n    }\n    get console() {\n        if (!this._console) {\n            this._console = deviceManager.getDeviceConsole(this.nativeId);\n        }\n        return this._console;\n    }\n    async createMediaObject(data, mimeType) {\n        return mediaManager.createMediaObject(data, mimeType, {\n            sourceId: this.id,\n        });\n    }\n    getMediaObjectConsole(mediaObject) {\n        if (typeof mediaObject.sourceId !== 'string')\n            return this.console;\n        return deviceManager.getMixinConsole(mediaObject.sourceId, this.nativeId);\n    }\n    _lazyLoadDeviceState() {\n        if (!this._deviceState) {\n            if (this.nativeId) {\n                this._deviceState = deviceManager.getDeviceState(this.nativeId);\n            }\n            else {\n                this._deviceState = deviceManager.getDeviceState();\n            }\n        }\n    }\n    /**\n     * Fire an event for this device.\n     */\n    onDeviceEvent(eventInterface, eventData) {\n        return deviceManager.onDeviceEvent(this.nativeId, eventInterface, eventData);\n    }\n}\nexports.ScryptedDeviceBase = ScryptedDeviceBase;\n/**\n * @category Mixin Reference\n */\nclass MixinDeviceBase extends index_1.DeviceBase {\n    constructor(options) {\n        super();\n        this._listeners = new Set();\n        this.mixinDevice = options.mixinDevice;\n        this.mixinDeviceInterfaces = options.mixinDeviceInterfaces;\n        this.mixinStorageSuffix = options.mixinStorageSuffix;\n        this._deviceState = options.mixinDeviceState;\n        this.nativeId = systemManager.getDeviceById(this.id).nativeId;\n        this.mixinProviderNativeId = options.mixinProviderNativeId;\n        // RpcProxy will trap all properties, and the following check/hack will determine\n        // if the device state came from another node worker thread.\n        // This should ultimately be discouraged and warned at some point in the future.\n        if (this._deviceState.__rpcproxy_traps_all_properties && typeof this._deviceState.id === 'string') {\n            this._deviceState = deviceManager.createDeviceState(this._deviceState.id, this._deviceState.setState);\n        }\n    }\n    get storage() {\n        if (!this._storage) {\n            const mixinStorageSuffix = this.mixinStorageSuffix;\n            const mixinStorageKey = this.id + (mixinStorageSuffix ? ':' + mixinStorageSuffix : '');\n            this._storage = deviceManager.getMixinStorage(mixinStorageKey, this.mixinProviderNativeId);\n        }\n        return this._storage;\n    }\n    get console() {\n        if (!this._console) {\n            if (deviceManager.getMixinConsole)\n                this._console = deviceManager.getMixinConsole(this.id, this.mixinProviderNativeId);\n            else\n                this._console = deviceManager.getDeviceConsole(this.mixinProviderNativeId);\n        }\n        return this._console;\n    }\n    async createMediaObject(data, mimeType) {\n        return mediaManager.createMediaObject(data, mimeType, {\n            sourceId: this.id,\n        });\n    }\n    getMediaObjectConsole(mediaObject) {\n        if (typeof mediaObject.sourceId !== 'string')\n            return this.console;\n        return deviceManager.getMixinConsole(mediaObject.sourceId, this.mixinProviderNativeId);\n    }\n    /**\n     * Fire an event for this device.\n     */\n    onDeviceEvent(eventInterface, eventData) {\n        return deviceManager.onMixinEvent(this.id, this, eventInterface, eventData);\n    }\n    _lazyLoadDeviceState() {\n    }\n    manageListener(listener) {\n        this._listeners.add(listener);\n    }\n    release() {\n        for (const l of this._listeners) {\n            l.removeListener();\n        }\n    }\n}\nexports.MixinDeviceBase = MixinDeviceBase;\n(function () {\n    function _createGetState(state) {\n        return function () {\n            this._lazyLoadDeviceState();\n            // @ts-ignore: accessing private property\n            return this._deviceState?.[state];\n        };\n    }\n    function _createSetState(state) {\n        return function (value) {\n            this._lazyLoadDeviceState();\n            // @ts-ignore: accessing private property\n            if (!this._deviceState) {\n                console.warn('device state is unavailable. the device must be discovered with deviceManager.onDeviceDiscovered or deviceManager.onDevicesChanged before the state can be set.');\n            }\n            else {\n                // @ts-ignore: accessing private property\n                this._deviceState[state] = value;\n            }\n        };\n    }\n    for (const field of Object.values(index_1.ScryptedInterfaceProperty)) {\n        if (field === index_1.ScryptedInterfaceProperty.nativeId)\n            continue;\n        Object.defineProperty(ScryptedDeviceBase.prototype, field, {\n            set: _createSetState(field),\n            get: _createGetState(field),\n        });\n        Object.defineProperty(MixinDeviceBase.prototype, field, {\n            set: _createSetState(field),\n            get: _createGetState(field),\n        });\n    }\n})();\nexports.sdk = {};\ntry {\n    let runtimeAPI;\n    try {\n        runtimeAPI = pluginRuntimeAPI;\n    }\n    catch (e) {\n    }\n    Object.assign(exports.sdk, {\n        log: deviceManager.getDeviceLogger(undefined),\n        deviceManager,\n        endpointManager,\n        mediaManager,\n        systemManager,\n        pluginHostAPI,\n        ...runtimeAPI,\n    });\n    try {\n        systemManager.setScryptedInterfaceDescriptors?.(index_1.TYPES_VERSION, index_1.ScryptedInterfaceDescriptors)?.catch(() => { });\n    }\n    catch (e) {\n    }\n}\ncatch (e) {\n    console.error('sdk initialization error, import @scrypted/types or use @scrypted/client instead', e);\n}\nexports.default = exports.sdk;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StorageSettings = void 0;\nconst _1 = __importStar(require(\".\"));\nconst { systemManager } = _1.default;\nfunction parseValue(value, setting, readDefaultValue, rawDevice) {\n    if (value === null || value === undefined) {\n        return readDefaultValue();\n    }\n    const type = setting.multiple ? 'array' : setting.type;\n    if (type === 'boolean') {\n        if (value === 'true')\n            return true;\n        if (value === 'false')\n            return false;\n        return readDefaultValue() || false;\n    }\n    if (type === 'number') {\n        const n = parseFloat(value);\n        if (!isNaN(n))\n            return n;\n        return readDefaultValue() || 0;\n    }\n    if (type === 'integer') {\n        const n = parseInt(value);\n        if (!isNaN(n))\n            return n;\n        return readDefaultValue() || 0;\n    }\n    if (type === 'array') {\n        if (!value)\n            return readDefaultValue() || [];\n        try {\n            return JSON.parse(value);\n        }\n        catch (e) {\n            return readDefaultValue() || [];\n        }\n    }\n    if (type === 'device') {\n        if (rawDevice)\n            return value;\n        return systemManager.getDeviceById(value) || systemManager.getDeviceById(readDefaultValue());\n    }\n    // string type, so check if it is json.\n    if (value && setting.json) {\n        try {\n            return JSON.parse(value);\n        }\n        catch (e) {\n            return readDefaultValue();\n        }\n    }\n    return value || readDefaultValue();\n}\nclass StorageSettings {\n    constructor(device, settings) {\n        this.device = device;\n        this.settings = settings;\n        this.values = {};\n        this.hasValue = {};\n        for (const key of Object.keys(settings)) {\n            const setting = settings[key];\n            const rawGet = () => this.getItem(key);\n            let get;\n            if (setting.type !== 'clippath') {\n                get = rawGet;\n            }\n            else {\n                // maybe need a mapPut. clippath is the only complex type at the moment.\n                get = () => {\n                    try {\n                        return JSON.parse(rawGet());\n                    }\n                    catch (e) {\n                    }\n                };\n            }\n            Object.defineProperty(this.values, key, {\n                get,\n                set: value => this.putSetting(key, value),\n                enumerable: true,\n            });\n            Object.defineProperty(this.hasValue, key, {\n                get: () => this.device.storage.getItem(key) != null,\n                enumerable: true,\n            });\n        }\n    }\n    get keys() {\n        const ret = {};\n        for (const key of Object.keys(this.settings)) {\n            ret[key] = key;\n        }\n        return ret;\n    }\n    async getSettings() {\n        const onGet = await this.options?.onGet?.();\n        const ret = [];\n        for (const [key, setting] of Object.entries(this.settings)) {\n            let s = Object.assign({}, setting);\n            if (onGet?.[key])\n                s = Object.assign(s, onGet[key]);\n            if (s.onGet)\n                s = Object.assign(s, await s.onGet());\n            if (s.hide || await this.options?.hide?.[key]?.())\n                continue;\n            s.key = key;\n            s.value = this.getItemInternal(key, s, true);\n            ret.push(s);\n            delete s.onPut;\n            delete s.onGet;\n            delete s.mapPut;\n            delete s.mapGet;\n        }\n        return ret;\n    }\n    async putSetting(key, value) {\n        const setting = this.settings[key];\n        let oldValue;\n        if (setting)\n            oldValue = this.getItemInternal(key, setting);\n        return this.putSettingInternal(setting, oldValue, key, value);\n    }\n    putSettingInternal(setting, oldValue, key, value) {\n        if (!setting?.noStore) {\n            if (setting?.mapPut)\n                value = setting.mapPut(oldValue, value);\n            // nullish values should be removed, since Storage can't persist them correctly.\n            if (value == null)\n                this.device.storage.removeItem(key);\n            else if (typeof value === 'object')\n                this.device.storage.setItem(key, JSON.stringify(value));\n            else\n                this.device.storage.setItem(key, value?.toString());\n        }\n        setting?.onPut?.(oldValue, value);\n        if (!setting?.hide)\n            this.device.onDeviceEvent(_1.ScryptedInterface.Settings, undefined);\n    }\n    getItemInternal(key, setting, rawDevice) {\n        if (!setting)\n            return this.device.storage.getItem(key);\n        const readDefaultValue = () => {\n            if (setting.persistedDefaultValue != null) {\n                this.putSettingInternal(setting, undefined, key, setting.persistedDefaultValue);\n                return setting.persistedDefaultValue;\n            }\n            return setting.defaultValue;\n        };\n        const ret = parseValue(this.device.storage.getItem(key), setting, readDefaultValue, rawDevice);\n        return setting.mapGet ? setting.mapGet(ret) : ret;\n    }\n    getItem(key) {\n        return this.getItemInternal(key, this.settings[key]);\n    }\n}\nexports.StorageSettings = StorageSettings;\n//# sourceMappingURL=storage-settings.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScryptedMimeTypes = exports.ScryptedInterface = exports.MediaPlayerState = exports.SecuritySystemObstruction = exports.SecuritySystemMode = exports.AirQuality = exports.AirPurifierMode = exports.AirPurifierStatus = exports.ChargeState = exports.LockState = exports.PanTiltZoomMovement = exports.ThermostatMode = exports.TemperatureUnit = exports.FanMode = exports.HumidityMode = exports.ScryptedDeviceType = exports.ScryptedInterfaceDescriptors = exports.ScryptedInterfaceMethod = exports.ScryptedInterfaceProperty = exports.DeviceBase = exports.TYPES_VERSION = void 0;\nexports.TYPES_VERSION = \"0.3.59\";\nclass DeviceBase {\n}\nexports.DeviceBase = DeviceBase;\nvar ScryptedInterfaceProperty;\n(function (ScryptedInterfaceProperty) {\n    ScryptedInterfaceProperty[\"id\"] = \"id\";\n    ScryptedInterfaceProperty[\"info\"] = \"info\";\n    ScryptedInterfaceProperty[\"interfaces\"] = \"interfaces\";\n    ScryptedInterfaceProperty[\"mixins\"] = \"mixins\";\n    ScryptedInterfaceProperty[\"name\"] = \"name\";\n    ScryptedInterfaceProperty[\"nativeId\"] = \"nativeId\";\n    ScryptedInterfaceProperty[\"pluginId\"] = \"pluginId\";\n    ScryptedInterfaceProperty[\"providedInterfaces\"] = \"providedInterfaces\";\n    ScryptedInterfaceProperty[\"providedName\"] = \"providedName\";\n    ScryptedInterfaceProperty[\"providedRoom\"] = \"providedRoom\";\n    ScryptedInterfaceProperty[\"providedType\"] = \"providedType\";\n    ScryptedInterfaceProperty[\"providerId\"] = \"providerId\";\n    ScryptedInterfaceProperty[\"room\"] = \"room\";\n    ScryptedInterfaceProperty[\"type\"] = \"type\";\n    ScryptedInterfaceProperty[\"scryptedRuntimeArguments\"] = \"scryptedRuntimeArguments\";\n    ScryptedInterfaceProperty[\"on\"] = \"on\";\n    ScryptedInterfaceProperty[\"brightness\"] = \"brightness\";\n    ScryptedInterfaceProperty[\"colorTemperature\"] = \"colorTemperature\";\n    ScryptedInterfaceProperty[\"rgb\"] = \"rgb\";\n    ScryptedInterfaceProperty[\"hsv\"] = \"hsv\";\n    ScryptedInterfaceProperty[\"running\"] = \"running\";\n    ScryptedInterfaceProperty[\"paused\"] = \"paused\";\n    ScryptedInterfaceProperty[\"docked\"] = \"docked\";\n    ScryptedInterfaceProperty[\"temperatureSetting\"] = \"temperatureSetting\";\n    ScryptedInterfaceProperty[\"temperature\"] = \"temperature\";\n    ScryptedInterfaceProperty[\"temperatureUnit\"] = \"temperatureUnit\";\n    ScryptedInterfaceProperty[\"humidity\"] = \"humidity\";\n    ScryptedInterfaceProperty[\"audioVolumes\"] = \"audioVolumes\";\n    ScryptedInterfaceProperty[\"recordingActive\"] = \"recordingActive\";\n    ScryptedInterfaceProperty[\"ptzCapabilities\"] = \"ptzCapabilities\";\n    ScryptedInterfaceProperty[\"lockState\"] = \"lockState\";\n    ScryptedInterfaceProperty[\"entryOpen\"] = \"entryOpen\";\n    ScryptedInterfaceProperty[\"batteryLevel\"] = \"batteryLevel\";\n    ScryptedInterfaceProperty[\"chargeState\"] = \"chargeState\";\n    ScryptedInterfaceProperty[\"online\"] = \"online\";\n    ScryptedInterfaceProperty[\"fromMimeType\"] = \"fromMimeType\";\n    ScryptedInterfaceProperty[\"toMimeType\"] = \"toMimeType\";\n    ScryptedInterfaceProperty[\"converters\"] = \"converters\";\n    ScryptedInterfaceProperty[\"binaryState\"] = \"binaryState\";\n    ScryptedInterfaceProperty[\"tampered\"] = \"tampered\";\n    ScryptedInterfaceProperty[\"powerDetected\"] = \"powerDetected\";\n    ScryptedInterfaceProperty[\"audioDetected\"] = \"audioDetected\";\n    ScryptedInterfaceProperty[\"motionDetected\"] = \"motionDetected\";\n    ScryptedInterfaceProperty[\"ambientLight\"] = \"ambientLight\";\n    ScryptedInterfaceProperty[\"occupied\"] = \"occupied\";\n    ScryptedInterfaceProperty[\"flooded\"] = \"flooded\";\n    ScryptedInterfaceProperty[\"ultraviolet\"] = \"ultraviolet\";\n    ScryptedInterfaceProperty[\"luminance\"] = \"luminance\";\n    ScryptedInterfaceProperty[\"position\"] = \"position\";\n    ScryptedInterfaceProperty[\"securitySystemState\"] = \"securitySystemState\";\n    ScryptedInterfaceProperty[\"pm10Density\"] = \"pm10Density\";\n    ScryptedInterfaceProperty[\"pm25Density\"] = \"pm25Density\";\n    ScryptedInterfaceProperty[\"vocDensity\"] = \"vocDensity\";\n    ScryptedInterfaceProperty[\"noxDensity\"] = \"noxDensity\";\n    ScryptedInterfaceProperty[\"co2ppm\"] = \"co2ppm\";\n    ScryptedInterfaceProperty[\"airQuality\"] = \"airQuality\";\n    ScryptedInterfaceProperty[\"airPurifierState\"] = \"airPurifierState\";\n    ScryptedInterfaceProperty[\"filterChangeIndication\"] = \"filterChangeIndication\";\n    ScryptedInterfaceProperty[\"filterLifeLevel\"] = \"filterLifeLevel\";\n    ScryptedInterfaceProperty[\"humiditySetting\"] = \"humiditySetting\";\n    ScryptedInterfaceProperty[\"fan\"] = \"fan\";\n    ScryptedInterfaceProperty[\"applicationInfo\"] = \"applicationInfo\";\n    ScryptedInterfaceProperty[\"systemDevice\"] = \"systemDevice\";\n})(ScryptedInterfaceProperty || (exports.ScryptedInterfaceProperty = ScryptedInterfaceProperty = {}));\nvar ScryptedInterfaceMethod;\n(function (ScryptedInterfaceMethod) {\n    ScryptedInterfaceMethod[\"listen\"] = \"listen\";\n    ScryptedInterfaceMethod[\"probe\"] = \"probe\";\n    ScryptedInterfaceMethod[\"setMixins\"] = \"setMixins\";\n    ScryptedInterfaceMethod[\"setName\"] = \"setName\";\n    ScryptedInterfaceMethod[\"setRoom\"] = \"setRoom\";\n    ScryptedInterfaceMethod[\"setType\"] = \"setType\";\n    ScryptedInterfaceMethod[\"getPluginJson\"] = \"getPluginJson\";\n    ScryptedInterfaceMethod[\"turnOff\"] = \"turnOff\";\n    ScryptedInterfaceMethod[\"turnOn\"] = \"turnOn\";\n    ScryptedInterfaceMethod[\"setBrightness\"] = \"setBrightness\";\n    ScryptedInterfaceMethod[\"getTemperatureMaxK\"] = \"getTemperatureMaxK\";\n    ScryptedInterfaceMethod[\"getTemperatureMinK\"] = \"getTemperatureMinK\";\n    ScryptedInterfaceMethod[\"setColorTemperature\"] = \"setColorTemperature\";\n    ScryptedInterfaceMethod[\"setRgb\"] = \"setRgb\";\n    ScryptedInterfaceMethod[\"setHsv\"] = \"setHsv\";\n    ScryptedInterfaceMethod[\"sendNotification\"] = \"sendNotification\";\n    ScryptedInterfaceMethod[\"start\"] = \"start\";\n    ScryptedInterfaceMethod[\"stop\"] = \"stop\";\n    ScryptedInterfaceMethod[\"pause\"] = \"pause\";\n    ScryptedInterfaceMethod[\"resume\"] = \"resume\";\n    ScryptedInterfaceMethod[\"dock\"] = \"dock\";\n    ScryptedInterfaceMethod[\"setTemperature\"] = \"setTemperature\";\n    ScryptedInterfaceMethod[\"setTemperatureUnit\"] = \"setTemperatureUnit\";\n    ScryptedInterfaceMethod[\"getPictureOptions\"] = \"getPictureOptions\";\n    ScryptedInterfaceMethod[\"takePicture\"] = \"takePicture\";\n    ScryptedInterfaceMethod[\"getAudioStream\"] = \"getAudioStream\";\n    ScryptedInterfaceMethod[\"setAudioVolumes\"] = \"setAudioVolumes\";\n    ScryptedInterfaceMethod[\"startDisplay\"] = \"startDisplay\";\n    ScryptedInterfaceMethod[\"stopDisplay\"] = \"stopDisplay\";\n    ScryptedInterfaceMethod[\"getVideoStream\"] = \"getVideoStream\";\n    ScryptedInterfaceMethod[\"getVideoStreamOptions\"] = \"getVideoStreamOptions\";\n    ScryptedInterfaceMethod[\"getPrivacyMasks\"] = \"getPrivacyMasks\";\n    ScryptedInterfaceMethod[\"setPrivacyMasks\"] = \"setPrivacyMasks\";\n    ScryptedInterfaceMethod[\"getRecordingStream\"] = \"getRecordingStream\";\n    ScryptedInterfaceMethod[\"getRecordingStreamCurrentTime\"] = \"getRecordingStreamCurrentTime\";\n    ScryptedInterfaceMethod[\"getRecordingStreamOptions\"] = \"getRecordingStreamOptions\";\n    ScryptedInterfaceMethod[\"getRecordingStreamThumbnail\"] = \"getRecordingStreamThumbnail\";\n    ScryptedInterfaceMethod[\"deleteRecordingStream\"] = \"deleteRecordingStream\";\n    ScryptedInterfaceMethod[\"setRecordingActive\"] = \"setRecordingActive\";\n    ScryptedInterfaceMethod[\"ptzCommand\"] = \"ptzCommand\";\n    ScryptedInterfaceMethod[\"getRecordedEvents\"] = \"getRecordedEvents\";\n    ScryptedInterfaceMethod[\"getVideoClip\"] = \"getVideoClip\";\n    ScryptedInterfaceMethod[\"getVideoClipThumbnail\"] = \"getVideoClipThumbnail\";\n    ScryptedInterfaceMethod[\"getVideoClips\"] = \"getVideoClips\";\n    ScryptedInterfaceMethod[\"removeVideoClips\"] = \"removeVideoClips\";\n    ScryptedInterfaceMethod[\"setVideoStreamOptions\"] = \"setVideoStreamOptions\";\n    ScryptedInterfaceMethod[\"startIntercom\"] = \"startIntercom\";\n    ScryptedInterfaceMethod[\"stopIntercom\"] = \"stopIntercom\";\n    ScryptedInterfaceMethod[\"lock\"] = \"lock\";\n    ScryptedInterfaceMethod[\"unlock\"] = \"unlock\";\n    ScryptedInterfaceMethod[\"addPassword\"] = \"addPassword\";\n    ScryptedInterfaceMethod[\"getPasswords\"] = \"getPasswords\";\n    ScryptedInterfaceMethod[\"removePassword\"] = \"removePassword\";\n    ScryptedInterfaceMethod[\"activate\"] = \"activate\";\n    ScryptedInterfaceMethod[\"deactivate\"] = \"deactivate\";\n    ScryptedInterfaceMethod[\"isReversible\"] = \"isReversible\";\n    ScryptedInterfaceMethod[\"closeEntry\"] = \"closeEntry\";\n    ScryptedInterfaceMethod[\"openEntry\"] = \"openEntry\";\n    ScryptedInterfaceMethod[\"getDevice\"] = \"getDevice\";\n    ScryptedInterfaceMethod[\"releaseDevice\"] = \"releaseDevice\";\n    ScryptedInterfaceMethod[\"adoptDevice\"] = \"adoptDevice\";\n    ScryptedInterfaceMethod[\"discoverDevices\"] = \"discoverDevices\";\n    ScryptedInterfaceMethod[\"createDevice\"] = \"createDevice\";\n    ScryptedInterfaceMethod[\"getCreateDeviceSettings\"] = \"getCreateDeviceSettings\";\n    ScryptedInterfaceMethod[\"reboot\"] = \"reboot\";\n    ScryptedInterfaceMethod[\"getRefreshFrequency\"] = \"getRefreshFrequency\";\n    ScryptedInterfaceMethod[\"refresh\"] = \"refresh\";\n    ScryptedInterfaceMethod[\"getMediaStatus\"] = \"getMediaStatus\";\n    ScryptedInterfaceMethod[\"load\"] = \"load\";\n    ScryptedInterfaceMethod[\"seek\"] = \"seek\";\n    ScryptedInterfaceMethod[\"skipNext\"] = \"skipNext\";\n    ScryptedInterfaceMethod[\"skipPrevious\"] = \"skipPrevious\";\n    ScryptedInterfaceMethod[\"convert\"] = \"convert\";\n    ScryptedInterfaceMethod[\"convertMedia\"] = \"convertMedia\";\n    ScryptedInterfaceMethod[\"getSettings\"] = \"getSettings\";\n    ScryptedInterfaceMethod[\"putSetting\"] = \"putSetting\";\n    ScryptedInterfaceMethod[\"armSecuritySystem\"] = \"armSecuritySystem\";\n    ScryptedInterfaceMethod[\"disarmSecuritySystem\"] = \"disarmSecuritySystem\";\n    ScryptedInterfaceMethod[\"setAirPurifierState\"] = \"setAirPurifierState\";\n    ScryptedInterfaceMethod[\"getReadmeMarkdown\"] = \"getReadmeMarkdown\";\n    ScryptedInterfaceMethod[\"getOauthUrl\"] = \"getOauthUrl\";\n    ScryptedInterfaceMethod[\"onOauthCallback\"] = \"onOauthCallback\";\n    ScryptedInterfaceMethod[\"canMixin\"] = \"canMixin\";\n    ScryptedInterfaceMethod[\"getMixin\"] = \"getMixin\";\n    ScryptedInterfaceMethod[\"releaseMixin\"] = \"releaseMixin\";\n    ScryptedInterfaceMethod[\"onRequest\"] = \"onRequest\";\n    ScryptedInterfaceMethod[\"onConnection\"] = \"onConnection\";\n    ScryptedInterfaceMethod[\"onPush\"] = \"onPush\";\n    ScryptedInterfaceMethod[\"run\"] = \"run\";\n    ScryptedInterfaceMethod[\"eval\"] = \"eval\";\n    ScryptedInterfaceMethod[\"loadScripts\"] = \"loadScripts\";\n    ScryptedInterfaceMethod[\"saveScript\"] = \"saveScript\";\n    ScryptedInterfaceMethod[\"trackObjects\"] = \"trackObjects\";\n    ScryptedInterfaceMethod[\"getDetectionInput\"] = \"getDetectionInput\";\n    ScryptedInterfaceMethod[\"getObjectTypes\"] = \"getObjectTypes\";\n    ScryptedInterfaceMethod[\"detectObjects\"] = \"detectObjects\";\n    ScryptedInterfaceMethod[\"generateObjectDetections\"] = \"generateObjectDetections\";\n    ScryptedInterfaceMethod[\"getDetectionModel\"] = \"getDetectionModel\";\n    ScryptedInterfaceMethod[\"setHumidity\"] = \"setHumidity\";\n    ScryptedInterfaceMethod[\"setFan\"] = \"setFan\";\n    ScryptedInterfaceMethod[\"startRTCSignalingSession\"] = \"startRTCSignalingSession\";\n    ScryptedInterfaceMethod[\"createRTCSignalingSession\"] = \"createRTCSignalingSession\";\n    ScryptedInterfaceMethod[\"getScryptedUserAccessControl\"] = \"getScryptedUserAccessControl\";\n    ScryptedInterfaceMethod[\"generateVideoFrames\"] = \"generateVideoFrames\";\n    ScryptedInterfaceMethod[\"connectStream\"] = \"connectStream\";\n    ScryptedInterfaceMethod[\"getTTYSettings\"] = \"getTTYSettings\";\n})(ScryptedInterfaceMethod || (exports.ScryptedInterfaceMethod = ScryptedInterfaceMethod = {}));\nexports.ScryptedInterfaceDescriptors = {\n    ScryptedDevice: {\n        name: 'ScryptedDevice',\n        methods: [\n            'listen',\n            'probe',\n            'setMixins',\n            'setName',\n            'setRoom',\n            'setType'\n        ],\n        properties: [\n            'id',\n            'info',\n            'interfaces',\n            'mixins',\n            'name',\n            'nativeId',\n            'pluginId',\n            'providedInterfaces',\n            'providedName',\n            'providedRoom',\n            'providedType',\n            'providerId',\n            'room',\n            'type'\n        ]\n    },\n    ScryptedPlugin: {\n        name: 'ScryptedPlugin',\n        methods: [\n            'getPluginJson'\n        ],\n        properties: []\n    },\n    ScryptedPluginRuntime: {\n        name: 'ScryptedPluginRuntime',\n        methods: [],\n        properties: [\n            'scryptedRuntimeArguments'\n        ]\n    },\n    OnOff: {\n        name: 'OnOff',\n        methods: [\n            'turnOff',\n            'turnOn'\n        ],\n        properties: [\n            'on'\n        ]\n    },\n    Brightness: {\n        name: 'Brightness',\n        methods: [\n            'setBrightness'\n        ],\n        properties: [\n            'brightness'\n        ]\n    },\n    ColorSettingTemperature: {\n        name: 'ColorSettingTemperature',\n        methods: [\n            'getTemperatureMaxK',\n            'getTemperatureMinK',\n            'setColorTemperature'\n        ],\n        properties: [\n            'colorTemperature'\n        ]\n    },\n    ColorSettingRgb: {\n        name: 'ColorSettingRgb',\n        methods: [\n            'setRgb'\n        ],\n        properties: [\n            'rgb'\n        ]\n    },\n    ColorSettingHsv: {\n        name: 'ColorSettingHsv',\n        methods: [\n            'setHsv'\n        ],\n        properties: [\n            'hsv'\n        ]\n    },\n    Notifier: {\n        name: 'Notifier',\n        methods: [\n            'sendNotification'\n        ],\n        properties: []\n    },\n    StartStop: {\n        name: 'StartStop',\n        methods: [\n            'start',\n            'stop'\n        ],\n        properties: [\n            'running'\n        ]\n    },\n    Pause: {\n        name: 'Pause',\n        methods: [\n            'pause',\n            'resume'\n        ],\n        properties: [\n            'paused'\n        ]\n    },\n    Dock: {\n        name: 'Dock',\n        methods: [\n            'dock'\n        ],\n        properties: [\n            'docked'\n        ]\n    },\n    TemperatureSetting: {\n        name: 'TemperatureSetting',\n        methods: [\n            'setTemperature'\n        ],\n        properties: [\n            'temperatureSetting'\n        ]\n    },\n    Thermometer: {\n        name: 'Thermometer',\n        methods: [\n            'setTemperatureUnit'\n        ],\n        properties: [\n            'temperature',\n            'temperatureUnit'\n        ]\n    },\n    HumiditySensor: {\n        name: 'HumiditySensor',\n        methods: [],\n        properties: [\n            'humidity'\n        ]\n    },\n    Camera: {\n        name: 'Camera',\n        methods: [\n            'getPictureOptions',\n            'takePicture'\n        ],\n        properties: []\n    },\n    Microphone: {\n        name: 'Microphone',\n        methods: [\n            'getAudioStream'\n        ],\n        properties: []\n    },\n    AudioVolumeControl: {\n        name: 'AudioVolumeControl',\n        methods: [\n            'setAudioVolumes'\n        ],\n        properties: [\n            'audioVolumes'\n        ]\n    },\n    Display: {\n        name: 'Display',\n        methods: [\n            'startDisplay',\n            'stopDisplay'\n        ],\n        properties: []\n    },\n    VideoCamera: {\n        name: 'VideoCamera',\n        methods: [\n            'getVideoStream',\n            'getVideoStreamOptions'\n        ],\n        properties: []\n    },\n    VideoCameraMask: {\n        name: 'VideoCameraMask',\n        methods: [\n            'getPrivacyMasks',\n            'setPrivacyMasks'\n        ],\n        properties: []\n    },\n    VideoRecorder: {\n        name: 'VideoRecorder',\n        methods: [\n            'getRecordingStream',\n            'getRecordingStreamCurrentTime',\n            'getRecordingStreamOptions',\n            'getRecordingStreamThumbnail'\n        ],\n        properties: [\n            'recordingActive'\n        ]\n    },\n    VideoRecorderManagement: {\n        name: 'VideoRecorderManagement',\n        methods: [\n            'deleteRecordingStream',\n            'setRecordingActive'\n        ],\n        properties: []\n    },\n    PanTiltZoom: {\n        name: 'PanTiltZoom',\n        methods: [\n            'ptzCommand'\n        ],\n        properties: [\n            'ptzCapabilities'\n        ]\n    },\n    EventRecorder: {\n        name: 'EventRecorder',\n        methods: [\n            'getRecordedEvents'\n        ],\n        properties: []\n    },\n    VideoClips: {\n        name: 'VideoClips',\n        methods: [\n            'getVideoClip',\n            'getVideoClipThumbnail',\n            'getVideoClips',\n            'removeVideoClips'\n        ],\n        properties: []\n    },\n    VideoCameraConfiguration: {\n        name: 'VideoCameraConfiguration',\n        methods: [\n            'setVideoStreamOptions'\n        ],\n        properties: []\n    },\n    Intercom: {\n        name: 'Intercom',\n        methods: [\n            'startIntercom',\n            'stopIntercom'\n        ],\n        properties: []\n    },\n    Lock: {\n        name: 'Lock',\n        methods: [\n            'lock',\n            'unlock'\n        ],\n        properties: [\n            'lockState'\n        ]\n    },\n    PasswordStore: {\n        name: 'PasswordStore',\n        methods: [\n            'addPassword',\n            'getPasswords',\n            'removePassword'\n        ],\n        properties: []\n    },\n    Scene: {\n        name: 'Scene',\n        methods: [\n            'activate',\n            'deactivate',\n            'isReversible'\n        ],\n        properties: []\n    },\n    Entry: {\n        name: 'Entry',\n        methods: [\n            'closeEntry',\n            'openEntry'\n        ],\n        properties: []\n    },\n    EntrySensor: {\n        name: 'EntrySensor',\n        methods: [],\n        properties: [\n            'entryOpen'\n        ]\n    },\n    DeviceProvider: {\n        name: 'DeviceProvider',\n        methods: [\n            'getDevice',\n            'releaseDevice'\n        ],\n        properties: []\n    },\n    DeviceDiscovery: {\n        name: 'DeviceDiscovery',\n        methods: [\n            'adoptDevice',\n            'discoverDevices'\n        ],\n        properties: []\n    },\n    DeviceCreator: {\n        name: 'DeviceCreator',\n        methods: [\n            'createDevice',\n            'getCreateDeviceSettings'\n        ],\n        properties: []\n    },\n    Battery: {\n        name: 'Battery',\n        methods: [],\n        properties: [\n            'batteryLevel'\n        ]\n    },\n    Charger: {\n        name: 'Charger',\n        methods: [],\n        properties: [\n            'chargeState'\n        ]\n    },\n    Reboot: {\n        name: 'Reboot',\n        methods: [\n            'reboot'\n        ],\n        properties: []\n    },\n    Refresh: {\n        name: 'Refresh',\n        methods: [\n            'getRefreshFrequency',\n            'refresh'\n        ],\n        properties: []\n    },\n    MediaPlayer: {\n        name: 'MediaPlayer',\n        methods: [\n            'getMediaStatus',\n            'load',\n            'seek',\n            'skipNext',\n            'skipPrevious'\n        ],\n        properties: []\n    },\n    Online: {\n        name: 'Online',\n        methods: [],\n        properties: [\n            'online'\n        ]\n    },\n    BufferConverter: {\n        name: 'BufferConverter',\n        methods: [\n            'convert'\n        ],\n        properties: [\n            'fromMimeType',\n            'toMimeType'\n        ]\n    },\n    MediaConverter: {\n        name: 'MediaConverter',\n        methods: [\n            'convertMedia'\n        ],\n        properties: [\n            'converters'\n        ]\n    },\n    Settings: {\n        name: 'Settings',\n        methods: [\n            'getSettings',\n            'putSetting'\n        ],\n        properties: []\n    },\n    BinarySensor: {\n        name: 'BinarySensor',\n        methods: [],\n        properties: [\n            'binaryState'\n        ]\n    },\n    TamperSensor: {\n        name: 'TamperSensor',\n        methods: [],\n        properties: [\n            'tampered'\n        ]\n    },\n    PowerSensor: {\n        name: 'PowerSensor',\n        methods: [],\n        properties: [\n            'powerDetected'\n        ]\n    },\n    AudioSensor: {\n        name: 'AudioSensor',\n        methods: [],\n        properties: [\n            'audioDetected'\n        ]\n    },\n    MotionSensor: {\n        name: 'MotionSensor',\n        methods: [],\n        properties: [\n            'motionDetected'\n        ]\n    },\n    AmbientLightSensor: {\n        name: 'AmbientLightSensor',\n        methods: [],\n        properties: [\n            'ambientLight'\n        ]\n    },\n    OccupancySensor: {\n        name: 'OccupancySensor',\n        methods: [],\n        properties: [\n            'occupied'\n        ]\n    },\n    FloodSensor: {\n        name: 'FloodSensor',\n        methods: [],\n        properties: [\n            'flooded'\n        ]\n    },\n    UltravioletSensor: {\n        name: 'UltravioletSensor',\n        methods: [],\n        properties: [\n            'ultraviolet'\n        ]\n    },\n    LuminanceSensor: {\n        name: 'LuminanceSensor',\n        methods: [],\n        properties: [\n            'luminance'\n        ]\n    },\n    PositionSensor: {\n        name: 'PositionSensor',\n        methods: [],\n        properties: [\n            'position'\n        ]\n    },\n    SecuritySystem: {\n        name: 'SecuritySystem',\n        methods: [\n            'armSecuritySystem',\n            'disarmSecuritySystem'\n        ],\n        properties: [\n            'securitySystemState'\n        ]\n    },\n    PM10Sensor: {\n        name: 'PM10Sensor',\n        methods: [],\n        properties: [\n            'pm10Density'\n        ]\n    },\n    PM25Sensor: {\n        name: 'PM25Sensor',\n        methods: [],\n        properties: [\n            'pm25Density'\n        ]\n    },\n    VOCSensor: {\n        name: 'VOCSensor',\n        methods: [],\n        properties: [\n            'vocDensity'\n        ]\n    },\n    NOXSensor: {\n        name: 'NOXSensor',\n        methods: [],\n        properties: [\n            'noxDensity'\n        ]\n    },\n    CO2Sensor: {\n        name: 'CO2Sensor',\n        methods: [],\n        properties: [\n            'co2ppm'\n        ]\n    },\n    AirQualitySensor: {\n        name: 'AirQualitySensor',\n        methods: [],\n        properties: [\n            'airQuality'\n        ]\n    },\n    AirPurifier: {\n        name: 'AirPurifier',\n        methods: [\n            'setAirPurifierState'\n        ],\n        properties: [\n            'airPurifierState'\n        ]\n    },\n    FilterMaintenance: {\n        name: 'FilterMaintenance',\n        methods: [],\n        properties: [\n            'filterChangeIndication',\n            'filterLifeLevel'\n        ]\n    },\n    Readme: {\n        name: 'Readme',\n        methods: [\n            'getReadmeMarkdown'\n        ],\n        properties: []\n    },\n    OauthClient: {\n        name: 'OauthClient',\n        methods: [\n            'getOauthUrl',\n            'onOauthCallback'\n        ],\n        properties: []\n    },\n    MixinProvider: {\n        name: 'MixinProvider',\n        methods: [\n            'canMixin',\n            'getMixin',\n            'releaseMixin'\n        ],\n        properties: []\n    },\n    HttpRequestHandler: {\n        name: 'HttpRequestHandler',\n        methods: [\n            'onRequest'\n        ],\n        properties: []\n    },\n    EngineIOHandler: {\n        name: 'EngineIOHandler',\n        methods: [\n            'onConnection'\n        ],\n        properties: []\n    },\n    PushHandler: {\n        name: 'PushHandler',\n        methods: [\n            'onPush'\n        ],\n        properties: []\n    },\n    Program: {\n        name: 'Program',\n        methods: [\n            'run'\n        ],\n        properties: []\n    },\n    Scriptable: {\n        name: 'Scriptable',\n        methods: [\n            'eval',\n            'loadScripts',\n            'saveScript'\n        ],\n        properties: []\n    },\n    ObjectTracker: {\n        name: 'ObjectTracker',\n        methods: [\n            'trackObjects'\n        ],\n        properties: []\n    },\n    ObjectDetector: {\n        name: 'ObjectDetector',\n        methods: [\n            'getDetectionInput',\n            'getObjectTypes'\n        ],\n        properties: []\n    },\n    ObjectDetection: {\n        name: 'ObjectDetection',\n        methods: [\n            'detectObjects',\n            'generateObjectDetections',\n            'getDetectionModel'\n        ],\n        properties: []\n    },\n    ObjectDetectionPreview: {\n        name: 'ObjectDetectionPreview',\n        methods: [],\n        properties: []\n    },\n    ObjectDetectionGenerator: {\n        name: 'ObjectDetectionGenerator',\n        methods: [],\n        properties: []\n    },\n    HumiditySetting: {\n        name: 'HumiditySetting',\n        methods: [\n            'setHumidity'\n        ],\n        properties: [\n            'humiditySetting'\n        ]\n    },\n    Fan: {\n        name: 'Fan',\n        methods: [\n            'setFan'\n        ],\n        properties: [\n            'fan'\n        ]\n    },\n    RTCSignalingChannel: {\n        name: 'RTCSignalingChannel',\n        methods: [\n            'startRTCSignalingSession'\n        ],\n        properties: []\n    },\n    RTCSignalingClient: {\n        name: 'RTCSignalingClient',\n        methods: [\n            'createRTCSignalingSession'\n        ],\n        properties: []\n    },\n    LauncherApplication: {\n        name: 'LauncherApplication',\n        methods: [],\n        properties: [\n            'applicationInfo'\n        ]\n    },\n    ScryptedUser: {\n        name: 'ScryptedUser',\n        methods: [\n            'getScryptedUserAccessControl'\n        ],\n        properties: []\n    },\n    VideoFrameGenerator: {\n        name: 'VideoFrameGenerator',\n        methods: [\n            'generateVideoFrames'\n        ],\n        properties: []\n    },\n    StreamService: {\n        name: 'StreamService',\n        methods: [\n            'connectStream'\n        ],\n        properties: []\n    },\n    TTY: {\n        name: 'TTY',\n        methods: [],\n        properties: []\n    },\n    TTYSettings: {\n        name: 'TTYSettings',\n        methods: [\n            'getTTYSettings'\n        ],\n        properties: []\n    },\n    ScryptedSystemDevice: {\n        name: 'ScryptedSystemDevice',\n        methods: [],\n        properties: [\n            'systemDevice'\n        ]\n    },\n    ScryptedDeviceCreator: {\n        name: 'ScryptedDeviceCreator',\n        methods: [],\n        properties: []\n    },\n    ScryptedSettings: {\n        name: 'ScryptedSettings',\n        methods: [],\n        properties: []\n    }\n};\n/**\n * @category Core Reference\n */\nvar ScryptedDeviceType;\n(function (ScryptedDeviceType) {\n    ScryptedDeviceType[\"Builtin\"] = \"Builtin\";\n    ScryptedDeviceType[\"Camera\"] = \"Camera\";\n    ScryptedDeviceType[\"Fan\"] = \"Fan\";\n    ScryptedDeviceType[\"Light\"] = \"Light\";\n    ScryptedDeviceType[\"Switch\"] = \"Switch\";\n    ScryptedDeviceType[\"Outlet\"] = \"Outlet\";\n    ScryptedDeviceType[\"Sensor\"] = \"Sensor\";\n    ScryptedDeviceType[\"Scene\"] = \"Scene\";\n    ScryptedDeviceType[\"Program\"] = \"Program\";\n    ScryptedDeviceType[\"Automation\"] = \"Automation\";\n    ScryptedDeviceType[\"Vacuum\"] = \"Vacuum\";\n    ScryptedDeviceType[\"Notifier\"] = \"Notifier\";\n    ScryptedDeviceType[\"Thermostat\"] = \"Thermostat\";\n    ScryptedDeviceType[\"Lock\"] = \"Lock\";\n    ScryptedDeviceType[\"PasswordControl\"] = \"PasswordControl\";\n    /**\n     * Displays have audio and video output.\n     */\n    ScryptedDeviceType[\"Display\"] = \"Display\";\n    /**\n     * Smart Displays have two way audio and video.\n     */\n    ScryptedDeviceType[\"SmartDisplay\"] = \"SmartDisplay\";\n    ScryptedDeviceType[\"Speaker\"] = \"Speaker\";\n    /**\n     * Smart Speakers have two way audio.\n     */\n    ScryptedDeviceType[\"SmartSpeaker\"] = \"SmartSpeaker\";\n    ScryptedDeviceType[\"Event\"] = \"Event\";\n    ScryptedDeviceType[\"Entry\"] = \"Entry\";\n    ScryptedDeviceType[\"Garage\"] = \"Garage\";\n    ScryptedDeviceType[\"DeviceProvider\"] = \"DeviceProvider\";\n    ScryptedDeviceType[\"DataSource\"] = \"DataSource\";\n    ScryptedDeviceType[\"API\"] = \"API\";\n    ScryptedDeviceType[\"Doorbell\"] = \"Doorbell\";\n    ScryptedDeviceType[\"Irrigation\"] = \"Irrigation\";\n    ScryptedDeviceType[\"Valve\"] = \"Valve\";\n    ScryptedDeviceType[\"Person\"] = \"Person\";\n    ScryptedDeviceType[\"SecuritySystem\"] = \"SecuritySystem\";\n    ScryptedDeviceType[\"WindowCovering\"] = \"WindowCovering\";\n    ScryptedDeviceType[\"Siren\"] = \"Siren\";\n    ScryptedDeviceType[\"AirPurifier\"] = \"AirPurifier\";\n    ScryptedDeviceType[\"Unknown\"] = \"Unknown\";\n})(ScryptedDeviceType || (exports.ScryptedDeviceType = ScryptedDeviceType = {}));\nvar HumidityMode;\n(function (HumidityMode) {\n    HumidityMode[\"Humidify\"] = \"Humidify\";\n    HumidityMode[\"Dehumidify\"] = \"Dehumidify\";\n    HumidityMode[\"Auto\"] = \"Auto\";\n    HumidityMode[\"Off\"] = \"Off\";\n})(HumidityMode || (exports.HumidityMode = HumidityMode = {}));\nvar FanMode;\n(function (FanMode) {\n    FanMode[\"Auto\"] = \"Auto\";\n    FanMode[\"Manual\"] = \"Manual\";\n})(FanMode || (exports.FanMode = FanMode = {}));\nvar TemperatureUnit;\n(function (TemperatureUnit) {\n    TemperatureUnit[\"C\"] = \"C\";\n    TemperatureUnit[\"F\"] = \"F\";\n})(TemperatureUnit || (exports.TemperatureUnit = TemperatureUnit = {}));\nvar ThermostatMode;\n(function (ThermostatMode) {\n    ThermostatMode[\"Off\"] = \"Off\";\n    ThermostatMode[\"Cool\"] = \"Cool\";\n    ThermostatMode[\"Heat\"] = \"Heat\";\n    ThermostatMode[\"HeatCool\"] = \"HeatCool\";\n    ThermostatMode[\"Auto\"] = \"Auto\";\n    ThermostatMode[\"FanOnly\"] = \"FanOnly\";\n    ThermostatMode[\"Purifier\"] = \"Purifier\";\n    ThermostatMode[\"Eco\"] = \"Eco\";\n    ThermostatMode[\"Dry\"] = \"Dry\";\n    ThermostatMode[\"On\"] = \"On\";\n})(ThermostatMode || (exports.ThermostatMode = ThermostatMode = {}));\nvar PanTiltZoomMovement;\n(function (PanTiltZoomMovement) {\n    PanTiltZoomMovement[\"Absolute\"] = \"Absolute\";\n    PanTiltZoomMovement[\"Relative\"] = \"Relative\";\n    PanTiltZoomMovement[\"Continuous\"] = \"Continuous\";\n    PanTiltZoomMovement[\"Preset\"] = \"Preset\";\n    PanTiltZoomMovement[\"Home\"] = \"Home\";\n})(PanTiltZoomMovement || (exports.PanTiltZoomMovement = PanTiltZoomMovement = {}));\nvar LockState;\n(function (LockState) {\n    LockState[\"Locked\"] = \"Locked\";\n    LockState[\"Unlocked\"] = \"Unlocked\";\n    LockState[\"Jammed\"] = \"Jammed\";\n})(LockState || (exports.LockState = LockState = {}));\nvar ChargeState;\n(function (ChargeState) {\n    ChargeState[\"Trickle\"] = \"trickle\";\n    ChargeState[\"Charging\"] = \"charging\";\n    ChargeState[\"NotCharging\"] = \"not-charging\";\n})(ChargeState || (exports.ChargeState = ChargeState = {}));\nvar AirPurifierStatus;\n(function (AirPurifierStatus) {\n    AirPurifierStatus[\"Inactive\"] = \"Inactive\";\n    AirPurifierStatus[\"Idle\"] = \"Idle\";\n    AirPurifierStatus[\"Active\"] = \"Active\";\n    AirPurifierStatus[\"ActiveNightMode\"] = \"ActiveNightMode\";\n})(AirPurifierStatus || (exports.AirPurifierStatus = AirPurifierStatus = {}));\nvar AirPurifierMode;\n(function (AirPurifierMode) {\n    AirPurifierMode[\"Manual\"] = \"Manual\";\n    AirPurifierMode[\"Automatic\"] = \"Automatic\";\n})(AirPurifierMode || (exports.AirPurifierMode = AirPurifierMode = {}));\nvar AirQuality;\n(function (AirQuality) {\n    AirQuality[\"Unknown\"] = \"Unknown\";\n    AirQuality[\"Excellent\"] = \"Excellent\";\n    AirQuality[\"Good\"] = \"Good\";\n    AirQuality[\"Fair\"] = \"Fair\";\n    AirQuality[\"Inferior\"] = \"Inferior\";\n    AirQuality[\"Poor\"] = \"Poor\";\n})(AirQuality || (exports.AirQuality = AirQuality = {}));\nvar SecuritySystemMode;\n(function (SecuritySystemMode) {\n    SecuritySystemMode[\"Disarmed\"] = \"Disarmed\";\n    SecuritySystemMode[\"HomeArmed\"] = \"HomeArmed\";\n    SecuritySystemMode[\"AwayArmed\"] = \"AwayArmed\";\n    SecuritySystemMode[\"NightArmed\"] = \"NightArmed\";\n})(SecuritySystemMode || (exports.SecuritySystemMode = SecuritySystemMode = {}));\nvar SecuritySystemObstruction;\n(function (SecuritySystemObstruction) {\n    SecuritySystemObstruction[\"Sensor\"] = \"Sensor\";\n    SecuritySystemObstruction[\"Occupied\"] = \"Occupied\";\n    SecuritySystemObstruction[\"Time\"] = \"Time\";\n    SecuritySystemObstruction[\"Error\"] = \"Error\";\n})(SecuritySystemObstruction || (exports.SecuritySystemObstruction = SecuritySystemObstruction = {}));\nvar MediaPlayerState;\n(function (MediaPlayerState) {\n    MediaPlayerState[\"Idle\"] = \"Idle\";\n    MediaPlayerState[\"Playing\"] = \"Playing\";\n    MediaPlayerState[\"Paused\"] = \"Paused\";\n    MediaPlayerState[\"Buffering\"] = \"Buffering\";\n})(MediaPlayerState || (exports.MediaPlayerState = MediaPlayerState = {}));\nvar ScryptedInterface;\n(function (ScryptedInterface) {\n    ScryptedInterface[\"ScryptedDevice\"] = \"ScryptedDevice\";\n    ScryptedInterface[\"ScryptedPlugin\"] = \"ScryptedPlugin\";\n    ScryptedInterface[\"ScryptedPluginRuntime\"] = \"ScryptedPluginRuntime\";\n    ScryptedInterface[\"OnOff\"] = \"OnOff\";\n    ScryptedInterface[\"Brightness\"] = \"Brightness\";\n    ScryptedInterface[\"ColorSettingTemperature\"] = \"ColorSettingTemperature\";\n    ScryptedInterface[\"ColorSettingRgb\"] = \"ColorSettingRgb\";\n    ScryptedInterface[\"ColorSettingHsv\"] = \"ColorSettingHsv\";\n    ScryptedInterface[\"Notifier\"] = \"Notifier\";\n    ScryptedInterface[\"StartStop\"] = \"StartStop\";\n    ScryptedInterface[\"Pause\"] = \"Pause\";\n    ScryptedInterface[\"Dock\"] = \"Dock\";\n    ScryptedInterface[\"TemperatureSetting\"] = \"TemperatureSetting\";\n    ScryptedInterface[\"Thermometer\"] = \"Thermometer\";\n    ScryptedInterface[\"HumiditySensor\"] = \"HumiditySensor\";\n    ScryptedInterface[\"Camera\"] = \"Camera\";\n    ScryptedInterface[\"Microphone\"] = \"Microphone\";\n    ScryptedInterface[\"AudioVolumeControl\"] = \"AudioVolumeControl\";\n    ScryptedInterface[\"Display\"] = \"Display\";\n    ScryptedInterface[\"VideoCamera\"] = \"VideoCamera\";\n    ScryptedInterface[\"VideoCameraMask\"] = \"VideoCameraMask\";\n    ScryptedInterface[\"VideoRecorder\"] = \"VideoRecorder\";\n    ScryptedInterface[\"VideoRecorderManagement\"] = \"VideoRecorderManagement\";\n    ScryptedInterface[\"PanTiltZoom\"] = \"PanTiltZoom\";\n    ScryptedInterface[\"EventRecorder\"] = \"EventRecorder\";\n    ScryptedInterface[\"VideoClips\"] = \"VideoClips\";\n    ScryptedInterface[\"VideoCameraConfiguration\"] = \"VideoCameraConfiguration\";\n    ScryptedInterface[\"Intercom\"] = \"Intercom\";\n    ScryptedInterface[\"Lock\"] = \"Lock\";\n    ScryptedInterface[\"PasswordStore\"] = \"PasswordStore\";\n    ScryptedInterface[\"Scene\"] = \"Scene\";\n    ScryptedInterface[\"Entry\"] = \"Entry\";\n    ScryptedInterface[\"EntrySensor\"] = \"EntrySensor\";\n    ScryptedInterface[\"DeviceProvider\"] = \"DeviceProvider\";\n    ScryptedInterface[\"DeviceDiscovery\"] = \"DeviceDiscovery\";\n    ScryptedInterface[\"DeviceCreator\"] = \"DeviceCreator\";\n    ScryptedInterface[\"Battery\"] = \"Battery\";\n    ScryptedInterface[\"Charger\"] = \"Charger\";\n    ScryptedInterface[\"Reboot\"] = \"Reboot\";\n    ScryptedInterface[\"Refresh\"] = \"Refresh\";\n    ScryptedInterface[\"MediaPlayer\"] = \"MediaPlayer\";\n    ScryptedInterface[\"Online\"] = \"Online\";\n    ScryptedInterface[\"BufferConverter\"] = \"BufferConverter\";\n    ScryptedInterface[\"MediaConverter\"] = \"MediaConverter\";\n    ScryptedInterface[\"Settings\"] = \"Settings\";\n    ScryptedInterface[\"BinarySensor\"] = \"BinarySensor\";\n    ScryptedInterface[\"TamperSensor\"] = \"TamperSensor\";\n    ScryptedInterface[\"PowerSensor\"] = \"PowerSensor\";\n    ScryptedInterface[\"AudioSensor\"] = \"AudioSensor\";\n    ScryptedInterface[\"MotionSensor\"] = \"MotionSensor\";\n    ScryptedInterface[\"AmbientLightSensor\"] = \"AmbientLightSensor\";\n    ScryptedInterface[\"OccupancySensor\"] = \"OccupancySensor\";\n    ScryptedInterface[\"FloodSensor\"] = \"FloodSensor\";\n    ScryptedInterface[\"UltravioletSensor\"] = \"UltravioletSensor\";\n    ScryptedInterface[\"LuminanceSensor\"] = \"LuminanceSensor\";\n    ScryptedInterface[\"PositionSensor\"] = \"PositionSensor\";\n    ScryptedInterface[\"SecuritySystem\"] = \"SecuritySystem\";\n    ScryptedInterface[\"PM10Sensor\"] = \"PM10Sensor\";\n    ScryptedInterface[\"PM25Sensor\"] = \"PM25Sensor\";\n    ScryptedInterface[\"VOCSensor\"] = \"VOCSensor\";\n    ScryptedInterface[\"NOXSensor\"] = \"NOXSensor\";\n    ScryptedInterface[\"CO2Sensor\"] = \"CO2Sensor\";\n    ScryptedInterface[\"AirQualitySensor\"] = \"AirQualitySensor\";\n    ScryptedInterface[\"AirPurifier\"] = \"AirPurifier\";\n    ScryptedInterface[\"FilterMaintenance\"] = \"FilterMaintenance\";\n    ScryptedInterface[\"Readme\"] = \"Readme\";\n    ScryptedInterface[\"OauthClient\"] = \"OauthClient\";\n    ScryptedInterface[\"MixinProvider\"] = \"MixinProvider\";\n    ScryptedInterface[\"HttpRequestHandler\"] = \"HttpRequestHandler\";\n    ScryptedInterface[\"EngineIOHandler\"] = \"EngineIOHandler\";\n    ScryptedInterface[\"PushHandler\"] = \"PushHandler\";\n    ScryptedInterface[\"Program\"] = \"Program\";\n    ScryptedInterface[\"Scriptable\"] = \"Scriptable\";\n    ScryptedInterface[\"ObjectTracker\"] = \"ObjectTracker\";\n    ScryptedInterface[\"ObjectDetector\"] = \"ObjectDetector\";\n    ScryptedInterface[\"ObjectDetection\"] = \"ObjectDetection\";\n    ScryptedInterface[\"ObjectDetectionPreview\"] = \"ObjectDetectionPreview\";\n    ScryptedInterface[\"ObjectDetectionGenerator\"] = \"ObjectDetectionGenerator\";\n    ScryptedInterface[\"HumiditySetting\"] = \"HumiditySetting\";\n    ScryptedInterface[\"Fan\"] = \"Fan\";\n    ScryptedInterface[\"RTCSignalingChannel\"] = \"RTCSignalingChannel\";\n    ScryptedInterface[\"RTCSignalingClient\"] = \"RTCSignalingClient\";\n    ScryptedInterface[\"LauncherApplication\"] = \"LauncherApplication\";\n    ScryptedInterface[\"ScryptedUser\"] = \"ScryptedUser\";\n    ScryptedInterface[\"VideoFrameGenerator\"] = \"VideoFrameGenerator\";\n    ScryptedInterface[\"StreamService\"] = \"StreamService\";\n    ScryptedInterface[\"TTY\"] = \"TTY\";\n    ScryptedInterface[\"TTYSettings\"] = \"TTYSettings\";\n    ScryptedInterface[\"ScryptedSystemDevice\"] = \"ScryptedSystemDevice\";\n    ScryptedInterface[\"ScryptedDeviceCreator\"] = \"ScryptedDeviceCreator\";\n    ScryptedInterface[\"ScryptedSettings\"] = \"ScryptedSettings\";\n})(ScryptedInterface || (exports.ScryptedInterface = ScryptedInterface = {}));\nvar ScryptedMimeTypes;\n(function (ScryptedMimeTypes) {\n    ScryptedMimeTypes[\"Url\"] = \"text/x-uri\";\n    ScryptedMimeTypes[\"InsecureLocalUrl\"] = \"text/x-insecure-local-uri\";\n    ScryptedMimeTypes[\"LocalUrl\"] = \"text/x-local-uri\";\n    ScryptedMimeTypes[\"ServerId\"] = \"text/x-server-id\";\n    ScryptedMimeTypes[\"PushEndpoint\"] = \"text/x-push-endpoint\";\n    ScryptedMimeTypes[\"SchemePrefix\"] = \"x-scrypted/x-scrypted-scheme-\";\n    ScryptedMimeTypes[\"MediaStreamUrl\"] = \"text/x-media-url\";\n    ScryptedMimeTypes[\"MediaObject\"] = \"x-scrypted/x-scrypted-media-object\";\n    ScryptedMimeTypes[\"RequestMediaObject\"] = \"x-scrypted/x-scrypted-request-media-object\";\n    ScryptedMimeTypes[\"RequestMediaStream\"] = \"x-scrypted/x-scrypted-request-stream\";\n    ScryptedMimeTypes[\"MediaStreamFeedback\"] = \"x-scrypted/x-media-stream-feedback\";\n    ScryptedMimeTypes[\"FFmpegInput\"] = \"x-scrypted/x-ffmpeg-input\";\n    ScryptedMimeTypes[\"FFmpegTranscodeStream\"] = \"x-scrypted/x-ffmpeg-transcode-stream\";\n    ScryptedMimeTypes[\"RTCSignalingChannel\"] = \"x-scrypted/x-scrypted-rtc-signaling-channel\";\n    ScryptedMimeTypes[\"RTCSignalingSession\"] = \"x-scrypted/x-scrypted-rtc-signaling-session\";\n    ScryptedMimeTypes[\"RTCConnectionManagement\"] = \"x-scrypted/x-scrypted-rtc-connection-management\";\n    ScryptedMimeTypes[\"Image\"] = \"x-scrypted/x-scrypted-image\";\n})(ScryptedMimeTypes || (exports.ScryptedMimeTypes = ScryptedMimeTypes = {}));\n//# sourceMappingURL=index.js.map","import sdk, { ScryptedInterface, Setting, Settings, SettingValue } from \"@scrypted/sdk\";\nimport { ipsKey, KnownPersonResult, StreamInfo, CameraData } from \"./types\";\nimport { BasePlugin, getBaseSettings } from '../../scrypted-apocaliss-base/src/basePlugin';\nimport { StorageSettings } from \"@scrypted/sdk/storage-settings\";\n\nconst { systemManager } = sdk;\n\nconst mqttDevice = {\n    ids: `scrypted-activeStream`,\n    name: `Scrypted Active streams info`\n}\n\nexport default class ActiveStreamsConfig extends BasePlugin implements Settings {\n    lastSetMap: { [topic: string]: any } = {};\n    autodiscoveryPublished = false;\n\n    storageSettings = new StorageSettings(this, {\n        ...getBaseSettings({\n            onPluginSwitch: (_, enabled) => this.startStop(enabled),\n        }),\n        cameras: {\n            type: 'device',\n            title: 'Cameras',\n            multiple: true,\n            deviceFilter: `interfaces.includes(\"${ScryptedInterface.VideoCamera}\")`,\n            defaultValue: []\n        },\n        people: {\n            type: 'string',\n            title: 'People',\n            multiple: true,\n            choices: [],\n            combobox: true,\n            defaultValue: []\n        }\n    });\n\n    constructor(nativeId: string) {\n        super(nativeId, {\n            pluginFriendlyName: 'Active streams info',\n        });\n\n        this.start().catch(e => this.console.log(e));\n    }\n\n    async startStop(enabled: boolean) {\n        if (enabled) {\n            await this.start();\n        } else {\n            // await this.stop(true);\n        }\n    }\n\n    async getSettings(): Promise<Setting[]> {\n\n        const { people } = this.storageSettings.values;\n        const settings: Setting[] = await this.storageSettings.getSettings();\n\n        people.forEach(person => {\n            const personIpsKey = `${ipsKey}:${person}`;\n            const currentIps = this.storageSettings.getItem(personIpsKey as any);\n            this.console.log('CURRENT IPS', currentIps, typeof currentIps);\n            settings.push({\n                group: 'Tracked entities',\n                key: personIpsKey,\n                subgroup: person,\n                type: 'string',\n                title: `IPs`,\n                multiple: true,\n                value: JSON.parse(currentIps ?? '[]')\n            })\n        });\n\n        return settings;\n    }\n\n    mapToStreamInfo(setting: Setting) {\n        const fullIp = setting.subgroup.split(':');\n        fullIp.pop();\n        const ip = fullIp.join(':');\n        return { camera: setting.group, ip };\n    }\n\n    private getMqttTopics({ cameraId, name }: { cameraId?: string, name?: string }) {\n        let sensorTopic: string;\n        let sensorInfoTopic: string;\n        let autodiscoveryTopic: string;\n\n        if (cameraId && !name) {\n            sensorTopic = `scrypted/activeStreams/${cameraId}`;\n            autodiscoveryTopic = `homeassistant/sensor/scrypted-active-streams-${cameraId}/ActiveStreams/config`;\n        } else if (name && !cameraId) {\n            sensorTopic = `scrypted/activeStreams/${name}`;\n            autodiscoveryTopic = `homeassistant/sensor/scrypted-active-stream-${name}/ActiveStream/config`;\n        } else if (name && cameraId) {\n            sensorTopic = `scrypted/activeStreams/${cameraId}/${name}`;\n            autodiscoveryTopic = `homeassistant/binary_sensor/scrypted-active-stream-${cameraId}-${name}/ActiveStream/config`;\n        } else {\n            sensorTopic = `scrypted/activeStreams`;\n            autodiscoveryTopic = `homeassistant/sensor/scrypted-active-streams/ActiveStreams/config`;\n        }\n\n        sensorInfoTopic = `${sensorTopic}/info`;\n\n        return {\n            sensorTopic,\n            sensorInfoTopic,\n            autodiscoveryTopic\n        }\n    }\n\n    private async processMqttData({ cameraId, name, value, info }: { cameraId?: string, name?: string, value: any, info: any }) {\n        const { sensorTopic, sensorInfoTopic } = this.getMqttTopics({ cameraId, name });\n        const lastValue = this.lastSetMap[sensorTopic];\n        if (lastValue !== value) {\n            await this.mqttClient.publish(sensorTopic, value);\n            await this.mqttClient.publish(sensorInfoTopic, JSON.stringify(info));\n            this.lastSetMap[sensorTopic] = value;\n        }\n    }\n\n    async processCamera(cameraId: string, settings: Setting[], activeStreamsConfigs: Setting[], isWhitelisted: boolean, knownPeople: string[]) {\n        const camera = systemManager.getDeviceById(cameraId);\n        const cameraName = camera.name;\n        const cameraStreamsInformation = settings.filter(setting => setting.group === camera.name);\n\n        const knownPeopleResult: KnownPersonResult[] = [];\n\n        const activeClients = Number(cameraStreamsInformation.find(setting => setting.title === 'Active Streams')?.value ?? 0);\n\n        for (const name of knownPeople) {\n            const ips = (activeStreamsConfigs.find(setting => setting.key === `activeStreamsIps:${name}`)?.value ?? []) as string[];\n            const personActiveStreams: StreamInfo[] = (cameraStreamsInformation\n                .filter(setting => ips.some(ip => setting.subgroup?.startsWith(ip)) && setting.key === 'type') ?? [])\n                .map(this.mapToStreamInfo);\n\n            knownPeopleResult.push({\n                cameraName,\n                cameraId,\n                person: name,\n                settings: personActiveStreams\n            })\n\n            if (isWhitelisted) {\n                const isPersonActive = !!personActiveStreams.length;\n                await this.processMqttData({ cameraId, name, value: isPersonActive, info: { streams: personActiveStreams } });\n            }\n        }\n\n        if (isWhitelisted) {\n            await this.processMqttData({ cameraId, value: activeClients, info: { streams: knownPeopleResult.flatMap(elem => elem.settings) } });\n        }\n\n        return { activeClients, knownPeopleResult, cameraName };\n    }\n\n    private async processMqttAutodiscovery(cameraData: CameraData[], whitelistedCameraIds: string[], knownPeople: string[]) {\n        if (!this.autodiscoveryPublished) {\n            for (const data of cameraData) {\n                const { id: cameraId, name: cameraName } = data;\n                if (whitelistedCameraIds.includes(cameraId)) {\n                    for (const name of knownPeople) {\n                        const { sensorTopic, autodiscoveryTopic, sensorInfoTopic } = this.getMqttTopics({ cameraId, name });\n                        const config = {\n                            state_topic: sensorTopic,\n                            json_attributes_topic: sensorInfoTopic,\n                            json_attributes_template: '{{ value_json | tojson }}',\n                            payload_on: 'true',\n                            payload_off: 'false',\n                            dev: mqttDevice,\n                            unique_id: `scrypted-active-stream-${cameraId}-${name}`,\n                            name: `${cameraName} ${name} active`,\n                        };\n                        await this.mqttClient.publish(autodiscoveryTopic, JSON.stringify(config));\n                    }\n\n                    const { sensorTopic, autodiscoveryTopic, sensorInfoTopic } = this.getMqttTopics({ cameraId });\n                    const config = {\n                        state_topic: sensorTopic,\n                        json_attributes_topic: sensorInfoTopic,\n                        json_attributes_template: '{{ value_json | tojson }}',\n                        dev: mqttDevice,\n                        unique_id: `scrypted-active-streams-${cameraId}`,\n                        name: `${cameraName} active streams`,\n                    };\n                    await this.mqttClient.publish(autodiscoveryTopic, JSON.stringify(config));\n                }\n            }\n\n            for (const name of knownPeople) {\n                const { sensorTopic, autodiscoveryTopic, sensorInfoTopic } = this.getMqttTopics({ name });\n                const config = {\n                    state_topic: sensorTopic,\n                    json_attributes_topic: sensorInfoTopic,\n                    json_attributes_template: '{{ value_json | tojson }}',\n                    dev: mqttDevice,\n                    unique_id: `scrypted-active-streams-${name}`,\n                    name: `${name} active streams`,\n                };\n                await this.mqttClient.publish(autodiscoveryTopic, JSON.stringify(config));\n            }\n\n            const { sensorTopic, autodiscoveryTopic, sensorInfoTopic } = this.getMqttTopics({});\n            const config = {\n                state_topic: sensorTopic,\n                json_attributes_topic: sensorInfoTopic,\n                json_attributes_template: '{{ value_json | tojson }}',\n                dev: mqttDevice,\n                unique_id: `scrypted-active-streams`,\n                name: `All active streams`,\n            };\n            await this.mqttClient.publish(autodiscoveryTopic, JSON.stringify(config));\n\n            this.autodiscoveryPublished = true;\n        }\n    }\n\n    async start() {\n        this.getMqttClient();\n\n        // const objDetectionPlugin = systemManager.getDeviceByName('Scrypted NVR Object Detection') as unknown as Settings;\n        // const settings = await objDetectionPlugin.getSettings();\n        // const knownPeople = settings?.find(setting => setting.key === 'knownPeople')?.choices\n        //     ?.filter(choice => !!choice);\n        // this.storageSettings.settings.people.choices = knownPeople;\n\n        setInterval(async () => {\n            try {\n\n                const { cameras, people } = this.storageSettings.values;\n                const activeStreamsConfigs = await this.getSettings();\n                //this.console.log(`Active streams configs: ${JSON.stringify(activeStreamsConfigs, undefined, 2)}`);\n\n                const cameraIds: string[] = [];\n\n                Object.entries(systemManager.getSystemState()).forEach(([deviceId, device]) => {\n                    if (device.interfaces.value.includes(ScryptedInterface.VideoCamera)) {\n                        cameraIds.push(deviceId);\n                    }\n                })\n\n                const cameraData: CameraData[] = [];\n                const peopleData: { [person: string]: StreamInfo[] } = {};\n\n                let totalActiveStreams = 0;\n                const totalKnownPeopleResult: KnownPersonResult[] = [];\n\n                const adaptivePlugin = systemManager.getDeviceByName('Adaptive Streaming') as unknown as (Settings);\n                const settings = await adaptivePlugin.getSettings();\n\n                this.console.log(`All settings: ${JSON.stringify(settings, undefined, 2)}`);\n\n                for (const cameraId of cameraIds) {\n                    const isWhitelisted = cameras.includes(cameraId);\n                    const { activeClients, knownPeopleResult, cameraName } = await this.processCamera(cameraId, settings, activeStreamsConfigs, isWhitelisted, people);\n                    totalActiveStreams += activeClients;\n                    totalKnownPeopleResult.push(...knownPeopleResult);\n\n                    knownPeopleResult.forEach(elem => {\n                        const { person, settings } = elem;\n                        if (!peopleData[person]) {\n                            peopleData[person] = [];\n                        }\n\n                        peopleData[person].push(...settings);\n                    });\n\n                    cameraData.push({ name: cameraName, id: cameraId, activeStreams: activeClients });\n                }\n\n                for (const person of people) {\n                    const personStreams = peopleData[person] ?? [];\n                    const activeClients = personStreams.length;\n                    this.processMqttData({ name: person, value: activeClients, info: { streams: personStreams } });\n                }\n\n                this.processMqttData({\n                    value: totalActiveStreams, info: {\n                        streams: settings\n                            .filter(setting => setting.key === 'type')\n                            .map(this.mapToStreamInfo)\n                    }\n                });\n\n                this.processMqttAutodiscovery(cameraData, cameras, people)\n            } catch (e) {\n                this.console.log(e);\n            }\n        }, 10000);\n    }\n}\n","export const ipsKey = 'activeStreamsIps';\nexport const mqttHostKey = 'activeStreamsMqttHost';\nexport const mqttUsernameKey = 'activeStreamsMqttUsername';\nexport const mqttPasswordKey = 'activeStreamsMqttPassword';\n\nexport interface StreamInfo {\n    ip: string;\n    camera: string;\n}\n\nexport interface KnownPersonResult {\n    cameraName: string,\n    cameraId: string,\n    person: string,\n    settings: StreamInfo[]\n}\n\nexport interface CameraData { id: string, name: string, activeStreams: number }","import sdk, { Settings, MixinDeviceBase, MixinDeviceOptions } from \"@scrypted/sdk\";\nimport { StorageSettings } from \"@scrypted/sdk/storage-settings\";\nimport { BasePlugin } from \"./basePlugin\";\n\nexport class BaseMixin extends MixinDeviceBase<Settings> {\n    logger: Console;\n    killed: boolean;\n    baseStorageSettings = new StorageSettings(this, {\n        debug: {\n            title: 'Log debug messages',\n            type: 'boolean',\n            defaultValue: false,\n            immediate: true,\n        },\n    });\n\n    constructor(\n        options: MixinDeviceOptions<Settings>,\n        public plugin: BasePlugin\n    ) {\n        super(options);\n\n        this.plugin.currentMixinsMap[this.name] = this;\n    }\n    async release() {\n        this.killed = true;\n    }\n\n    private getLogger() {\n        const deviceConsole = sdk.deviceManager.getMixinConsole(this.id, this.nativeId);\n\n        if (!this.logger) {\n            const log = (debug: boolean, message?: any, ...optionalParams: any[]) => {\n                const now = new Date().toLocaleString();\n                if (!debug || this.baseStorageSettings.getItem('debug')) {\n                    deviceConsole.log(` ${now} - `, message, ...optionalParams);\n                }\n            };\n            this.logger = {\n                log: (message?: any, ...optionalParams: any[]) => log(false, message, ...optionalParams),\n                debug: (message?: any, ...optionalParams: any[]) => log(true, message, ...optionalParams),\n            } as Console\n        }\n\n        return this.logger;\n    }\n}","import sdk, { ScryptedDeviceBase, ScryptedDeviceType, ScryptedInterface, Setting, Settings, SettingValue, WritableDeviceState } from \"@scrypted/sdk\";\nimport { StorageSetting, StorageSettings, StorageSettingsDict } from \"@scrypted/sdk/storage-settings\";\nimport MqttClient from './mqtt-client';\nimport { BaseMixin } from \"./baseMixin\";\nconst { systemManager } = sdk;\n\nexport type BaseSettingsKey = 'pluginEnabled'\n    | 'mqttEnabled'\n    | 'debug'\n    | 'devNotifier'\n    | 'useMqttPluginCredentials'\n    | 'mqttHost'\n    | 'mqttUsename'\n    | 'mqttPassword'\n\nexport const getBaseSettings = (props: {\n    onPluginSwitch?: StorageSetting['onPut'],\n    hideMqtt?: boolean,\n}) => {\n    const { onPluginSwitch, hideMqtt } = props;\n    const settings: StorageSettingsDict<BaseSettingsKey> = {\n        pluginEnabled: {\n            title: 'Plugin enabled',\n            type: 'boolean',\n            defaultValue: true,\n            immediate: true,\n            group: 'base',\n            onPut: onPluginSwitch\n        },\n        mqttEnabled: {\n            title: 'MQTT enabled',\n            type: 'boolean',\n            defaultValue: true,\n            immediate: true,\n            group: 'base',\n            hide: hideMqtt\n        },\n        debug: {\n            title: 'Log debug messages',\n            type: 'boolean',\n            defaultValue: false,\n            immediate: true,\n            group: 'base',\n        },\n        devNotifier: {\n            title: 'DEV notifier',\n            type: 'device',\n            deviceFilter: `(type === '${ScryptedDeviceType.Notifier}')`,\n            group: 'base',\n        },\n        useMqttPluginCredentials: {\n            title: 'Use MQTT plugin credentials',\n            subgroup: 'MQTT',\n            type: 'boolean',\n            immediate: true,\n            group: 'base',\n            hide: hideMqtt\n        },\n        mqttHost: {\n            title: 'Host',\n            subgroup: 'MQTT',\n            description: 'Specify the mqtt address.',\n            placeholder: 'mqtt://192.168.1.100',\n            group: 'base',\n            hide: hideMqtt\n        },\n        mqttUsename: {\n            title: 'Username',\n            subgroup: 'MQTT',\n            description: 'Specify the mqtt username.',\n            group: 'base',\n            hide: hideMqtt\n        },\n        mqttPassword: {\n            title: 'Password',\n            subgroup: 'MQTT',\n            description: 'Specify the mqtt password.',\n            type: 'password',\n            group: 'base',\n            hide: hideMqtt\n        },\n    };\n\n    return settings;\n};\n\nexport class BasePlugin extends ScryptedDeviceBase implements Settings {\n    public mqttClient: MqttClient;\n    private mainLogger: Console;\n    public currentMixinsMap: Record<string, BaseMixin> = {};\n    public storageSettings: StorageSettings<BaseSettingsKey>;\n\n\n    constructor(nativeId: string, public opts: {\n        pluginFriendlyName: string,\n        mixinGroup?: string,\n        mixinKey?: string,\n    }) {\n        super(nativeId);\n    }\n\n    async onInit() {\n        try {\n            await this.setupMqttClient();\n        } catch (e) {\n            this.getLogger().log('Error onInit', e);\n        }\n    }\n\n    private async setupMqttClient() {\n        const { mqttEnabled, useMqttPluginCredentials, pluginEnabled } = this.storageSettings.values;\n        if (mqttEnabled && pluginEnabled && !this.storageSettings.settings.mqttEnabled.hide) {\n            let mqttHost: string;\n            let mqttUsename: string;\n            let mqttPassword: string;\n\n            const logger = this.getLogger();\n\n            if (this.mqttClient) {\n                this.mqttClient.disconnect();\n                this.mqttClient = undefined;\n            }\n\n            if (useMqttPluginCredentials) {\n                logger.log(`Using MQTT plugin credentials.`);\n                const mqttDevice = systemManager.getDeviceByName('MQTT') as unknown as Settings;\n                const mqttSettings = await mqttDevice.getSettings();\n\n                const isInternalBroker = (JSON.parse(mqttSettings.find(setting => setting.key === 'enableBroker')?.value as string || 'false')) as boolean;\n\n                if (isInternalBroker) {\n                    logger.log(`Internal MQTT broker not supported yet. Please disable useMqttPluginCredentials.`);\n                } else {\n                    mqttHost = mqttSettings.find(setting => setting.key === 'externalBroker')?.value as string;\n                    mqttUsename = mqttSettings.find(setting => setting.key === 'username')?.value as string;\n                    mqttPassword = mqttSettings.find(setting => setting.key === 'password')?.value as string;\n                }\n            } else {\n                logger.log(`Using provided credentials.`);\n\n                mqttHost = this.storageSettings.getItem('mqttHost');\n                mqttUsename = this.storageSettings.getItem('mqttUsename');\n                mqttPassword = this.storageSettings.getItem('mqttPassword');\n            }\n\n            if (!mqttHost || !mqttUsename || !mqttPassword) {\n                logger.log('MQTT params not provided');\n            }\n\n            try {\n                this.mqttClient = new MqttClient(mqttHost, mqttUsename, mqttPassword, logger);\n            } catch (e) {\n                this.getLogger().log('Error setting up MQTT client', e);\n            }\n        }\n    }\n\n    async getMqttClient() {\n        if (!this.mqttClient) {\n            await this.setupMqttClient();\n        }\n\n        return this.mqttClient;\n    }\n\n    async getMixin(mixinDevice: any, mixinDeviceInterfaces: ScryptedInterface[], mixinDeviceState: WritableDeviceState): Promise<any> {\n        const props = {\n            mixinDevice,\n            mixinDeviceInterfaces,\n            mixinDeviceState,\n            mixinProviderNativeId: this.nativeId,\n            group: this.opts.mixinGroup,\n            groupKey: this.opts.mixinKey,\n        };\n\n        if (\n            [ScryptedInterface.Camera, ScryptedInterface.VideoCamera,].some(int => mixinDeviceInterfaces.includes(int))\n        ) {\n            return new BaseMixin(\n                props,\n                this\n            );\n        } else if (\n            [ScryptedInterface.BinarySensor, ScryptedInterface.Lock].some(int => mixinDeviceInterfaces.includes(int))\n        ) {\n            return new BaseMixin(\n                props,\n                this\n            );\n        } else if (mixinDeviceInterfaces.includes(ScryptedInterface.Notifier)) {\n            return new BaseMixin(\n                props,\n                this\n            );\n        }\n    }\n\n    async releaseMixin(id: string, mixinDevice: any): Promise<void> {\n        await mixinDevice.release();\n    }\n\n\n    async getSettings(): Promise<Setting[]> {\n        return await this.storageSettings.getSettings();\n    }\n\n    putSetting(key: string, value: SettingValue): Promise<void> {\n        return this.storageSettings.putSetting(key, value);\n    }\n\n    getLogger(): Console {\n        if (!this.mainLogger) {\n            const prefix = `[${this.opts.pluginFriendlyName}]`;\n            const log = (type: 'log' | 'debug' | 'error', message?: any, ...optionalParams: any[]) => {\n                const now = new Date().toLocaleString();\n                if (type !== 'debug' || this.storageSettings.getItem('debug')) {\n                    this.console.log(`${prefix} ${now} - `, message, ...optionalParams);\n                }\n                if (type === 'error' && this.storageSettings.values.devNotifier) {\n                    this.storageSettings.values.devNotifier.sendNotification(this.opts.pluginFriendlyName, {\n                        body: `${message}${optionalParams?.map(param => '\\n' + param)}`,\n                        data: {\n                            pushover: {\n                                priority: 1\n                            }\n                        }\n                    })\n                }\n            };\n\n            this.mainLogger = {\n                log: (message?: any, ...optionalParams: any[]) => log('log', message, ...optionalParams),\n                debug: (message?: any, ...optionalParams: any[]) => log('debug', message, ...optionalParams),\n                error: (message?: any, ...optionalParams: any[]) => log('error', message, ...optionalParams),\n            } as Console\n        }\n\n        return this.mainLogger\n    }\n}\n\n","import { connectAsync, MqttClient as Client } from 'mqtt';\nimport { ScryptedDeviceBase } from '@scrypted/sdk';\n\nexport default class MqttClient {\n    mqttClient: Client;\n    mqttPathmame: string;\n    host: string;\n    username: string;\n    password: string;\n    console: Console;\n    topicLastValue: Record<string, any> = {};\n    logger: Console;\n\n    constructor(host: string, username: string, password: string, logger: Console) {\n        this.host = host;\n        this.username = username;\n        this.password = password;\n        this.logger = logger;\n    }\n\n    async disconnect() {\n        if (this.mqttClient) {\n            try {\n                this.mqttClient.end(true);\n            } catch (e) {\n                this.logger.log('Error closing MQTT connection', e);\n            }\n        }\n    }\n\n    async getMqttClient(forceReconnect?: boolean): Promise<Client> {\n        const _connect = async () => {\n            const client = await connectAsync(this.mqttPathmame, {\n                rejectUnauthorized: false,\n                username: this.username,\n                password: this.password,\n                reschedulePings: true\n            });\n\n            client.on('connect', data => {\n                this.mqttClient = client;\n            });\n\n            client.on('error', data => {\n                this.logger.log('Error connecting to mqtt', data);\n                this.mqttClient = undefined;\n            });\n\n            client.setMaxListeners(Infinity);\n\n            this.logger.log('Connected to mqtt');\n            this.mqttClient = client;\n        }\n\n        if (!this.mqttClient || forceReconnect) {\n            if (forceReconnect && this.mqttClient) {\n                try {\n                    await this.mqttClient.endAsync();\n                } catch (e) { }\n            }\n            const url = this.host;\n            const urlWithoutPath = new URL(url);\n            urlWithoutPath.pathname = '';\n\n            this.mqttPathmame = urlWithoutPath.toString();\n            if (!this.mqttPathmame.endsWith('/')) {\n                this.mqttPathmame = `${this.mqttPathmame}/`;\n            }\n            this.logger.log('Starting MQTT connection', this.host, this.username, this.mqttPathmame);\n\n            await _connect();\n\n            if (this.mqttClient) {\n                this.mqttClient.onKeepaliveTimeout = async () => {\n                    this.logger.log('keepalive timeout. Reconnecting');\n                    this.mqttClient.reconnect();\n                }\n            }\n            return this.mqttClient;\n        } else if (!this.mqttClient.connected) {\n            this.logger.log('MQTT disconnected. Reconnecting', this.host, this.username, this.mqttPathmame);\n\n            await _connect();\n            return this.mqttClient;\n        } else {\n            return this.mqttClient;\n        }\n    }\n\n    async publish(topic: string, inputValue: any, retain = true) {\n        let value;\n        try {\n            if (typeof inputValue === 'object')\n                value = JSON.stringify(inputValue);\n            if (inputValue.constructor.name !== Buffer.name)\n                value = inputValue.toString();\n        } catch (e) {\n            this.logger.log(`Error parsing publish values: ${JSON.stringify({ topic, value })}`, e);\n            return;\n        }\n\n        if (retain && this.topicLastValue[topic] === value) {\n            this.logger.debug(`Skipping publish, same as previous value: ${JSON.stringify({ topic, value, previousValue: this.topicLastValue[topic] })}`);\n\n            return;\n        }\n\n        this.logger.debug(`Publishing ${JSON.stringify({ topic, value })}`);\n        const client = await this.getMqttClient();\n        try {\n            await client.publishAsync(topic, value, { retain });\n        } catch (e) {\n            this.logger.log(`Error publishing to MQTT. Reconnecting. ${JSON.stringify({ topic, value })}`, e);\n            await this.getMqttClient(true);\n            await client.publishAsync(topic, value, { retain });\n        } finally {\n            if (retain) {\n                this.topicLastValue[topic] = value;\n            }\n        }\n    }\n\n    public getMqttTopicTopics<Domain extends string = string>(pluginName: string, device: ScryptedDeviceBase) {\n        const deviceId = device.id;\n\n        const getEntityTopic = (entity: string) => `scrypted/${pluginName}/${deviceId}/${entity}`;\n        const getInfoTopic = (entity: string) => `${getEntityTopic(entity)}/info`;\n        const getDiscoveryTopic = (domain: Domain, entity: string) => `homeassistant/${domain}/${pluginName}-${deviceId}/${entity}/config`;\n\n        return {\n            getEntityTopic,\n            getDiscoveryTopic,\n            getInfoTopic,\n        }\n    }\n\n    async subscribeToTopic(topic: string, cb: (message: any) => void) {\n        const client = await this.getMqttClient();\n        await client.unsubscribeAsync([topic]);\n        await client.subscribeAsync([topic]);\n\n        client.on('message', (messageTopic, message) => {\n            const messageString = message.toString();\n            if (messageTopic === topic) {\n                cb(messageString);\n            }\n        })\n    }\n\n    async subscribe(topics: string[], cb: (topic: string, message: string) => Promise<void>) {\n        await this.unsubscribe(topics);\n        await this.mqttClient.subscribeAsync(topics);\n\n        this.mqttClient.on('message', async (topic, message) => {\n            const messageString = message.toString();\n            await cb(topic, messageString)\n        });\n    }\n\n    async unsubscribe(topics: string[]) {\n        await this.mqttClient.unsubscribeAsync(topics);\n    }\n}\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sdk = exports.MixinDeviceBase = exports.ScryptedDeviceBase = void 0;\n__exportStar(require(\"../types/gen/index\"), exports);\nconst index_1 = require(\"../types/gen/index\");\n/**\n * @category Core Reference\n */\nclass ScryptedDeviceBase extends index_1.DeviceBase {\n    constructor(nativeId) {\n        super();\n        this.nativeId = nativeId;\n    }\n    get storage() {\n        if (!this._storage) {\n            this._storage = deviceManager.getDeviceStorage(this.nativeId);\n        }\n        return this._storage;\n    }\n    get log() {\n        if (!this._log) {\n            this._log = deviceManager.getDeviceLogger(this.nativeId);\n        }\n        return this._log;\n    }\n    get console() {\n        if (!this._console) {\n            this._console = deviceManager.getDeviceConsole(this.nativeId);\n        }\n        return this._console;\n    }\n    async createMediaObject(data, mimeType) {\n        return mediaManager.createMediaObject(data, mimeType, {\n            sourceId: this.id,\n        });\n    }\n    getMediaObjectConsole(mediaObject) {\n        if (typeof mediaObject.sourceId !== 'string')\n            return this.console;\n        return deviceManager.getMixinConsole(mediaObject.sourceId, this.nativeId);\n    }\n    _lazyLoadDeviceState() {\n        if (!this._deviceState) {\n            if (this.nativeId) {\n                this._deviceState = deviceManager.getDeviceState(this.nativeId);\n            }\n            else {\n                this._deviceState = deviceManager.getDeviceState();\n            }\n        }\n    }\n    /**\n     * Fire an event for this device.\n     */\n    onDeviceEvent(eventInterface, eventData) {\n        return deviceManager.onDeviceEvent(this.nativeId, eventInterface, eventData);\n    }\n}\nexports.ScryptedDeviceBase = ScryptedDeviceBase;\n/**\n * @category Mixin Reference\n */\nclass MixinDeviceBase extends index_1.DeviceBase {\n    constructor(options) {\n        super();\n        this._listeners = new Set();\n        this.mixinDevice = options.mixinDevice;\n        this.mixinDeviceInterfaces = options.mixinDeviceInterfaces;\n        this.mixinStorageSuffix = options.mixinStorageSuffix;\n        this._deviceState = options.mixinDeviceState;\n        this.nativeId = systemManager.getDeviceById(this.id).nativeId;\n        this.mixinProviderNativeId = options.mixinProviderNativeId;\n        // RpcProxy will trap all properties, and the following check/hack will determine\n        // if the device state came from another node worker thread.\n        // This should ultimately be discouraged and warned at some point in the future.\n        if (this._deviceState.__rpcproxy_traps_all_properties && typeof this._deviceState.id === 'string') {\n            this._deviceState = deviceManager.createDeviceState(this._deviceState.id, this._deviceState.setState);\n        }\n    }\n    get storage() {\n        if (!this._storage) {\n            const mixinStorageSuffix = this.mixinStorageSuffix;\n            const mixinStorageKey = this.id + (mixinStorageSuffix ? ':' + mixinStorageSuffix : '');\n            this._storage = deviceManager.getMixinStorage(mixinStorageKey, this.mixinProviderNativeId);\n        }\n        return this._storage;\n    }\n    get console() {\n        if (!this._console) {\n            if (deviceManager.getMixinConsole)\n                this._console = deviceManager.getMixinConsole(this.id, this.mixinProviderNativeId);\n            else\n                this._console = deviceManager.getDeviceConsole(this.mixinProviderNativeId);\n        }\n        return this._console;\n    }\n    async createMediaObject(data, mimeType) {\n        return mediaManager.createMediaObject(data, mimeType, {\n            sourceId: this.id,\n        });\n    }\n    getMediaObjectConsole(mediaObject) {\n        if (typeof mediaObject.sourceId !== 'string')\n            return this.console;\n        return deviceManager.getMixinConsole(mediaObject.sourceId, this.mixinProviderNativeId);\n    }\n    /**\n     * Fire an event for this device.\n     */\n    onDeviceEvent(eventInterface, eventData) {\n        return deviceManager.onMixinEvent(this.id, this, eventInterface, eventData);\n    }\n    _lazyLoadDeviceState() {\n    }\n    manageListener(listener) {\n        this._listeners.add(listener);\n    }\n    release() {\n        for (const l of this._listeners) {\n            l.removeListener();\n        }\n    }\n}\nexports.MixinDeviceBase = MixinDeviceBase;\n(function () {\n    function _createGetState(state) {\n        return function () {\n            this._lazyLoadDeviceState();\n            // @ts-ignore: accessing private property\n            return this._deviceState?.[state];\n        };\n    }\n    function _createSetState(state) {\n        return function (value) {\n            this._lazyLoadDeviceState();\n            // @ts-ignore: accessing private property\n            if (!this._deviceState) {\n                console.warn('device state is unavailable. the device must be discovered with deviceManager.onDeviceDiscovered or deviceManager.onDevicesChanged before the state can be set.');\n            }\n            else {\n                // @ts-ignore: accessing private property\n                this._deviceState[state] = value;\n            }\n        };\n    }\n    for (const field of Object.values(index_1.ScryptedInterfaceProperty)) {\n        if (field === index_1.ScryptedInterfaceProperty.nativeId)\n            continue;\n        Object.defineProperty(ScryptedDeviceBase.prototype, field, {\n            set: _createSetState(field),\n            get: _createGetState(field),\n        });\n        Object.defineProperty(MixinDeviceBase.prototype, field, {\n            set: _createSetState(field),\n            get: _createGetState(field),\n        });\n    }\n})();\nexports.sdk = {};\ntry {\n    let runtimeAPI;\n    try {\n        runtimeAPI = pluginRuntimeAPI;\n    }\n    catch (e) {\n    }\n    Object.assign(exports.sdk, {\n        log: deviceManager.getDeviceLogger(undefined),\n        deviceManager,\n        endpointManager,\n        mediaManager,\n        systemManager,\n        pluginHostAPI,\n        ...runtimeAPI,\n    });\n    try {\n        systemManager.setScryptedInterfaceDescriptors?.(index_1.TYPES_VERSION, index_1.ScryptedInterfaceDescriptors)?.catch(() => { });\n    }\n    catch (e) {\n    }\n}\ncatch (e) {\n    console.error('sdk initialization error, import @scrypted/types or use @scrypted/client instead', e);\n}\nexports.default = exports.sdk;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.StorageSettings = void 0;\nconst _1 = __importStar(require(\".\"));\nconst { systemManager } = _1.default;\nfunction parseValue(value, setting, readDefaultValue, rawDevice) {\n    if (value === null || value === undefined) {\n        return readDefaultValue();\n    }\n    const type = setting.multiple ? 'array' : setting.type;\n    if (type === 'boolean') {\n        if (value === 'true')\n            return true;\n        if (value === 'false')\n            return false;\n        return readDefaultValue() || false;\n    }\n    if (type === 'number') {\n        const n = parseFloat(value);\n        if (!isNaN(n))\n            return n;\n        return readDefaultValue() || 0;\n    }\n    if (type === 'integer') {\n        const n = parseInt(value);\n        if (!isNaN(n))\n            return n;\n        return readDefaultValue() || 0;\n    }\n    if (type === 'array') {\n        if (!value)\n            return readDefaultValue() || [];\n        try {\n            return JSON.parse(value);\n        }\n        catch (e) {\n            return readDefaultValue() || [];\n        }\n    }\n    if (type === 'device') {\n        if (rawDevice)\n            return value;\n        return systemManager.getDeviceById(value) || systemManager.getDeviceById(readDefaultValue());\n    }\n    // string type, so check if it is json.\n    if (value && setting.json) {\n        try {\n            return JSON.parse(value);\n        }\n        catch (e) {\n            return readDefaultValue();\n        }\n    }\n    return value || readDefaultValue();\n}\nclass StorageSettings {\n    constructor(device, settings) {\n        this.device = device;\n        this.settings = settings;\n        this.values = {};\n        this.hasValue = {};\n        for (const key of Object.keys(settings)) {\n            const setting = settings[key];\n            const rawGet = () => this.getItem(key);\n            let get;\n            if (setting.type !== 'clippath') {\n                get = rawGet;\n            }\n            else {\n                // maybe need a mapPut. clippath is the only complex type at the moment.\n                get = () => {\n                    try {\n                        return JSON.parse(rawGet());\n                    }\n                    catch (e) {\n                    }\n                };\n            }\n            Object.defineProperty(this.values, key, {\n                get,\n                set: value => this.putSetting(key, value),\n                enumerable: true,\n            });\n            Object.defineProperty(this.hasValue, key, {\n                get: () => this.device.storage.getItem(key) != null,\n                enumerable: true,\n            });\n        }\n    }\n    get keys() {\n        const ret = {};\n        for (const key of Object.keys(this.settings)) {\n            ret[key] = key;\n        }\n        return ret;\n    }\n    async getSettings() {\n        const onGet = await this.options?.onGet?.();\n        const ret = [];\n        for (const [key, setting] of Object.entries(this.settings)) {\n            let s = Object.assign({}, setting);\n            if (onGet?.[key])\n                s = Object.assign(s, onGet[key]);\n            if (s.onGet)\n                s = Object.assign(s, await s.onGet());\n            if (s.hide || await this.options?.hide?.[key]?.())\n                continue;\n            s.key = key;\n            s.value = this.getItemInternal(key, s, true);\n            ret.push(s);\n            delete s.onPut;\n            delete s.onGet;\n            delete s.mapPut;\n            delete s.mapGet;\n        }\n        return ret;\n    }\n    async putSetting(key, value) {\n        const setting = this.settings[key];\n        let oldValue;\n        if (setting)\n            oldValue = this.getItemInternal(key, setting);\n        return this.putSettingInternal(setting, oldValue, key, value);\n    }\n    putSettingInternal(setting, oldValue, key, value) {\n        if (!setting?.noStore) {\n            if (setting?.mapPut)\n                value = setting.mapPut(oldValue, value);\n            // nullish values should be removed, since Storage can't persist them correctly.\n            if (value == null)\n                this.device.storage.removeItem(key);\n            else if (typeof value === 'object')\n                this.device.storage.setItem(key, JSON.stringify(value));\n            else\n                this.device.storage.setItem(key, value?.toString());\n        }\n        setting?.onPut?.(oldValue, value);\n        if (!setting?.hide)\n            this.device.onDeviceEvent(_1.ScryptedInterface.Settings, undefined);\n    }\n    getItemInternal(key, setting, rawDevice) {\n        if (!setting)\n            return this.device.storage.getItem(key);\n        const readDefaultValue = () => {\n            if (setting.persistedDefaultValue != null) {\n                this.putSettingInternal(setting, undefined, key, setting.persistedDefaultValue);\n                return setting.persistedDefaultValue;\n            }\n            return setting.defaultValue;\n        };\n        const ret = parseValue(this.device.storage.getItem(key), setting, readDefaultValue, rawDevice);\n        return setting.mapGet ? setting.mapGet(ret) : ret;\n    }\n    getItem(key) {\n        return this.getItemInternal(key, this.settings[key]);\n    }\n}\nexports.StorageSettings = StorageSettings;\n//# sourceMappingURL=storage-settings.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ScryptedMimeTypes = exports.ScryptedInterface = exports.MediaPlayerState = exports.SecuritySystemObstruction = exports.SecuritySystemMode = exports.AirQuality = exports.AirPurifierMode = exports.AirPurifierStatus = exports.ChargeState = exports.LockState = exports.PanTiltZoomMovement = exports.ThermostatMode = exports.TemperatureUnit = exports.FanMode = exports.HumidityMode = exports.ScryptedDeviceType = exports.ScryptedInterfaceDescriptors = exports.ScryptedInterfaceMethod = exports.ScryptedInterfaceProperty = exports.DeviceBase = exports.TYPES_VERSION = void 0;\nexports.TYPES_VERSION = \"0.3.59\";\nclass DeviceBase {\n}\nexports.DeviceBase = DeviceBase;\nvar ScryptedInterfaceProperty;\n(function (ScryptedInterfaceProperty) {\n    ScryptedInterfaceProperty[\"id\"] = \"id\";\n    ScryptedInterfaceProperty[\"info\"] = \"info\";\n    ScryptedInterfaceProperty[\"interfaces\"] = \"interfaces\";\n    ScryptedInterfaceProperty[\"mixins\"] = \"mixins\";\n    ScryptedInterfaceProperty[\"name\"] = \"name\";\n    ScryptedInterfaceProperty[\"nativeId\"] = \"nativeId\";\n    ScryptedInterfaceProperty[\"pluginId\"] = \"pluginId\";\n    ScryptedInterfaceProperty[\"providedInterfaces\"] = \"providedInterfaces\";\n    ScryptedInterfaceProperty[\"providedName\"] = \"providedName\";\n    ScryptedInterfaceProperty[\"providedRoom\"] = \"providedRoom\";\n    ScryptedInterfaceProperty[\"providedType\"] = \"providedType\";\n    ScryptedInterfaceProperty[\"providerId\"] = \"providerId\";\n    ScryptedInterfaceProperty[\"room\"] = \"room\";\n    ScryptedInterfaceProperty[\"type\"] = \"type\";\n    ScryptedInterfaceProperty[\"scryptedRuntimeArguments\"] = \"scryptedRuntimeArguments\";\n    ScryptedInterfaceProperty[\"on\"] = \"on\";\n    ScryptedInterfaceProperty[\"brightness\"] = \"brightness\";\n    ScryptedInterfaceProperty[\"colorTemperature\"] = \"colorTemperature\";\n    ScryptedInterfaceProperty[\"rgb\"] = \"rgb\";\n    ScryptedInterfaceProperty[\"hsv\"] = \"hsv\";\n    ScryptedInterfaceProperty[\"running\"] = \"running\";\n    ScryptedInterfaceProperty[\"paused\"] = \"paused\";\n    ScryptedInterfaceProperty[\"docked\"] = \"docked\";\n    ScryptedInterfaceProperty[\"temperatureSetting\"] = \"temperatureSetting\";\n    ScryptedInterfaceProperty[\"temperature\"] = \"temperature\";\n    ScryptedInterfaceProperty[\"temperatureUnit\"] = \"temperatureUnit\";\n    ScryptedInterfaceProperty[\"humidity\"] = \"humidity\";\n    ScryptedInterfaceProperty[\"audioVolumes\"] = \"audioVolumes\";\n    ScryptedInterfaceProperty[\"recordingActive\"] = \"recordingActive\";\n    ScryptedInterfaceProperty[\"ptzCapabilities\"] = \"ptzCapabilities\";\n    ScryptedInterfaceProperty[\"lockState\"] = \"lockState\";\n    ScryptedInterfaceProperty[\"entryOpen\"] = \"entryOpen\";\n    ScryptedInterfaceProperty[\"batteryLevel\"] = \"batteryLevel\";\n    ScryptedInterfaceProperty[\"chargeState\"] = \"chargeState\";\n    ScryptedInterfaceProperty[\"online\"] = \"online\";\n    ScryptedInterfaceProperty[\"fromMimeType\"] = \"fromMimeType\";\n    ScryptedInterfaceProperty[\"toMimeType\"] = \"toMimeType\";\n    ScryptedInterfaceProperty[\"converters\"] = \"converters\";\n    ScryptedInterfaceProperty[\"binaryState\"] = \"binaryState\";\n    ScryptedInterfaceProperty[\"tampered\"] = \"tampered\";\n    ScryptedInterfaceProperty[\"powerDetected\"] = \"powerDetected\";\n    ScryptedInterfaceProperty[\"audioDetected\"] = \"audioDetected\";\n    ScryptedInterfaceProperty[\"motionDetected\"] = \"motionDetected\";\n    ScryptedInterfaceProperty[\"ambientLight\"] = \"ambientLight\";\n    ScryptedInterfaceProperty[\"occupied\"] = \"occupied\";\n    ScryptedInterfaceProperty[\"flooded\"] = \"flooded\";\n    ScryptedInterfaceProperty[\"ultraviolet\"] = \"ultraviolet\";\n    ScryptedInterfaceProperty[\"luminance\"] = \"luminance\";\n    ScryptedInterfaceProperty[\"position\"] = \"position\";\n    ScryptedInterfaceProperty[\"securitySystemState\"] = \"securitySystemState\";\n    ScryptedInterfaceProperty[\"pm10Density\"] = \"pm10Density\";\n    ScryptedInterfaceProperty[\"pm25Density\"] = \"pm25Density\";\n    ScryptedInterfaceProperty[\"vocDensity\"] = \"vocDensity\";\n    ScryptedInterfaceProperty[\"noxDensity\"] = \"noxDensity\";\n    ScryptedInterfaceProperty[\"co2ppm\"] = \"co2ppm\";\n    ScryptedInterfaceProperty[\"airQuality\"] = \"airQuality\";\n    ScryptedInterfaceProperty[\"airPurifierState\"] = \"airPurifierState\";\n    ScryptedInterfaceProperty[\"filterChangeIndication\"] = \"filterChangeIndication\";\n    ScryptedInterfaceProperty[\"filterLifeLevel\"] = \"filterLifeLevel\";\n    ScryptedInterfaceProperty[\"humiditySetting\"] = \"humiditySetting\";\n    ScryptedInterfaceProperty[\"fan\"] = \"fan\";\n    ScryptedInterfaceProperty[\"applicationInfo\"] = \"applicationInfo\";\n    ScryptedInterfaceProperty[\"systemDevice\"] = \"systemDevice\";\n})(ScryptedInterfaceProperty || (exports.ScryptedInterfaceProperty = ScryptedInterfaceProperty = {}));\nvar ScryptedInterfaceMethod;\n(function (ScryptedInterfaceMethod) {\n    ScryptedInterfaceMethod[\"listen\"] = \"listen\";\n    ScryptedInterfaceMethod[\"probe\"] = \"probe\";\n    ScryptedInterfaceMethod[\"setMixins\"] = \"setMixins\";\n    ScryptedInterfaceMethod[\"setName\"] = \"setName\";\n    ScryptedInterfaceMethod[\"setRoom\"] = \"setRoom\";\n    ScryptedInterfaceMethod[\"setType\"] = \"setType\";\n    ScryptedInterfaceMethod[\"getPluginJson\"] = \"getPluginJson\";\n    ScryptedInterfaceMethod[\"turnOff\"] = \"turnOff\";\n    ScryptedInterfaceMethod[\"turnOn\"] = \"turnOn\";\n    ScryptedInterfaceMethod[\"setBrightness\"] = \"setBrightness\";\n    ScryptedInterfaceMethod[\"getTemperatureMaxK\"] = \"getTemperatureMaxK\";\n    ScryptedInterfaceMethod[\"getTemperatureMinK\"] = \"getTemperatureMinK\";\n    ScryptedInterfaceMethod[\"setColorTemperature\"] = \"setColorTemperature\";\n    ScryptedInterfaceMethod[\"setRgb\"] = \"setRgb\";\n    ScryptedInterfaceMethod[\"setHsv\"] = \"setHsv\";\n    ScryptedInterfaceMethod[\"sendNotification\"] = \"sendNotification\";\n    ScryptedInterfaceMethod[\"start\"] = \"start\";\n    ScryptedInterfaceMethod[\"stop\"] = \"stop\";\n    ScryptedInterfaceMethod[\"pause\"] = \"pause\";\n    ScryptedInterfaceMethod[\"resume\"] = \"resume\";\n    ScryptedInterfaceMethod[\"dock\"] = \"dock\";\n    ScryptedInterfaceMethod[\"setTemperature\"] = \"setTemperature\";\n    ScryptedInterfaceMethod[\"setTemperatureUnit\"] = \"setTemperatureUnit\";\n    ScryptedInterfaceMethod[\"getPictureOptions\"] = \"getPictureOptions\";\n    ScryptedInterfaceMethod[\"takePicture\"] = \"takePicture\";\n    ScryptedInterfaceMethod[\"getAudioStream\"] = \"getAudioStream\";\n    ScryptedInterfaceMethod[\"setAudioVolumes\"] = \"setAudioVolumes\";\n    ScryptedInterfaceMethod[\"startDisplay\"] = \"startDisplay\";\n    ScryptedInterfaceMethod[\"stopDisplay\"] = \"stopDisplay\";\n    ScryptedInterfaceMethod[\"getVideoStream\"] = \"getVideoStream\";\n    ScryptedInterfaceMethod[\"getVideoStreamOptions\"] = \"getVideoStreamOptions\";\n    ScryptedInterfaceMethod[\"getPrivacyMasks\"] = \"getPrivacyMasks\";\n    ScryptedInterfaceMethod[\"setPrivacyMasks\"] = \"setPrivacyMasks\";\n    ScryptedInterfaceMethod[\"getRecordingStream\"] = \"getRecordingStream\";\n    ScryptedInterfaceMethod[\"getRecordingStreamCurrentTime\"] = \"getRecordingStreamCurrentTime\";\n    ScryptedInterfaceMethod[\"getRecordingStreamOptions\"] = \"getRecordingStreamOptions\";\n    ScryptedInterfaceMethod[\"getRecordingStreamThumbnail\"] = \"getRecordingStreamThumbnail\";\n    ScryptedInterfaceMethod[\"deleteRecordingStream\"] = \"deleteRecordingStream\";\n    ScryptedInterfaceMethod[\"setRecordingActive\"] = \"setRecordingActive\";\n    ScryptedInterfaceMethod[\"ptzCommand\"] = \"ptzCommand\";\n    ScryptedInterfaceMethod[\"getRecordedEvents\"] = \"getRecordedEvents\";\n    ScryptedInterfaceMethod[\"getVideoClip\"] = \"getVideoClip\";\n    ScryptedInterfaceMethod[\"getVideoClipThumbnail\"] = \"getVideoClipThumbnail\";\n    ScryptedInterfaceMethod[\"getVideoClips\"] = \"getVideoClips\";\n    ScryptedInterfaceMethod[\"removeVideoClips\"] = \"removeVideoClips\";\n    ScryptedInterfaceMethod[\"setVideoStreamOptions\"] = \"setVideoStreamOptions\";\n    ScryptedInterfaceMethod[\"startIntercom\"] = \"startIntercom\";\n    ScryptedInterfaceMethod[\"stopIntercom\"] = \"stopIntercom\";\n    ScryptedInterfaceMethod[\"lock\"] = \"lock\";\n    ScryptedInterfaceMethod[\"unlock\"] = \"unlock\";\n    ScryptedInterfaceMethod[\"addPassword\"] = \"addPassword\";\n    ScryptedInterfaceMethod[\"getPasswords\"] = \"getPasswords\";\n    ScryptedInterfaceMethod[\"removePassword\"] = \"removePassword\";\n    ScryptedInterfaceMethod[\"activate\"] = \"activate\";\n    ScryptedInterfaceMethod[\"deactivate\"] = \"deactivate\";\n    ScryptedInterfaceMethod[\"isReversible\"] = \"isReversible\";\n    ScryptedInterfaceMethod[\"closeEntry\"] = \"closeEntry\";\n    ScryptedInterfaceMethod[\"openEntry\"] = \"openEntry\";\n    ScryptedInterfaceMethod[\"getDevice\"] = \"getDevice\";\n    ScryptedInterfaceMethod[\"releaseDevice\"] = \"releaseDevice\";\n    ScryptedInterfaceMethod[\"adoptDevice\"] = \"adoptDevice\";\n    ScryptedInterfaceMethod[\"discoverDevices\"] = \"discoverDevices\";\n    ScryptedInterfaceMethod[\"createDevice\"] = \"createDevice\";\n    ScryptedInterfaceMethod[\"getCreateDeviceSettings\"] = \"getCreateDeviceSettings\";\n    ScryptedInterfaceMethod[\"reboot\"] = \"reboot\";\n    ScryptedInterfaceMethod[\"getRefreshFrequency\"] = \"getRefreshFrequency\";\n    ScryptedInterfaceMethod[\"refresh\"] = \"refresh\";\n    ScryptedInterfaceMethod[\"getMediaStatus\"] = \"getMediaStatus\";\n    ScryptedInterfaceMethod[\"load\"] = \"load\";\n    ScryptedInterfaceMethod[\"seek\"] = \"seek\";\n    ScryptedInterfaceMethod[\"skipNext\"] = \"skipNext\";\n    ScryptedInterfaceMethod[\"skipPrevious\"] = \"skipPrevious\";\n    ScryptedInterfaceMethod[\"convert\"] = \"convert\";\n    ScryptedInterfaceMethod[\"convertMedia\"] = \"convertMedia\";\n    ScryptedInterfaceMethod[\"getSettings\"] = \"getSettings\";\n    ScryptedInterfaceMethod[\"putSetting\"] = \"putSetting\";\n    ScryptedInterfaceMethod[\"armSecuritySystem\"] = \"armSecuritySystem\";\n    ScryptedInterfaceMethod[\"disarmSecuritySystem\"] = \"disarmSecuritySystem\";\n    ScryptedInterfaceMethod[\"setAirPurifierState\"] = \"setAirPurifierState\";\n    ScryptedInterfaceMethod[\"getReadmeMarkdown\"] = \"getReadmeMarkdown\";\n    ScryptedInterfaceMethod[\"getOauthUrl\"] = \"getOauthUrl\";\n    ScryptedInterfaceMethod[\"onOauthCallback\"] = \"onOauthCallback\";\n    ScryptedInterfaceMethod[\"canMixin\"] = \"canMixin\";\n    ScryptedInterfaceMethod[\"getMixin\"] = \"getMixin\";\n    ScryptedInterfaceMethod[\"releaseMixin\"] = \"releaseMixin\";\n    ScryptedInterfaceMethod[\"onRequest\"] = \"onRequest\";\n    ScryptedInterfaceMethod[\"onConnection\"] = \"onConnection\";\n    ScryptedInterfaceMethod[\"onPush\"] = \"onPush\";\n    ScryptedInterfaceMethod[\"run\"] = \"run\";\n    ScryptedInterfaceMethod[\"eval\"] = \"eval\";\n    ScryptedInterfaceMethod[\"loadScripts\"] = \"loadScripts\";\n    ScryptedInterfaceMethod[\"saveScript\"] = \"saveScript\";\n    ScryptedInterfaceMethod[\"trackObjects\"] = \"trackObjects\";\n    ScryptedInterfaceMethod[\"getDetectionInput\"] = \"getDetectionInput\";\n    ScryptedInterfaceMethod[\"getObjectTypes\"] = \"getObjectTypes\";\n    ScryptedInterfaceMethod[\"detectObjects\"] = \"detectObjects\";\n    ScryptedInterfaceMethod[\"generateObjectDetections\"] = \"generateObjectDetections\";\n    ScryptedInterfaceMethod[\"getDetectionModel\"] = \"getDetectionModel\";\n    ScryptedInterfaceMethod[\"setHumidity\"] = \"setHumidity\";\n    ScryptedInterfaceMethod[\"setFan\"] = \"setFan\";\n    ScryptedInterfaceMethod[\"startRTCSignalingSession\"] = \"startRTCSignalingSession\";\n    ScryptedInterfaceMethod[\"createRTCSignalingSession\"] = \"createRTCSignalingSession\";\n    ScryptedInterfaceMethod[\"getScryptedUserAccessControl\"] = \"getScryptedUserAccessControl\";\n    ScryptedInterfaceMethod[\"generateVideoFrames\"] = \"generateVideoFrames\";\n    ScryptedInterfaceMethod[\"connectStream\"] = \"connectStream\";\n    ScryptedInterfaceMethod[\"getTTYSettings\"] = \"getTTYSettings\";\n})(ScryptedInterfaceMethod || (exports.ScryptedInterfaceMethod = ScryptedInterfaceMethod = {}));\nexports.ScryptedInterfaceDescriptors = {\n    ScryptedDevice: {\n        name: 'ScryptedDevice',\n        methods: [\n            'listen',\n            'probe',\n            'setMixins',\n            'setName',\n            'setRoom',\n            'setType'\n        ],\n        properties: [\n            'id',\n            'info',\n            'interfaces',\n            'mixins',\n            'name',\n            'nativeId',\n            'pluginId',\n            'providedInterfaces',\n            'providedName',\n            'providedRoom',\n            'providedType',\n            'providerId',\n            'room',\n            'type'\n        ]\n    },\n    ScryptedPlugin: {\n        name: 'ScryptedPlugin',\n        methods: [\n            'getPluginJson'\n        ],\n        properties: []\n    },\n    ScryptedPluginRuntime: {\n        name: 'ScryptedPluginRuntime',\n        methods: [],\n        properties: [\n            'scryptedRuntimeArguments'\n        ]\n    },\n    OnOff: {\n        name: 'OnOff',\n        methods: [\n            'turnOff',\n            'turnOn'\n        ],\n        properties: [\n            'on'\n        ]\n    },\n    Brightness: {\n        name: 'Brightness',\n        methods: [\n            'setBrightness'\n        ],\n        properties: [\n            'brightness'\n        ]\n    },\n    ColorSettingTemperature: {\n        name: 'ColorSettingTemperature',\n        methods: [\n            'getTemperatureMaxK',\n            'getTemperatureMinK',\n            'setColorTemperature'\n        ],\n        properties: [\n            'colorTemperature'\n        ]\n    },\n    ColorSettingRgb: {\n        name: 'ColorSettingRgb',\n        methods: [\n            'setRgb'\n        ],\n        properties: [\n            'rgb'\n        ]\n    },\n    ColorSettingHsv: {\n        name: 'ColorSettingHsv',\n        methods: [\n            'setHsv'\n        ],\n        properties: [\n            'hsv'\n        ]\n    },\n    Notifier: {\n        name: 'Notifier',\n        methods: [\n            'sendNotification'\n        ],\n        properties: []\n    },\n    StartStop: {\n        name: 'StartStop',\n        methods: [\n            'start',\n            'stop'\n        ],\n        properties: [\n            'running'\n        ]\n    },\n    Pause: {\n        name: 'Pause',\n        methods: [\n            'pause',\n            'resume'\n        ],\n        properties: [\n            'paused'\n        ]\n    },\n    Dock: {\n        name: 'Dock',\n        methods: [\n            'dock'\n        ],\n        properties: [\n            'docked'\n        ]\n    },\n    TemperatureSetting: {\n        name: 'TemperatureSetting',\n        methods: [\n            'setTemperature'\n        ],\n        properties: [\n            'temperatureSetting'\n        ]\n    },\n    Thermometer: {\n        name: 'Thermometer',\n        methods: [\n            'setTemperatureUnit'\n        ],\n        properties: [\n            'temperature',\n            'temperatureUnit'\n        ]\n    },\n    HumiditySensor: {\n        name: 'HumiditySensor',\n        methods: [],\n        properties: [\n            'humidity'\n        ]\n    },\n    Camera: {\n        name: 'Camera',\n        methods: [\n            'getPictureOptions',\n            'takePicture'\n        ],\n        properties: []\n    },\n    Microphone: {\n        name: 'Microphone',\n        methods: [\n            'getAudioStream'\n        ],\n        properties: []\n    },\n    AudioVolumeControl: {\n        name: 'AudioVolumeControl',\n        methods: [\n            'setAudioVolumes'\n        ],\n        properties: [\n            'audioVolumes'\n        ]\n    },\n    Display: {\n        name: 'Display',\n        methods: [\n            'startDisplay',\n            'stopDisplay'\n        ],\n        properties: []\n    },\n    VideoCamera: {\n        name: 'VideoCamera',\n        methods: [\n            'getVideoStream',\n            'getVideoStreamOptions'\n        ],\n        properties: []\n    },\n    VideoCameraMask: {\n        name: 'VideoCameraMask',\n        methods: [\n            'getPrivacyMasks',\n            'setPrivacyMasks'\n        ],\n        properties: []\n    },\n    VideoRecorder: {\n        name: 'VideoRecorder',\n        methods: [\n            'getRecordingStream',\n            'getRecordingStreamCurrentTime',\n            'getRecordingStreamOptions',\n            'getRecordingStreamThumbnail'\n        ],\n        properties: [\n            'recordingActive'\n        ]\n    },\n    VideoRecorderManagement: {\n        name: 'VideoRecorderManagement',\n        methods: [\n            'deleteRecordingStream',\n            'setRecordingActive'\n        ],\n        properties: []\n    },\n    PanTiltZoom: {\n        name: 'PanTiltZoom',\n        methods: [\n            'ptzCommand'\n        ],\n        properties: [\n            'ptzCapabilities'\n        ]\n    },\n    EventRecorder: {\n        name: 'EventRecorder',\n        methods: [\n            'getRecordedEvents'\n        ],\n        properties: []\n    },\n    VideoClips: {\n        name: 'VideoClips',\n        methods: [\n            'getVideoClip',\n            'getVideoClipThumbnail',\n            'getVideoClips',\n            'removeVideoClips'\n        ],\n        properties: []\n    },\n    VideoCameraConfiguration: {\n        name: 'VideoCameraConfiguration',\n        methods: [\n            'setVideoStreamOptions'\n        ],\n        properties: []\n    },\n    Intercom: {\n        name: 'Intercom',\n        methods: [\n            'startIntercom',\n            'stopIntercom'\n        ],\n        properties: []\n    },\n    Lock: {\n        name: 'Lock',\n        methods: [\n            'lock',\n            'unlock'\n        ],\n        properties: [\n            'lockState'\n        ]\n    },\n    PasswordStore: {\n        name: 'PasswordStore',\n        methods: [\n            'addPassword',\n            'getPasswords',\n            'removePassword'\n        ],\n        properties: []\n    },\n    Scene: {\n        name: 'Scene',\n        methods: [\n            'activate',\n            'deactivate',\n            'isReversible'\n        ],\n        properties: []\n    },\n    Entry: {\n        name: 'Entry',\n        methods: [\n            'closeEntry',\n            'openEntry'\n        ],\n        properties: []\n    },\n    EntrySensor: {\n        name: 'EntrySensor',\n        methods: [],\n        properties: [\n            'entryOpen'\n        ]\n    },\n    DeviceProvider: {\n        name: 'DeviceProvider',\n        methods: [\n            'getDevice',\n            'releaseDevice'\n        ],\n        properties: []\n    },\n    DeviceDiscovery: {\n        name: 'DeviceDiscovery',\n        methods: [\n            'adoptDevice',\n            'discoverDevices'\n        ],\n        properties: []\n    },\n    DeviceCreator: {\n        name: 'DeviceCreator',\n        methods: [\n            'createDevice',\n            'getCreateDeviceSettings'\n        ],\n        properties: []\n    },\n    Battery: {\n        name: 'Battery',\n        methods: [],\n        properties: [\n            'batteryLevel'\n        ]\n    },\n    Charger: {\n        name: 'Charger',\n        methods: [],\n        properties: [\n            'chargeState'\n        ]\n    },\n    Reboot: {\n        name: 'Reboot',\n        methods: [\n            'reboot'\n        ],\n        properties: []\n    },\n    Refresh: {\n        name: 'Refresh',\n        methods: [\n            'getRefreshFrequency',\n            'refresh'\n        ],\n        properties: []\n    },\n    MediaPlayer: {\n        name: 'MediaPlayer',\n        methods: [\n            'getMediaStatus',\n            'load',\n            'seek',\n            'skipNext',\n            'skipPrevious'\n        ],\n        properties: []\n    },\n    Online: {\n        name: 'Online',\n        methods: [],\n        properties: [\n            'online'\n        ]\n    },\n    BufferConverter: {\n        name: 'BufferConverter',\n        methods: [\n            'convert'\n        ],\n        properties: [\n            'fromMimeType',\n            'toMimeType'\n        ]\n    },\n    MediaConverter: {\n        name: 'MediaConverter',\n        methods: [\n            'convertMedia'\n        ],\n        properties: [\n            'converters'\n        ]\n    },\n    Settings: {\n        name: 'Settings',\n        methods: [\n            'getSettings',\n            'putSetting'\n        ],\n        properties: []\n    },\n    BinarySensor: {\n        name: 'BinarySensor',\n        methods: [],\n        properties: [\n            'binaryState'\n        ]\n    },\n    TamperSensor: {\n        name: 'TamperSensor',\n        methods: [],\n        properties: [\n            'tampered'\n        ]\n    },\n    PowerSensor: {\n        name: 'PowerSensor',\n        methods: [],\n        properties: [\n            'powerDetected'\n        ]\n    },\n    AudioSensor: {\n        name: 'AudioSensor',\n        methods: [],\n        properties: [\n            'audioDetected'\n        ]\n    },\n    MotionSensor: {\n        name: 'MotionSensor',\n        methods: [],\n        properties: [\n            'motionDetected'\n        ]\n    },\n    AmbientLightSensor: {\n        name: 'AmbientLightSensor',\n        methods: [],\n        properties: [\n            'ambientLight'\n        ]\n    },\n    OccupancySensor: {\n        name: 'OccupancySensor',\n        methods: [],\n        properties: [\n            'occupied'\n        ]\n    },\n    FloodSensor: {\n        name: 'FloodSensor',\n        methods: [],\n        properties: [\n            'flooded'\n        ]\n    },\n    UltravioletSensor: {\n        name: 'UltravioletSensor',\n        methods: [],\n        properties: [\n            'ultraviolet'\n        ]\n    },\n    LuminanceSensor: {\n        name: 'LuminanceSensor',\n        methods: [],\n        properties: [\n            'luminance'\n        ]\n    },\n    PositionSensor: {\n        name: 'PositionSensor',\n        methods: [],\n        properties: [\n            'position'\n        ]\n    },\n    SecuritySystem: {\n        name: 'SecuritySystem',\n        methods: [\n            'armSecuritySystem',\n            'disarmSecuritySystem'\n        ],\n        properties: [\n            'securitySystemState'\n        ]\n    },\n    PM10Sensor: {\n        name: 'PM10Sensor',\n        methods: [],\n        properties: [\n            'pm10Density'\n        ]\n    },\n    PM25Sensor: {\n        name: 'PM25Sensor',\n        methods: [],\n        properties: [\n            'pm25Density'\n        ]\n    },\n    VOCSensor: {\n        name: 'VOCSensor',\n        methods: [],\n        properties: [\n            'vocDensity'\n        ]\n    },\n    NOXSensor: {\n        name: 'NOXSensor',\n        methods: [],\n        properties: [\n            'noxDensity'\n        ]\n    },\n    CO2Sensor: {\n        name: 'CO2Sensor',\n        methods: [],\n        properties: [\n            'co2ppm'\n        ]\n    },\n    AirQualitySensor: {\n        name: 'AirQualitySensor',\n        methods: [],\n        properties: [\n            'airQuality'\n        ]\n    },\n    AirPurifier: {\n        name: 'AirPurifier',\n        methods: [\n            'setAirPurifierState'\n        ],\n        properties: [\n            'airPurifierState'\n        ]\n    },\n    FilterMaintenance: {\n        name: 'FilterMaintenance',\n        methods: [],\n        properties: [\n            'filterChangeIndication',\n            'filterLifeLevel'\n        ]\n    },\n    Readme: {\n        name: 'Readme',\n        methods: [\n            'getReadmeMarkdown'\n        ],\n        properties: []\n    },\n    OauthClient: {\n        name: 'OauthClient',\n        methods: [\n            'getOauthUrl',\n            'onOauthCallback'\n        ],\n        properties: []\n    },\n    MixinProvider: {\n        name: 'MixinProvider',\n        methods: [\n            'canMixin',\n            'getMixin',\n            'releaseMixin'\n        ],\n        properties: []\n    },\n    HttpRequestHandler: {\n        name: 'HttpRequestHandler',\n        methods: [\n            'onRequest'\n        ],\n        properties: []\n    },\n    EngineIOHandler: {\n        name: 'EngineIOHandler',\n        methods: [\n            'onConnection'\n        ],\n        properties: []\n    },\n    PushHandler: {\n        name: 'PushHandler',\n        methods: [\n            'onPush'\n        ],\n        properties: []\n    },\n    Program: {\n        name: 'Program',\n        methods: [\n            'run'\n        ],\n        properties: []\n    },\n    Scriptable: {\n        name: 'Scriptable',\n        methods: [\n            'eval',\n            'loadScripts',\n            'saveScript'\n        ],\n        properties: []\n    },\n    ObjectTracker: {\n        name: 'ObjectTracker',\n        methods: [\n            'trackObjects'\n        ],\n        properties: []\n    },\n    ObjectDetector: {\n        name: 'ObjectDetector',\n        methods: [\n            'getDetectionInput',\n            'getObjectTypes'\n        ],\n        properties: []\n    },\n    ObjectDetection: {\n        name: 'ObjectDetection',\n        methods: [\n            'detectObjects',\n            'generateObjectDetections',\n            'getDetectionModel'\n        ],\n        properties: []\n    },\n    ObjectDetectionPreview: {\n        name: 'ObjectDetectionPreview',\n        methods: [],\n        properties: []\n    },\n    ObjectDetectionGenerator: {\n        name: 'ObjectDetectionGenerator',\n        methods: [],\n        properties: []\n    },\n    HumiditySetting: {\n        name: 'HumiditySetting',\n        methods: [\n            'setHumidity'\n        ],\n        properties: [\n            'humiditySetting'\n        ]\n    },\n    Fan: {\n        name: 'Fan',\n        methods: [\n            'setFan'\n        ],\n        properties: [\n            'fan'\n        ]\n    },\n    RTCSignalingChannel: {\n        name: 'RTCSignalingChannel',\n        methods: [\n            'startRTCSignalingSession'\n        ],\n        properties: []\n    },\n    RTCSignalingClient: {\n        name: 'RTCSignalingClient',\n        methods: [\n            'createRTCSignalingSession'\n        ],\n        properties: []\n    },\n    LauncherApplication: {\n        name: 'LauncherApplication',\n        methods: [],\n        properties: [\n            'applicationInfo'\n        ]\n    },\n    ScryptedUser: {\n        name: 'ScryptedUser',\n        methods: [\n            'getScryptedUserAccessControl'\n        ],\n        properties: []\n    },\n    VideoFrameGenerator: {\n        name: 'VideoFrameGenerator',\n        methods: [\n            'generateVideoFrames'\n        ],\n        properties: []\n    },\n    StreamService: {\n        name: 'StreamService',\n        methods: [\n            'connectStream'\n        ],\n        properties: []\n    },\n    TTY: {\n        name: 'TTY',\n        methods: [],\n        properties: []\n    },\n    TTYSettings: {\n        name: 'TTYSettings',\n        methods: [\n            'getTTYSettings'\n        ],\n        properties: []\n    },\n    ScryptedSystemDevice: {\n        name: 'ScryptedSystemDevice',\n        methods: [],\n        properties: [\n            'systemDevice'\n        ]\n    },\n    ScryptedDeviceCreator: {\n        name: 'ScryptedDeviceCreator',\n        methods: [],\n        properties: []\n    },\n    ScryptedSettings: {\n        name: 'ScryptedSettings',\n        methods: [],\n        properties: []\n    }\n};\n/**\n * @category Core Reference\n */\nvar ScryptedDeviceType;\n(function (ScryptedDeviceType) {\n    ScryptedDeviceType[\"Builtin\"] = \"Builtin\";\n    ScryptedDeviceType[\"Camera\"] = \"Camera\";\n    ScryptedDeviceType[\"Fan\"] = \"Fan\";\n    ScryptedDeviceType[\"Light\"] = \"Light\";\n    ScryptedDeviceType[\"Switch\"] = \"Switch\";\n    ScryptedDeviceType[\"Outlet\"] = \"Outlet\";\n    ScryptedDeviceType[\"Sensor\"] = \"Sensor\";\n    ScryptedDeviceType[\"Scene\"] = \"Scene\";\n    ScryptedDeviceType[\"Program\"] = \"Program\";\n    ScryptedDeviceType[\"Automation\"] = \"Automation\";\n    ScryptedDeviceType[\"Vacuum\"] = \"Vacuum\";\n    ScryptedDeviceType[\"Notifier\"] = \"Notifier\";\n    ScryptedDeviceType[\"Thermostat\"] = \"Thermostat\";\n    ScryptedDeviceType[\"Lock\"] = \"Lock\";\n    ScryptedDeviceType[\"PasswordControl\"] = \"PasswordControl\";\n    /**\n     * Displays have audio and video output.\n     */\n    ScryptedDeviceType[\"Display\"] = \"Display\";\n    /**\n     * Smart Displays have two way audio and video.\n     */\n    ScryptedDeviceType[\"SmartDisplay\"] = \"SmartDisplay\";\n    ScryptedDeviceType[\"Speaker\"] = \"Speaker\";\n    /**\n     * Smart Speakers have two way audio.\n     */\n    ScryptedDeviceType[\"SmartSpeaker\"] = \"SmartSpeaker\";\n    ScryptedDeviceType[\"Event\"] = \"Event\";\n    ScryptedDeviceType[\"Entry\"] = \"Entry\";\n    ScryptedDeviceType[\"Garage\"] = \"Garage\";\n    ScryptedDeviceType[\"DeviceProvider\"] = \"DeviceProvider\";\n    ScryptedDeviceType[\"DataSource\"] = \"DataSource\";\n    ScryptedDeviceType[\"API\"] = \"API\";\n    ScryptedDeviceType[\"Doorbell\"] = \"Doorbell\";\n    ScryptedDeviceType[\"Irrigation\"] = \"Irrigation\";\n    ScryptedDeviceType[\"Valve\"] = \"Valve\";\n    ScryptedDeviceType[\"Person\"] = \"Person\";\n    ScryptedDeviceType[\"SecuritySystem\"] = \"SecuritySystem\";\n    ScryptedDeviceType[\"WindowCovering\"] = \"WindowCovering\";\n    ScryptedDeviceType[\"Siren\"] = \"Siren\";\n    ScryptedDeviceType[\"AirPurifier\"] = \"AirPurifier\";\n    ScryptedDeviceType[\"Unknown\"] = \"Unknown\";\n})(ScryptedDeviceType || (exports.ScryptedDeviceType = ScryptedDeviceType = {}));\nvar HumidityMode;\n(function (HumidityMode) {\n    HumidityMode[\"Humidify\"] = \"Humidify\";\n    HumidityMode[\"Dehumidify\"] = \"Dehumidify\";\n    HumidityMode[\"Auto\"] = \"Auto\";\n    HumidityMode[\"Off\"] = \"Off\";\n})(HumidityMode || (exports.HumidityMode = HumidityMode = {}));\nvar FanMode;\n(function (FanMode) {\n    FanMode[\"Auto\"] = \"Auto\";\n    FanMode[\"Manual\"] = \"Manual\";\n})(FanMode || (exports.FanMode = FanMode = {}));\nvar TemperatureUnit;\n(function (TemperatureUnit) {\n    TemperatureUnit[\"C\"] = \"C\";\n    TemperatureUnit[\"F\"] = \"F\";\n})(TemperatureUnit || (exports.TemperatureUnit = TemperatureUnit = {}));\nvar ThermostatMode;\n(function (ThermostatMode) {\n    ThermostatMode[\"Off\"] = \"Off\";\n    ThermostatMode[\"Cool\"] = \"Cool\";\n    ThermostatMode[\"Heat\"] = \"Heat\";\n    ThermostatMode[\"HeatCool\"] = \"HeatCool\";\n    ThermostatMode[\"Auto\"] = \"Auto\";\n    ThermostatMode[\"FanOnly\"] = \"FanOnly\";\n    ThermostatMode[\"Purifier\"] = \"Purifier\";\n    ThermostatMode[\"Eco\"] = \"Eco\";\n    ThermostatMode[\"Dry\"] = \"Dry\";\n    ThermostatMode[\"On\"] = \"On\";\n})(ThermostatMode || (exports.ThermostatMode = ThermostatMode = {}));\nvar PanTiltZoomMovement;\n(function (PanTiltZoomMovement) {\n    PanTiltZoomMovement[\"Absolute\"] = \"Absolute\";\n    PanTiltZoomMovement[\"Relative\"] = \"Relative\";\n    PanTiltZoomMovement[\"Continuous\"] = \"Continuous\";\n    PanTiltZoomMovement[\"Preset\"] = \"Preset\";\n    PanTiltZoomMovement[\"Home\"] = \"Home\";\n})(PanTiltZoomMovement || (exports.PanTiltZoomMovement = PanTiltZoomMovement = {}));\nvar LockState;\n(function (LockState) {\n    LockState[\"Locked\"] = \"Locked\";\n    LockState[\"Unlocked\"] = \"Unlocked\";\n    LockState[\"Jammed\"] = \"Jammed\";\n})(LockState || (exports.LockState = LockState = {}));\nvar ChargeState;\n(function (ChargeState) {\n    ChargeState[\"Trickle\"] = \"trickle\";\n    ChargeState[\"Charging\"] = \"charging\";\n    ChargeState[\"NotCharging\"] = \"not-charging\";\n})(ChargeState || (exports.ChargeState = ChargeState = {}));\nvar AirPurifierStatus;\n(function (AirPurifierStatus) {\n    AirPurifierStatus[\"Inactive\"] = \"Inactive\";\n    AirPurifierStatus[\"Idle\"] = \"Idle\";\n    AirPurifierStatus[\"Active\"] = \"Active\";\n    AirPurifierStatus[\"ActiveNightMode\"] = \"ActiveNightMode\";\n})(AirPurifierStatus || (exports.AirPurifierStatus = AirPurifierStatus = {}));\nvar AirPurifierMode;\n(function (AirPurifierMode) {\n    AirPurifierMode[\"Manual\"] = \"Manual\";\n    AirPurifierMode[\"Automatic\"] = \"Automatic\";\n})(AirPurifierMode || (exports.AirPurifierMode = AirPurifierMode = {}));\nvar AirQuality;\n(function (AirQuality) {\n    AirQuality[\"Unknown\"] = \"Unknown\";\n    AirQuality[\"Excellent\"] = \"Excellent\";\n    AirQuality[\"Good\"] = \"Good\";\n    AirQuality[\"Fair\"] = \"Fair\";\n    AirQuality[\"Inferior\"] = \"Inferior\";\n    AirQuality[\"Poor\"] = \"Poor\";\n})(AirQuality || (exports.AirQuality = AirQuality = {}));\nvar SecuritySystemMode;\n(function (SecuritySystemMode) {\n    SecuritySystemMode[\"Disarmed\"] = \"Disarmed\";\n    SecuritySystemMode[\"HomeArmed\"] = \"HomeArmed\";\n    SecuritySystemMode[\"AwayArmed\"] = \"AwayArmed\";\n    SecuritySystemMode[\"NightArmed\"] = \"NightArmed\";\n})(SecuritySystemMode || (exports.SecuritySystemMode = SecuritySystemMode = {}));\nvar SecuritySystemObstruction;\n(function (SecuritySystemObstruction) {\n    SecuritySystemObstruction[\"Sensor\"] = \"Sensor\";\n    SecuritySystemObstruction[\"Occupied\"] = \"Occupied\";\n    SecuritySystemObstruction[\"Time\"] = \"Time\";\n    SecuritySystemObstruction[\"Error\"] = \"Error\";\n})(SecuritySystemObstruction || (exports.SecuritySystemObstruction = SecuritySystemObstruction = {}));\nvar MediaPlayerState;\n(function (MediaPlayerState) {\n    MediaPlayerState[\"Idle\"] = \"Idle\";\n    MediaPlayerState[\"Playing\"] = \"Playing\";\n    MediaPlayerState[\"Paused\"] = \"Paused\";\n    MediaPlayerState[\"Buffering\"] = \"Buffering\";\n})(MediaPlayerState || (exports.MediaPlayerState = MediaPlayerState = {}));\nvar ScryptedInterface;\n(function (ScryptedInterface) {\n    ScryptedInterface[\"ScryptedDevice\"] = \"ScryptedDevice\";\n    ScryptedInterface[\"ScryptedPlugin\"] = \"ScryptedPlugin\";\n    ScryptedInterface[\"ScryptedPluginRuntime\"] = \"ScryptedPluginRuntime\";\n    ScryptedInterface[\"OnOff\"] = \"OnOff\";\n    ScryptedInterface[\"Brightness\"] = \"Brightness\";\n    ScryptedInterface[\"ColorSettingTemperature\"] = \"ColorSettingTemperature\";\n    ScryptedInterface[\"ColorSettingRgb\"] = \"ColorSettingRgb\";\n    ScryptedInterface[\"ColorSettingHsv\"] = \"ColorSettingHsv\";\n    ScryptedInterface[\"Notifier\"] = \"Notifier\";\n    ScryptedInterface[\"StartStop\"] = \"StartStop\";\n    ScryptedInterface[\"Pause\"] = \"Pause\";\n    ScryptedInterface[\"Dock\"] = \"Dock\";\n    ScryptedInterface[\"TemperatureSetting\"] = \"TemperatureSetting\";\n    ScryptedInterface[\"Thermometer\"] = \"Thermometer\";\n    ScryptedInterface[\"HumiditySensor\"] = \"HumiditySensor\";\n    ScryptedInterface[\"Camera\"] = \"Camera\";\n    ScryptedInterface[\"Microphone\"] = \"Microphone\";\n    ScryptedInterface[\"AudioVolumeControl\"] = \"AudioVolumeControl\";\n    ScryptedInterface[\"Display\"] = \"Display\";\n    ScryptedInterface[\"VideoCamera\"] = \"VideoCamera\";\n    ScryptedInterface[\"VideoCameraMask\"] = \"VideoCameraMask\";\n    ScryptedInterface[\"VideoRecorder\"] = \"VideoRecorder\";\n    ScryptedInterface[\"VideoRecorderManagement\"] = \"VideoRecorderManagement\";\n    ScryptedInterface[\"PanTiltZoom\"] = \"PanTiltZoom\";\n    ScryptedInterface[\"EventRecorder\"] = \"EventRecorder\";\n    ScryptedInterface[\"VideoClips\"] = \"VideoClips\";\n    ScryptedInterface[\"VideoCameraConfiguration\"] = \"VideoCameraConfiguration\";\n    ScryptedInterface[\"Intercom\"] = \"Intercom\";\n    ScryptedInterface[\"Lock\"] = \"Lock\";\n    ScryptedInterface[\"PasswordStore\"] = \"PasswordStore\";\n    ScryptedInterface[\"Scene\"] = \"Scene\";\n    ScryptedInterface[\"Entry\"] = \"Entry\";\n    ScryptedInterface[\"EntrySensor\"] = \"EntrySensor\";\n    ScryptedInterface[\"DeviceProvider\"] = \"DeviceProvider\";\n    ScryptedInterface[\"DeviceDiscovery\"] = \"DeviceDiscovery\";\n    ScryptedInterface[\"DeviceCreator\"] = \"DeviceCreator\";\n    ScryptedInterface[\"Battery\"] = \"Battery\";\n    ScryptedInterface[\"Charger\"] = \"Charger\";\n    ScryptedInterface[\"Reboot\"] = \"Reboot\";\n    ScryptedInterface[\"Refresh\"] = \"Refresh\";\n    ScryptedInterface[\"MediaPlayer\"] = \"MediaPlayer\";\n    ScryptedInterface[\"Online\"] = \"Online\";\n    ScryptedInterface[\"BufferConverter\"] = \"BufferConverter\";\n    ScryptedInterface[\"MediaConverter\"] = \"MediaConverter\";\n    ScryptedInterface[\"Settings\"] = \"Settings\";\n    ScryptedInterface[\"BinarySensor\"] = \"BinarySensor\";\n    ScryptedInterface[\"TamperSensor\"] = \"TamperSensor\";\n    ScryptedInterface[\"PowerSensor\"] = \"PowerSensor\";\n    ScryptedInterface[\"AudioSensor\"] = \"AudioSensor\";\n    ScryptedInterface[\"MotionSensor\"] = \"MotionSensor\";\n    ScryptedInterface[\"AmbientLightSensor\"] = \"AmbientLightSensor\";\n    ScryptedInterface[\"OccupancySensor\"] = \"OccupancySensor\";\n    ScryptedInterface[\"FloodSensor\"] = \"FloodSensor\";\n    ScryptedInterface[\"UltravioletSensor\"] = \"UltravioletSensor\";\n    ScryptedInterface[\"LuminanceSensor\"] = \"LuminanceSensor\";\n    ScryptedInterface[\"PositionSensor\"] = \"PositionSensor\";\n    ScryptedInterface[\"SecuritySystem\"] = \"SecuritySystem\";\n    ScryptedInterface[\"PM10Sensor\"] = \"PM10Sensor\";\n    ScryptedInterface[\"PM25Sensor\"] = \"PM25Sensor\";\n    ScryptedInterface[\"VOCSensor\"] = \"VOCSensor\";\n    ScryptedInterface[\"NOXSensor\"] = \"NOXSensor\";\n    ScryptedInterface[\"CO2Sensor\"] = \"CO2Sensor\";\n    ScryptedInterface[\"AirQualitySensor\"] = \"AirQualitySensor\";\n    ScryptedInterface[\"AirPurifier\"] = \"AirPurifier\";\n    ScryptedInterface[\"FilterMaintenance\"] = \"FilterMaintenance\";\n    ScryptedInterface[\"Readme\"] = \"Readme\";\n    ScryptedInterface[\"OauthClient\"] = \"OauthClient\";\n    ScryptedInterface[\"MixinProvider\"] = \"MixinProvider\";\n    ScryptedInterface[\"HttpRequestHandler\"] = \"HttpRequestHandler\";\n    ScryptedInterface[\"EngineIOHandler\"] = \"EngineIOHandler\";\n    ScryptedInterface[\"PushHandler\"] = \"PushHandler\";\n    ScryptedInterface[\"Program\"] = \"Program\";\n    ScryptedInterface[\"Scriptable\"] = \"Scriptable\";\n    ScryptedInterface[\"ObjectTracker\"] = \"ObjectTracker\";\n    ScryptedInterface[\"ObjectDetector\"] = \"ObjectDetector\";\n    ScryptedInterface[\"ObjectDetection\"] = \"ObjectDetection\";\n    ScryptedInterface[\"ObjectDetectionPreview\"] = \"ObjectDetectionPreview\";\n    ScryptedInterface[\"ObjectDetectionGenerator\"] = \"ObjectDetectionGenerator\";\n    ScryptedInterface[\"HumiditySetting\"] = \"HumiditySetting\";\n    ScryptedInterface[\"Fan\"] = \"Fan\";\n    ScryptedInterface[\"RTCSignalingChannel\"] = \"RTCSignalingChannel\";\n    ScryptedInterface[\"RTCSignalingClient\"] = \"RTCSignalingClient\";\n    ScryptedInterface[\"LauncherApplication\"] = \"LauncherApplication\";\n    ScryptedInterface[\"ScryptedUser\"] = \"ScryptedUser\";\n    ScryptedInterface[\"VideoFrameGenerator\"] = \"VideoFrameGenerator\";\n    ScryptedInterface[\"StreamService\"] = \"StreamService\";\n    ScryptedInterface[\"TTY\"] = \"TTY\";\n    ScryptedInterface[\"TTYSettings\"] = \"TTYSettings\";\n    ScryptedInterface[\"ScryptedSystemDevice\"] = \"ScryptedSystemDevice\";\n    ScryptedInterface[\"ScryptedDeviceCreator\"] = \"ScryptedDeviceCreator\";\n    ScryptedInterface[\"ScryptedSettings\"] = \"ScryptedSettings\";\n})(ScryptedInterface || (exports.ScryptedInterface = ScryptedInterface = {}));\nvar ScryptedMimeTypes;\n(function (ScryptedMimeTypes) {\n    ScryptedMimeTypes[\"Url\"] = \"text/x-uri\";\n    ScryptedMimeTypes[\"InsecureLocalUrl\"] = \"text/x-insecure-local-uri\";\n    ScryptedMimeTypes[\"LocalUrl\"] = \"text/x-local-uri\";\n    ScryptedMimeTypes[\"ServerId\"] = \"text/x-server-id\";\n    ScryptedMimeTypes[\"PushEndpoint\"] = \"text/x-push-endpoint\";\n    ScryptedMimeTypes[\"SchemePrefix\"] = \"x-scrypted/x-scrypted-scheme-\";\n    ScryptedMimeTypes[\"MediaStreamUrl\"] = \"text/x-media-url\";\n    ScryptedMimeTypes[\"MediaObject\"] = \"x-scrypted/x-scrypted-media-object\";\n    ScryptedMimeTypes[\"RequestMediaObject\"] = \"x-scrypted/x-scrypted-request-media-object\";\n    ScryptedMimeTypes[\"RequestMediaStream\"] = \"x-scrypted/x-scrypted-request-stream\";\n    ScryptedMimeTypes[\"MediaStreamFeedback\"] = \"x-scrypted/x-media-stream-feedback\";\n    ScryptedMimeTypes[\"FFmpegInput\"] = \"x-scrypted/x-ffmpeg-input\";\n    ScryptedMimeTypes[\"FFmpegTranscodeStream\"] = \"x-scrypted/x-ffmpeg-transcode-stream\";\n    ScryptedMimeTypes[\"RTCSignalingChannel\"] = \"x-scrypted/x-scrypted-rtc-signaling-channel\";\n    ScryptedMimeTypes[\"RTCSignalingSession\"] = \"x-scrypted/x-scrypted-rtc-signaling-session\";\n    ScryptedMimeTypes[\"RTCConnectionManagement\"] = \"x-scrypted/x-scrypted-rtc-connection-management\";\n    ScryptedMimeTypes[\"Image\"] = \"x-scrypted/x-scrypted-image\";\n})(ScryptedMimeTypes || (exports.ScryptedMimeTypes = ScryptedMimeTypes = {}));\n//# sourceMappingURL=index.js.map","/**\n * @author Toru Nagashima <https://github.com/mysticatea>\n * See LICENSE file in root directory for full license.\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\nvar eventTargetShim = require('event-target-shim');\n\n/**\n * The signal class.\n * @see https://dom.spec.whatwg.org/#abortsignal\n */\nclass AbortSignal extends eventTargetShim.EventTarget {\n    /**\n     * AbortSignal cannot be constructed directly.\n     */\n    constructor() {\n        super();\n        throw new TypeError(\"AbortSignal cannot be constructed directly\");\n    }\n    /**\n     * Returns `true` if this `AbortSignal`'s `AbortController` has signaled to abort, and `false` otherwise.\n     */\n    get aborted() {\n        const aborted = abortedFlags.get(this);\n        if (typeof aborted !== \"boolean\") {\n            throw new TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this === null ? \"null\" : typeof this}`);\n        }\n        return aborted;\n    }\n}\neventTargetShim.defineEventAttribute(AbortSignal.prototype, \"abort\");\n/**\n * Create an AbortSignal object.\n */\nfunction createAbortSignal() {\n    const signal = Object.create(AbortSignal.prototype);\n    eventTargetShim.EventTarget.call(signal);\n    abortedFlags.set(signal, false);\n    return signal;\n}\n/**\n * Abort a given signal.\n */\nfunction abortSignal(signal) {\n    if (abortedFlags.get(signal) !== false) {\n        return;\n    }\n    abortedFlags.set(signal, true);\n    signal.dispatchEvent({ type: \"abort\" });\n}\n/**\n * Aborted flag for each instances.\n */\nconst abortedFlags = new WeakMap();\n// Properties should be enumerable.\nObject.defineProperties(AbortSignal.prototype, {\n    aborted: { enumerable: true },\n});\n// `toString()` should return `\"[object AbortSignal]\"`\nif (typeof Symbol === \"function\" && typeof Symbol.toStringTag === \"symbol\") {\n    Object.defineProperty(AbortSignal.prototype, Symbol.toStringTag, {\n        configurable: true,\n        value: \"AbortSignal\",\n    });\n}\n\n/**\n * The AbortController.\n * @see https://dom.spec.whatwg.org/#abortcontroller\n */\nclass AbortController {\n    /**\n     * Initialize this controller.\n     */\n    constructor() {\n        signals.set(this, createAbortSignal());\n    }\n    /**\n     * Returns the `AbortSignal` object associated with this object.\n     */\n    get signal() {\n        return getSignal(this);\n    }\n    /**\n     * Abort and signal to any observers that the associated activity is to be aborted.\n     */\n    abort() {\n        abortSignal(getSignal(this));\n    }\n}\n/**\n * Associated signals.\n */\nconst signals = new WeakMap();\n/**\n * Get the associated signal of a given controller.\n */\nfunction getSignal(controller) {\n    const signal = signals.get(controller);\n    if (signal == null) {\n        throw new TypeError(`Expected 'this' to be an 'AbortController' object, but got ${controller === null ? \"null\" : typeof controller}`);\n    }\n    return signal;\n}\n// Properties should be enumerable.\nObject.defineProperties(AbortController.prototype, {\n    signal: { enumerable: true },\n    abort: { enumerable: true },\n});\nif (typeof Symbol === \"function\" && typeof Symbol.toStringTag === \"symbol\") {\n    Object.defineProperty(AbortController.prototype, Symbol.toStringTag, {\n        configurable: true,\n        value: \"AbortController\",\n    });\n}\n\nexports.AbortController = AbortController;\nexports.AbortSignal = AbortSignal;\nexports.default = AbortController;\n\nmodule.exports = AbortController\nmodule.exports.AbortController = module.exports[\"default\"] = AbortController\nmodule.exports.AbortSignal = AbortSignal\n//# sourceMappingURL=abort-controller.js.map\n","'use strict'\n\nconst { Buffer } = require('buffer')\nconst symbol = Symbol.for('BufferList')\n\nfunction BufferList (buf) {\n  if (!(this instanceof BufferList)) {\n    return new BufferList(buf)\n  }\n\n  BufferList._init.call(this, buf)\n}\n\nBufferList._init = function _init (buf) {\n  Object.defineProperty(this, symbol, { value: true })\n\n  this._bufs = []\n  this.length = 0\n\n  if (buf) {\n    this.append(buf)\n  }\n}\n\nBufferList.prototype._new = function _new (buf) {\n  return new BufferList(buf)\n}\n\nBufferList.prototype._offset = function _offset (offset) {\n  if (offset === 0) {\n    return [0, 0]\n  }\n\n  let tot = 0\n\n  for (let i = 0; i < this._bufs.length; i++) {\n    const _t = tot + this._bufs[i].length\n    if (offset < _t || i === this._bufs.length - 1) {\n      return [i, offset - tot]\n    }\n    tot = _t\n  }\n}\n\nBufferList.prototype._reverseOffset = function (blOffset) {\n  const bufferId = blOffset[0]\n  let offset = blOffset[1]\n\n  for (let i = 0; i < bufferId; i++) {\n    offset += this._bufs[i].length\n  }\n\n  return offset\n}\n\nBufferList.prototype.get = function get (index) {\n  if (index > this.length || index < 0) {\n    return undefined\n  }\n\n  const offset = this._offset(index)\n\n  return this._bufs[offset[0]][offset[1]]\n}\n\nBufferList.prototype.slice = function slice (start, end) {\n  if (typeof start === 'number' && start < 0) {\n    start += this.length\n  }\n\n  if (typeof end === 'number' && end < 0) {\n    end += this.length\n  }\n\n  return this.copy(null, 0, start, end)\n}\n\nBufferList.prototype.copy = function copy (dst, dstStart, srcStart, srcEnd) {\n  if (typeof srcStart !== 'number' || srcStart < 0) {\n    srcStart = 0\n  }\n\n  if (typeof srcEnd !== 'number' || srcEnd > this.length) {\n    srcEnd = this.length\n  }\n\n  if (srcStart >= this.length) {\n    return dst || Buffer.alloc(0)\n  }\n\n  if (srcEnd <= 0) {\n    return dst || Buffer.alloc(0)\n  }\n\n  const copy = !!dst\n  const off = this._offset(srcStart)\n  const len = srcEnd - srcStart\n  let bytes = len\n  let bufoff = (copy && dstStart) || 0\n  let start = off[1]\n\n  // copy/slice everything\n  if (srcStart === 0 && srcEnd === this.length) {\n    if (!copy) {\n      // slice, but full concat if multiple buffers\n      return this._bufs.length === 1\n        ? this._bufs[0]\n        : Buffer.concat(this._bufs, this.length)\n    }\n\n    // copy, need to copy individual buffers\n    for (let i = 0; i < this._bufs.length; i++) {\n      this._bufs[i].copy(dst, bufoff)\n      bufoff += this._bufs[i].length\n    }\n\n    return dst\n  }\n\n  // easy, cheap case where it's a subset of one of the buffers\n  if (bytes <= this._bufs[off[0]].length - start) {\n    return copy\n      ? this._bufs[off[0]].copy(dst, dstStart, start, start + bytes)\n      : this._bufs[off[0]].slice(start, start + bytes)\n  }\n\n  if (!copy) {\n    // a slice, we need something to copy in to\n    dst = Buffer.allocUnsafe(len)\n  }\n\n  for (let i = off[0]; i < this._bufs.length; i++) {\n    const l = this._bufs[i].length - start\n\n    if (bytes > l) {\n      this._bufs[i].copy(dst, bufoff, start)\n      bufoff += l\n    } else {\n      this._bufs[i].copy(dst, bufoff, start, start + bytes)\n      bufoff += l\n      break\n    }\n\n    bytes -= l\n\n    if (start) {\n      start = 0\n    }\n  }\n\n  // safeguard so that we don't return uninitialized memory\n  if (dst.length > bufoff) return dst.slice(0, bufoff)\n\n  return dst\n}\n\nBufferList.prototype.shallowSlice = function shallowSlice (start, end) {\n  start = start || 0\n  end = typeof end !== 'number' ? this.length : end\n\n  if (start < 0) {\n    start += this.length\n  }\n\n  if (end < 0) {\n    end += this.length\n  }\n\n  if (start === end) {\n    return this._new()\n  }\n\n  const startOffset = this._offset(start)\n  const endOffset = this._offset(end)\n  const buffers = this._bufs.slice(startOffset[0], endOffset[0] + 1)\n\n  if (endOffset[1] === 0) {\n    buffers.pop()\n  } else {\n    buffers[buffers.length - 1] = buffers[buffers.length - 1].slice(0, endOffset[1])\n  }\n\n  if (startOffset[1] !== 0) {\n    buffers[0] = buffers[0].slice(startOffset[1])\n  }\n\n  return this._new(buffers)\n}\n\nBufferList.prototype.toString = function toString (encoding, start, end) {\n  return this.slice(start, end).toString(encoding)\n}\n\nBufferList.prototype.consume = function consume (bytes) {\n  // first, normalize the argument, in accordance with how Buffer does it\n  bytes = Math.trunc(bytes)\n  // do nothing if not a positive number\n  if (Number.isNaN(bytes) || bytes <= 0) return this\n\n  while (this._bufs.length) {\n    if (bytes >= this._bufs[0].length) {\n      bytes -= this._bufs[0].length\n      this.length -= this._bufs[0].length\n      this._bufs.shift()\n    } else {\n      this._bufs[0] = this._bufs[0].slice(bytes)\n      this.length -= bytes\n      break\n    }\n  }\n\n  return this\n}\n\nBufferList.prototype.duplicate = function duplicate () {\n  const copy = this._new()\n\n  for (let i = 0; i < this._bufs.length; i++) {\n    copy.append(this._bufs[i])\n  }\n\n  return copy\n}\n\nBufferList.prototype.append = function append (buf) {\n  if (buf == null) {\n    return this\n  }\n\n  if (buf.buffer) {\n    // append a view of the underlying ArrayBuffer\n    this._appendBuffer(Buffer.from(buf.buffer, buf.byteOffset, buf.byteLength))\n  } else if (Array.isArray(buf)) {\n    for (let i = 0; i < buf.length; i++) {\n      this.append(buf[i])\n    }\n  } else if (this._isBufferList(buf)) {\n    // unwrap argument into individual BufferLists\n    for (let i = 0; i < buf._bufs.length; i++) {\n      this.append(buf._bufs[i])\n    }\n  } else {\n    // coerce number arguments to strings, since Buffer(number) does\n    // uninitialized memory allocation\n    if (typeof buf === 'number') {\n      buf = buf.toString()\n    }\n\n    this._appendBuffer(Buffer.from(buf))\n  }\n\n  return this\n}\n\nBufferList.prototype._appendBuffer = function appendBuffer (buf) {\n  this._bufs.push(buf)\n  this.length += buf.length\n}\n\nBufferList.prototype.indexOf = function (search, offset, encoding) {\n  if (encoding === undefined && typeof offset === 'string') {\n    encoding = offset\n    offset = undefined\n  }\n\n  if (typeof search === 'function' || Array.isArray(search)) {\n    throw new TypeError('The \"value\" argument must be one of type string, Buffer, BufferList, or Uint8Array.')\n  } else if (typeof search === 'number') {\n    search = Buffer.from([search])\n  } else if (typeof search === 'string') {\n    search = Buffer.from(search, encoding)\n  } else if (this._isBufferList(search)) {\n    search = search.slice()\n  } else if (Array.isArray(search.buffer)) {\n    search = Buffer.from(search.buffer, search.byteOffset, search.byteLength)\n  } else if (!Buffer.isBuffer(search)) {\n    search = Buffer.from(search)\n  }\n\n  offset = Number(offset || 0)\n\n  if (isNaN(offset)) {\n    offset = 0\n  }\n\n  if (offset < 0) {\n    offset = this.length + offset\n  }\n\n  if (offset < 0) {\n    offset = 0\n  }\n\n  if (search.length === 0) {\n    return offset > this.length ? this.length : offset\n  }\n\n  const blOffset = this._offset(offset)\n  let blIndex = blOffset[0] // index of which internal buffer we're working on\n  let buffOffset = blOffset[1] // offset of the internal buffer we're working on\n\n  // scan over each buffer\n  for (; blIndex < this._bufs.length; blIndex++) {\n    const buff = this._bufs[blIndex]\n\n    while (buffOffset < buff.length) {\n      const availableWindow = buff.length - buffOffset\n\n      if (availableWindow >= search.length) {\n        const nativeSearchResult = buff.indexOf(search, buffOffset)\n\n        if (nativeSearchResult !== -1) {\n          return this._reverseOffset([blIndex, nativeSearchResult])\n        }\n\n        buffOffset = buff.length - search.length + 1 // end of native search window\n      } else {\n        const revOffset = this._reverseOffset([blIndex, buffOffset])\n\n        if (this._match(revOffset, search)) {\n          return revOffset\n        }\n\n        buffOffset++\n      }\n    }\n\n    buffOffset = 0\n  }\n\n  return -1\n}\n\nBufferList.prototype._match = function (offset, search) {\n  if (this.length - offset < search.length) {\n    return false\n  }\n\n  for (let searchOffset = 0; searchOffset < search.length; searchOffset++) {\n    if (this.get(offset + searchOffset) !== search[searchOffset]) {\n      return false\n    }\n  }\n  return true\n}\n\n;(function () {\n  const methods = {\n    readDoubleBE: 8,\n    readDoubleLE: 8,\n    readFloatBE: 4,\n    readFloatLE: 4,\n    readBigInt64BE: 8,\n    readBigInt64LE: 8,\n    readBigUInt64BE: 8,\n    readBigUInt64LE: 8,\n    readInt32BE: 4,\n    readInt32LE: 4,\n    readUInt32BE: 4,\n    readUInt32LE: 4,\n    readInt16BE: 2,\n    readInt16LE: 2,\n    readUInt16BE: 2,\n    readUInt16LE: 2,\n    readInt8: 1,\n    readUInt8: 1,\n    readIntBE: null,\n    readIntLE: null,\n    readUIntBE: null,\n    readUIntLE: null\n  }\n\n  for (const m in methods) {\n    (function (m) {\n      if (methods[m] === null) {\n        BufferList.prototype[m] = function (offset, byteLength) {\n          return this.slice(offset, offset + byteLength)[m](0, byteLength)\n        }\n      } else {\n        BufferList.prototype[m] = function (offset = 0) {\n          return this.slice(offset, offset + methods[m])[m](0)\n        }\n      }\n    }(m))\n  }\n}())\n\n// Used internally by the class and also as an indicator of this object being\n// a `BufferList`. It's not possible to use `instanceof BufferList` in a browser\n// environment because there could be multiple different copies of the\n// BufferList class and some `BufferList`s might be `BufferList`s.\nBufferList.prototype._isBufferList = function _isBufferList (b) {\n  return b instanceof BufferList || BufferList.isBufferList(b)\n}\n\nBufferList.isBufferList = function isBufferList (b) {\n  return b != null && b[symbol]\n}\n\nmodule.exports = BufferList\n","'use strict'\n\nconst DuplexStream = require('readable-stream').Duplex\nconst inherits = require('inherits')\nconst BufferList = require('./BufferList')\n\nfunction BufferListStream (callback) {\n  if (!(this instanceof BufferListStream)) {\n    return new BufferListStream(callback)\n  }\n\n  if (typeof callback === 'function') {\n    this._callback = callback\n\n    const piper = function piper (err) {\n      if (this._callback) {\n        this._callback(err)\n        this._callback = null\n      }\n    }.bind(this)\n\n    this.on('pipe', function onPipe (src) {\n      src.on('error', piper)\n    })\n    this.on('unpipe', function onUnpipe (src) {\n      src.removeListener('error', piper)\n    })\n\n    callback = null\n  }\n\n  BufferList._init.call(this, callback)\n  DuplexStream.call(this)\n}\n\ninherits(BufferListStream, DuplexStream)\nObject.assign(BufferListStream.prototype, BufferList.prototype)\n\nBufferListStream.prototype._new = function _new (callback) {\n  return new BufferListStream(callback)\n}\n\nBufferListStream.prototype._write = function _write (buf, encoding, callback) {\n  this._appendBuffer(buf)\n\n  if (typeof callback === 'function') {\n    callback()\n  }\n}\n\nBufferListStream.prototype._read = function _read (size) {\n  if (!this.length) {\n    return this.push(null)\n  }\n\n  size = Math.min(size, this.length)\n  this.push(this.slice(0, size))\n  this.consume(size)\n}\n\nBufferListStream.prototype.end = function end (chunk) {\n  DuplexStream.prototype.end.call(this, chunk)\n\n  if (this._callback) {\n    this._callback(null, this.slice())\n    this._callback = null\n  }\n}\n\nBufferListStream.prototype._destroy = function _destroy (err, cb) {\n  this._bufs.length = 0\n  this.length = 0\n  cb(err)\n}\n\nBufferListStream.prototype._isBufferList = function _isBufferList (b) {\n  return b instanceof BufferListStream || b instanceof BufferList || BufferListStream.isBufferList(b)\n}\n\nBufferListStream.isBufferList = BufferList.isBufferList\n\nmodule.exports = BufferListStream\nmodule.exports.BufferListStream = BufferListStream\nmodule.exports.BufferList = BufferList\n","'use strict'\n\nconst { SymbolDispose } = require('../../ours/primordials')\nconst { AbortError, codes } = require('../../ours/errors')\nconst { isNodeStream, isWebStream, kControllerErrorFunction } = require('./utils')\nconst eos = require('./end-of-stream')\nconst { ERR_INVALID_ARG_TYPE } = codes\nlet addAbortListener\n\n// This method is inlined here for readable-stream\n// It also does not allow for signal to not exist on the stream\n// https://github.com/nodejs/node/pull/36061#discussion_r533718029\nconst validateAbortSignal = (signal, name) => {\n  if (typeof signal !== 'object' || !('aborted' in signal)) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'AbortSignal', signal)\n  }\n}\nmodule.exports.addAbortSignal = function addAbortSignal(signal, stream) {\n  validateAbortSignal(signal, 'signal')\n  if (!isNodeStream(stream) && !isWebStream(stream)) {\n    throw new ERR_INVALID_ARG_TYPE('stream', ['ReadableStream', 'WritableStream', 'Stream'], stream)\n  }\n  return module.exports.addAbortSignalNoValidate(signal, stream)\n}\nmodule.exports.addAbortSignalNoValidate = function (signal, stream) {\n  if (typeof signal !== 'object' || !('aborted' in signal)) {\n    return stream\n  }\n  const onAbort = isNodeStream(stream)\n    ? () => {\n        stream.destroy(\n          new AbortError(undefined, {\n            cause: signal.reason\n          })\n        )\n      }\n    : () => {\n        stream[kControllerErrorFunction](\n          new AbortError(undefined, {\n            cause: signal.reason\n          })\n        )\n      }\n  if (signal.aborted) {\n    onAbort()\n  } else {\n    addAbortListener = addAbortListener || require('../../ours/util').addAbortListener\n    const disposable = addAbortListener(signal, onAbort)\n    eos(stream, disposable[SymbolDispose])\n  }\n  return stream\n}\n","'use strict'\n\nconst { StringPrototypeSlice, SymbolIterator, TypedArrayPrototypeSet, Uint8Array } = require('../../ours/primordials')\nconst { Buffer } = require('buffer')\nconst { inspect } = require('../../ours/util')\nmodule.exports = class BufferList {\n  constructor() {\n    this.head = null\n    this.tail = null\n    this.length = 0\n  }\n  push(v) {\n    const entry = {\n      data: v,\n      next: null\n    }\n    if (this.length > 0) this.tail.next = entry\n    else this.head = entry\n    this.tail = entry\n    ++this.length\n  }\n  unshift(v) {\n    const entry = {\n      data: v,\n      next: this.head\n    }\n    if (this.length === 0) this.tail = entry\n    this.head = entry\n    ++this.length\n  }\n  shift() {\n    if (this.length === 0) return\n    const ret = this.head.data\n    if (this.length === 1) this.head = this.tail = null\n    else this.head = this.head.next\n    --this.length\n    return ret\n  }\n  clear() {\n    this.head = this.tail = null\n    this.length = 0\n  }\n  join(s) {\n    if (this.length === 0) return ''\n    let p = this.head\n    let ret = '' + p.data\n    while ((p = p.next) !== null) ret += s + p.data\n    return ret\n  }\n  concat(n) {\n    if (this.length === 0) return Buffer.alloc(0)\n    const ret = Buffer.allocUnsafe(n >>> 0)\n    let p = this.head\n    let i = 0\n    while (p) {\n      TypedArrayPrototypeSet(ret, p.data, i)\n      i += p.data.length\n      p = p.next\n    }\n    return ret\n  }\n\n  // Consumes a specified amount of bytes or characters from the buffered data.\n  consume(n, hasStrings) {\n    const data = this.head.data\n    if (n < data.length) {\n      // `slice` is the same for buffers and strings.\n      const slice = data.slice(0, n)\n      this.head.data = data.slice(n)\n      return slice\n    }\n    if (n === data.length) {\n      // First chunk is a perfect match.\n      return this.shift()\n    }\n    // Result spans more than one buffer.\n    return hasStrings ? this._getString(n) : this._getBuffer(n)\n  }\n  first() {\n    return this.head.data\n  }\n  *[SymbolIterator]() {\n    for (let p = this.head; p; p = p.next) {\n      yield p.data\n    }\n  }\n\n  // Consumes a specified amount of characters from the buffered data.\n  _getString(n) {\n    let ret = ''\n    let p = this.head\n    let c = 0\n    do {\n      const str = p.data\n      if (n > str.length) {\n        ret += str\n        n -= str.length\n      } else {\n        if (n === str.length) {\n          ret += str\n          ++c\n          if (p.next) this.head = p.next\n          else this.head = this.tail = null\n        } else {\n          ret += StringPrototypeSlice(str, 0, n)\n          this.head = p\n          p.data = StringPrototypeSlice(str, n)\n        }\n        break\n      }\n      ++c\n    } while ((p = p.next) !== null)\n    this.length -= c\n    return ret\n  }\n\n  // Consumes a specified amount of bytes from the buffered data.\n  _getBuffer(n) {\n    const ret = Buffer.allocUnsafe(n)\n    const retLen = n\n    let p = this.head\n    let c = 0\n    do {\n      const buf = p.data\n      if (n > buf.length) {\n        TypedArrayPrototypeSet(ret, buf, retLen - n)\n        n -= buf.length\n      } else {\n        if (n === buf.length) {\n          TypedArrayPrototypeSet(ret, buf, retLen - n)\n          ++c\n          if (p.next) this.head = p.next\n          else this.head = this.tail = null\n        } else {\n          TypedArrayPrototypeSet(ret, new Uint8Array(buf.buffer, buf.byteOffset, n), retLen - n)\n          this.head = p\n          p.data = buf.slice(n)\n        }\n        break\n      }\n      ++c\n    } while ((p = p.next) !== null)\n    this.length -= c\n    return ret\n  }\n\n  // Make sure the linked list only shows the minimal necessary information.\n  [Symbol.for('nodejs.util.inspect.custom')](_, options) {\n    return inspect(this, {\n      ...options,\n      // Only inspect one level.\n      depth: 0,\n      // It should not recurse.\n      customInspect: false\n    })\n  }\n}\n","'use strict'\n\nconst { pipeline } = require('./pipeline')\nconst Duplex = require('./duplex')\nconst { destroyer } = require('./destroy')\nconst {\n  isNodeStream,\n  isReadable,\n  isWritable,\n  isWebStream,\n  isTransformStream,\n  isWritableStream,\n  isReadableStream\n} = require('./utils')\nconst {\n  AbortError,\n  codes: { ERR_INVALID_ARG_VALUE, ERR_MISSING_ARGS }\n} = require('../../ours/errors')\nconst eos = require('./end-of-stream')\nmodule.exports = function compose(...streams) {\n  if (streams.length === 0) {\n    throw new ERR_MISSING_ARGS('streams')\n  }\n  if (streams.length === 1) {\n    return Duplex.from(streams[0])\n  }\n  const orgStreams = [...streams]\n  if (typeof streams[0] === 'function') {\n    streams[0] = Duplex.from(streams[0])\n  }\n  if (typeof streams[streams.length - 1] === 'function') {\n    const idx = streams.length - 1\n    streams[idx] = Duplex.from(streams[idx])\n  }\n  for (let n = 0; n < streams.length; ++n) {\n    if (!isNodeStream(streams[n]) && !isWebStream(streams[n])) {\n      // TODO(ronag): Add checks for non streams.\n      continue\n    }\n    if (\n      n < streams.length - 1 &&\n      !(isReadable(streams[n]) || isReadableStream(streams[n]) || isTransformStream(streams[n]))\n    ) {\n      throw new ERR_INVALID_ARG_VALUE(`streams[${n}]`, orgStreams[n], 'must be readable')\n    }\n    if (n > 0 && !(isWritable(streams[n]) || isWritableStream(streams[n]) || isTransformStream(streams[n]))) {\n      throw new ERR_INVALID_ARG_VALUE(`streams[${n}]`, orgStreams[n], 'must be writable')\n    }\n  }\n  let ondrain\n  let onfinish\n  let onreadable\n  let onclose\n  let d\n  function onfinished(err) {\n    const cb = onclose\n    onclose = null\n    if (cb) {\n      cb(err)\n    } else if (err) {\n      d.destroy(err)\n    } else if (!readable && !writable) {\n      d.destroy()\n    }\n  }\n  const head = streams[0]\n  const tail = pipeline(streams, onfinished)\n  const writable = !!(isWritable(head) || isWritableStream(head) || isTransformStream(head))\n  const readable = !!(isReadable(tail) || isReadableStream(tail) || isTransformStream(tail))\n\n  // TODO(ronag): Avoid double buffering.\n  // Implement Writable/Readable/Duplex traits.\n  // See, https://github.com/nodejs/node/pull/33515.\n  d = new Duplex({\n    // TODO (ronag): highWaterMark?\n    writableObjectMode: !!(head !== null && head !== undefined && head.writableObjectMode),\n    readableObjectMode: !!(tail !== null && tail !== undefined && tail.readableObjectMode),\n    writable,\n    readable\n  })\n  if (writable) {\n    if (isNodeStream(head)) {\n      d._write = function (chunk, encoding, callback) {\n        if (head.write(chunk, encoding)) {\n          callback()\n        } else {\n          ondrain = callback\n        }\n      }\n      d._final = function (callback) {\n        head.end()\n        onfinish = callback\n      }\n      head.on('drain', function () {\n        if (ondrain) {\n          const cb = ondrain\n          ondrain = null\n          cb()\n        }\n      })\n    } else if (isWebStream(head)) {\n      const writable = isTransformStream(head) ? head.writable : head\n      const writer = writable.getWriter()\n      d._write = async function (chunk, encoding, callback) {\n        try {\n          await writer.ready\n          writer.write(chunk).catch(() => {})\n          callback()\n        } catch (err) {\n          callback(err)\n        }\n      }\n      d._final = async function (callback) {\n        try {\n          await writer.ready\n          writer.close().catch(() => {})\n          onfinish = callback\n        } catch (err) {\n          callback(err)\n        }\n      }\n    }\n    const toRead = isTransformStream(tail) ? tail.readable : tail\n    eos(toRead, () => {\n      if (onfinish) {\n        const cb = onfinish\n        onfinish = null\n        cb()\n      }\n    })\n  }\n  if (readable) {\n    if (isNodeStream(tail)) {\n      tail.on('readable', function () {\n        if (onreadable) {\n          const cb = onreadable\n          onreadable = null\n          cb()\n        }\n      })\n      tail.on('end', function () {\n        d.push(null)\n      })\n      d._read = function () {\n        while (true) {\n          const buf = tail.read()\n          if (buf === null) {\n            onreadable = d._read\n            return\n          }\n          if (!d.push(buf)) {\n            return\n          }\n        }\n      }\n    } else if (isWebStream(tail)) {\n      const readable = isTransformStream(tail) ? tail.readable : tail\n      const reader = readable.getReader()\n      d._read = async function () {\n        while (true) {\n          try {\n            const { value, done } = await reader.read()\n            if (!d.push(value)) {\n              return\n            }\n            if (done) {\n              d.push(null)\n              return\n            }\n          } catch {\n            return\n          }\n        }\n      }\n    }\n  }\n  d._destroy = function (err, callback) {\n    if (!err && onclose !== null) {\n      err = new AbortError()\n    }\n    onreadable = null\n    ondrain = null\n    onfinish = null\n    if (onclose === null) {\n      callback(err)\n    } else {\n      onclose = callback\n      if (isNodeStream(tail)) {\n        destroyer(tail, err)\n      }\n    }\n  }\n  return d\n}\n","'use strict'\n\n/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n\nconst {\n  aggregateTwoErrors,\n  codes: { ERR_MULTIPLE_CALLBACK },\n  AbortError\n} = require('../../ours/errors')\nconst { Symbol } = require('../../ours/primordials')\nconst { kIsDestroyed, isDestroyed, isFinished, isServerRequest } = require('./utils')\nconst kDestroy = Symbol('kDestroy')\nconst kConstruct = Symbol('kConstruct')\nfunction checkError(err, w, r) {\n  if (err) {\n    // Avoid V8 leak, https://github.com/nodejs/node/pull/34103#issuecomment-652002364\n    err.stack // eslint-disable-line no-unused-expressions\n\n    if (w && !w.errored) {\n      w.errored = err\n    }\n    if (r && !r.errored) {\n      r.errored = err\n    }\n  }\n}\n\n// Backwards compat. cb() is undocumented and unused in core but\n// unfortunately might be used by modules.\nfunction destroy(err, cb) {\n  const r = this._readableState\n  const w = this._writableState\n  // With duplex streams we use the writable side for state.\n  const s = w || r\n  if ((w !== null && w !== undefined && w.destroyed) || (r !== null && r !== undefined && r.destroyed)) {\n    if (typeof cb === 'function') {\n      cb()\n    }\n    return this\n  }\n\n  // We set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n  checkError(err, w, r)\n  if (w) {\n    w.destroyed = true\n  }\n  if (r) {\n    r.destroyed = true\n  }\n\n  // If still constructing then defer calling _destroy.\n  if (!s.constructed) {\n    this.once(kDestroy, function (er) {\n      _destroy(this, aggregateTwoErrors(er, err), cb)\n    })\n  } else {\n    _destroy(this, err, cb)\n  }\n  return this\n}\nfunction _destroy(self, err, cb) {\n  let called = false\n  function onDestroy(err) {\n    if (called) {\n      return\n    }\n    called = true\n    const r = self._readableState\n    const w = self._writableState\n    checkError(err, w, r)\n    if (w) {\n      w.closed = true\n    }\n    if (r) {\n      r.closed = true\n    }\n    if (typeof cb === 'function') {\n      cb(err)\n    }\n    if (err) {\n      process.nextTick(emitErrorCloseNT, self, err)\n    } else {\n      process.nextTick(emitCloseNT, self)\n    }\n  }\n  try {\n    self._destroy(err || null, onDestroy)\n  } catch (err) {\n    onDestroy(err)\n  }\n}\nfunction emitErrorCloseNT(self, err) {\n  emitErrorNT(self, err)\n  emitCloseNT(self)\n}\nfunction emitCloseNT(self) {\n  const r = self._readableState\n  const w = self._writableState\n  if (w) {\n    w.closeEmitted = true\n  }\n  if (r) {\n    r.closeEmitted = true\n  }\n  if ((w !== null && w !== undefined && w.emitClose) || (r !== null && r !== undefined && r.emitClose)) {\n    self.emit('close')\n  }\n}\nfunction emitErrorNT(self, err) {\n  const r = self._readableState\n  const w = self._writableState\n  if ((w !== null && w !== undefined && w.errorEmitted) || (r !== null && r !== undefined && r.errorEmitted)) {\n    return\n  }\n  if (w) {\n    w.errorEmitted = true\n  }\n  if (r) {\n    r.errorEmitted = true\n  }\n  self.emit('error', err)\n}\nfunction undestroy() {\n  const r = this._readableState\n  const w = this._writableState\n  if (r) {\n    r.constructed = true\n    r.closed = false\n    r.closeEmitted = false\n    r.destroyed = false\n    r.errored = null\n    r.errorEmitted = false\n    r.reading = false\n    r.ended = r.readable === false\n    r.endEmitted = r.readable === false\n  }\n  if (w) {\n    w.constructed = true\n    w.destroyed = false\n    w.closed = false\n    w.closeEmitted = false\n    w.errored = null\n    w.errorEmitted = false\n    w.finalCalled = false\n    w.prefinished = false\n    w.ended = w.writable === false\n    w.ending = w.writable === false\n    w.finished = w.writable === false\n  }\n}\nfunction errorOrDestroy(stream, err, sync) {\n  // We have tests that rely on errors being emitted\n  // in the same tick, so changing this is semver major.\n  // For now when you opt-in to autoDestroy we allow\n  // the error to be emitted nextTick. In a future\n  // semver major update we should change the default to this.\n\n  const r = stream._readableState\n  const w = stream._writableState\n  if ((w !== null && w !== undefined && w.destroyed) || (r !== null && r !== undefined && r.destroyed)) {\n    return this\n  }\n  if ((r !== null && r !== undefined && r.autoDestroy) || (w !== null && w !== undefined && w.autoDestroy))\n    stream.destroy(err)\n  else if (err) {\n    // Avoid V8 leak, https://github.com/nodejs/node/pull/34103#issuecomment-652002364\n    err.stack // eslint-disable-line no-unused-expressions\n\n    if (w && !w.errored) {\n      w.errored = err\n    }\n    if (r && !r.errored) {\n      r.errored = err\n    }\n    if (sync) {\n      process.nextTick(emitErrorNT, stream, err)\n    } else {\n      emitErrorNT(stream, err)\n    }\n  }\n}\nfunction construct(stream, cb) {\n  if (typeof stream._construct !== 'function') {\n    return\n  }\n  const r = stream._readableState\n  const w = stream._writableState\n  if (r) {\n    r.constructed = false\n  }\n  if (w) {\n    w.constructed = false\n  }\n  stream.once(kConstruct, cb)\n  if (stream.listenerCount(kConstruct) > 1) {\n    // Duplex\n    return\n  }\n  process.nextTick(constructNT, stream)\n}\nfunction constructNT(stream) {\n  let called = false\n  function onConstruct(err) {\n    if (called) {\n      errorOrDestroy(stream, err !== null && err !== undefined ? err : new ERR_MULTIPLE_CALLBACK())\n      return\n    }\n    called = true\n    const r = stream._readableState\n    const w = stream._writableState\n    const s = w || r\n    if (r) {\n      r.constructed = true\n    }\n    if (w) {\n      w.constructed = true\n    }\n    if (s.destroyed) {\n      stream.emit(kDestroy, err)\n    } else if (err) {\n      errorOrDestroy(stream, err, true)\n    } else {\n      process.nextTick(emitConstructNT, stream)\n    }\n  }\n  try {\n    stream._construct((err) => {\n      process.nextTick(onConstruct, err)\n    })\n  } catch (err) {\n    process.nextTick(onConstruct, err)\n  }\n}\nfunction emitConstructNT(stream) {\n  stream.emit(kConstruct)\n}\nfunction isRequest(stream) {\n  return (stream === null || stream === undefined ? undefined : stream.setHeader) && typeof stream.abort === 'function'\n}\nfunction emitCloseLegacy(stream) {\n  stream.emit('close')\n}\nfunction emitErrorCloseLegacy(stream, err) {\n  stream.emit('error', err)\n  process.nextTick(emitCloseLegacy, stream)\n}\n\n// Normalize destroy for legacy.\nfunction destroyer(stream, err) {\n  if (!stream || isDestroyed(stream)) {\n    return\n  }\n  if (!err && !isFinished(stream)) {\n    err = new AbortError()\n  }\n\n  // TODO: Remove isRequest branches.\n  if (isServerRequest(stream)) {\n    stream.socket = null\n    stream.destroy(err)\n  } else if (isRequest(stream)) {\n    stream.abort()\n  } else if (isRequest(stream.req)) {\n    stream.req.abort()\n  } else if (typeof stream.destroy === 'function') {\n    stream.destroy(err)\n  } else if (typeof stream.close === 'function') {\n    // TODO: Don't lose err?\n    stream.close()\n  } else if (err) {\n    process.nextTick(emitErrorCloseLegacy, stream, err)\n  } else {\n    process.nextTick(emitCloseLegacy, stream)\n  }\n  if (!stream.destroyed) {\n    stream[kIsDestroyed] = true\n  }\n}\nmodule.exports = {\n  construct,\n  destroyer,\n  destroy,\n  undestroy,\n  errorOrDestroy\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototype inheritance, this class\n// prototypically inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict'\n\nconst {\n  ObjectDefineProperties,\n  ObjectGetOwnPropertyDescriptor,\n  ObjectKeys,\n  ObjectSetPrototypeOf\n} = require('../../ours/primordials')\nmodule.exports = Duplex\nconst Readable = require('./readable')\nconst Writable = require('./writable')\nObjectSetPrototypeOf(Duplex.prototype, Readable.prototype)\nObjectSetPrototypeOf(Duplex, Readable)\n{\n  const keys = ObjectKeys(Writable.prototype)\n  // Allow the keys array to be GC'ed.\n  for (let i = 0; i < keys.length; i++) {\n    const method = keys[i]\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method]\n  }\n}\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options)\n  Readable.call(this, options)\n  Writable.call(this, options)\n  if (options) {\n    this.allowHalfOpen = options.allowHalfOpen !== false\n    if (options.readable === false) {\n      this._readableState.readable = false\n      this._readableState.ended = true\n      this._readableState.endEmitted = true\n    }\n    if (options.writable === false) {\n      this._writableState.writable = false\n      this._writableState.ending = true\n      this._writableState.ended = true\n      this._writableState.finished = true\n    }\n  } else {\n    this.allowHalfOpen = true\n  }\n}\nObjectDefineProperties(Duplex.prototype, {\n  writable: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writable')\n  },\n  writableHighWaterMark: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableHighWaterMark')\n  },\n  writableObjectMode: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableObjectMode')\n  },\n  writableBuffer: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableBuffer')\n  },\n  writableLength: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableLength')\n  },\n  writableFinished: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableFinished')\n  },\n  writableCorked: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableCorked')\n  },\n  writableEnded: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableEnded')\n  },\n  writableNeedDrain: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableNeedDrain')\n  },\n  destroyed: {\n    __proto__: null,\n    get() {\n      if (this._readableState === undefined || this._writableState === undefined) {\n        return false\n      }\n      return this._readableState.destroyed && this._writableState.destroyed\n    },\n    set(value) {\n      // Backward compatibility, the user is explicitly\n      // managing destroyed.\n      if (this._readableState && this._writableState) {\n        this._readableState.destroyed = value\n        this._writableState.destroyed = value\n      }\n    }\n  }\n})\nlet webStreamsAdapters\n\n// Lazy to avoid circular references\nfunction lazyWebStreams() {\n  if (webStreamsAdapters === undefined) webStreamsAdapters = {}\n  return webStreamsAdapters\n}\nDuplex.fromWeb = function (pair, options) {\n  return lazyWebStreams().newStreamDuplexFromReadableWritablePair(pair, options)\n}\nDuplex.toWeb = function (duplex) {\n  return lazyWebStreams().newReadableWritablePairFromDuplex(duplex)\n}\nlet duplexify\nDuplex.from = function (body) {\n  if (!duplexify) {\n    duplexify = require('./duplexify')\n  }\n  return duplexify(body, 'body')\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n\n;('use strict')\nconst bufferModule = require('buffer')\nconst {\n  isReadable,\n  isWritable,\n  isIterable,\n  isNodeStream,\n  isReadableNodeStream,\n  isWritableNodeStream,\n  isDuplexNodeStream,\n  isReadableStream,\n  isWritableStream\n} = require('./utils')\nconst eos = require('./end-of-stream')\nconst {\n  AbortError,\n  codes: { ERR_INVALID_ARG_TYPE, ERR_INVALID_RETURN_VALUE }\n} = require('../../ours/errors')\nconst { destroyer } = require('./destroy')\nconst Duplex = require('./duplex')\nconst Readable = require('./readable')\nconst Writable = require('./writable')\nconst { createDeferredPromise } = require('../../ours/util')\nconst from = require('./from')\nconst Blob = globalThis.Blob || bufferModule.Blob\nconst isBlob =\n  typeof Blob !== 'undefined'\n    ? function isBlob(b) {\n        return b instanceof Blob\n      }\n    : function isBlob(b) {\n        return false\n      }\nconst AbortController = globalThis.AbortController || require('abort-controller').AbortController\nconst { FunctionPrototypeCall } = require('../../ours/primordials')\n\n// This is needed for pre node 17.\nclass Duplexify extends Duplex {\n  constructor(options) {\n    super(options)\n\n    // https://github.com/nodejs/node/pull/34385\n\n    if ((options === null || options === undefined ? undefined : options.readable) === false) {\n      this._readableState.readable = false\n      this._readableState.ended = true\n      this._readableState.endEmitted = true\n    }\n    if ((options === null || options === undefined ? undefined : options.writable) === false) {\n      this._writableState.writable = false\n      this._writableState.ending = true\n      this._writableState.ended = true\n      this._writableState.finished = true\n    }\n  }\n}\nmodule.exports = function duplexify(body, name) {\n  if (isDuplexNodeStream(body)) {\n    return body\n  }\n  if (isReadableNodeStream(body)) {\n    return _duplexify({\n      readable: body\n    })\n  }\n  if (isWritableNodeStream(body)) {\n    return _duplexify({\n      writable: body\n    })\n  }\n  if (isNodeStream(body)) {\n    return _duplexify({\n      writable: false,\n      readable: false\n    })\n  }\n  if (isReadableStream(body)) {\n    return _duplexify({\n      readable: Readable.fromWeb(body)\n    })\n  }\n  if (isWritableStream(body)) {\n    return _duplexify({\n      writable: Writable.fromWeb(body)\n    })\n  }\n  if (typeof body === 'function') {\n    const { value, write, final, destroy } = fromAsyncGen(body)\n    if (isIterable(value)) {\n      return from(Duplexify, value, {\n        // TODO (ronag): highWaterMark?\n        objectMode: true,\n        write,\n        final,\n        destroy\n      })\n    }\n    const then = value === null || value === undefined ? undefined : value.then\n    if (typeof then === 'function') {\n      let d\n      const promise = FunctionPrototypeCall(\n        then,\n        value,\n        (val) => {\n          if (val != null) {\n            throw new ERR_INVALID_RETURN_VALUE('nully', 'body', val)\n          }\n        },\n        (err) => {\n          destroyer(d, err)\n        }\n      )\n      return (d = new Duplexify({\n        // TODO (ronag): highWaterMark?\n        objectMode: true,\n        readable: false,\n        write,\n        final(cb) {\n          final(async () => {\n            try {\n              await promise\n              process.nextTick(cb, null)\n            } catch (err) {\n              process.nextTick(cb, err)\n            }\n          })\n        },\n        destroy\n      }))\n    }\n    throw new ERR_INVALID_RETURN_VALUE('Iterable, AsyncIterable or AsyncFunction', name, value)\n  }\n  if (isBlob(body)) {\n    return duplexify(body.arrayBuffer())\n  }\n  if (isIterable(body)) {\n    return from(Duplexify, body, {\n      // TODO (ronag): highWaterMark?\n      objectMode: true,\n      writable: false\n    })\n  }\n  if (\n    isReadableStream(body === null || body === undefined ? undefined : body.readable) &&\n    isWritableStream(body === null || body === undefined ? undefined : body.writable)\n  ) {\n    return Duplexify.fromWeb(body)\n  }\n  if (\n    typeof (body === null || body === undefined ? undefined : body.writable) === 'object' ||\n    typeof (body === null || body === undefined ? undefined : body.readable) === 'object'\n  ) {\n    const readable =\n      body !== null && body !== undefined && body.readable\n        ? isReadableNodeStream(body === null || body === undefined ? undefined : body.readable)\n          ? body === null || body === undefined\n            ? undefined\n            : body.readable\n          : duplexify(body.readable)\n        : undefined\n    const writable =\n      body !== null && body !== undefined && body.writable\n        ? isWritableNodeStream(body === null || body === undefined ? undefined : body.writable)\n          ? body === null || body === undefined\n            ? undefined\n            : body.writable\n          : duplexify(body.writable)\n        : undefined\n    return _duplexify({\n      readable,\n      writable\n    })\n  }\n  const then = body === null || body === undefined ? undefined : body.then\n  if (typeof then === 'function') {\n    let d\n    FunctionPrototypeCall(\n      then,\n      body,\n      (val) => {\n        if (val != null) {\n          d.push(val)\n        }\n        d.push(null)\n      },\n      (err) => {\n        destroyer(d, err)\n      }\n    )\n    return (d = new Duplexify({\n      objectMode: true,\n      writable: false,\n      read() {}\n    }))\n  }\n  throw new ERR_INVALID_ARG_TYPE(\n    name,\n    [\n      'Blob',\n      'ReadableStream',\n      'WritableStream',\n      'Stream',\n      'Iterable',\n      'AsyncIterable',\n      'Function',\n      '{ readable, writable } pair',\n      'Promise'\n    ],\n    body\n  )\n}\nfunction fromAsyncGen(fn) {\n  let { promise, resolve } = createDeferredPromise()\n  const ac = new AbortController()\n  const signal = ac.signal\n  const value = fn(\n    (async function* () {\n      while (true) {\n        const _promise = promise\n        promise = null\n        const { chunk, done, cb } = await _promise\n        process.nextTick(cb)\n        if (done) return\n        if (signal.aborted)\n          throw new AbortError(undefined, {\n            cause: signal.reason\n          })\n        ;({ promise, resolve } = createDeferredPromise())\n        yield chunk\n      }\n    })(),\n    {\n      signal\n    }\n  )\n  return {\n    value,\n    write(chunk, encoding, cb) {\n      const _resolve = resolve\n      resolve = null\n      _resolve({\n        chunk,\n        done: false,\n        cb\n      })\n    },\n    final(cb) {\n      const _resolve = resolve\n      resolve = null\n      _resolve({\n        done: true,\n        cb\n      })\n    },\n    destroy(err, cb) {\n      ac.abort()\n      cb(err)\n    }\n  }\n}\nfunction _duplexify(pair) {\n  const r = pair.readable && typeof pair.readable.read !== 'function' ? Readable.wrap(pair.readable) : pair.readable\n  const w = pair.writable\n  let readable = !!isReadable(r)\n  let writable = !!isWritable(w)\n  let ondrain\n  let onfinish\n  let onreadable\n  let onclose\n  let d\n  function onfinished(err) {\n    const cb = onclose\n    onclose = null\n    if (cb) {\n      cb(err)\n    } else if (err) {\n      d.destroy(err)\n    }\n  }\n\n  // TODO(ronag): Avoid double buffering.\n  // Implement Writable/Readable/Duplex traits.\n  // See, https://github.com/nodejs/node/pull/33515.\n  d = new Duplexify({\n    // TODO (ronag): highWaterMark?\n    readableObjectMode: !!(r !== null && r !== undefined && r.readableObjectMode),\n    writableObjectMode: !!(w !== null && w !== undefined && w.writableObjectMode),\n    readable,\n    writable\n  })\n  if (writable) {\n    eos(w, (err) => {\n      writable = false\n      if (err) {\n        destroyer(r, err)\n      }\n      onfinished(err)\n    })\n    d._write = function (chunk, encoding, callback) {\n      if (w.write(chunk, encoding)) {\n        callback()\n      } else {\n        ondrain = callback\n      }\n    }\n    d._final = function (callback) {\n      w.end()\n      onfinish = callback\n    }\n    w.on('drain', function () {\n      if (ondrain) {\n        const cb = ondrain\n        ondrain = null\n        cb()\n      }\n    })\n    w.on('finish', function () {\n      if (onfinish) {\n        const cb = onfinish\n        onfinish = null\n        cb()\n      }\n    })\n  }\n  if (readable) {\n    eos(r, (err) => {\n      readable = false\n      if (err) {\n        destroyer(r, err)\n      }\n      onfinished(err)\n    })\n    r.on('readable', function () {\n      if (onreadable) {\n        const cb = onreadable\n        onreadable = null\n        cb()\n      }\n    })\n    r.on('end', function () {\n      d.push(null)\n    })\n    d._read = function () {\n      while (true) {\n        const buf = r.read()\n        if (buf === null) {\n          onreadable = d._read\n          return\n        }\n        if (!d.push(buf)) {\n          return\n        }\n      }\n    }\n  }\n  d._destroy = function (err, callback) {\n    if (!err && onclose !== null) {\n      err = new AbortError()\n    }\n    onreadable = null\n    ondrain = null\n    onfinish = null\n    if (onclose === null) {\n      callback(err)\n    } else {\n      onclose = callback\n      destroyer(w, err)\n      destroyer(r, err)\n    }\n  }\n  return d\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n// Ported from https://github.com/mafintosh/end-of-stream with\n// permission from the author, Mathias Buus (@mafintosh).\n\n;('use strict')\nconst { AbortError, codes } = require('../../ours/errors')\nconst { ERR_INVALID_ARG_TYPE, ERR_STREAM_PREMATURE_CLOSE } = codes\nconst { kEmptyObject, once } = require('../../ours/util')\nconst { validateAbortSignal, validateFunction, validateObject, validateBoolean } = require('../validators')\nconst { Promise, PromisePrototypeThen, SymbolDispose } = require('../../ours/primordials')\nconst {\n  isClosed,\n  isReadable,\n  isReadableNodeStream,\n  isReadableStream,\n  isReadableFinished,\n  isReadableErrored,\n  isWritable,\n  isWritableNodeStream,\n  isWritableStream,\n  isWritableFinished,\n  isWritableErrored,\n  isNodeStream,\n  willEmitClose: _willEmitClose,\n  kIsClosedPromise\n} = require('./utils')\nlet addAbortListener\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function'\n}\nconst nop = () => {}\nfunction eos(stream, options, callback) {\n  var _options$readable, _options$writable\n  if (arguments.length === 2) {\n    callback = options\n    options = kEmptyObject\n  } else if (options == null) {\n    options = kEmptyObject\n  } else {\n    validateObject(options, 'options')\n  }\n  validateFunction(callback, 'callback')\n  validateAbortSignal(options.signal, 'options.signal')\n  callback = once(callback)\n  if (isReadableStream(stream) || isWritableStream(stream)) {\n    return eosWeb(stream, options, callback)\n  }\n  if (!isNodeStream(stream)) {\n    throw new ERR_INVALID_ARG_TYPE('stream', ['ReadableStream', 'WritableStream', 'Stream'], stream)\n  }\n  const readable =\n    (_options$readable = options.readable) !== null && _options$readable !== undefined\n      ? _options$readable\n      : isReadableNodeStream(stream)\n  const writable =\n    (_options$writable = options.writable) !== null && _options$writable !== undefined\n      ? _options$writable\n      : isWritableNodeStream(stream)\n  const wState = stream._writableState\n  const rState = stream._readableState\n  const onlegacyfinish = () => {\n    if (!stream.writable) {\n      onfinish()\n    }\n  }\n\n  // TODO (ronag): Improve soft detection to include core modules and\n  // common ecosystem modules that do properly emit 'close' but fail\n  // this generic check.\n  let willEmitClose =\n    _willEmitClose(stream) && isReadableNodeStream(stream) === readable && isWritableNodeStream(stream) === writable\n  let writableFinished = isWritableFinished(stream, false)\n  const onfinish = () => {\n    writableFinished = true\n    // Stream should not be destroyed here. If it is that\n    // means that user space is doing something differently and\n    // we cannot trust willEmitClose.\n    if (stream.destroyed) {\n      willEmitClose = false\n    }\n    if (willEmitClose && (!stream.readable || readable)) {\n      return\n    }\n    if (!readable || readableFinished) {\n      callback.call(stream)\n    }\n  }\n  let readableFinished = isReadableFinished(stream, false)\n  const onend = () => {\n    readableFinished = true\n    // Stream should not be destroyed here. If it is that\n    // means that user space is doing something differently and\n    // we cannot trust willEmitClose.\n    if (stream.destroyed) {\n      willEmitClose = false\n    }\n    if (willEmitClose && (!stream.writable || writable)) {\n      return\n    }\n    if (!writable || writableFinished) {\n      callback.call(stream)\n    }\n  }\n  const onerror = (err) => {\n    callback.call(stream, err)\n  }\n  let closed = isClosed(stream)\n  const onclose = () => {\n    closed = true\n    const errored = isWritableErrored(stream) || isReadableErrored(stream)\n    if (errored && typeof errored !== 'boolean') {\n      return callback.call(stream, errored)\n    }\n    if (readable && !readableFinished && isReadableNodeStream(stream, true)) {\n      if (!isReadableFinished(stream, false)) return callback.call(stream, new ERR_STREAM_PREMATURE_CLOSE())\n    }\n    if (writable && !writableFinished) {\n      if (!isWritableFinished(stream, false)) return callback.call(stream, new ERR_STREAM_PREMATURE_CLOSE())\n    }\n    callback.call(stream)\n  }\n  const onclosed = () => {\n    closed = true\n    const errored = isWritableErrored(stream) || isReadableErrored(stream)\n    if (errored && typeof errored !== 'boolean') {\n      return callback.call(stream, errored)\n    }\n    callback.call(stream)\n  }\n  const onrequest = () => {\n    stream.req.on('finish', onfinish)\n  }\n  if (isRequest(stream)) {\n    stream.on('complete', onfinish)\n    if (!willEmitClose) {\n      stream.on('abort', onclose)\n    }\n    if (stream.req) {\n      onrequest()\n    } else {\n      stream.on('request', onrequest)\n    }\n  } else if (writable && !wState) {\n    // legacy streams\n    stream.on('end', onlegacyfinish)\n    stream.on('close', onlegacyfinish)\n  }\n\n  // Not all streams will emit 'close' after 'aborted'.\n  if (!willEmitClose && typeof stream.aborted === 'boolean') {\n    stream.on('aborted', onclose)\n  }\n  stream.on('end', onend)\n  stream.on('finish', onfinish)\n  if (options.error !== false) {\n    stream.on('error', onerror)\n  }\n  stream.on('close', onclose)\n  if (closed) {\n    process.nextTick(onclose)\n  } else if (\n    (wState !== null && wState !== undefined && wState.errorEmitted) ||\n    (rState !== null && rState !== undefined && rState.errorEmitted)\n  ) {\n    if (!willEmitClose) {\n      process.nextTick(onclosed)\n    }\n  } else if (\n    !readable &&\n    (!willEmitClose || isReadable(stream)) &&\n    (writableFinished || isWritable(stream) === false)\n  ) {\n    process.nextTick(onclosed)\n  } else if (\n    !writable &&\n    (!willEmitClose || isWritable(stream)) &&\n    (readableFinished || isReadable(stream) === false)\n  ) {\n    process.nextTick(onclosed)\n  } else if (rState && stream.req && stream.aborted) {\n    process.nextTick(onclosed)\n  }\n  const cleanup = () => {\n    callback = nop\n    stream.removeListener('aborted', onclose)\n    stream.removeListener('complete', onfinish)\n    stream.removeListener('abort', onclose)\n    stream.removeListener('request', onrequest)\n    if (stream.req) stream.req.removeListener('finish', onfinish)\n    stream.removeListener('end', onlegacyfinish)\n    stream.removeListener('close', onlegacyfinish)\n    stream.removeListener('finish', onfinish)\n    stream.removeListener('end', onend)\n    stream.removeListener('error', onerror)\n    stream.removeListener('close', onclose)\n  }\n  if (options.signal && !closed) {\n    const abort = () => {\n      // Keep it because cleanup removes it.\n      const endCallback = callback\n      cleanup()\n      endCallback.call(\n        stream,\n        new AbortError(undefined, {\n          cause: options.signal.reason\n        })\n      )\n    }\n    if (options.signal.aborted) {\n      process.nextTick(abort)\n    } else {\n      addAbortListener = addAbortListener || require('../../ours/util').addAbortListener\n      const disposable = addAbortListener(options.signal, abort)\n      const originalCallback = callback\n      callback = once((...args) => {\n        disposable[SymbolDispose]()\n        originalCallback.apply(stream, args)\n      })\n    }\n  }\n  return cleanup\n}\nfunction eosWeb(stream, options, callback) {\n  let isAborted = false\n  let abort = nop\n  if (options.signal) {\n    abort = () => {\n      isAborted = true\n      callback.call(\n        stream,\n        new AbortError(undefined, {\n          cause: options.signal.reason\n        })\n      )\n    }\n    if (options.signal.aborted) {\n      process.nextTick(abort)\n    } else {\n      addAbortListener = addAbortListener || require('../../ours/util').addAbortListener\n      const disposable = addAbortListener(options.signal, abort)\n      const originalCallback = callback\n      callback = once((...args) => {\n        disposable[SymbolDispose]()\n        originalCallback.apply(stream, args)\n      })\n    }\n  }\n  const resolverFn = (...args) => {\n    if (!isAborted) {\n      process.nextTick(() => callback.apply(stream, args))\n    }\n  }\n  PromisePrototypeThen(stream[kIsClosedPromise].promise, resolverFn, resolverFn)\n  return nop\n}\nfunction finished(stream, opts) {\n  var _opts\n  let autoCleanup = false\n  if (opts === null) {\n    opts = kEmptyObject\n  }\n  if ((_opts = opts) !== null && _opts !== undefined && _opts.cleanup) {\n    validateBoolean(opts.cleanup, 'cleanup')\n    autoCleanup = opts.cleanup\n  }\n  return new Promise((resolve, reject) => {\n    const cleanup = eos(stream, opts, (err) => {\n      if (autoCleanup) {\n        cleanup()\n      }\n      if (err) {\n        reject(err)\n      } else {\n        resolve()\n      }\n    })\n  })\n}\nmodule.exports = eos\nmodule.exports.finished = finished\n","'use strict'\n\n/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n\nconst { PromisePrototypeThen, SymbolAsyncIterator, SymbolIterator } = require('../../ours/primordials')\nconst { Buffer } = require('buffer')\nconst { ERR_INVALID_ARG_TYPE, ERR_STREAM_NULL_VALUES } = require('../../ours/errors').codes\nfunction from(Readable, iterable, opts) {\n  let iterator\n  if (typeof iterable === 'string' || iterable instanceof Buffer) {\n    return new Readable({\n      objectMode: true,\n      ...opts,\n      read() {\n        this.push(iterable)\n        this.push(null)\n      }\n    })\n  }\n  let isAsync\n  if (iterable && iterable[SymbolAsyncIterator]) {\n    isAsync = true\n    iterator = iterable[SymbolAsyncIterator]()\n  } else if (iterable && iterable[SymbolIterator]) {\n    isAsync = false\n    iterator = iterable[SymbolIterator]()\n  } else {\n    throw new ERR_INVALID_ARG_TYPE('iterable', ['Iterable'], iterable)\n  }\n  const readable = new Readable({\n    objectMode: true,\n    highWaterMark: 1,\n    // TODO(ronag): What options should be allowed?\n    ...opts\n  })\n\n  // Flag to protect against _read\n  // being called before last iteration completion.\n  let reading = false\n  readable._read = function () {\n    if (!reading) {\n      reading = true\n      next()\n    }\n  }\n  readable._destroy = function (error, cb) {\n    PromisePrototypeThen(\n      close(error),\n      () => process.nextTick(cb, error),\n      // nextTick is here in case cb throws\n      (e) => process.nextTick(cb, e || error)\n    )\n  }\n  async function close(error) {\n    const hadError = error !== undefined && error !== null\n    const hasThrow = typeof iterator.throw === 'function'\n    if (hadError && hasThrow) {\n      const { value, done } = await iterator.throw(error)\n      await value\n      if (done) {\n        return\n      }\n    }\n    if (typeof iterator.return === 'function') {\n      const { value } = await iterator.return()\n      await value\n    }\n  }\n  async function next() {\n    for (;;) {\n      try {\n        const { value, done } = isAsync ? await iterator.next() : iterator.next()\n        if (done) {\n          readable.push(null)\n        } else {\n          const res = value && typeof value.then === 'function' ? await value : value\n          if (res === null) {\n            reading = false\n            throw new ERR_STREAM_NULL_VALUES()\n          } else if (readable.push(res)) {\n            continue\n          } else {\n            reading = false\n          }\n        }\n      } catch (err) {\n        readable.destroy(err)\n      }\n      break\n    }\n  }\n  return readable\n}\nmodule.exports = from\n","'use strict'\n\nconst { ArrayIsArray, ObjectSetPrototypeOf } = require('../../ours/primordials')\nconst { EventEmitter: EE } = require('events')\nfunction Stream(opts) {\n  EE.call(this, opts)\n}\nObjectSetPrototypeOf(Stream.prototype, EE.prototype)\nObjectSetPrototypeOf(Stream, EE)\nStream.prototype.pipe = function (dest, options) {\n  const source = this\n  function ondata(chunk) {\n    if (dest.writable && dest.write(chunk) === false && source.pause) {\n      source.pause()\n    }\n  }\n  source.on('data', ondata)\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume()\n    }\n  }\n  dest.on('drain', ondrain)\n\n  // If the 'end' option is not supplied, dest.end() will be called when\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend)\n    source.on('close', onclose)\n  }\n  let didOnEnd = false\n  function onend() {\n    if (didOnEnd) return\n    didOnEnd = true\n    dest.end()\n  }\n  function onclose() {\n    if (didOnEnd) return\n    didOnEnd = true\n    if (typeof dest.destroy === 'function') dest.destroy()\n  }\n\n  // Don't leave dangling pipes when there are errors.\n  function onerror(er) {\n    cleanup()\n    if (EE.listenerCount(this, 'error') === 0) {\n      this.emit('error', er)\n    }\n  }\n  prependListener(source, 'error', onerror)\n  prependListener(dest, 'error', onerror)\n\n  // Remove all the event listeners that were added.\n  function cleanup() {\n    source.removeListener('data', ondata)\n    dest.removeListener('drain', ondrain)\n    source.removeListener('end', onend)\n    source.removeListener('close', onclose)\n    source.removeListener('error', onerror)\n    dest.removeListener('error', onerror)\n    source.removeListener('end', cleanup)\n    source.removeListener('close', cleanup)\n    dest.removeListener('close', cleanup)\n  }\n  source.on('end', cleanup)\n  source.on('close', cleanup)\n  dest.on('close', cleanup)\n  dest.emit('pipe', source)\n\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\n  return dest\n}\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn)\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn)\n  else if (ArrayIsArray(emitter._events[event])) emitter._events[event].unshift(fn)\n  else emitter._events[event] = [fn, emitter._events[event]]\n}\nmodule.exports = {\n  Stream,\n  prependListener\n}\n","'use strict'\n\nconst AbortController = globalThis.AbortController || require('abort-controller').AbortController\nconst {\n  codes: { ERR_INVALID_ARG_VALUE, ERR_INVALID_ARG_TYPE, ERR_MISSING_ARGS, ERR_OUT_OF_RANGE },\n  AbortError\n} = require('../../ours/errors')\nconst { validateAbortSignal, validateInteger, validateObject } = require('../validators')\nconst kWeakHandler = require('../../ours/primordials').Symbol('kWeak')\nconst kResistStopPropagation = require('../../ours/primordials').Symbol('kResistStopPropagation')\nconst { finished } = require('./end-of-stream')\nconst staticCompose = require('./compose')\nconst { addAbortSignalNoValidate } = require('./add-abort-signal')\nconst { isWritable, isNodeStream } = require('./utils')\nconst { deprecate } = require('../../ours/util')\nconst {\n  ArrayPrototypePush,\n  Boolean,\n  MathFloor,\n  Number,\n  NumberIsNaN,\n  Promise,\n  PromiseReject,\n  PromiseResolve,\n  PromisePrototypeThen,\n  Symbol\n} = require('../../ours/primordials')\nconst kEmpty = Symbol('kEmpty')\nconst kEof = Symbol('kEof')\nfunction compose(stream, options) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  if (isNodeStream(stream) && !isWritable(stream)) {\n    throw new ERR_INVALID_ARG_VALUE('stream', stream, 'must be writable')\n  }\n  const composedStream = staticCompose(this, stream)\n  if (options !== null && options !== undefined && options.signal) {\n    // Not validating as we already validated before\n    addAbortSignalNoValidate(options.signal, composedStream)\n  }\n  return composedStream\n}\nfunction map(fn, options) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', ['Function', 'AsyncFunction'], fn)\n  }\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  let concurrency = 1\n  if ((options === null || options === undefined ? undefined : options.concurrency) != null) {\n    concurrency = MathFloor(options.concurrency)\n  }\n  let highWaterMark = concurrency - 1\n  if ((options === null || options === undefined ? undefined : options.highWaterMark) != null) {\n    highWaterMark = MathFloor(options.highWaterMark)\n  }\n  validateInteger(concurrency, 'options.concurrency', 1)\n  validateInteger(highWaterMark, 'options.highWaterMark', 0)\n  highWaterMark += concurrency\n  return async function* map() {\n    const signal = require('../../ours/util').AbortSignalAny(\n      [options === null || options === undefined ? undefined : options.signal].filter(Boolean)\n    )\n    const stream = this\n    const queue = []\n    const signalOpt = {\n      signal\n    }\n    let next\n    let resume\n    let done = false\n    let cnt = 0\n    function onCatch() {\n      done = true\n      afterItemProcessed()\n    }\n    function afterItemProcessed() {\n      cnt -= 1\n      maybeResume()\n    }\n    function maybeResume() {\n      if (resume && !done && cnt < concurrency && queue.length < highWaterMark) {\n        resume()\n        resume = null\n      }\n    }\n    async function pump() {\n      try {\n        for await (let val of stream) {\n          if (done) {\n            return\n          }\n          if (signal.aborted) {\n            throw new AbortError()\n          }\n          try {\n            val = fn(val, signalOpt)\n            if (val === kEmpty) {\n              continue\n            }\n            val = PromiseResolve(val)\n          } catch (err) {\n            val = PromiseReject(err)\n          }\n          cnt += 1\n          PromisePrototypeThen(val, afterItemProcessed, onCatch)\n          queue.push(val)\n          if (next) {\n            next()\n            next = null\n          }\n          if (!done && (queue.length >= highWaterMark || cnt >= concurrency)) {\n            await new Promise((resolve) => {\n              resume = resolve\n            })\n          }\n        }\n        queue.push(kEof)\n      } catch (err) {\n        const val = PromiseReject(err)\n        PromisePrototypeThen(val, afterItemProcessed, onCatch)\n        queue.push(val)\n      } finally {\n        done = true\n        if (next) {\n          next()\n          next = null\n        }\n      }\n    }\n    pump()\n    try {\n      while (true) {\n        while (queue.length > 0) {\n          const val = await queue[0]\n          if (val === kEof) {\n            return\n          }\n          if (signal.aborted) {\n            throw new AbortError()\n          }\n          if (val !== kEmpty) {\n            yield val\n          }\n          queue.shift()\n          maybeResume()\n        }\n        await new Promise((resolve) => {\n          next = resolve\n        })\n      }\n    } finally {\n      done = true\n      if (resume) {\n        resume()\n        resume = null\n      }\n    }\n  }.call(this)\n}\nfunction asIndexedPairs(options = undefined) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  return async function* asIndexedPairs() {\n    let index = 0\n    for await (const val of this) {\n      var _options$signal\n      if (\n        options !== null &&\n        options !== undefined &&\n        (_options$signal = options.signal) !== null &&\n        _options$signal !== undefined &&\n        _options$signal.aborted\n      ) {\n        throw new AbortError({\n          cause: options.signal.reason\n        })\n      }\n      yield [index++, val]\n    }\n  }.call(this)\n}\nasync function some(fn, options = undefined) {\n  for await (const unused of filter.call(this, fn, options)) {\n    return true\n  }\n  return false\n}\nasync function every(fn, options = undefined) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', ['Function', 'AsyncFunction'], fn)\n  }\n  // https://en.wikipedia.org/wiki/De_Morgan%27s_laws\n  return !(await some.call(\n    this,\n    async (...args) => {\n      return !(await fn(...args))\n    },\n    options\n  ))\n}\nasync function find(fn, options) {\n  for await (const result of filter.call(this, fn, options)) {\n    return result\n  }\n  return undefined\n}\nasync function forEach(fn, options) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', ['Function', 'AsyncFunction'], fn)\n  }\n  async function forEachFn(value, options) {\n    await fn(value, options)\n    return kEmpty\n  }\n  // eslint-disable-next-line no-unused-vars\n  for await (const unused of map.call(this, forEachFn, options));\n}\nfunction filter(fn, options) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', ['Function', 'AsyncFunction'], fn)\n  }\n  async function filterFn(value, options) {\n    if (await fn(value, options)) {\n      return value\n    }\n    return kEmpty\n  }\n  return map.call(this, filterFn, options)\n}\n\n// Specific to provide better error to reduce since the argument is only\n// missing if the stream has no items in it - but the code is still appropriate\nclass ReduceAwareErrMissingArgs extends ERR_MISSING_ARGS {\n  constructor() {\n    super('reduce')\n    this.message = 'Reduce of an empty stream requires an initial value'\n  }\n}\nasync function reduce(reducer, initialValue, options) {\n  var _options$signal2\n  if (typeof reducer !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('reducer', ['Function', 'AsyncFunction'], reducer)\n  }\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  let hasInitialValue = arguments.length > 1\n  if (\n    options !== null &&\n    options !== undefined &&\n    (_options$signal2 = options.signal) !== null &&\n    _options$signal2 !== undefined &&\n    _options$signal2.aborted\n  ) {\n    const err = new AbortError(undefined, {\n      cause: options.signal.reason\n    })\n    this.once('error', () => {}) // The error is already propagated\n    await finished(this.destroy(err))\n    throw err\n  }\n  const ac = new AbortController()\n  const signal = ac.signal\n  if (options !== null && options !== undefined && options.signal) {\n    const opts = {\n      once: true,\n      [kWeakHandler]: this,\n      [kResistStopPropagation]: true\n    }\n    options.signal.addEventListener('abort', () => ac.abort(), opts)\n  }\n  let gotAnyItemFromStream = false\n  try {\n    for await (const value of this) {\n      var _options$signal3\n      gotAnyItemFromStream = true\n      if (\n        options !== null &&\n        options !== undefined &&\n        (_options$signal3 = options.signal) !== null &&\n        _options$signal3 !== undefined &&\n        _options$signal3.aborted\n      ) {\n        throw new AbortError()\n      }\n      if (!hasInitialValue) {\n        initialValue = value\n        hasInitialValue = true\n      } else {\n        initialValue = await reducer(initialValue, value, {\n          signal\n        })\n      }\n    }\n    if (!gotAnyItemFromStream && !hasInitialValue) {\n      throw new ReduceAwareErrMissingArgs()\n    }\n  } finally {\n    ac.abort()\n  }\n  return initialValue\n}\nasync function toArray(options) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  const result = []\n  for await (const val of this) {\n    var _options$signal4\n    if (\n      options !== null &&\n      options !== undefined &&\n      (_options$signal4 = options.signal) !== null &&\n      _options$signal4 !== undefined &&\n      _options$signal4.aborted\n    ) {\n      throw new AbortError(undefined, {\n        cause: options.signal.reason\n      })\n    }\n    ArrayPrototypePush(result, val)\n  }\n  return result\n}\nfunction flatMap(fn, options) {\n  const values = map.call(this, fn, options)\n  return async function* flatMap() {\n    for await (const val of values) {\n      yield* val\n    }\n  }.call(this)\n}\nfunction toIntegerOrInfinity(number) {\n  // We coerce here to align with the spec\n  // https://github.com/tc39/proposal-iterator-helpers/issues/169\n  number = Number(number)\n  if (NumberIsNaN(number)) {\n    return 0\n  }\n  if (number < 0) {\n    throw new ERR_OUT_OF_RANGE('number', '>= 0', number)\n  }\n  return number\n}\nfunction drop(number, options = undefined) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  number = toIntegerOrInfinity(number)\n  return async function* drop() {\n    var _options$signal5\n    if (\n      options !== null &&\n      options !== undefined &&\n      (_options$signal5 = options.signal) !== null &&\n      _options$signal5 !== undefined &&\n      _options$signal5.aborted\n    ) {\n      throw new AbortError()\n    }\n    for await (const val of this) {\n      var _options$signal6\n      if (\n        options !== null &&\n        options !== undefined &&\n        (_options$signal6 = options.signal) !== null &&\n        _options$signal6 !== undefined &&\n        _options$signal6.aborted\n      ) {\n        throw new AbortError()\n      }\n      if (number-- <= 0) {\n        yield val\n      }\n    }\n  }.call(this)\n}\nfunction take(number, options = undefined) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  number = toIntegerOrInfinity(number)\n  return async function* take() {\n    var _options$signal7\n    if (\n      options !== null &&\n      options !== undefined &&\n      (_options$signal7 = options.signal) !== null &&\n      _options$signal7 !== undefined &&\n      _options$signal7.aborted\n    ) {\n      throw new AbortError()\n    }\n    for await (const val of this) {\n      var _options$signal8\n      if (\n        options !== null &&\n        options !== undefined &&\n        (_options$signal8 = options.signal) !== null &&\n        _options$signal8 !== undefined &&\n        _options$signal8.aborted\n      ) {\n        throw new AbortError()\n      }\n      if (number-- > 0) {\n        yield val\n      }\n\n      // Don't get another item from iterator in case we reached the end\n      if (number <= 0) {\n        return\n      }\n    }\n  }.call(this)\n}\nmodule.exports.streamReturningOperators = {\n  asIndexedPairs: deprecate(asIndexedPairs, 'readable.asIndexedPairs will be removed in a future version.'),\n  drop,\n  filter,\n  flatMap,\n  map,\n  take,\n  compose\n}\nmodule.exports.promiseReturningOperators = {\n  every,\n  forEach,\n  reduce,\n  toArray,\n  some,\n  find\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict'\n\nconst { ObjectSetPrototypeOf } = require('../../ours/primordials')\nmodule.exports = PassThrough\nconst Transform = require('./transform')\nObjectSetPrototypeOf(PassThrough.prototype, Transform.prototype)\nObjectSetPrototypeOf(PassThrough, Transform)\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options)\n  Transform.call(this, options)\n}\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk)\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n\n;('use strict')\nconst { ArrayIsArray, Promise, SymbolAsyncIterator, SymbolDispose } = require('../../ours/primordials')\nconst eos = require('./end-of-stream')\nconst { once } = require('../../ours/util')\nconst destroyImpl = require('./destroy')\nconst Duplex = require('./duplex')\nconst {\n  aggregateTwoErrors,\n  codes: {\n    ERR_INVALID_ARG_TYPE,\n    ERR_INVALID_RETURN_VALUE,\n    ERR_MISSING_ARGS,\n    ERR_STREAM_DESTROYED,\n    ERR_STREAM_PREMATURE_CLOSE\n  },\n  AbortError\n} = require('../../ours/errors')\nconst { validateFunction, validateAbortSignal } = require('../validators')\nconst {\n  isIterable,\n  isReadable,\n  isReadableNodeStream,\n  isNodeStream,\n  isTransformStream,\n  isWebStream,\n  isReadableStream,\n  isReadableFinished\n} = require('./utils')\nconst AbortController = globalThis.AbortController || require('abort-controller').AbortController\nlet PassThrough\nlet Readable\nlet addAbortListener\nfunction destroyer(stream, reading, writing) {\n  let finished = false\n  stream.on('close', () => {\n    finished = true\n  })\n  const cleanup = eos(\n    stream,\n    {\n      readable: reading,\n      writable: writing\n    },\n    (err) => {\n      finished = !err\n    }\n  )\n  return {\n    destroy: (err) => {\n      if (finished) return\n      finished = true\n      destroyImpl.destroyer(stream, err || new ERR_STREAM_DESTROYED('pipe'))\n    },\n    cleanup\n  }\n}\nfunction popCallback(streams) {\n  // Streams should never be an empty array. It should always contain at least\n  // a single stream. Therefore optimize for the average case instead of\n  // checking for length === 0 as well.\n  validateFunction(streams[streams.length - 1], 'streams[stream.length - 1]')\n  return streams.pop()\n}\nfunction makeAsyncIterable(val) {\n  if (isIterable(val)) {\n    return val\n  } else if (isReadableNodeStream(val)) {\n    // Legacy streams are not Iterable.\n    return fromReadable(val)\n  }\n  throw new ERR_INVALID_ARG_TYPE('val', ['Readable', 'Iterable', 'AsyncIterable'], val)\n}\nasync function* fromReadable(val) {\n  if (!Readable) {\n    Readable = require('./readable')\n  }\n  yield* Readable.prototype[SymbolAsyncIterator].call(val)\n}\nasync function pumpToNode(iterable, writable, finish, { end }) {\n  let error\n  let onresolve = null\n  const resume = (err) => {\n    if (err) {\n      error = err\n    }\n    if (onresolve) {\n      const callback = onresolve\n      onresolve = null\n      callback()\n    }\n  }\n  const wait = () =>\n    new Promise((resolve, reject) => {\n      if (error) {\n        reject(error)\n      } else {\n        onresolve = () => {\n          if (error) {\n            reject(error)\n          } else {\n            resolve()\n          }\n        }\n      }\n    })\n  writable.on('drain', resume)\n  const cleanup = eos(\n    writable,\n    {\n      readable: false\n    },\n    resume\n  )\n  try {\n    if (writable.writableNeedDrain) {\n      await wait()\n    }\n    for await (const chunk of iterable) {\n      if (!writable.write(chunk)) {\n        await wait()\n      }\n    }\n    if (end) {\n      writable.end()\n      await wait()\n    }\n    finish()\n  } catch (err) {\n    finish(error !== err ? aggregateTwoErrors(error, err) : err)\n  } finally {\n    cleanup()\n    writable.off('drain', resume)\n  }\n}\nasync function pumpToWeb(readable, writable, finish, { end }) {\n  if (isTransformStream(writable)) {\n    writable = writable.writable\n  }\n  // https://streams.spec.whatwg.org/#example-manual-write-with-backpressure\n  const writer = writable.getWriter()\n  try {\n    for await (const chunk of readable) {\n      await writer.ready\n      writer.write(chunk).catch(() => {})\n    }\n    await writer.ready\n    if (end) {\n      await writer.close()\n    }\n    finish()\n  } catch (err) {\n    try {\n      await writer.abort(err)\n      finish(err)\n    } catch (err) {\n      finish(err)\n    }\n  }\n}\nfunction pipeline(...streams) {\n  return pipelineImpl(streams, once(popCallback(streams)))\n}\nfunction pipelineImpl(streams, callback, opts) {\n  if (streams.length === 1 && ArrayIsArray(streams[0])) {\n    streams = streams[0]\n  }\n  if (streams.length < 2) {\n    throw new ERR_MISSING_ARGS('streams')\n  }\n  const ac = new AbortController()\n  const signal = ac.signal\n  const outerSignal = opts === null || opts === undefined ? undefined : opts.signal\n\n  // Need to cleanup event listeners if last stream is readable\n  // https://github.com/nodejs/node/issues/35452\n  const lastStreamCleanup = []\n  validateAbortSignal(outerSignal, 'options.signal')\n  function abort() {\n    finishImpl(new AbortError())\n  }\n  addAbortListener = addAbortListener || require('../../ours/util').addAbortListener\n  let disposable\n  if (outerSignal) {\n    disposable = addAbortListener(outerSignal, abort)\n  }\n  let error\n  let value\n  const destroys = []\n  let finishCount = 0\n  function finish(err) {\n    finishImpl(err, --finishCount === 0)\n  }\n  function finishImpl(err, final) {\n    var _disposable\n    if (err && (!error || error.code === 'ERR_STREAM_PREMATURE_CLOSE')) {\n      error = err\n    }\n    if (!error && !final) {\n      return\n    }\n    while (destroys.length) {\n      destroys.shift()(error)\n    }\n    ;(_disposable = disposable) === null || _disposable === undefined ? undefined : _disposable[SymbolDispose]()\n    ac.abort()\n    if (final) {\n      if (!error) {\n        lastStreamCleanup.forEach((fn) => fn())\n      }\n      process.nextTick(callback, error, value)\n    }\n  }\n  let ret\n  for (let i = 0; i < streams.length; i++) {\n    const stream = streams[i]\n    const reading = i < streams.length - 1\n    const writing = i > 0\n    const end = reading || (opts === null || opts === undefined ? undefined : opts.end) !== false\n    const isLastStream = i === streams.length - 1\n    if (isNodeStream(stream)) {\n      if (end) {\n        const { destroy, cleanup } = destroyer(stream, reading, writing)\n        destroys.push(destroy)\n        if (isReadable(stream) && isLastStream) {\n          lastStreamCleanup.push(cleanup)\n        }\n      }\n\n      // Catch stream errors that occur after pipe/pump has completed.\n      function onError(err) {\n        if (err && err.name !== 'AbortError' && err.code !== 'ERR_STREAM_PREMATURE_CLOSE') {\n          finish(err)\n        }\n      }\n      stream.on('error', onError)\n      if (isReadable(stream) && isLastStream) {\n        lastStreamCleanup.push(() => {\n          stream.removeListener('error', onError)\n        })\n      }\n    }\n    if (i === 0) {\n      if (typeof stream === 'function') {\n        ret = stream({\n          signal\n        })\n        if (!isIterable(ret)) {\n          throw new ERR_INVALID_RETURN_VALUE('Iterable, AsyncIterable or Stream', 'source', ret)\n        }\n      } else if (isIterable(stream) || isReadableNodeStream(stream) || isTransformStream(stream)) {\n        ret = stream\n      } else {\n        ret = Duplex.from(stream)\n      }\n    } else if (typeof stream === 'function') {\n      if (isTransformStream(ret)) {\n        var _ret\n        ret = makeAsyncIterable((_ret = ret) === null || _ret === undefined ? undefined : _ret.readable)\n      } else {\n        ret = makeAsyncIterable(ret)\n      }\n      ret = stream(ret, {\n        signal\n      })\n      if (reading) {\n        if (!isIterable(ret, true)) {\n          throw new ERR_INVALID_RETURN_VALUE('AsyncIterable', `transform[${i - 1}]`, ret)\n        }\n      } else {\n        var _ret2\n        if (!PassThrough) {\n          PassThrough = require('./passthrough')\n        }\n\n        // If the last argument to pipeline is not a stream\n        // we must create a proxy stream so that pipeline(...)\n        // always returns a stream which can be further\n        // composed through `.pipe(stream)`.\n\n        const pt = new PassThrough({\n          objectMode: true\n        })\n\n        // Handle Promises/A+ spec, `then` could be a getter that throws on\n        // second use.\n        const then = (_ret2 = ret) === null || _ret2 === undefined ? undefined : _ret2.then\n        if (typeof then === 'function') {\n          finishCount++\n          then.call(\n            ret,\n            (val) => {\n              value = val\n              if (val != null) {\n                pt.write(val)\n              }\n              if (end) {\n                pt.end()\n              }\n              process.nextTick(finish)\n            },\n            (err) => {\n              pt.destroy(err)\n              process.nextTick(finish, err)\n            }\n          )\n        } else if (isIterable(ret, true)) {\n          finishCount++\n          pumpToNode(ret, pt, finish, {\n            end\n          })\n        } else if (isReadableStream(ret) || isTransformStream(ret)) {\n          const toRead = ret.readable || ret\n          finishCount++\n          pumpToNode(toRead, pt, finish, {\n            end\n          })\n        } else {\n          throw new ERR_INVALID_RETURN_VALUE('AsyncIterable or Promise', 'destination', ret)\n        }\n        ret = pt\n        const { destroy, cleanup } = destroyer(ret, false, true)\n        destroys.push(destroy)\n        if (isLastStream) {\n          lastStreamCleanup.push(cleanup)\n        }\n      }\n    } else if (isNodeStream(stream)) {\n      if (isReadableNodeStream(ret)) {\n        finishCount += 2\n        const cleanup = pipe(ret, stream, finish, {\n          end\n        })\n        if (isReadable(stream) && isLastStream) {\n          lastStreamCleanup.push(cleanup)\n        }\n      } else if (isTransformStream(ret) || isReadableStream(ret)) {\n        const toRead = ret.readable || ret\n        finishCount++\n        pumpToNode(toRead, stream, finish, {\n          end\n        })\n      } else if (isIterable(ret)) {\n        finishCount++\n        pumpToNode(ret, stream, finish, {\n          end\n        })\n      } else {\n        throw new ERR_INVALID_ARG_TYPE(\n          'val',\n          ['Readable', 'Iterable', 'AsyncIterable', 'ReadableStream', 'TransformStream'],\n          ret\n        )\n      }\n      ret = stream\n    } else if (isWebStream(stream)) {\n      if (isReadableNodeStream(ret)) {\n        finishCount++\n        pumpToWeb(makeAsyncIterable(ret), stream, finish, {\n          end\n        })\n      } else if (isReadableStream(ret) || isIterable(ret)) {\n        finishCount++\n        pumpToWeb(ret, stream, finish, {\n          end\n        })\n      } else if (isTransformStream(ret)) {\n        finishCount++\n        pumpToWeb(ret.readable, stream, finish, {\n          end\n        })\n      } else {\n        throw new ERR_INVALID_ARG_TYPE(\n          'val',\n          ['Readable', 'Iterable', 'AsyncIterable', 'ReadableStream', 'TransformStream'],\n          ret\n        )\n      }\n      ret = stream\n    } else {\n      ret = Duplex.from(stream)\n    }\n  }\n  if (\n    (signal !== null && signal !== undefined && signal.aborted) ||\n    (outerSignal !== null && outerSignal !== undefined && outerSignal.aborted)\n  ) {\n    process.nextTick(abort)\n  }\n  return ret\n}\nfunction pipe(src, dst, finish, { end }) {\n  let ended = false\n  dst.on('close', () => {\n    if (!ended) {\n      // Finish if the destination closes before the source has completed.\n      finish(new ERR_STREAM_PREMATURE_CLOSE())\n    }\n  })\n  src.pipe(dst, {\n    end: false\n  }) // If end is true we already will have a listener to end dst.\n\n  if (end) {\n    // Compat. Before node v10.12.0 stdio used to throw an error so\n    // pipe() did/does not end() stdio destinations.\n    // Now they allow it but \"secretly\" don't close the underlying fd.\n\n    function endFn() {\n      ended = true\n      dst.end()\n    }\n    if (isReadableFinished(src)) {\n      // End the destination if the source has already ended.\n      process.nextTick(endFn)\n    } else {\n      src.once('end', endFn)\n    }\n  } else {\n    finish()\n  }\n  eos(\n    src,\n    {\n      readable: true,\n      writable: false\n    },\n    (err) => {\n      const rState = src._readableState\n      if (\n        err &&\n        err.code === 'ERR_STREAM_PREMATURE_CLOSE' &&\n        rState &&\n        rState.ended &&\n        !rState.errored &&\n        !rState.errorEmitted\n      ) {\n        // Some readable streams will emit 'close' before 'end'. However, since\n        // this is on the readable side 'end' should still be emitted if the\n        // stream has been ended and no error emitted. This should be allowed in\n        // favor of backwards compatibility. Since the stream is piped to a\n        // destination this should not result in any observable difference.\n        // We don't need to check if this is a writable premature close since\n        // eos will only fail with premature close on the reading side for\n        // duplex streams.\n        src.once('end', finish).once('error', finish)\n      } else {\n        finish(err)\n      }\n    }\n  )\n  return eos(\n    dst,\n    {\n      readable: false,\n      writable: true\n    },\n    finish\n  )\n}\nmodule.exports = {\n  pipelineImpl,\n  pipeline\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n;('use strict')\nconst {\n  ArrayPrototypeIndexOf,\n  NumberIsInteger,\n  NumberIsNaN,\n  NumberParseInt,\n  ObjectDefineProperties,\n  ObjectKeys,\n  ObjectSetPrototypeOf,\n  Promise,\n  SafeSet,\n  SymbolAsyncDispose,\n  SymbolAsyncIterator,\n  Symbol\n} = require('../../ours/primordials')\nmodule.exports = Readable\nReadable.ReadableState = ReadableState\nconst { EventEmitter: EE } = require('events')\nconst { Stream, prependListener } = require('./legacy')\nconst { Buffer } = require('buffer')\nconst { addAbortSignal } = require('./add-abort-signal')\nconst eos = require('./end-of-stream')\nlet debug = require('../../ours/util').debuglog('stream', (fn) => {\n  debug = fn\n})\nconst BufferList = require('./buffer_list')\nconst destroyImpl = require('./destroy')\nconst { getHighWaterMark, getDefaultHighWaterMark } = require('./state')\nconst {\n  aggregateTwoErrors,\n  codes: {\n    ERR_INVALID_ARG_TYPE,\n    ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_OUT_OF_RANGE,\n    ERR_STREAM_PUSH_AFTER_EOF,\n    ERR_STREAM_UNSHIFT_AFTER_END_EVENT\n  },\n  AbortError\n} = require('../../ours/errors')\nconst { validateObject } = require('../validators')\nconst kPaused = Symbol('kPaused')\nconst { StringDecoder } = require('string_decoder')\nconst from = require('./from')\nObjectSetPrototypeOf(Readable.prototype, Stream.prototype)\nObjectSetPrototypeOf(Readable, Stream)\nconst nop = () => {}\nconst { errorOrDestroy } = destroyImpl\nconst kObjectMode = 1 << 0\nconst kEnded = 1 << 1\nconst kEndEmitted = 1 << 2\nconst kReading = 1 << 3\nconst kConstructed = 1 << 4\nconst kSync = 1 << 5\nconst kNeedReadable = 1 << 6\nconst kEmittedReadable = 1 << 7\nconst kReadableListening = 1 << 8\nconst kResumeScheduled = 1 << 9\nconst kErrorEmitted = 1 << 10\nconst kEmitClose = 1 << 11\nconst kAutoDestroy = 1 << 12\nconst kDestroyed = 1 << 13\nconst kClosed = 1 << 14\nconst kCloseEmitted = 1 << 15\nconst kMultiAwaitDrain = 1 << 16\nconst kReadingMore = 1 << 17\nconst kDataEmitted = 1 << 18\n\n// TODO(benjamingr) it is likely slower to do it this way than with free functions\nfunction makeBitMapDescriptor(bit) {\n  return {\n    enumerable: false,\n    get() {\n      return (this.state & bit) !== 0\n    },\n    set(value) {\n      if (value) this.state |= bit\n      else this.state &= ~bit\n    }\n  }\n}\nObjectDefineProperties(ReadableState.prototype, {\n  objectMode: makeBitMapDescriptor(kObjectMode),\n  ended: makeBitMapDescriptor(kEnded),\n  endEmitted: makeBitMapDescriptor(kEndEmitted),\n  reading: makeBitMapDescriptor(kReading),\n  // Stream is still being constructed and cannot be\n  // destroyed until construction finished or failed.\n  // Async construction is opt in, therefore we start as\n  // constructed.\n  constructed: makeBitMapDescriptor(kConstructed),\n  // A flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  sync: makeBitMapDescriptor(kSync),\n  // Whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  needReadable: makeBitMapDescriptor(kNeedReadable),\n  emittedReadable: makeBitMapDescriptor(kEmittedReadable),\n  readableListening: makeBitMapDescriptor(kReadableListening),\n  resumeScheduled: makeBitMapDescriptor(kResumeScheduled),\n  // True if the error was already emitted and should not be thrown again.\n  errorEmitted: makeBitMapDescriptor(kErrorEmitted),\n  emitClose: makeBitMapDescriptor(kEmitClose),\n  autoDestroy: makeBitMapDescriptor(kAutoDestroy),\n  // Has it been destroyed.\n  destroyed: makeBitMapDescriptor(kDestroyed),\n  // Indicates whether the stream has finished destroying.\n  closed: makeBitMapDescriptor(kClosed),\n  // True if close has been emitted or would have been emitted\n  // depending on emitClose.\n  closeEmitted: makeBitMapDescriptor(kCloseEmitted),\n  multiAwaitDrain: makeBitMapDescriptor(kMultiAwaitDrain),\n  // If true, a maybeReadMore has been scheduled.\n  readingMore: makeBitMapDescriptor(kReadingMore),\n  dataEmitted: makeBitMapDescriptor(kDataEmitted)\n})\nfunction ReadableState(options, stream, isDuplex) {\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof require('./duplex')\n\n  // Bit map field to store ReadableState more effciently with 1 bit per field\n  // instead of a V8 slot per field.\n  this.state = kEmitClose | kAutoDestroy | kConstructed | kSync\n  // Object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away.\n  if (options && options.objectMode) this.state |= kObjectMode\n  if (isDuplex && options && options.readableObjectMode) this.state |= kObjectMode\n\n  // The point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  this.highWaterMark = options\n    ? getHighWaterMark(this, options, 'readableHighWaterMark', isDuplex)\n    : getDefaultHighWaterMark(false)\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift().\n  this.buffer = new BufferList()\n  this.length = 0\n  this.pipes = []\n  this.flowing = null\n  this[kPaused] = null\n\n  // Should close be emitted on destroy. Defaults to true.\n  if (options && options.emitClose === false) this.state &= ~kEmitClose\n\n  // Should .destroy() be called after 'end' (and potentially 'finish').\n  if (options && options.autoDestroy === false) this.state &= ~kAutoDestroy\n\n  // Indicates whether the stream has errored. When true no further\n  // _read calls, 'data' or 'readable' events should occur. This is needed\n  // since when autoDestroy is disabled we need a way to tell whether the\n  // stream has failed.\n  this.errored = null\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = (options && options.defaultEncoding) || 'utf8'\n\n  // Ref the piped dest which we need a drain event on it\n  // type: null | Writable | Set<Writable>.\n  this.awaitDrainWriters = null\n  this.decoder = null\n  this.encoding = null\n  if (options && options.encoding) {\n    this.decoder = new StringDecoder(options.encoding)\n    this.encoding = options.encoding\n  }\n}\nfunction Readable(options) {\n  if (!(this instanceof Readable)) return new Readable(options)\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the ReadableState constructor, at least with V8 6.5.\n  const isDuplex = this instanceof require('./duplex')\n  this._readableState = new ReadableState(options, this, isDuplex)\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read\n    if (typeof options.destroy === 'function') this._destroy = options.destroy\n    if (typeof options.construct === 'function') this._construct = options.construct\n    if (options.signal && !isDuplex) addAbortSignal(options.signal, this)\n  }\n  Stream.call(this, options)\n  destroyImpl.construct(this, () => {\n    if (this._readableState.needReadable) {\n      maybeReadMore(this, this._readableState)\n    }\n  })\n}\nReadable.prototype.destroy = destroyImpl.destroy\nReadable.prototype._undestroy = destroyImpl.undestroy\nReadable.prototype._destroy = function (err, cb) {\n  cb(err)\n}\nReadable.prototype[EE.captureRejectionSymbol] = function (err) {\n  this.destroy(err)\n}\nReadable.prototype[SymbolAsyncDispose] = function () {\n  let error\n  if (!this.destroyed) {\n    error = this.readableEnded ? null : new AbortError()\n    this.destroy(error)\n  }\n  return new Promise((resolve, reject) => eos(this, (err) => (err && err !== error ? reject(err) : resolve(null))))\n}\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  return readableAddChunk(this, chunk, encoding, false)\n}\n\n// Unshift should *always* be something directly out of read().\nReadable.prototype.unshift = function (chunk, encoding) {\n  return readableAddChunk(this, chunk, encoding, true)\n}\nfunction readableAddChunk(stream, chunk, encoding, addToFront) {\n  debug('readableAddChunk', chunk)\n  const state = stream._readableState\n  let err\n  if ((state.state & kObjectMode) === 0) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding\n      if (state.encoding !== encoding) {\n        if (addToFront && state.encoding) {\n          // When unshifting, if state.encoding is set, we have to save\n          // the string in the BufferList with the state encoding.\n          chunk = Buffer.from(chunk, encoding).toString(state.encoding)\n        } else {\n          chunk = Buffer.from(chunk, encoding)\n          encoding = ''\n        }\n      }\n    } else if (chunk instanceof Buffer) {\n      encoding = ''\n    } else if (Stream._isUint8Array(chunk)) {\n      chunk = Stream._uint8ArrayToBuffer(chunk)\n      encoding = ''\n    } else if (chunk != null) {\n      err = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk)\n    }\n  }\n  if (err) {\n    errorOrDestroy(stream, err)\n  } else if (chunk === null) {\n    state.state &= ~kReading\n    onEofChunk(stream, state)\n  } else if ((state.state & kObjectMode) !== 0 || (chunk && chunk.length > 0)) {\n    if (addToFront) {\n      if ((state.state & kEndEmitted) !== 0) errorOrDestroy(stream, new ERR_STREAM_UNSHIFT_AFTER_END_EVENT())\n      else if (state.destroyed || state.errored) return false\n      else addChunk(stream, state, chunk, true)\n    } else if (state.ended) {\n      errorOrDestroy(stream, new ERR_STREAM_PUSH_AFTER_EOF())\n    } else if (state.destroyed || state.errored) {\n      return false\n    } else {\n      state.state &= ~kReading\n      if (state.decoder && !encoding) {\n        chunk = state.decoder.write(chunk)\n        if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false)\n        else maybeReadMore(stream, state)\n      } else {\n        addChunk(stream, state, chunk, false)\n      }\n    }\n  } else if (!addToFront) {\n    state.state &= ~kReading\n    maybeReadMore(stream, state)\n  }\n\n  // We can push more data if we are below the highWaterMark.\n  // Also, if we have no data yet, we can stand some more bytes.\n  // This is to work around cases where hwm=0, such as the repl.\n  return !state.ended && (state.length < state.highWaterMark || state.length === 0)\n}\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync && stream.listenerCount('data') > 0) {\n    // Use the guard to avoid creating `Set()` repeatedly\n    // when we have multiple pipes.\n    if ((state.state & kMultiAwaitDrain) !== 0) {\n      state.awaitDrainWriters.clear()\n    } else {\n      state.awaitDrainWriters = null\n    }\n    state.dataEmitted = true\n    stream.emit('data', chunk)\n  } else {\n    // Update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length\n    if (addToFront) state.buffer.unshift(chunk)\n    else state.buffer.push(chunk)\n    if ((state.state & kNeedReadable) !== 0) emitReadable(stream)\n  }\n  maybeReadMore(stream, state)\n}\nReadable.prototype.isPaused = function () {\n  const state = this._readableState\n  return state[kPaused] === true || state.flowing === false\n}\n\n// Backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  const decoder = new StringDecoder(enc)\n  this._readableState.decoder = decoder\n  // If setEncoding(null), decoder.encoding equals utf8.\n  this._readableState.encoding = this._readableState.decoder.encoding\n  const buffer = this._readableState.buffer\n  // Iterate over current buffer to convert already stored Buffers:\n  let content = ''\n  for (const data of buffer) {\n    content += decoder.write(data)\n  }\n  buffer.clear()\n  if (content !== '') buffer.push(content)\n  this._readableState.length = content.length\n  return this\n}\n\n// Don't raise the hwm > 1GB.\nconst MAX_HWM = 0x40000000\nfunction computeNewHighWaterMark(n) {\n  if (n > MAX_HWM) {\n    throw new ERR_OUT_OF_RANGE('size', '<= 1GiB', n)\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts.\n    n--\n    n |= n >>> 1\n    n |= n >>> 2\n    n |= n >>> 4\n    n |= n >>> 8\n    n |= n >>> 16\n    n++\n  }\n  return n\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || (state.length === 0 && state.ended)) return 0\n  if ((state.state & kObjectMode) !== 0) return 1\n  if (NumberIsNaN(n)) {\n    // Only flow one buffer at a time.\n    if (state.flowing && state.length) return state.buffer.first().length\n    return state.length\n  }\n  if (n <= state.length) return n\n  return state.ended ? state.length : 0\n}\n\n// You can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n)\n  // Same as parseInt(undefined, 10), however V8 7.3 performance regressed\n  // in this scenario, so we are doing it manually.\n  if (n === undefined) {\n    n = NaN\n  } else if (!NumberIsInteger(n)) {\n    n = NumberParseInt(n, 10)\n  }\n  const state = this._readableState\n  const nOrig = n\n\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n)\n  if (n !== 0) state.state &= ~kEmittedReadable\n\n  // If we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (\n    n === 0 &&\n    state.needReadable &&\n    ((state.highWaterMark !== 0 ? state.length >= state.highWaterMark : state.length > 0) || state.ended)\n  ) {\n    debug('read: emitReadable', state.length, state.ended)\n    if (state.length === 0 && state.ended) endReadable(this)\n    else emitReadable(this)\n    return null\n  }\n  n = howMuchToRead(n, state)\n\n  // If we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this)\n    return null\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  let doRead = (state.state & kNeedReadable) !== 0\n  debug('need readable', doRead)\n\n  // If we currently have less than the highWaterMark, then also read some.\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true\n    debug('length less than watermark', doRead)\n  }\n\n  // However, if we've ended, then there's no point, if we're already\n  // reading, then it's unnecessary, if we're constructing we have to wait,\n  // and if we're destroyed or errored, then it's not allowed,\n  if (state.ended || state.reading || state.destroyed || state.errored || !state.constructed) {\n    doRead = false\n    debug('reading, ended or constructing', doRead)\n  } else if (doRead) {\n    debug('do read')\n    state.state |= kReading | kSync\n    // If the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.state |= kNeedReadable\n\n    // Call internal read method\n    try {\n      this._read(state.highWaterMark)\n    } catch (err) {\n      errorOrDestroy(this, err)\n    }\n    state.state &= ~kSync\n\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state)\n  }\n  let ret\n  if (n > 0) ret = fromList(n, state)\n  else ret = null\n  if (ret === null) {\n    state.needReadable = state.length <= state.highWaterMark\n    n = 0\n  } else {\n    state.length -= n\n    if (state.multiAwaitDrain) {\n      state.awaitDrainWriters.clear()\n    } else {\n      state.awaitDrainWriters = null\n    }\n  }\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this)\n  }\n  if (ret !== null && !state.errorEmitted && !state.closeEmitted) {\n    state.dataEmitted = true\n    this.emit('data', ret)\n  }\n  return ret\n}\nfunction onEofChunk(stream, state) {\n  debug('onEofChunk')\n  if (state.ended) return\n  if (state.decoder) {\n    const chunk = state.decoder.end()\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk)\n      state.length += state.objectMode ? 1 : chunk.length\n    }\n  }\n  state.ended = true\n  if (state.sync) {\n    // If we are sync, wait until next tick to emit the data.\n    // Otherwise we risk emitting data in the flow()\n    // the readable code triggers during a read() call.\n    emitReadable(stream)\n  } else {\n    // Emit 'readable' now to make sure it gets picked up.\n    state.needReadable = false\n    state.emittedReadable = true\n    // We have to emit readable now that we are EOF. Modules\n    // in the ecosystem (e.g. dicer) rely on this event being sync.\n    emitReadable_(stream)\n  }\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  const state = stream._readableState\n  debug('emitReadable', state.needReadable, state.emittedReadable)\n  state.needReadable = false\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing)\n    state.emittedReadable = true\n    process.nextTick(emitReadable_, stream)\n  }\n}\nfunction emitReadable_(stream) {\n  const state = stream._readableState\n  debug('emitReadable_', state.destroyed, state.length, state.ended)\n  if (!state.destroyed && !state.errored && (state.length || state.ended)) {\n    stream.emit('readable')\n    state.emittedReadable = false\n  }\n\n  // The stream needs another readable event if:\n  // 1. It is not flowing, as the flow mechanism will take\n  //    care of it.\n  // 2. It is not ended.\n  // 3. It is below the highWaterMark, so we can schedule\n  //    another readable later.\n  state.needReadable = !state.flowing && !state.ended && state.length <= state.highWaterMark\n  flow(stream)\n}\n\n// At this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore && state.constructed) {\n    state.readingMore = true\n    process.nextTick(maybeReadMore_, stream, state)\n  }\n}\nfunction maybeReadMore_(stream, state) {\n  // Attempt to read more data if we should.\n  //\n  // The conditions for reading more data are (one of):\n  // - Not enough data buffered (state.length < state.highWaterMark). The loop\n  //   is responsible for filling the buffer with enough data if such data\n  //   is available. If highWaterMark is 0 and we are not in the flowing mode\n  //   we should _not_ attempt to buffer any extra data. We'll get more data\n  //   when the stream consumer calls read() instead.\n  // - No data in the buffer, and the stream is in flowing mode. In this mode\n  //   the loop below is responsible for ensuring read() is called. Failing to\n  //   call read here would abort the flow and there's no other mechanism for\n  //   continuing the flow if the stream consumer has just subscribed to the\n  //   'data' event.\n  //\n  // In addition to the above conditions to keep reading data, the following\n  // conditions prevent the data from being read:\n  // - The stream has ended (state.ended).\n  // - There is already a pending 'read' operation (state.reading). This is a\n  //   case where the stream has called the implementation defined _read()\n  //   method, but they are processing the call asynchronously and have _not_\n  //   called push() with new data. In this case we skip performing more\n  //   read()s. The execution ends in this method again after the _read() ends\n  //   up calling push() with more data.\n  while (\n    !state.reading &&\n    !state.ended &&\n    (state.length < state.highWaterMark || (state.flowing && state.length === 0))\n  ) {\n    const len = state.length\n    debug('maybeReadMore read 0')\n    stream.read(0)\n    if (len === state.length)\n      // Didn't get any data, stop spinning.\n      break\n  }\n  state.readingMore = false\n}\n\n// Abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  throw new ERR_METHOD_NOT_IMPLEMENTED('_read()')\n}\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  const src = this\n  const state = this._readableState\n  if (state.pipes.length === 1) {\n    if (!state.multiAwaitDrain) {\n      state.multiAwaitDrain = true\n      state.awaitDrainWriters = new SafeSet(state.awaitDrainWriters ? [state.awaitDrainWriters] : [])\n    }\n  }\n  state.pipes.push(dest)\n  debug('pipe count=%d opts=%j', state.pipes.length, pipeOpts)\n  const doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr\n  const endFn = doEnd ? onend : unpipe\n  if (state.endEmitted) process.nextTick(endFn)\n  else src.once('end', endFn)\n  dest.on('unpipe', onunpipe)\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe')\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true\n        cleanup()\n      }\n    }\n  }\n  function onend() {\n    debug('onend')\n    dest.end()\n  }\n  let ondrain\n  let cleanedUp = false\n  function cleanup() {\n    debug('cleanup')\n    // Cleanup event handlers once the pipe is broken.\n    dest.removeListener('close', onclose)\n    dest.removeListener('finish', onfinish)\n    if (ondrain) {\n      dest.removeListener('drain', ondrain)\n    }\n    dest.removeListener('error', onerror)\n    dest.removeListener('unpipe', onunpipe)\n    src.removeListener('end', onend)\n    src.removeListener('end', unpipe)\n    src.removeListener('data', ondata)\n    cleanedUp = true\n\n    // If the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (ondrain && state.awaitDrainWriters && (!dest._writableState || dest._writableState.needDrain)) ondrain()\n  }\n  function pause() {\n    // If the user unpiped during `dest.write()`, it is possible\n    // to get stuck in a permanently paused state if that write\n    // also returned false.\n    // => Check whether `dest` is still a piping destination.\n    if (!cleanedUp) {\n      if (state.pipes.length === 1 && state.pipes[0] === dest) {\n        debug('false write response, pause', 0)\n        state.awaitDrainWriters = dest\n        state.multiAwaitDrain = false\n      } else if (state.pipes.length > 1 && state.pipes.includes(dest)) {\n        debug('false write response, pause', state.awaitDrainWriters.size)\n        state.awaitDrainWriters.add(dest)\n      }\n      src.pause()\n    }\n    if (!ondrain) {\n      // When the dest drains, it reduces the awaitDrain counter\n      // on the source.  This would be more elegant with a .once()\n      // handler in flow(), but adding and removing repeatedly is\n      // too slow.\n      ondrain = pipeOnDrain(src, dest)\n      dest.on('drain', ondrain)\n    }\n  }\n  src.on('data', ondata)\n  function ondata(chunk) {\n    debug('ondata')\n    const ret = dest.write(chunk)\n    debug('dest.write', ret)\n    if (ret === false) {\n      pause()\n    }\n  }\n\n  // If the dest has an error, then stop piping into it.\n  // However, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er)\n    unpipe()\n    dest.removeListener('error', onerror)\n    if (dest.listenerCount('error') === 0) {\n      const s = dest._writableState || dest._readableState\n      if (s && !s.errorEmitted) {\n        // User incorrectly emitted 'error' directly on the stream.\n        errorOrDestroy(dest, er)\n      } else {\n        dest.emit('error', er)\n      }\n    }\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror)\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish)\n    unpipe()\n  }\n  dest.once('close', onclose)\n  function onfinish() {\n    debug('onfinish')\n    dest.removeListener('close', onclose)\n    unpipe()\n  }\n  dest.once('finish', onfinish)\n  function unpipe() {\n    debug('unpipe')\n    src.unpipe(dest)\n  }\n\n  // Tell the dest that it's being piped to.\n  dest.emit('pipe', src)\n\n  // Start the flow if it hasn't been started already.\n\n  if (dest.writableNeedDrain === true) {\n    pause()\n  } else if (!state.flowing) {\n    debug('pipe resume')\n    src.resume()\n  }\n  return dest\n}\nfunction pipeOnDrain(src, dest) {\n  return function pipeOnDrainFunctionResult() {\n    const state = src._readableState\n\n    // `ondrain` will call directly,\n    // `this` maybe not a reference to dest,\n    // so we use the real dest here.\n    if (state.awaitDrainWriters === dest) {\n      debug('pipeOnDrain', 1)\n      state.awaitDrainWriters = null\n    } else if (state.multiAwaitDrain) {\n      debug('pipeOnDrain', state.awaitDrainWriters.size)\n      state.awaitDrainWriters.delete(dest)\n    }\n    if ((!state.awaitDrainWriters || state.awaitDrainWriters.size === 0) && src.listenerCount('data')) {\n      src.resume()\n    }\n  }\n}\nReadable.prototype.unpipe = function (dest) {\n  const state = this._readableState\n  const unpipeInfo = {\n    hasUnpiped: false\n  }\n\n  // If we're not piping anywhere, then do nothing.\n  if (state.pipes.length === 0) return this\n  if (!dest) {\n    // remove all.\n    const dests = state.pipes\n    state.pipes = []\n    this.pause()\n    for (let i = 0; i < dests.length; i++)\n      dests[i].emit('unpipe', this, {\n        hasUnpiped: false\n      })\n    return this\n  }\n\n  // Try to find the right one.\n  const index = ArrayPrototypeIndexOf(state.pipes, dest)\n  if (index === -1) return this\n  state.pipes.splice(index, 1)\n  if (state.pipes.length === 0) this.pause()\n  dest.emit('unpipe', this, unpipeInfo)\n  return this\n}\n\n// Set up data events if they are asked for\n// Ensure readable listeners eventually get something.\nReadable.prototype.on = function (ev, fn) {\n  const res = Stream.prototype.on.call(this, ev, fn)\n  const state = this._readableState\n  if (ev === 'data') {\n    // Update readableListening so that resume() may be a no-op\n    // a few lines down. This is needed to support once('readable').\n    state.readableListening = this.listenerCount('readable') > 0\n\n    // Try start flowing on next tick if stream isn't explicitly paused.\n    if (state.flowing !== false) this.resume()\n  } else if (ev === 'readable') {\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true\n      state.flowing = false\n      state.emittedReadable = false\n      debug('on readable', state.length, state.reading)\n      if (state.length) {\n        emitReadable(this)\n      } else if (!state.reading) {\n        process.nextTick(nReadingNextTick, this)\n      }\n    }\n  }\n  return res\n}\nReadable.prototype.addListener = Readable.prototype.on\nReadable.prototype.removeListener = function (ev, fn) {\n  const res = Stream.prototype.removeListener.call(this, ev, fn)\n  if (ev === 'readable') {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this)\n  }\n  return res\n}\nReadable.prototype.off = Readable.prototype.removeListener\nReadable.prototype.removeAllListeners = function (ev) {\n  const res = Stream.prototype.removeAllListeners.apply(this, arguments)\n  if (ev === 'readable' || ev === undefined) {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this)\n  }\n  return res\n}\nfunction updateReadableListening(self) {\n  const state = self._readableState\n  state.readableListening = self.listenerCount('readable') > 0\n  if (state.resumeScheduled && state[kPaused] === false) {\n    // Flowing needs to be set to true now, otherwise\n    // the upcoming resume will not flow.\n    state.flowing = true\n\n    // Crude way to check if we should resume.\n  } else if (self.listenerCount('data') > 0) {\n    self.resume()\n  } else if (!state.readableListening) {\n    state.flowing = null\n  }\n}\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0')\n  self.read(0)\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  const state = this._readableState\n  if (!state.flowing) {\n    debug('resume')\n    // We flow only if there is no one listening\n    // for readable, but we still have to call\n    // resume().\n    state.flowing = !state.readableListening\n    resume(this, state)\n  }\n  state[kPaused] = false\n  return this\n}\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true\n    process.nextTick(resume_, stream, state)\n  }\n}\nfunction resume_(stream, state) {\n  debug('resume', state.reading)\n  if (!state.reading) {\n    stream.read(0)\n  }\n  state.resumeScheduled = false\n  stream.emit('resume')\n  flow(stream)\n  if (state.flowing && !state.reading) stream.read(0)\n}\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing)\n  if (this._readableState.flowing !== false) {\n    debug('pause')\n    this._readableState.flowing = false\n    this.emit('pause')\n  }\n  this._readableState[kPaused] = true\n  return this\n}\nfunction flow(stream) {\n  const state = stream._readableState\n  debug('flow', state.flowing)\n  while (state.flowing && stream.read() !== null);\n}\n\n// Wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  let paused = false\n\n  // TODO (ronag): Should this.destroy(err) emit\n  // 'error' on the wrapped stream? Would require\n  // a static factory method, e.g. Readable.wrap(stream).\n\n  stream.on('data', (chunk) => {\n    if (!this.push(chunk) && stream.pause) {\n      paused = true\n      stream.pause()\n    }\n  })\n  stream.on('end', () => {\n    this.push(null)\n  })\n  stream.on('error', (err) => {\n    errorOrDestroy(this, err)\n  })\n  stream.on('close', () => {\n    this.destroy()\n  })\n  stream.on('destroy', () => {\n    this.destroy()\n  })\n  this._read = () => {\n    if (paused && stream.resume) {\n      paused = false\n      stream.resume()\n    }\n  }\n\n  // Proxy all the other methods. Important when wrapping filters and duplexes.\n  const streamKeys = ObjectKeys(stream)\n  for (let j = 1; j < streamKeys.length; j++) {\n    const i = streamKeys[j]\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = stream[i].bind(stream)\n    }\n  }\n  return this\n}\nReadable.prototype[SymbolAsyncIterator] = function () {\n  return streamToAsyncIterator(this)\n}\nReadable.prototype.iterator = function (options) {\n  if (options !== undefined) {\n    validateObject(options, 'options')\n  }\n  return streamToAsyncIterator(this, options)\n}\nfunction streamToAsyncIterator(stream, options) {\n  if (typeof stream.read !== 'function') {\n    stream = Readable.wrap(stream, {\n      objectMode: true\n    })\n  }\n  const iter = createAsyncIterator(stream, options)\n  iter.stream = stream\n  return iter\n}\nasync function* createAsyncIterator(stream, options) {\n  let callback = nop\n  function next(resolve) {\n    if (this === stream) {\n      callback()\n      callback = nop\n    } else {\n      callback = resolve\n    }\n  }\n  stream.on('readable', next)\n  let error\n  const cleanup = eos(\n    stream,\n    {\n      writable: false\n    },\n    (err) => {\n      error = err ? aggregateTwoErrors(error, err) : null\n      callback()\n      callback = nop\n    }\n  )\n  try {\n    while (true) {\n      const chunk = stream.destroyed ? null : stream.read()\n      if (chunk !== null) {\n        yield chunk\n      } else if (error) {\n        throw error\n      } else if (error === null) {\n        return\n      } else {\n        await new Promise(next)\n      }\n    }\n  } catch (err) {\n    error = aggregateTwoErrors(error, err)\n    throw error\n  } finally {\n    if (\n      (error || (options === null || options === undefined ? undefined : options.destroyOnReturn) !== false) &&\n      (error === undefined || stream._readableState.autoDestroy)\n    ) {\n      destroyImpl.destroyer(stream, null)\n    } else {\n      stream.off('readable', next)\n      cleanup()\n    }\n  }\n}\n\n// Making it explicit these properties are not enumerable\n// because otherwise some prototype manipulation in\n// userland will fail.\nObjectDefineProperties(Readable.prototype, {\n  readable: {\n    __proto__: null,\n    get() {\n      const r = this._readableState\n      // r.readable === false means that this is part of a Duplex stream\n      // where the readable side was disabled upon construction.\n      // Compat. The user might manually disable readable side through\n      // deprecated setter.\n      return !!r && r.readable !== false && !r.destroyed && !r.errorEmitted && !r.endEmitted\n    },\n    set(val) {\n      // Backwards compat.\n      if (this._readableState) {\n        this._readableState.readable = !!val\n      }\n    }\n  },\n  readableDidRead: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return this._readableState.dataEmitted\n    }\n  },\n  readableAborted: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return !!(\n        this._readableState.readable !== false &&\n        (this._readableState.destroyed || this._readableState.errored) &&\n        !this._readableState.endEmitted\n      )\n    }\n  },\n  readableHighWaterMark: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return this._readableState.highWaterMark\n    }\n  },\n  readableBuffer: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return this._readableState && this._readableState.buffer\n    }\n  },\n  readableFlowing: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return this._readableState.flowing\n    },\n    set: function (state) {\n      if (this._readableState) {\n        this._readableState.flowing = state\n      }\n    }\n  },\n  readableLength: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState.length\n    }\n  },\n  readableObjectMode: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.objectMode : false\n    }\n  },\n  readableEncoding: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.encoding : null\n    }\n  },\n  errored: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.errored : null\n    }\n  },\n  closed: {\n    __proto__: null,\n    get() {\n      return this._readableState ? this._readableState.closed : false\n    }\n  },\n  destroyed: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.destroyed : false\n    },\n    set(value) {\n      // We ignore the value if the stream\n      // has not been initialized yet.\n      if (!this._readableState) {\n        return\n      }\n\n      // Backward compatibility, the user is explicitly\n      // managing destroyed.\n      this._readableState.destroyed = value\n    }\n  },\n  readableEnded: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.endEmitted : false\n    }\n  }\n})\nObjectDefineProperties(ReadableState.prototype, {\n  // Legacy getter for `pipesCount`.\n  pipesCount: {\n    __proto__: null,\n    get() {\n      return this.pipes.length\n    }\n  },\n  // Legacy property for `paused`.\n  paused: {\n    __proto__: null,\n    get() {\n      return this[kPaused] !== false\n    },\n    set(value) {\n      this[kPaused] = !!value\n    }\n  }\n})\n\n// Exposed for testing purposes only.\nReadable._fromList = fromList\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered.\n  if (state.length === 0) return null\n  let ret\n  if (state.objectMode) ret = state.buffer.shift()\n  else if (!n || n >= state.length) {\n    // Read it all, truncate the list.\n    if (state.decoder) ret = state.buffer.join('')\n    else if (state.buffer.length === 1) ret = state.buffer.first()\n    else ret = state.buffer.concat(state.length)\n    state.buffer.clear()\n  } else {\n    // read part of list.\n    ret = state.buffer.consume(n, state.decoder)\n  }\n  return ret\n}\nfunction endReadable(stream) {\n  const state = stream._readableState\n  debug('endReadable', state.endEmitted)\n  if (!state.endEmitted) {\n    state.ended = true\n    process.nextTick(endReadableNT, state, stream)\n  }\n}\nfunction endReadableNT(state, stream) {\n  debug('endReadableNT', state.endEmitted, state.length)\n\n  // Check that we didn't get one last unshift.\n  if (!state.errored && !state.closeEmitted && !state.endEmitted && state.length === 0) {\n    state.endEmitted = true\n    stream.emit('end')\n    if (stream.writable && stream.allowHalfOpen === false) {\n      process.nextTick(endWritableNT, stream)\n    } else if (state.autoDestroy) {\n      // In case of duplex streams we need a way to detect\n      // if the writable side is ready for autoDestroy as well.\n      const wState = stream._writableState\n      const autoDestroy =\n        !wState ||\n        (wState.autoDestroy &&\n          // We don't expect the writable to ever 'finish'\n          // if writable is explicitly set to false.\n          (wState.finished || wState.writable === false))\n      if (autoDestroy) {\n        stream.destroy()\n      }\n    }\n  }\n}\nfunction endWritableNT(stream) {\n  const writable = stream.writable && !stream.writableEnded && !stream.destroyed\n  if (writable) {\n    stream.end()\n  }\n}\nReadable.from = function (iterable, opts) {\n  return from(Readable, iterable, opts)\n}\nlet webStreamsAdapters\n\n// Lazy to avoid circular references\nfunction lazyWebStreams() {\n  if (webStreamsAdapters === undefined) webStreamsAdapters = {}\n  return webStreamsAdapters\n}\nReadable.fromWeb = function (readableStream, options) {\n  return lazyWebStreams().newStreamReadableFromReadableStream(readableStream, options)\n}\nReadable.toWeb = function (streamReadable, options) {\n  return lazyWebStreams().newReadableStreamFromStreamReadable(streamReadable, options)\n}\nReadable.wrap = function (src, options) {\n  var _ref, _src$readableObjectMo\n  return new Readable({\n    objectMode:\n      (_ref =\n        (_src$readableObjectMo = src.readableObjectMode) !== null && _src$readableObjectMo !== undefined\n          ? _src$readableObjectMo\n          : src.objectMode) !== null && _ref !== undefined\n        ? _ref\n        : true,\n    ...options,\n    destroy(err, callback) {\n      destroyImpl.destroyer(src, err)\n      callback(err)\n    }\n  }).wrap(src)\n}\n","'use strict'\n\nconst { MathFloor, NumberIsInteger } = require('../../ours/primordials')\nconst { validateInteger } = require('../validators')\nconst { ERR_INVALID_ARG_VALUE } = require('../../ours/errors').codes\nlet defaultHighWaterMarkBytes = 16 * 1024\nlet defaultHighWaterMarkObjectMode = 16\nfunction highWaterMarkFrom(options, isDuplex, duplexKey) {\n  return options.highWaterMark != null ? options.highWaterMark : isDuplex ? options[duplexKey] : null\n}\nfunction getDefaultHighWaterMark(objectMode) {\n  return objectMode ? defaultHighWaterMarkObjectMode : defaultHighWaterMarkBytes\n}\nfunction setDefaultHighWaterMark(objectMode, value) {\n  validateInteger(value, 'value', 0)\n  if (objectMode) {\n    defaultHighWaterMarkObjectMode = value\n  } else {\n    defaultHighWaterMarkBytes = value\n  }\n}\nfunction getHighWaterMark(state, options, duplexKey, isDuplex) {\n  const hwm = highWaterMarkFrom(options, isDuplex, duplexKey)\n  if (hwm != null) {\n    if (!NumberIsInteger(hwm) || hwm < 0) {\n      const name = isDuplex ? `options.${duplexKey}` : 'options.highWaterMark'\n      throw new ERR_INVALID_ARG_VALUE(name, hwm)\n    }\n    return MathFloor(hwm)\n  }\n\n  // Default value\n  return getDefaultHighWaterMark(state.objectMode)\n}\nmodule.exports = {\n  getHighWaterMark,\n  getDefaultHighWaterMark,\n  setDefaultHighWaterMark\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict'\n\nconst { ObjectSetPrototypeOf, Symbol } = require('../../ours/primordials')\nmodule.exports = Transform\nconst { ERR_METHOD_NOT_IMPLEMENTED } = require('../../ours/errors').codes\nconst Duplex = require('./duplex')\nconst { getHighWaterMark } = require('./state')\nObjectSetPrototypeOf(Transform.prototype, Duplex.prototype)\nObjectSetPrototypeOf(Transform, Duplex)\nconst kCallback = Symbol('kCallback')\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options)\n\n  // TODO (ronag): This should preferably always be\n  // applied but would be semver-major. Or even better;\n  // make Transform a Readable with the Writable interface.\n  const readableHighWaterMark = options ? getHighWaterMark(this, options, 'readableHighWaterMark', true) : null\n  if (readableHighWaterMark === 0) {\n    // A Duplex will buffer both on the writable and readable side while\n    // a Transform just wants to buffer hwm number of elements. To avoid\n    // buffering twice we disable buffering on the writable side.\n    options = {\n      ...options,\n      highWaterMark: null,\n      readableHighWaterMark,\n      // TODO (ronag): 0 is not optimal since we have\n      // a \"bug\" where we check needDrain before calling _write and not after.\n      // Refs: https://github.com/nodejs/node/pull/32887\n      // Refs: https://github.com/nodejs/node/pull/35941\n      writableHighWaterMark: options.writableHighWaterMark || 0\n    }\n  }\n  Duplex.call(this, options)\n\n  // We have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false\n  this[kCallback] = null\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform\n    if (typeof options.flush === 'function') this._flush = options.flush\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  // Backwards compat. Some Transform streams incorrectly implement _final\n  // instead of or in addition to _flush. By using 'prefinish' instead of\n  // implementing _final we continue supporting this unfortunate use case.\n  this.on('prefinish', prefinish)\n}\nfunction final(cb) {\n  if (typeof this._flush === 'function' && !this.destroyed) {\n    this._flush((er, data) => {\n      if (er) {\n        if (cb) {\n          cb(er)\n        } else {\n          this.destroy(er)\n        }\n        return\n      }\n      if (data != null) {\n        this.push(data)\n      }\n      this.push(null)\n      if (cb) {\n        cb()\n      }\n    })\n  } else {\n    this.push(null)\n    if (cb) {\n      cb()\n    }\n  }\n}\nfunction prefinish() {\n  if (this._final !== final) {\n    final.call(this)\n  }\n}\nTransform.prototype._final = final\nTransform.prototype._transform = function (chunk, encoding, callback) {\n  throw new ERR_METHOD_NOT_IMPLEMENTED('_transform()')\n}\nTransform.prototype._write = function (chunk, encoding, callback) {\n  const rState = this._readableState\n  const wState = this._writableState\n  const length = rState.length\n  this._transform(chunk, encoding, (err, val) => {\n    if (err) {\n      callback(err)\n      return\n    }\n    if (val != null) {\n      this.push(val)\n    }\n    if (\n      wState.ended ||\n      // Backwards compat.\n      length === rState.length ||\n      // Backwards compat.\n      rState.length < rState.highWaterMark\n    ) {\n      callback()\n    } else {\n      this[kCallback] = callback\n    }\n  })\n}\nTransform.prototype._read = function () {\n  if (this[kCallback]) {\n    const callback = this[kCallback]\n    this[kCallback] = null\n    callback()\n  }\n}\n","'use strict'\n\nconst { SymbolAsyncIterator, SymbolIterator, SymbolFor } = require('../../ours/primordials')\n\n// We need to use SymbolFor to make these globally available\n// for interopt with readable-stream, i.e. readable-stream\n// and node core needs to be able to read/write private state\n// from each other for proper interoperability.\nconst kIsDestroyed = SymbolFor('nodejs.stream.destroyed')\nconst kIsErrored = SymbolFor('nodejs.stream.errored')\nconst kIsReadable = SymbolFor('nodejs.stream.readable')\nconst kIsWritable = SymbolFor('nodejs.stream.writable')\nconst kIsDisturbed = SymbolFor('nodejs.stream.disturbed')\nconst kIsClosedPromise = SymbolFor('nodejs.webstream.isClosedPromise')\nconst kControllerErrorFunction = SymbolFor('nodejs.webstream.controllerErrorFunction')\nfunction isReadableNodeStream(obj, strict = false) {\n  var _obj$_readableState\n  return !!(\n    (\n      obj &&\n      typeof obj.pipe === 'function' &&\n      typeof obj.on === 'function' &&\n      (!strict || (typeof obj.pause === 'function' && typeof obj.resume === 'function')) &&\n      (!obj._writableState ||\n        ((_obj$_readableState = obj._readableState) === null || _obj$_readableState === undefined\n          ? undefined\n          : _obj$_readableState.readable) !== false) &&\n      // Duplex\n      (!obj._writableState || obj._readableState)\n    ) // Writable has .pipe.\n  )\n}\n\nfunction isWritableNodeStream(obj) {\n  var _obj$_writableState\n  return !!(\n    (\n      obj &&\n      typeof obj.write === 'function' &&\n      typeof obj.on === 'function' &&\n      (!obj._readableState ||\n        ((_obj$_writableState = obj._writableState) === null || _obj$_writableState === undefined\n          ? undefined\n          : _obj$_writableState.writable) !== false)\n    ) // Duplex\n  )\n}\n\nfunction isDuplexNodeStream(obj) {\n  return !!(\n    obj &&\n    typeof obj.pipe === 'function' &&\n    obj._readableState &&\n    typeof obj.on === 'function' &&\n    typeof obj.write === 'function'\n  )\n}\nfunction isNodeStream(obj) {\n  return (\n    obj &&\n    (obj._readableState ||\n      obj._writableState ||\n      (typeof obj.write === 'function' && typeof obj.on === 'function') ||\n      (typeof obj.pipe === 'function' && typeof obj.on === 'function'))\n  )\n}\nfunction isReadableStream(obj) {\n  return !!(\n    obj &&\n    !isNodeStream(obj) &&\n    typeof obj.pipeThrough === 'function' &&\n    typeof obj.getReader === 'function' &&\n    typeof obj.cancel === 'function'\n  )\n}\nfunction isWritableStream(obj) {\n  return !!(obj && !isNodeStream(obj) && typeof obj.getWriter === 'function' && typeof obj.abort === 'function')\n}\nfunction isTransformStream(obj) {\n  return !!(obj && !isNodeStream(obj) && typeof obj.readable === 'object' && typeof obj.writable === 'object')\n}\nfunction isWebStream(obj) {\n  return isReadableStream(obj) || isWritableStream(obj) || isTransformStream(obj)\n}\nfunction isIterable(obj, isAsync) {\n  if (obj == null) return false\n  if (isAsync === true) return typeof obj[SymbolAsyncIterator] === 'function'\n  if (isAsync === false) return typeof obj[SymbolIterator] === 'function'\n  return typeof obj[SymbolAsyncIterator] === 'function' || typeof obj[SymbolIterator] === 'function'\n}\nfunction isDestroyed(stream) {\n  if (!isNodeStream(stream)) return null\n  const wState = stream._writableState\n  const rState = stream._readableState\n  const state = wState || rState\n  return !!(stream.destroyed || stream[kIsDestroyed] || (state !== null && state !== undefined && state.destroyed))\n}\n\n// Have been end():d.\nfunction isWritableEnded(stream) {\n  if (!isWritableNodeStream(stream)) return null\n  if (stream.writableEnded === true) return true\n  const wState = stream._writableState\n  if (wState !== null && wState !== undefined && wState.errored) return false\n  if (typeof (wState === null || wState === undefined ? undefined : wState.ended) !== 'boolean') return null\n  return wState.ended\n}\n\n// Have emitted 'finish'.\nfunction isWritableFinished(stream, strict) {\n  if (!isWritableNodeStream(stream)) return null\n  if (stream.writableFinished === true) return true\n  const wState = stream._writableState\n  if (wState !== null && wState !== undefined && wState.errored) return false\n  if (typeof (wState === null || wState === undefined ? undefined : wState.finished) !== 'boolean') return null\n  return !!(wState.finished || (strict === false && wState.ended === true && wState.length === 0))\n}\n\n// Have been push(null):d.\nfunction isReadableEnded(stream) {\n  if (!isReadableNodeStream(stream)) return null\n  if (stream.readableEnded === true) return true\n  const rState = stream._readableState\n  if (!rState || rState.errored) return false\n  if (typeof (rState === null || rState === undefined ? undefined : rState.ended) !== 'boolean') return null\n  return rState.ended\n}\n\n// Have emitted 'end'.\nfunction isReadableFinished(stream, strict) {\n  if (!isReadableNodeStream(stream)) return null\n  const rState = stream._readableState\n  if (rState !== null && rState !== undefined && rState.errored) return false\n  if (typeof (rState === null || rState === undefined ? undefined : rState.endEmitted) !== 'boolean') return null\n  return !!(rState.endEmitted || (strict === false && rState.ended === true && rState.length === 0))\n}\nfunction isReadable(stream) {\n  if (stream && stream[kIsReadable] != null) return stream[kIsReadable]\n  if (typeof (stream === null || stream === undefined ? undefined : stream.readable) !== 'boolean') return null\n  if (isDestroyed(stream)) return false\n  return isReadableNodeStream(stream) && stream.readable && !isReadableFinished(stream)\n}\nfunction isWritable(stream) {\n  if (stream && stream[kIsWritable] != null) return stream[kIsWritable]\n  if (typeof (stream === null || stream === undefined ? undefined : stream.writable) !== 'boolean') return null\n  if (isDestroyed(stream)) return false\n  return isWritableNodeStream(stream) && stream.writable && !isWritableEnded(stream)\n}\nfunction isFinished(stream, opts) {\n  if (!isNodeStream(stream)) {\n    return null\n  }\n  if (isDestroyed(stream)) {\n    return true\n  }\n  if ((opts === null || opts === undefined ? undefined : opts.readable) !== false && isReadable(stream)) {\n    return false\n  }\n  if ((opts === null || opts === undefined ? undefined : opts.writable) !== false && isWritable(stream)) {\n    return false\n  }\n  return true\n}\nfunction isWritableErrored(stream) {\n  var _stream$_writableStat, _stream$_writableStat2\n  if (!isNodeStream(stream)) {\n    return null\n  }\n  if (stream.writableErrored) {\n    return stream.writableErrored\n  }\n  return (_stream$_writableStat =\n    (_stream$_writableStat2 = stream._writableState) === null || _stream$_writableStat2 === undefined\n      ? undefined\n      : _stream$_writableStat2.errored) !== null && _stream$_writableStat !== undefined\n    ? _stream$_writableStat\n    : null\n}\nfunction isReadableErrored(stream) {\n  var _stream$_readableStat, _stream$_readableStat2\n  if (!isNodeStream(stream)) {\n    return null\n  }\n  if (stream.readableErrored) {\n    return stream.readableErrored\n  }\n  return (_stream$_readableStat =\n    (_stream$_readableStat2 = stream._readableState) === null || _stream$_readableStat2 === undefined\n      ? undefined\n      : _stream$_readableStat2.errored) !== null && _stream$_readableStat !== undefined\n    ? _stream$_readableStat\n    : null\n}\nfunction isClosed(stream) {\n  if (!isNodeStream(stream)) {\n    return null\n  }\n  if (typeof stream.closed === 'boolean') {\n    return stream.closed\n  }\n  const wState = stream._writableState\n  const rState = stream._readableState\n  if (\n    typeof (wState === null || wState === undefined ? undefined : wState.closed) === 'boolean' ||\n    typeof (rState === null || rState === undefined ? undefined : rState.closed) === 'boolean'\n  ) {\n    return (\n      (wState === null || wState === undefined ? undefined : wState.closed) ||\n      (rState === null || rState === undefined ? undefined : rState.closed)\n    )\n  }\n  if (typeof stream._closed === 'boolean' && isOutgoingMessage(stream)) {\n    return stream._closed\n  }\n  return null\n}\nfunction isOutgoingMessage(stream) {\n  return (\n    typeof stream._closed === 'boolean' &&\n    typeof stream._defaultKeepAlive === 'boolean' &&\n    typeof stream._removedConnection === 'boolean' &&\n    typeof stream._removedContLen === 'boolean'\n  )\n}\nfunction isServerResponse(stream) {\n  return typeof stream._sent100 === 'boolean' && isOutgoingMessage(stream)\n}\nfunction isServerRequest(stream) {\n  var _stream$req\n  return (\n    typeof stream._consuming === 'boolean' &&\n    typeof stream._dumped === 'boolean' &&\n    ((_stream$req = stream.req) === null || _stream$req === undefined ? undefined : _stream$req.upgradeOrConnect) ===\n      undefined\n  )\n}\nfunction willEmitClose(stream) {\n  if (!isNodeStream(stream)) return null\n  const wState = stream._writableState\n  const rState = stream._readableState\n  const state = wState || rState\n  return (\n    (!state && isServerResponse(stream)) || !!(state && state.autoDestroy && state.emitClose && state.closed === false)\n  )\n}\nfunction isDisturbed(stream) {\n  var _stream$kIsDisturbed\n  return !!(\n    stream &&\n    ((_stream$kIsDisturbed = stream[kIsDisturbed]) !== null && _stream$kIsDisturbed !== undefined\n      ? _stream$kIsDisturbed\n      : stream.readableDidRead || stream.readableAborted)\n  )\n}\nfunction isErrored(stream) {\n  var _ref,\n    _ref2,\n    _ref3,\n    _ref4,\n    _ref5,\n    _stream$kIsErrored,\n    _stream$_readableStat3,\n    _stream$_writableStat3,\n    _stream$_readableStat4,\n    _stream$_writableStat4\n  return !!(\n    stream &&\n    ((_ref =\n      (_ref2 =\n        (_ref3 =\n          (_ref4 =\n            (_ref5 =\n              (_stream$kIsErrored = stream[kIsErrored]) !== null && _stream$kIsErrored !== undefined\n                ? _stream$kIsErrored\n                : stream.readableErrored) !== null && _ref5 !== undefined\n              ? _ref5\n              : stream.writableErrored) !== null && _ref4 !== undefined\n            ? _ref4\n            : (_stream$_readableStat3 = stream._readableState) === null || _stream$_readableStat3 === undefined\n            ? undefined\n            : _stream$_readableStat3.errorEmitted) !== null && _ref3 !== undefined\n          ? _ref3\n          : (_stream$_writableStat3 = stream._writableState) === null || _stream$_writableStat3 === undefined\n          ? undefined\n          : _stream$_writableStat3.errorEmitted) !== null && _ref2 !== undefined\n        ? _ref2\n        : (_stream$_readableStat4 = stream._readableState) === null || _stream$_readableStat4 === undefined\n        ? undefined\n        : _stream$_readableStat4.errored) !== null && _ref !== undefined\n      ? _ref\n      : (_stream$_writableStat4 = stream._writableState) === null || _stream$_writableStat4 === undefined\n      ? undefined\n      : _stream$_writableStat4.errored)\n  )\n}\nmodule.exports = {\n  isDestroyed,\n  kIsDestroyed,\n  isDisturbed,\n  kIsDisturbed,\n  isErrored,\n  kIsErrored,\n  isReadable,\n  kIsReadable,\n  kIsClosedPromise,\n  kControllerErrorFunction,\n  kIsWritable,\n  isClosed,\n  isDuplexNodeStream,\n  isFinished,\n  isIterable,\n  isReadableNodeStream,\n  isReadableStream,\n  isReadableEnded,\n  isReadableFinished,\n  isReadableErrored,\n  isNodeStream,\n  isWebStream,\n  isWritable,\n  isWritableNodeStream,\n  isWritableStream,\n  isWritableEnded,\n  isWritableFinished,\n  isWritableErrored,\n  isServerRequest,\n  isServerResponse,\n  willEmitClose,\n  isTransformStream\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n;('use strict')\nconst {\n  ArrayPrototypeSlice,\n  Error,\n  FunctionPrototypeSymbolHasInstance,\n  ObjectDefineProperty,\n  ObjectDefineProperties,\n  ObjectSetPrototypeOf,\n  StringPrototypeToLowerCase,\n  Symbol,\n  SymbolHasInstance\n} = require('../../ours/primordials')\nmodule.exports = Writable\nWritable.WritableState = WritableState\nconst { EventEmitter: EE } = require('events')\nconst Stream = require('./legacy').Stream\nconst { Buffer } = require('buffer')\nconst destroyImpl = require('./destroy')\nconst { addAbortSignal } = require('./add-abort-signal')\nconst { getHighWaterMark, getDefaultHighWaterMark } = require('./state')\nconst {\n  ERR_INVALID_ARG_TYPE,\n  ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_MULTIPLE_CALLBACK,\n  ERR_STREAM_CANNOT_PIPE,\n  ERR_STREAM_DESTROYED,\n  ERR_STREAM_ALREADY_FINISHED,\n  ERR_STREAM_NULL_VALUES,\n  ERR_STREAM_WRITE_AFTER_END,\n  ERR_UNKNOWN_ENCODING\n} = require('../../ours/errors').codes\nconst { errorOrDestroy } = destroyImpl\nObjectSetPrototypeOf(Writable.prototype, Stream.prototype)\nObjectSetPrototypeOf(Writable, Stream)\nfunction nop() {}\nconst kOnFinished = Symbol('kOnFinished')\nfunction WritableState(options, stream, isDuplex) {\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream,\n  // e.g. options.readableObjectMode vs. options.writableObjectMode, etc.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof require('./duplex')\n\n  // Object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!(options && options.objectMode)\n  if (isDuplex) this.objectMode = this.objectMode || !!(options && options.writableObjectMode)\n\n  // The point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write().\n  this.highWaterMark = options\n    ? getHighWaterMark(this, options, 'writableHighWaterMark', isDuplex)\n    : getDefaultHighWaterMark(false)\n\n  // if _final has been called.\n  this.finalCalled = false\n\n  // drain event flag.\n  this.needDrain = false\n  // At the start of calling end()\n  this.ending = false\n  // When end() has been called, and returned.\n  this.ended = false\n  // When 'finish' is emitted.\n  this.finished = false\n\n  // Has it been destroyed\n  this.destroyed = false\n\n  // Should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  const noDecode = !!(options && options.decodeStrings === false)\n  this.decodeStrings = !noDecode\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = (options && options.defaultEncoding) || 'utf8'\n\n  // Not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0\n\n  // A flag to see when we're in the middle of a write.\n  this.writing = false\n\n  // When true all writes will be buffered until .uncork() call.\n  this.corked = 0\n\n  // A flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true\n\n  // A flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false\n\n  // The callback that's passed to _write(chunk, cb).\n  this.onwrite = onwrite.bind(undefined, stream)\n\n  // The callback that the user supplies to write(chunk, encoding, cb).\n  this.writecb = null\n\n  // The amount that is being written when _write is called.\n  this.writelen = 0\n\n  // Storage for data passed to the afterWrite() callback in case of\n  // synchronous _write() completion.\n  this.afterWriteTickInfo = null\n  resetBuffer(this)\n\n  // Number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted.\n  this.pendingcb = 0\n\n  // Stream is still being constructed and cannot be\n  // destroyed until construction finished or failed.\n  // Async construction is opt in, therefore we start as\n  // constructed.\n  this.constructed = true\n\n  // Emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams.\n  this.prefinished = false\n\n  // True if the error was already emitted and should not be thrown again.\n  this.errorEmitted = false\n\n  // Should close be emitted on destroy. Defaults to true.\n  this.emitClose = !options || options.emitClose !== false\n\n  // Should .destroy() be called after 'finish' (and potentially 'end').\n  this.autoDestroy = !options || options.autoDestroy !== false\n\n  // Indicates whether the stream has errored. When true all write() calls\n  // should return false. This is needed since when autoDestroy\n  // is disabled we need a way to tell whether the stream has failed.\n  this.errored = null\n\n  // Indicates whether the stream has finished destroying.\n  this.closed = false\n\n  // True if close has been emitted or would have been emitted\n  // depending on emitClose.\n  this.closeEmitted = false\n  this[kOnFinished] = []\n}\nfunction resetBuffer(state) {\n  state.buffered = []\n  state.bufferedIndex = 0\n  state.allBuffers = true\n  state.allNoop = true\n}\nWritableState.prototype.getBuffer = function getBuffer() {\n  return ArrayPrototypeSlice(this.buffered, this.bufferedIndex)\n}\nObjectDefineProperty(WritableState.prototype, 'bufferedRequestCount', {\n  __proto__: null,\n  get() {\n    return this.buffered.length - this.bufferedIndex\n  }\n})\nfunction Writable(options) {\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the WritableState constructor, at least with V8 6.5.\n  const isDuplex = this instanceof require('./duplex')\n  if (!isDuplex && !FunctionPrototypeSymbolHasInstance(Writable, this)) return new Writable(options)\n  this._writableState = new WritableState(options, this, isDuplex)\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write\n    if (typeof options.writev === 'function') this._writev = options.writev\n    if (typeof options.destroy === 'function') this._destroy = options.destroy\n    if (typeof options.final === 'function') this._final = options.final\n    if (typeof options.construct === 'function') this._construct = options.construct\n    if (options.signal) addAbortSignal(options.signal, this)\n  }\n  Stream.call(this, options)\n  destroyImpl.construct(this, () => {\n    const state = this._writableState\n    if (!state.writing) {\n      clearBuffer(this, state)\n    }\n    finishMaybe(this, state)\n  })\n}\nObjectDefineProperty(Writable, SymbolHasInstance, {\n  __proto__: null,\n  value: function (object) {\n    if (FunctionPrototypeSymbolHasInstance(this, object)) return true\n    if (this !== Writable) return false\n    return object && object._writableState instanceof WritableState\n  }\n})\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  errorOrDestroy(this, new ERR_STREAM_CANNOT_PIPE())\n}\nfunction _write(stream, chunk, encoding, cb) {\n  const state = stream._writableState\n  if (typeof encoding === 'function') {\n    cb = encoding\n    encoding = state.defaultEncoding\n  } else {\n    if (!encoding) encoding = state.defaultEncoding\n    else if (encoding !== 'buffer' && !Buffer.isEncoding(encoding)) throw new ERR_UNKNOWN_ENCODING(encoding)\n    if (typeof cb !== 'function') cb = nop\n  }\n  if (chunk === null) {\n    throw new ERR_STREAM_NULL_VALUES()\n  } else if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      if (state.decodeStrings !== false) {\n        chunk = Buffer.from(chunk, encoding)\n        encoding = 'buffer'\n      }\n    } else if (chunk instanceof Buffer) {\n      encoding = 'buffer'\n    } else if (Stream._isUint8Array(chunk)) {\n      chunk = Stream._uint8ArrayToBuffer(chunk)\n      encoding = 'buffer'\n    } else {\n      throw new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk)\n    }\n  }\n  let err\n  if (state.ending) {\n    err = new ERR_STREAM_WRITE_AFTER_END()\n  } else if (state.destroyed) {\n    err = new ERR_STREAM_DESTROYED('write')\n  }\n  if (err) {\n    process.nextTick(cb, err)\n    errorOrDestroy(stream, err, true)\n    return err\n  }\n  state.pendingcb++\n  return writeOrBuffer(stream, state, chunk, encoding, cb)\n}\nWritable.prototype.write = function (chunk, encoding, cb) {\n  return _write(this, chunk, encoding, cb) === true\n}\nWritable.prototype.cork = function () {\n  this._writableState.corked++\n}\nWritable.prototype.uncork = function () {\n  const state = this._writableState\n  if (state.corked) {\n    state.corked--\n    if (!state.writing) clearBuffer(this, state)\n  }\n}\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = StringPrototypeToLowerCase(encoding)\n  if (!Buffer.isEncoding(encoding)) throw new ERR_UNKNOWN_ENCODING(encoding)\n  this._writableState.defaultEncoding = encoding\n  return this\n}\n\n// If we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, chunk, encoding, callback) {\n  const len = state.objectMode ? 1 : chunk.length\n  state.length += len\n\n  // stream._write resets state.length\n  const ret = state.length < state.highWaterMark\n  // We must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true\n  if (state.writing || state.corked || state.errored || !state.constructed) {\n    state.buffered.push({\n      chunk,\n      encoding,\n      callback\n    })\n    if (state.allBuffers && encoding !== 'buffer') {\n      state.allBuffers = false\n    }\n    if (state.allNoop && callback !== nop) {\n      state.allNoop = false\n    }\n  } else {\n    state.writelen = len\n    state.writecb = callback\n    state.writing = true\n    state.sync = true\n    stream._write(chunk, encoding, state.onwrite)\n    state.sync = false\n  }\n\n  // Return false if errored or destroyed in order to break\n  // any synchronous while(stream.write(data)) loops.\n  return ret && !state.errored && !state.destroyed\n}\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len\n  state.writecb = cb\n  state.writing = true\n  state.sync = true\n  if (state.destroyed) state.onwrite(new ERR_STREAM_DESTROYED('write'))\n  else if (writev) stream._writev(chunk, state.onwrite)\n  else stream._write(chunk, encoding, state.onwrite)\n  state.sync = false\n}\nfunction onwriteError(stream, state, er, cb) {\n  --state.pendingcb\n  cb(er)\n  // Ensure callbacks are invoked even when autoDestroy is\n  // not enabled. Passing `er` here doesn't make sense since\n  // it's related to one specific write, not to the buffered\n  // writes.\n  errorBuffer(state)\n  // This can emit error, but error must always follow cb.\n  errorOrDestroy(stream, er)\n}\nfunction onwrite(stream, er) {\n  const state = stream._writableState\n  const sync = state.sync\n  const cb = state.writecb\n  if (typeof cb !== 'function') {\n    errorOrDestroy(stream, new ERR_MULTIPLE_CALLBACK())\n    return\n  }\n  state.writing = false\n  state.writecb = null\n  state.length -= state.writelen\n  state.writelen = 0\n  if (er) {\n    // Avoid V8 leak, https://github.com/nodejs/node/pull/34103#issuecomment-652002364\n    er.stack // eslint-disable-line no-unused-expressions\n\n    if (!state.errored) {\n      state.errored = er\n    }\n\n    // In case of duplex streams we need to notify the readable side of the\n    // error.\n    if (stream._readableState && !stream._readableState.errored) {\n      stream._readableState.errored = er\n    }\n    if (sync) {\n      process.nextTick(onwriteError, stream, state, er, cb)\n    } else {\n      onwriteError(stream, state, er, cb)\n    }\n  } else {\n    if (state.buffered.length > state.bufferedIndex) {\n      clearBuffer(stream, state)\n    }\n    if (sync) {\n      // It is a common case that the callback passed to .write() is always\n      // the same. In that case, we do not schedule a new nextTick(), but\n      // rather just increase a counter, to improve performance and avoid\n      // memory allocations.\n      if (state.afterWriteTickInfo !== null && state.afterWriteTickInfo.cb === cb) {\n        state.afterWriteTickInfo.count++\n      } else {\n        state.afterWriteTickInfo = {\n          count: 1,\n          cb,\n          stream,\n          state\n        }\n        process.nextTick(afterWriteTick, state.afterWriteTickInfo)\n      }\n    } else {\n      afterWrite(stream, state, 1, cb)\n    }\n  }\n}\nfunction afterWriteTick({ stream, state, count, cb }) {\n  state.afterWriteTickInfo = null\n  return afterWrite(stream, state, count, cb)\n}\nfunction afterWrite(stream, state, count, cb) {\n  const needDrain = !state.ending && !stream.destroyed && state.length === 0 && state.needDrain\n  if (needDrain) {\n    state.needDrain = false\n    stream.emit('drain')\n  }\n  while (count-- > 0) {\n    state.pendingcb--\n    cb()\n  }\n  if (state.destroyed) {\n    errorBuffer(state)\n  }\n  finishMaybe(stream, state)\n}\n\n// If there's something in the buffer waiting, then invoke callbacks.\nfunction errorBuffer(state) {\n  if (state.writing) {\n    return\n  }\n  for (let n = state.bufferedIndex; n < state.buffered.length; ++n) {\n    var _state$errored\n    const { chunk, callback } = state.buffered[n]\n    const len = state.objectMode ? 1 : chunk.length\n    state.length -= len\n    callback(\n      (_state$errored = state.errored) !== null && _state$errored !== undefined\n        ? _state$errored\n        : new ERR_STREAM_DESTROYED('write')\n    )\n  }\n  const onfinishCallbacks = state[kOnFinished].splice(0)\n  for (let i = 0; i < onfinishCallbacks.length; i++) {\n    var _state$errored2\n    onfinishCallbacks[i](\n      (_state$errored2 = state.errored) !== null && _state$errored2 !== undefined\n        ? _state$errored2\n        : new ERR_STREAM_DESTROYED('end')\n    )\n  }\n  resetBuffer(state)\n}\n\n// If there's something in the buffer waiting, then process it.\nfunction clearBuffer(stream, state) {\n  if (state.corked || state.bufferProcessing || state.destroyed || !state.constructed) {\n    return\n  }\n  const { buffered, bufferedIndex, objectMode } = state\n  const bufferedLength = buffered.length - bufferedIndex\n  if (!bufferedLength) {\n    return\n  }\n  let i = bufferedIndex\n  state.bufferProcessing = true\n  if (bufferedLength > 1 && stream._writev) {\n    state.pendingcb -= bufferedLength - 1\n    const callback = state.allNoop\n      ? nop\n      : (err) => {\n          for (let n = i; n < buffered.length; ++n) {\n            buffered[n].callback(err)\n          }\n        }\n    // Make a copy of `buffered` if it's going to be used by `callback` above,\n    // since `doWrite` will mutate the array.\n    const chunks = state.allNoop && i === 0 ? buffered : ArrayPrototypeSlice(buffered, i)\n    chunks.allBuffers = state.allBuffers\n    doWrite(stream, state, true, state.length, chunks, '', callback)\n    resetBuffer(state)\n  } else {\n    do {\n      const { chunk, encoding, callback } = buffered[i]\n      buffered[i++] = null\n      const len = objectMode ? 1 : chunk.length\n      doWrite(stream, state, false, len, chunk, encoding, callback)\n    } while (i < buffered.length && !state.writing)\n    if (i === buffered.length) {\n      resetBuffer(state)\n    } else if (i > 256) {\n      buffered.splice(0, i)\n      state.bufferedIndex = 0\n    } else {\n      state.bufferedIndex = i\n    }\n  }\n  state.bufferProcessing = false\n}\nWritable.prototype._write = function (chunk, encoding, cb) {\n  if (this._writev) {\n    this._writev(\n      [\n        {\n          chunk,\n          encoding\n        }\n      ],\n      cb\n    )\n  } else {\n    throw new ERR_METHOD_NOT_IMPLEMENTED('_write()')\n  }\n}\nWritable.prototype._writev = null\nWritable.prototype.end = function (chunk, encoding, cb) {\n  const state = this._writableState\n  if (typeof chunk === 'function') {\n    cb = chunk\n    chunk = null\n    encoding = null\n  } else if (typeof encoding === 'function') {\n    cb = encoding\n    encoding = null\n  }\n  let err\n  if (chunk !== null && chunk !== undefined) {\n    const ret = _write(this, chunk, encoding)\n    if (ret instanceof Error) {\n      err = ret\n    }\n  }\n\n  // .end() fully uncorks.\n  if (state.corked) {\n    state.corked = 1\n    this.uncork()\n  }\n  if (err) {\n    // Do nothing...\n  } else if (!state.errored && !state.ending) {\n    // This is forgiving in terms of unnecessary calls to end() and can hide\n    // logic errors. However, usually such errors are harmless and causing a\n    // hard error can be disproportionately destructive. It is not always\n    // trivial for the user to determine whether end() needs to be called\n    // or not.\n\n    state.ending = true\n    finishMaybe(this, state, true)\n    state.ended = true\n  } else if (state.finished) {\n    err = new ERR_STREAM_ALREADY_FINISHED('end')\n  } else if (state.destroyed) {\n    err = new ERR_STREAM_DESTROYED('end')\n  }\n  if (typeof cb === 'function') {\n    if (err || state.finished) {\n      process.nextTick(cb, err)\n    } else {\n      state[kOnFinished].push(cb)\n    }\n  }\n  return this\n}\nfunction needFinish(state) {\n  return (\n    state.ending &&\n    !state.destroyed &&\n    state.constructed &&\n    state.length === 0 &&\n    !state.errored &&\n    state.buffered.length === 0 &&\n    !state.finished &&\n    !state.writing &&\n    !state.errorEmitted &&\n    !state.closeEmitted\n  )\n}\nfunction callFinal(stream, state) {\n  let called = false\n  function onFinish(err) {\n    if (called) {\n      errorOrDestroy(stream, err !== null && err !== undefined ? err : ERR_MULTIPLE_CALLBACK())\n      return\n    }\n    called = true\n    state.pendingcb--\n    if (err) {\n      const onfinishCallbacks = state[kOnFinished].splice(0)\n      for (let i = 0; i < onfinishCallbacks.length; i++) {\n        onfinishCallbacks[i](err)\n      }\n      errorOrDestroy(stream, err, state.sync)\n    } else if (needFinish(state)) {\n      state.prefinished = true\n      stream.emit('prefinish')\n      // Backwards compat. Don't check state.sync here.\n      // Some streams assume 'finish' will be emitted\n      // asynchronously relative to _final callback.\n      state.pendingcb++\n      process.nextTick(finish, stream, state)\n    }\n  }\n  state.sync = true\n  state.pendingcb++\n  try {\n    stream._final(onFinish)\n  } catch (err) {\n    onFinish(err)\n  }\n  state.sync = false\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function' && !state.destroyed) {\n      state.finalCalled = true\n      callFinal(stream, state)\n    } else {\n      state.prefinished = true\n      stream.emit('prefinish')\n    }\n  }\n}\nfunction finishMaybe(stream, state, sync) {\n  if (needFinish(state)) {\n    prefinish(stream, state)\n    if (state.pendingcb === 0) {\n      if (sync) {\n        state.pendingcb++\n        process.nextTick(\n          (stream, state) => {\n            if (needFinish(state)) {\n              finish(stream, state)\n            } else {\n              state.pendingcb--\n            }\n          },\n          stream,\n          state\n        )\n      } else if (needFinish(state)) {\n        state.pendingcb++\n        finish(stream, state)\n      }\n    }\n  }\n}\nfunction finish(stream, state) {\n  state.pendingcb--\n  state.finished = true\n  const onfinishCallbacks = state[kOnFinished].splice(0)\n  for (let i = 0; i < onfinishCallbacks.length; i++) {\n    onfinishCallbacks[i]()\n  }\n  stream.emit('finish')\n  if (state.autoDestroy) {\n    // In case of duplex streams we need a way to detect\n    // if the readable side is ready for autoDestroy as well.\n    const rState = stream._readableState\n    const autoDestroy =\n      !rState ||\n      (rState.autoDestroy &&\n        // We don't expect the readable to ever 'end'\n        // if readable is explicitly set to false.\n        (rState.endEmitted || rState.readable === false))\n    if (autoDestroy) {\n      stream.destroy()\n    }\n  }\n}\nObjectDefineProperties(Writable.prototype, {\n  closed: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.closed : false\n    }\n  },\n  destroyed: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.destroyed : false\n    },\n    set(value) {\n      // Backward compatibility, the user is explicitly managing destroyed.\n      if (this._writableState) {\n        this._writableState.destroyed = value\n      }\n    }\n  },\n  writable: {\n    __proto__: null,\n    get() {\n      const w = this._writableState\n      // w.writable === false means that this is part of a Duplex stream\n      // where the writable side was disabled upon construction.\n      // Compat. The user might manually disable writable side through\n      // deprecated setter.\n      return !!w && w.writable !== false && !w.destroyed && !w.errored && !w.ending && !w.ended\n    },\n    set(val) {\n      // Backwards compatible.\n      if (this._writableState) {\n        this._writableState.writable = !!val\n      }\n    }\n  },\n  writableFinished: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.finished : false\n    }\n  },\n  writableObjectMode: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.objectMode : false\n    }\n  },\n  writableBuffer: {\n    __proto__: null,\n    get() {\n      return this._writableState && this._writableState.getBuffer()\n    }\n  },\n  writableEnded: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.ending : false\n    }\n  },\n  writableNeedDrain: {\n    __proto__: null,\n    get() {\n      const wState = this._writableState\n      if (!wState) return false\n      return !wState.destroyed && !wState.ending && wState.needDrain\n    }\n  },\n  writableHighWaterMark: {\n    __proto__: null,\n    get() {\n      return this._writableState && this._writableState.highWaterMark\n    }\n  },\n  writableCorked: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.corked : 0\n    }\n  },\n  writableLength: {\n    __proto__: null,\n    get() {\n      return this._writableState && this._writableState.length\n    }\n  },\n  errored: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._writableState ? this._writableState.errored : null\n    }\n  },\n  writableAborted: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return !!(\n        this._writableState.writable !== false &&\n        (this._writableState.destroyed || this._writableState.errored) &&\n        !this._writableState.finished\n      )\n    }\n  }\n})\nconst destroy = destroyImpl.destroy\nWritable.prototype.destroy = function (err, cb) {\n  const state = this._writableState\n\n  // Invoke pending callbacks.\n  if (!state.destroyed && (state.bufferedIndex < state.buffered.length || state[kOnFinished].length)) {\n    process.nextTick(errorBuffer, state)\n  }\n  destroy.call(this, err, cb)\n  return this\n}\nWritable.prototype._undestroy = destroyImpl.undestroy\nWritable.prototype._destroy = function (err, cb) {\n  cb(err)\n}\nWritable.prototype[EE.captureRejectionSymbol] = function (err) {\n  this.destroy(err)\n}\nlet webStreamsAdapters\n\n// Lazy to avoid circular references\nfunction lazyWebStreams() {\n  if (webStreamsAdapters === undefined) webStreamsAdapters = {}\n  return webStreamsAdapters\n}\nWritable.fromWeb = function (writableStream, options) {\n  return lazyWebStreams().newStreamWritableFromWritableStream(writableStream, options)\n}\nWritable.toWeb = function (streamWritable) {\n  return lazyWebStreams().newWritableStreamFromStreamWritable(streamWritable)\n}\n","/* eslint jsdoc/require-jsdoc: \"error\" */\n\n'use strict'\n\nconst {\n  ArrayIsArray,\n  ArrayPrototypeIncludes,\n  ArrayPrototypeJoin,\n  ArrayPrototypeMap,\n  NumberIsInteger,\n  NumberIsNaN,\n  NumberMAX_SAFE_INTEGER,\n  NumberMIN_SAFE_INTEGER,\n  NumberParseInt,\n  ObjectPrototypeHasOwnProperty,\n  RegExpPrototypeExec,\n  String,\n  StringPrototypeToUpperCase,\n  StringPrototypeTrim\n} = require('../ours/primordials')\nconst {\n  hideStackFrames,\n  codes: { ERR_SOCKET_BAD_PORT, ERR_INVALID_ARG_TYPE, ERR_INVALID_ARG_VALUE, ERR_OUT_OF_RANGE, ERR_UNKNOWN_SIGNAL }\n} = require('../ours/errors')\nconst { normalizeEncoding } = require('../ours/util')\nconst { isAsyncFunction, isArrayBufferView } = require('../ours/util').types\nconst signals = {}\n\n/**\n * @param {*} value\n * @returns {boolean}\n */\nfunction isInt32(value) {\n  return value === (value | 0)\n}\n\n/**\n * @param {*} value\n * @returns {boolean}\n */\nfunction isUint32(value) {\n  return value === value >>> 0\n}\nconst octalReg = /^[0-7]+$/\nconst modeDesc = 'must be a 32-bit unsigned integer or an octal string'\n\n/**\n * Parse and validate values that will be converted into mode_t (the S_*\n * constants). Only valid numbers and octal strings are allowed. They could be\n * converted to 32-bit unsigned integers or non-negative signed integers in the\n * C++ land, but any value higher than 0o777 will result in platform-specific\n * behaviors.\n * @param {*} value Values to be validated\n * @param {string} name Name of the argument\n * @param {number} [def] If specified, will be returned for invalid values\n * @returns {number}\n */\nfunction parseFileMode(value, name, def) {\n  if (typeof value === 'undefined') {\n    value = def\n  }\n  if (typeof value === 'string') {\n    if (RegExpPrototypeExec(octalReg, value) === null) {\n      throw new ERR_INVALID_ARG_VALUE(name, value, modeDesc)\n    }\n    value = NumberParseInt(value, 8)\n  }\n  validateUint32(value, name)\n  return value\n}\n\n/**\n * @callback validateInteger\n * @param {*} value\n * @param {string} name\n * @param {number} [min]\n * @param {number} [max]\n * @returns {asserts value is number}\n */\n\n/** @type {validateInteger} */\nconst validateInteger = hideStackFrames((value, name, min = NumberMIN_SAFE_INTEGER, max = NumberMAX_SAFE_INTEGER) => {\n  if (typeof value !== 'number') throw new ERR_INVALID_ARG_TYPE(name, 'number', value)\n  if (!NumberIsInteger(value)) throw new ERR_OUT_OF_RANGE(name, 'an integer', value)\n  if (value < min || value > max) throw new ERR_OUT_OF_RANGE(name, `>= ${min} && <= ${max}`, value)\n})\n\n/**\n * @callback validateInt32\n * @param {*} value\n * @param {string} name\n * @param {number} [min]\n * @param {number} [max]\n * @returns {asserts value is number}\n */\n\n/** @type {validateInt32} */\nconst validateInt32 = hideStackFrames((value, name, min = -2147483648, max = 2147483647) => {\n  // The defaults for min and max correspond to the limits of 32-bit integers.\n  if (typeof value !== 'number') {\n    throw new ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n  if (!NumberIsInteger(value)) {\n    throw new ERR_OUT_OF_RANGE(name, 'an integer', value)\n  }\n  if (value < min || value > max) {\n    throw new ERR_OUT_OF_RANGE(name, `>= ${min} && <= ${max}`, value)\n  }\n})\n\n/**\n * @callback validateUint32\n * @param {*} value\n * @param {string} name\n * @param {number|boolean} [positive=false]\n * @returns {asserts value is number}\n */\n\n/** @type {validateUint32} */\nconst validateUint32 = hideStackFrames((value, name, positive = false) => {\n  if (typeof value !== 'number') {\n    throw new ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n  if (!NumberIsInteger(value)) {\n    throw new ERR_OUT_OF_RANGE(name, 'an integer', value)\n  }\n  const min = positive ? 1 : 0\n  // 2 ** 32 === 4294967296\n  const max = 4294967295\n  if (value < min || value > max) {\n    throw new ERR_OUT_OF_RANGE(name, `>= ${min} && <= ${max}`, value)\n  }\n})\n\n/**\n * @callback validateString\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is string}\n */\n\n/** @type {validateString} */\nfunction validateString(value, name) {\n  if (typeof value !== 'string') throw new ERR_INVALID_ARG_TYPE(name, 'string', value)\n}\n\n/**\n * @callback validateNumber\n * @param {*} value\n * @param {string} name\n * @param {number} [min]\n * @param {number} [max]\n * @returns {asserts value is number}\n */\n\n/** @type {validateNumber} */\nfunction validateNumber(value, name, min = undefined, max) {\n  if (typeof value !== 'number') throw new ERR_INVALID_ARG_TYPE(name, 'number', value)\n  if (\n    (min != null && value < min) ||\n    (max != null && value > max) ||\n    ((min != null || max != null) && NumberIsNaN(value))\n  ) {\n    throw new ERR_OUT_OF_RANGE(\n      name,\n      `${min != null ? `>= ${min}` : ''}${min != null && max != null ? ' && ' : ''}${max != null ? `<= ${max}` : ''}`,\n      value\n    )\n  }\n}\n\n/**\n * @callback validateOneOf\n * @template T\n * @param {T} value\n * @param {string} name\n * @param {T[]} oneOf\n */\n\n/** @type {validateOneOf} */\nconst validateOneOf = hideStackFrames((value, name, oneOf) => {\n  if (!ArrayPrototypeIncludes(oneOf, value)) {\n    const allowed = ArrayPrototypeJoin(\n      ArrayPrototypeMap(oneOf, (v) => (typeof v === 'string' ? `'${v}'` : String(v))),\n      ', '\n    )\n    const reason = 'must be one of: ' + allowed\n    throw new ERR_INVALID_ARG_VALUE(name, value, reason)\n  }\n})\n\n/**\n * @callback validateBoolean\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is boolean}\n */\n\n/** @type {validateBoolean} */\nfunction validateBoolean(value, name) {\n  if (typeof value !== 'boolean') throw new ERR_INVALID_ARG_TYPE(name, 'boolean', value)\n}\n\n/**\n * @param {any} options\n * @param {string} key\n * @param {boolean} defaultValue\n * @returns {boolean}\n */\nfunction getOwnPropertyValueOrDefault(options, key, defaultValue) {\n  return options == null || !ObjectPrototypeHasOwnProperty(options, key) ? defaultValue : options[key]\n}\n\n/**\n * @callback validateObject\n * @param {*} value\n * @param {string} name\n * @param {{\n *   allowArray?: boolean,\n *   allowFunction?: boolean,\n *   nullable?: boolean\n * }} [options]\n */\n\n/** @type {validateObject} */\nconst validateObject = hideStackFrames((value, name, options = null) => {\n  const allowArray = getOwnPropertyValueOrDefault(options, 'allowArray', false)\n  const allowFunction = getOwnPropertyValueOrDefault(options, 'allowFunction', false)\n  const nullable = getOwnPropertyValueOrDefault(options, 'nullable', false)\n  if (\n    (!nullable && value === null) ||\n    (!allowArray && ArrayIsArray(value)) ||\n    (typeof value !== 'object' && (!allowFunction || typeof value !== 'function'))\n  ) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'Object', value)\n  }\n})\n\n/**\n * @callback validateDictionary - We are using the Web IDL Standard definition\n *                                of \"dictionary\" here, which means any value\n *                                whose Type is either Undefined, Null, or\n *                                Object (which includes functions).\n * @param {*} value\n * @param {string} name\n * @see https://webidl.spec.whatwg.org/#es-dictionary\n * @see https://tc39.es/ecma262/#table-typeof-operator-results\n */\n\n/** @type {validateDictionary} */\nconst validateDictionary = hideStackFrames((value, name) => {\n  if (value != null && typeof value !== 'object' && typeof value !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE(name, 'a dictionary', value)\n  }\n})\n\n/**\n * @callback validateArray\n * @param {*} value\n * @param {string} name\n * @param {number} [minLength]\n * @returns {asserts value is any[]}\n */\n\n/** @type {validateArray} */\nconst validateArray = hideStackFrames((value, name, minLength = 0) => {\n  if (!ArrayIsArray(value)) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'Array', value)\n  }\n  if (value.length < minLength) {\n    const reason = `must be longer than ${minLength}`\n    throw new ERR_INVALID_ARG_VALUE(name, value, reason)\n  }\n})\n\n/**\n * @callback validateStringArray\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is string[]}\n */\n\n/** @type {validateStringArray} */\nfunction validateStringArray(value, name) {\n  validateArray(value, name)\n  for (let i = 0; i < value.length; i++) {\n    validateString(value[i], `${name}[${i}]`)\n  }\n}\n\n/**\n * @callback validateBooleanArray\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is boolean[]}\n */\n\n/** @type {validateBooleanArray} */\nfunction validateBooleanArray(value, name) {\n  validateArray(value, name)\n  for (let i = 0; i < value.length; i++) {\n    validateBoolean(value[i], `${name}[${i}]`)\n  }\n}\n\n/**\n * @callback validateAbortSignalArray\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is AbortSignal[]}\n */\n\n/** @type {validateAbortSignalArray} */\nfunction validateAbortSignalArray(value, name) {\n  validateArray(value, name)\n  for (let i = 0; i < value.length; i++) {\n    const signal = value[i]\n    const indexedName = `${name}[${i}]`\n    if (signal == null) {\n      throw new ERR_INVALID_ARG_TYPE(indexedName, 'AbortSignal', signal)\n    }\n    validateAbortSignal(signal, indexedName)\n  }\n}\n\n/**\n * @param {*} signal\n * @param {string} [name='signal']\n * @returns {asserts signal is keyof signals}\n */\nfunction validateSignalName(signal, name = 'signal') {\n  validateString(signal, name)\n  if (signals[signal] === undefined) {\n    if (signals[StringPrototypeToUpperCase(signal)] !== undefined) {\n      throw new ERR_UNKNOWN_SIGNAL(signal + ' (signals must use all capital letters)')\n    }\n    throw new ERR_UNKNOWN_SIGNAL(signal)\n  }\n}\n\n/**\n * @callback validateBuffer\n * @param {*} buffer\n * @param {string} [name='buffer']\n * @returns {asserts buffer is ArrayBufferView}\n */\n\n/** @type {validateBuffer} */\nconst validateBuffer = hideStackFrames((buffer, name = 'buffer') => {\n  if (!isArrayBufferView(buffer)) {\n    throw new ERR_INVALID_ARG_TYPE(name, ['Buffer', 'TypedArray', 'DataView'], buffer)\n  }\n})\n\n/**\n * @param {string} data\n * @param {string} encoding\n */\nfunction validateEncoding(data, encoding) {\n  const normalizedEncoding = normalizeEncoding(encoding)\n  const length = data.length\n  if (normalizedEncoding === 'hex' && length % 2 !== 0) {\n    throw new ERR_INVALID_ARG_VALUE('encoding', encoding, `is invalid for data of length ${length}`)\n  }\n}\n\n/**\n * Check that the port number is not NaN when coerced to a number,\n * is an integer and that it falls within the legal range of port numbers.\n * @param {*} port\n * @param {string} [name='Port']\n * @param {boolean} [allowZero=true]\n * @returns {number}\n */\nfunction validatePort(port, name = 'Port', allowZero = true) {\n  if (\n    (typeof port !== 'number' && typeof port !== 'string') ||\n    (typeof port === 'string' && StringPrototypeTrim(port).length === 0) ||\n    +port !== +port >>> 0 ||\n    port > 0xffff ||\n    (port === 0 && !allowZero)\n  ) {\n    throw new ERR_SOCKET_BAD_PORT(name, port, allowZero)\n  }\n  return port | 0\n}\n\n/**\n * @callback validateAbortSignal\n * @param {*} signal\n * @param {string} name\n */\n\n/** @type {validateAbortSignal} */\nconst validateAbortSignal = hideStackFrames((signal, name) => {\n  if (signal !== undefined && (signal === null || typeof signal !== 'object' || !('aborted' in signal))) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'AbortSignal', signal)\n  }\n})\n\n/**\n * @callback validateFunction\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is Function}\n */\n\n/** @type {validateFunction} */\nconst validateFunction = hideStackFrames((value, name) => {\n  if (typeof value !== 'function') throw new ERR_INVALID_ARG_TYPE(name, 'Function', value)\n})\n\n/**\n * @callback validatePlainFunction\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is Function}\n */\n\n/** @type {validatePlainFunction} */\nconst validatePlainFunction = hideStackFrames((value, name) => {\n  if (typeof value !== 'function' || isAsyncFunction(value)) throw new ERR_INVALID_ARG_TYPE(name, 'Function', value)\n})\n\n/**\n * @callback validateUndefined\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is undefined}\n */\n\n/** @type {validateUndefined} */\nconst validateUndefined = hideStackFrames((value, name) => {\n  if (value !== undefined) throw new ERR_INVALID_ARG_TYPE(name, 'undefined', value)\n})\n\n/**\n * @template T\n * @param {T} value\n * @param {string} name\n * @param {T[]} union\n */\nfunction validateUnion(value, name, union) {\n  if (!ArrayPrototypeIncludes(union, value)) {\n    throw new ERR_INVALID_ARG_TYPE(name, `('${ArrayPrototypeJoin(union, '|')}')`, value)\n  }\n}\n\n/*\n  The rules for the Link header field are described here:\n  https://www.rfc-editor.org/rfc/rfc8288.html#section-3\n\n  This regex validates any string surrounded by angle brackets\n  (not necessarily a valid URI reference) followed by zero or more\n  link-params separated by semicolons.\n*/\nconst linkValueRegExp = /^(?:<[^>]*>)(?:\\s*;\\s*[^;\"\\s]+(?:=(\")?[^;\"\\s]*\\1)?)*$/\n\n/**\n * @param {any} value\n * @param {string} name\n */\nfunction validateLinkHeaderFormat(value, name) {\n  if (typeof value === 'undefined' || !RegExpPrototypeExec(linkValueRegExp, value)) {\n    throw new ERR_INVALID_ARG_VALUE(\n      name,\n      value,\n      'must be an array or string of format \"</styles.css>; rel=preload; as=style\"'\n    )\n  }\n}\n\n/**\n * @param {any} hints\n * @return {string}\n */\nfunction validateLinkHeaderValue(hints) {\n  if (typeof hints === 'string') {\n    validateLinkHeaderFormat(hints, 'hints')\n    return hints\n  } else if (ArrayIsArray(hints)) {\n    const hintsLength = hints.length\n    let result = ''\n    if (hintsLength === 0) {\n      return result\n    }\n    for (let i = 0; i < hintsLength; i++) {\n      const link = hints[i]\n      validateLinkHeaderFormat(link, 'hints')\n      result += link\n      if (i !== hintsLength - 1) {\n        result += ', '\n      }\n    }\n    return result\n  }\n  throw new ERR_INVALID_ARG_VALUE(\n    'hints',\n    hints,\n    'must be an array or string of format \"</styles.css>; rel=preload; as=style\"'\n  )\n}\nmodule.exports = {\n  isInt32,\n  isUint32,\n  parseFileMode,\n  validateArray,\n  validateStringArray,\n  validateBooleanArray,\n  validateAbortSignalArray,\n  validateBoolean,\n  validateBuffer,\n  validateDictionary,\n  validateEncoding,\n  validateFunction,\n  validateInt32,\n  validateInteger,\n  validateNumber,\n  validateObject,\n  validateOneOf,\n  validatePlainFunction,\n  validatePort,\n  validateSignalName,\n  validateString,\n  validateUint32,\n  validateUndefined,\n  validateUnion,\n  validateAbortSignal,\n  validateLinkHeaderValue\n}\n","'use strict'\n\nconst { format, inspect, AggregateError: CustomAggregateError } = require('./util')\n\n/*\n  This file is a reduced and adapted version of the main lib/internal/errors.js file defined at\n\n  https://github.com/nodejs/node/blob/master/lib/internal/errors.js\n\n  Don't try to replace with the original file and keep it up to date (starting from E(...) definitions)\n  with the upstream file.\n*/\n\nconst AggregateError = globalThis.AggregateError || CustomAggregateError\nconst kIsNodeError = Symbol('kIsNodeError')\nconst kTypes = [\n  'string',\n  'function',\n  'number',\n  'object',\n  // Accept 'Function' and 'Object' as alternative to the lower cased version.\n  'Function',\n  'Object',\n  'boolean',\n  'bigint',\n  'symbol'\n]\nconst classRegExp = /^([A-Z][a-z0-9]*)+$/\nconst nodeInternalPrefix = '__node_internal_'\nconst codes = {}\nfunction assert(value, message) {\n  if (!value) {\n    throw new codes.ERR_INTERNAL_ASSERTION(message)\n  }\n}\n\n// Only use this for integers! Decimal numbers do not work with this function.\nfunction addNumericalSeparator(val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\nfunction getMessage(key, msg, args) {\n  if (typeof msg === 'function') {\n    assert(\n      msg.length <= args.length,\n      // Default options do not count.\n      `Code: ${key}; The provided arguments length (${args.length}) does not match the required ones (${msg.length}).`\n    )\n    return msg(...args)\n  }\n  const expectedLength = (msg.match(/%[dfijoOs]/g) || []).length\n  assert(\n    expectedLength === args.length,\n    `Code: ${key}; The provided arguments length (${args.length}) does not match the required ones (${expectedLength}).`\n  )\n  if (args.length === 0) {\n    return msg\n  }\n  return format(msg, ...args)\n}\nfunction E(code, message, Base) {\n  if (!Base) {\n    Base = Error\n  }\n  class NodeError extends Base {\n    constructor(...args) {\n      super(getMessage(code, message, args))\n    }\n    toString() {\n      return `${this.name} [${code}]: ${this.message}`\n    }\n  }\n  Object.defineProperties(NodeError.prototype, {\n    name: {\n      value: Base.name,\n      writable: true,\n      enumerable: false,\n      configurable: true\n    },\n    toString: {\n      value() {\n        return `${this.name} [${code}]: ${this.message}`\n      },\n      writable: true,\n      enumerable: false,\n      configurable: true\n    }\n  })\n  NodeError.prototype.code = code\n  NodeError.prototype[kIsNodeError] = true\n  codes[code] = NodeError\n}\nfunction hideStackFrames(fn) {\n  // We rename the functions that will be hidden to cut off the stacktrace\n  // at the outermost one\n  const hidden = nodeInternalPrefix + fn.name\n  Object.defineProperty(fn, 'name', {\n    value: hidden\n  })\n  return fn\n}\nfunction aggregateTwoErrors(innerError, outerError) {\n  if (innerError && outerError && innerError !== outerError) {\n    if (Array.isArray(outerError.errors)) {\n      // If `outerError` is already an `AggregateError`.\n      outerError.errors.push(innerError)\n      return outerError\n    }\n    const err = new AggregateError([outerError, innerError], outerError.message)\n    err.code = outerError.code\n    return err\n  }\n  return innerError || outerError\n}\nclass AbortError extends Error {\n  constructor(message = 'The operation was aborted', options = undefined) {\n    if (options !== undefined && typeof options !== 'object') {\n      throw new codes.ERR_INVALID_ARG_TYPE('options', 'Object', options)\n    }\n    super(message, options)\n    this.code = 'ABORT_ERR'\n    this.name = 'AbortError'\n  }\n}\nE('ERR_ASSERTION', '%s', Error)\nE(\n  'ERR_INVALID_ARG_TYPE',\n  (name, expected, actual) => {\n    assert(typeof name === 'string', \"'name' must be a string\")\n    if (!Array.isArray(expected)) {\n      expected = [expected]\n    }\n    let msg = 'The '\n    if (name.endsWith(' argument')) {\n      // For cases like 'first argument'\n      msg += `${name} `\n    } else {\n      msg += `\"${name}\" ${name.includes('.') ? 'property' : 'argument'} `\n    }\n    msg += 'must be '\n    const types = []\n    const instances = []\n    const other = []\n    for (const value of expected) {\n      assert(typeof value === 'string', 'All expected entries have to be of type string')\n      if (kTypes.includes(value)) {\n        types.push(value.toLowerCase())\n      } else if (classRegExp.test(value)) {\n        instances.push(value)\n      } else {\n        assert(value !== 'object', 'The value \"object\" should be written as \"Object\"')\n        other.push(value)\n      }\n    }\n\n    // Special handle `object` in case other instances are allowed to outline\n    // the differences between each other.\n    if (instances.length > 0) {\n      const pos = types.indexOf('object')\n      if (pos !== -1) {\n        types.splice(types, pos, 1)\n        instances.push('Object')\n      }\n    }\n    if (types.length > 0) {\n      switch (types.length) {\n        case 1:\n          msg += `of type ${types[0]}`\n          break\n        case 2:\n          msg += `one of type ${types[0]} or ${types[1]}`\n          break\n        default: {\n          const last = types.pop()\n          msg += `one of type ${types.join(', ')}, or ${last}`\n        }\n      }\n      if (instances.length > 0 || other.length > 0) {\n        msg += ' or '\n      }\n    }\n    if (instances.length > 0) {\n      switch (instances.length) {\n        case 1:\n          msg += `an instance of ${instances[0]}`\n          break\n        case 2:\n          msg += `an instance of ${instances[0]} or ${instances[1]}`\n          break\n        default: {\n          const last = instances.pop()\n          msg += `an instance of ${instances.join(', ')}, or ${last}`\n        }\n      }\n      if (other.length > 0) {\n        msg += ' or '\n      }\n    }\n    switch (other.length) {\n      case 0:\n        break\n      case 1:\n        if (other[0].toLowerCase() !== other[0]) {\n          msg += 'an '\n        }\n        msg += `${other[0]}`\n        break\n      case 2:\n        msg += `one of ${other[0]} or ${other[1]}`\n        break\n      default: {\n        const last = other.pop()\n        msg += `one of ${other.join(', ')}, or ${last}`\n      }\n    }\n    if (actual == null) {\n      msg += `. Received ${actual}`\n    } else if (typeof actual === 'function' && actual.name) {\n      msg += `. Received function ${actual.name}`\n    } else if (typeof actual === 'object') {\n      var _actual$constructor\n      if (\n        (_actual$constructor = actual.constructor) !== null &&\n        _actual$constructor !== undefined &&\n        _actual$constructor.name\n      ) {\n        msg += `. Received an instance of ${actual.constructor.name}`\n      } else {\n        const inspected = inspect(actual, {\n          depth: -1\n        })\n        msg += `. Received ${inspected}`\n      }\n    } else {\n      let inspected = inspect(actual, {\n        colors: false\n      })\n      if (inspected.length > 25) {\n        inspected = `${inspected.slice(0, 25)}...`\n      }\n      msg += `. Received type ${typeof actual} (${inspected})`\n    }\n    return msg\n  },\n  TypeError\n)\nE(\n  'ERR_INVALID_ARG_VALUE',\n  (name, value, reason = 'is invalid') => {\n    let inspected = inspect(value)\n    if (inspected.length > 128) {\n      inspected = inspected.slice(0, 128) + '...'\n    }\n    const type = name.includes('.') ? 'property' : 'argument'\n    return `The ${type} '${name}' ${reason}. Received ${inspected}`\n  },\n  TypeError\n)\nE(\n  'ERR_INVALID_RETURN_VALUE',\n  (input, name, value) => {\n    var _value$constructor\n    const type =\n      value !== null &&\n      value !== undefined &&\n      (_value$constructor = value.constructor) !== null &&\n      _value$constructor !== undefined &&\n      _value$constructor.name\n        ? `instance of ${value.constructor.name}`\n        : `type ${typeof value}`\n    return `Expected ${input} to be returned from the \"${name}\"` + ` function but got ${type}.`\n  },\n  TypeError\n)\nE(\n  'ERR_MISSING_ARGS',\n  (...args) => {\n    assert(args.length > 0, 'At least one arg needs to be specified')\n    let msg\n    const len = args.length\n    args = (Array.isArray(args) ? args : [args]).map((a) => `\"${a}\"`).join(' or ')\n    switch (len) {\n      case 1:\n        msg += `The ${args[0]} argument`\n        break\n      case 2:\n        msg += `The ${args[0]} and ${args[1]} arguments`\n        break\n      default:\n        {\n          const last = args.pop()\n          msg += `The ${args.join(', ')}, and ${last} arguments`\n        }\n        break\n    }\n    return `${msg} must be specified`\n  },\n  TypeError\n)\nE(\n  'ERR_OUT_OF_RANGE',\n  (str, range, input) => {\n    assert(range, 'Missing \"range\" argument')\n    let received\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > 2n ** 32n || input < -(2n ** 32n)) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    } else {\n      received = inspect(input)\n    }\n    return `The value of \"${str}\" is out of range. It must be ${range}. Received ${received}`\n  },\n  RangeError\n)\nE('ERR_MULTIPLE_CALLBACK', 'Callback called multiple times', Error)\nE('ERR_METHOD_NOT_IMPLEMENTED', 'The %s method is not implemented', Error)\nE('ERR_STREAM_ALREADY_FINISHED', 'Cannot call %s after a stream was finished', Error)\nE('ERR_STREAM_CANNOT_PIPE', 'Cannot pipe, not readable', Error)\nE('ERR_STREAM_DESTROYED', 'Cannot call %s after a stream was destroyed', Error)\nE('ERR_STREAM_NULL_VALUES', 'May not write null values to stream', TypeError)\nE('ERR_STREAM_PREMATURE_CLOSE', 'Premature close', Error)\nE('ERR_STREAM_PUSH_AFTER_EOF', 'stream.push() after EOF', Error)\nE('ERR_STREAM_UNSHIFT_AFTER_END_EVENT', 'stream.unshift() after end event', Error)\nE('ERR_STREAM_WRITE_AFTER_END', 'write after end', Error)\nE('ERR_UNKNOWN_ENCODING', 'Unknown encoding: %s', TypeError)\nmodule.exports = {\n  AbortError,\n  aggregateTwoErrors: hideStackFrames(aggregateTwoErrors),\n  hideStackFrames,\n  codes\n}\n","'use strict'\n\nconst Stream = require('stream')\nif (Stream && process.env.READABLE_STREAM === 'disable') {\n  const promises = Stream.promises\n\n  // Explicit export naming is needed for ESM\n  module.exports._uint8ArrayToBuffer = Stream._uint8ArrayToBuffer\n  module.exports._isUint8Array = Stream._isUint8Array\n  module.exports.isDisturbed = Stream.isDisturbed\n  module.exports.isErrored = Stream.isErrored\n  module.exports.isReadable = Stream.isReadable\n  module.exports.Readable = Stream.Readable\n  module.exports.Writable = Stream.Writable\n  module.exports.Duplex = Stream.Duplex\n  module.exports.Transform = Stream.Transform\n  module.exports.PassThrough = Stream.PassThrough\n  module.exports.addAbortSignal = Stream.addAbortSignal\n  module.exports.finished = Stream.finished\n  module.exports.destroy = Stream.destroy\n  module.exports.pipeline = Stream.pipeline\n  module.exports.compose = Stream.compose\n  Object.defineProperty(Stream, 'promises', {\n    configurable: true,\n    enumerable: true,\n    get() {\n      return promises\n    }\n  })\n  module.exports.Stream = Stream.Stream\n} else {\n  const CustomStream = require('../stream')\n  const promises = require('../stream/promises')\n  const originalDestroy = CustomStream.Readable.destroy\n  module.exports = CustomStream.Readable\n\n  // Explicit export naming is needed for ESM\n  module.exports._uint8ArrayToBuffer = CustomStream._uint8ArrayToBuffer\n  module.exports._isUint8Array = CustomStream._isUint8Array\n  module.exports.isDisturbed = CustomStream.isDisturbed\n  module.exports.isErrored = CustomStream.isErrored\n  module.exports.isReadable = CustomStream.isReadable\n  module.exports.Readable = CustomStream.Readable\n  module.exports.Writable = CustomStream.Writable\n  module.exports.Duplex = CustomStream.Duplex\n  module.exports.Transform = CustomStream.Transform\n  module.exports.PassThrough = CustomStream.PassThrough\n  module.exports.addAbortSignal = CustomStream.addAbortSignal\n  module.exports.finished = CustomStream.finished\n  module.exports.destroy = CustomStream.destroy\n  module.exports.destroy = originalDestroy\n  module.exports.pipeline = CustomStream.pipeline\n  module.exports.compose = CustomStream.compose\n  Object.defineProperty(CustomStream, 'promises', {\n    configurable: true,\n    enumerable: true,\n    get() {\n      return promises\n    }\n  })\n  module.exports.Stream = CustomStream.Stream\n}\n\n// Allow default importing\nmodule.exports.default = module.exports\n","'use strict'\n\n/*\n  This file is a reduced and adapted version of the main lib/internal/per_context/primordials.js file defined at\n\n  https://github.com/nodejs/node/blob/master/lib/internal/per_context/primordials.js\n\n  Don't try to replace with the original file and keep it up to date with the upstream file.\n*/\nmodule.exports = {\n  ArrayIsArray(self) {\n    return Array.isArray(self)\n  },\n  ArrayPrototypeIncludes(self, el) {\n    return self.includes(el)\n  },\n  ArrayPrototypeIndexOf(self, el) {\n    return self.indexOf(el)\n  },\n  ArrayPrototypeJoin(self, sep) {\n    return self.join(sep)\n  },\n  ArrayPrototypeMap(self, fn) {\n    return self.map(fn)\n  },\n  ArrayPrototypePop(self, el) {\n    return self.pop(el)\n  },\n  ArrayPrototypePush(self, el) {\n    return self.push(el)\n  },\n  ArrayPrototypeSlice(self, start, end) {\n    return self.slice(start, end)\n  },\n  Error,\n  FunctionPrototypeCall(fn, thisArgs, ...args) {\n    return fn.call(thisArgs, ...args)\n  },\n  FunctionPrototypeSymbolHasInstance(self, instance) {\n    return Function.prototype[Symbol.hasInstance].call(self, instance)\n  },\n  MathFloor: Math.floor,\n  Number,\n  NumberIsInteger: Number.isInteger,\n  NumberIsNaN: Number.isNaN,\n  NumberMAX_SAFE_INTEGER: Number.MAX_SAFE_INTEGER,\n  NumberMIN_SAFE_INTEGER: Number.MIN_SAFE_INTEGER,\n  NumberParseInt: Number.parseInt,\n  ObjectDefineProperties(self, props) {\n    return Object.defineProperties(self, props)\n  },\n  ObjectDefineProperty(self, name, prop) {\n    return Object.defineProperty(self, name, prop)\n  },\n  ObjectGetOwnPropertyDescriptor(self, name) {\n    return Object.getOwnPropertyDescriptor(self, name)\n  },\n  ObjectKeys(obj) {\n    return Object.keys(obj)\n  },\n  ObjectSetPrototypeOf(target, proto) {\n    return Object.setPrototypeOf(target, proto)\n  },\n  Promise,\n  PromisePrototypeCatch(self, fn) {\n    return self.catch(fn)\n  },\n  PromisePrototypeThen(self, thenFn, catchFn) {\n    return self.then(thenFn, catchFn)\n  },\n  PromiseReject(err) {\n    return Promise.reject(err)\n  },\n  PromiseResolve(val) {\n    return Promise.resolve(val)\n  },\n  ReflectApply: Reflect.apply,\n  RegExpPrototypeTest(self, value) {\n    return self.test(value)\n  },\n  SafeSet: Set,\n  String,\n  StringPrototypeSlice(self, start, end) {\n    return self.slice(start, end)\n  },\n  StringPrototypeToLowerCase(self) {\n    return self.toLowerCase()\n  },\n  StringPrototypeToUpperCase(self) {\n    return self.toUpperCase()\n  },\n  StringPrototypeTrim(self) {\n    return self.trim()\n  },\n  Symbol,\n  SymbolFor: Symbol.for,\n  SymbolAsyncIterator: Symbol.asyncIterator,\n  SymbolHasInstance: Symbol.hasInstance,\n  SymbolIterator: Symbol.iterator,\n  SymbolDispose: Symbol.dispose || Symbol('Symbol.dispose'),\n  SymbolAsyncDispose: Symbol.asyncDispose || Symbol('Symbol.asyncDispose'),\n  TypedArrayPrototypeSet(self, buf, len) {\n    return self.set(buf, len)\n  },\n  Boolean: Boolean,\n  Uint8Array\n}\n","'use strict'\n\nconst bufferModule = require('buffer')\nconst { kResistStopPropagation, SymbolDispose } = require('./primordials')\nconst AbortSignal = globalThis.AbortSignal || require('abort-controller').AbortSignal\nconst AbortController = globalThis.AbortController || require('abort-controller').AbortController\nconst AsyncFunction = Object.getPrototypeOf(async function () {}).constructor\nconst Blob = globalThis.Blob || bufferModule.Blob\n/* eslint-disable indent */\nconst isBlob =\n  typeof Blob !== 'undefined'\n    ? function isBlob(b) {\n        // eslint-disable-next-line indent\n        return b instanceof Blob\n      }\n    : function isBlob(b) {\n        return false\n      }\n/* eslint-enable indent */\n\nconst validateAbortSignal = (signal, name) => {\n  if (signal !== undefined && (signal === null || typeof signal !== 'object' || !('aborted' in signal))) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'AbortSignal', signal)\n  }\n}\nconst validateFunction = (value, name) => {\n  if (typeof value !== 'function') throw new ERR_INVALID_ARG_TYPE(name, 'Function', value)\n}\n\n// This is a simplified version of AggregateError\nclass AggregateError extends Error {\n  constructor(errors) {\n    if (!Array.isArray(errors)) {\n      throw new TypeError(`Expected input to be an Array, got ${typeof errors}`)\n    }\n    let message = ''\n    for (let i = 0; i < errors.length; i++) {\n      message += `    ${errors[i].stack}\\n`\n    }\n    super(message)\n    this.name = 'AggregateError'\n    this.errors = errors\n  }\n}\nmodule.exports = {\n  AggregateError,\n  kEmptyObject: Object.freeze({}),\n  once(callback) {\n    let called = false\n    return function (...args) {\n      if (called) {\n        return\n      }\n      called = true\n      callback.apply(this, args)\n    }\n  },\n  createDeferredPromise: function () {\n    let resolve\n    let reject\n\n    // eslint-disable-next-line promise/param-names\n    const promise = new Promise((res, rej) => {\n      resolve = res\n      reject = rej\n    })\n    return {\n      promise,\n      resolve,\n      reject\n    }\n  },\n  promisify(fn) {\n    return new Promise((resolve, reject) => {\n      fn((err, ...args) => {\n        if (err) {\n          return reject(err)\n        }\n        return resolve(...args)\n      })\n    })\n  },\n  debuglog() {\n    return function () {}\n  },\n  format(format, ...args) {\n    // Simplified version of https://nodejs.org/api/util.html#utilformatformat-args\n    return format.replace(/%([sdifj])/g, function (...[_unused, type]) {\n      const replacement = args.shift()\n      if (type === 'f') {\n        return replacement.toFixed(6)\n      } else if (type === 'j') {\n        return JSON.stringify(replacement)\n      } else if (type === 's' && typeof replacement === 'object') {\n        const ctor = replacement.constructor !== Object ? replacement.constructor.name : ''\n        return `${ctor} {}`.trim()\n      } else {\n        return replacement.toString()\n      }\n    })\n  },\n  inspect(value) {\n    // Vastly simplified version of https://nodejs.org/api/util.html#utilinspectobject-options\n    switch (typeof value) {\n      case 'string':\n        if (value.includes(\"'\")) {\n          if (!value.includes('\"')) {\n            return `\"${value}\"`\n          } else if (!value.includes('`') && !value.includes('${')) {\n            return `\\`${value}\\``\n          }\n        }\n        return `'${value}'`\n      case 'number':\n        if (isNaN(value)) {\n          return 'NaN'\n        } else if (Object.is(value, -0)) {\n          return String(value)\n        }\n        return value\n      case 'bigint':\n        return `${String(value)}n`\n      case 'boolean':\n      case 'undefined':\n        return String(value)\n      case 'object':\n        return '{}'\n    }\n  },\n  types: {\n    isAsyncFunction(fn) {\n      return fn instanceof AsyncFunction\n    },\n    isArrayBufferView(arr) {\n      return ArrayBuffer.isView(arr)\n    }\n  },\n  isBlob,\n  deprecate(fn, message) {\n    return fn\n  },\n  addAbortListener:\n    require('events').addAbortListener ||\n    function addAbortListener(signal, listener) {\n      if (signal === undefined) {\n        throw new ERR_INVALID_ARG_TYPE('signal', 'AbortSignal', signal)\n      }\n      validateAbortSignal(signal, 'signal')\n      validateFunction(listener, 'listener')\n      let removeEventListener\n      if (signal.aborted) {\n        queueMicrotask(() => listener())\n      } else {\n        signal.addEventListener('abort', listener, {\n          __proto__: null,\n          once: true,\n          [kResistStopPropagation]: true\n        })\n        removeEventListener = () => {\n          signal.removeEventListener('abort', listener)\n        }\n      }\n      return {\n        __proto__: null,\n        [SymbolDispose]() {\n          var _removeEventListener\n          ;(_removeEventListener = removeEventListener) === null || _removeEventListener === undefined\n            ? undefined\n            : _removeEventListener()\n        }\n      }\n    },\n  AbortSignalAny:\n    AbortSignal.any ||\n    function AbortSignalAny(signals) {\n      // Fast path if there is only one signal.\n      if (signals.length === 1) {\n        return signals[0]\n      }\n      const ac = new AbortController()\n      const abort = () => ac.abort()\n      signals.forEach((signal) => {\n        validateAbortSignal(signal, 'signals')\n        signal.addEventListener('abort', abort, {\n          once: true\n        })\n      })\n      ac.signal.addEventListener(\n        'abort',\n        () => {\n          signals.forEach((signal) => signal.removeEventListener('abort', abort))\n        },\n        {\n          once: true\n        }\n      )\n      return ac.signal\n    }\n}\nmodule.exports.promisify.custom = Symbol.for('nodejs.util.promisify.custom')\n","/* replacement start */\n\nconst { Buffer } = require('buffer')\n\n/* replacement end */\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n;('use strict')\nconst { ObjectDefineProperty, ObjectKeys, ReflectApply } = require('./ours/primordials')\nconst {\n  promisify: { custom: customPromisify }\n} = require('./ours/util')\nconst { streamReturningOperators, promiseReturningOperators } = require('./internal/streams/operators')\nconst {\n  codes: { ERR_ILLEGAL_CONSTRUCTOR }\n} = require('./ours/errors')\nconst compose = require('./internal/streams/compose')\nconst { setDefaultHighWaterMark, getDefaultHighWaterMark } = require('./internal/streams/state')\nconst { pipeline } = require('./internal/streams/pipeline')\nconst { destroyer } = require('./internal/streams/destroy')\nconst eos = require('./internal/streams/end-of-stream')\nconst internalBuffer = {}\nconst promises = require('./stream/promises')\nconst utils = require('./internal/streams/utils')\nconst Stream = (module.exports = require('./internal/streams/legacy').Stream)\nStream.isDestroyed = utils.isDestroyed\nStream.isDisturbed = utils.isDisturbed\nStream.isErrored = utils.isErrored\nStream.isReadable = utils.isReadable\nStream.isWritable = utils.isWritable\nStream.Readable = require('./internal/streams/readable')\nfor (const key of ObjectKeys(streamReturningOperators)) {\n  const op = streamReturningOperators[key]\n  function fn(...args) {\n    if (new.target) {\n      throw ERR_ILLEGAL_CONSTRUCTOR()\n    }\n    return Stream.Readable.from(ReflectApply(op, this, args))\n  }\n  ObjectDefineProperty(fn, 'name', {\n    __proto__: null,\n    value: op.name\n  })\n  ObjectDefineProperty(fn, 'length', {\n    __proto__: null,\n    value: op.length\n  })\n  ObjectDefineProperty(Stream.Readable.prototype, key, {\n    __proto__: null,\n    value: fn,\n    enumerable: false,\n    configurable: true,\n    writable: true\n  })\n}\nfor (const key of ObjectKeys(promiseReturningOperators)) {\n  const op = promiseReturningOperators[key]\n  function fn(...args) {\n    if (new.target) {\n      throw ERR_ILLEGAL_CONSTRUCTOR()\n    }\n    return ReflectApply(op, this, args)\n  }\n  ObjectDefineProperty(fn, 'name', {\n    __proto__: null,\n    value: op.name\n  })\n  ObjectDefineProperty(fn, 'length', {\n    __proto__: null,\n    value: op.length\n  })\n  ObjectDefineProperty(Stream.Readable.prototype, key, {\n    __proto__: null,\n    value: fn,\n    enumerable: false,\n    configurable: true,\n    writable: true\n  })\n}\nStream.Writable = require('./internal/streams/writable')\nStream.Duplex = require('./internal/streams/duplex')\nStream.Transform = require('./internal/streams/transform')\nStream.PassThrough = require('./internal/streams/passthrough')\nStream.pipeline = pipeline\nconst { addAbortSignal } = require('./internal/streams/add-abort-signal')\nStream.addAbortSignal = addAbortSignal\nStream.finished = eos\nStream.destroy = destroyer\nStream.compose = compose\nStream.setDefaultHighWaterMark = setDefaultHighWaterMark\nStream.getDefaultHighWaterMark = getDefaultHighWaterMark\nObjectDefineProperty(Stream, 'promises', {\n  __proto__: null,\n  configurable: true,\n  enumerable: true,\n  get() {\n    return promises\n  }\n})\nObjectDefineProperty(pipeline, customPromisify, {\n  __proto__: null,\n  enumerable: true,\n  get() {\n    return promises.pipeline\n  }\n})\nObjectDefineProperty(eos, customPromisify, {\n  __proto__: null,\n  enumerable: true,\n  get() {\n    return promises.finished\n  }\n})\n\n// Backwards-compat with node 0.4.x\nStream.Stream = Stream\nStream._isUint8Array = function isUint8Array(value) {\n  return value instanceof Uint8Array\n}\nStream._uint8ArrayToBuffer = function _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk.buffer, chunk.byteOffset, chunk.byteLength)\n}\n","'use strict'\n\nconst { ArrayPrototypePop, Promise } = require('../ours/primordials')\nconst { isIterable, isNodeStream, isWebStream } = require('../internal/streams/utils')\nconst { pipelineImpl: pl } = require('../internal/streams/pipeline')\nconst { finished } = require('../internal/streams/end-of-stream')\nrequire('../../lib/stream.js')\nfunction pipeline(...streams) {\n  return new Promise((resolve, reject) => {\n    let signal\n    let end\n    const lastArg = streams[streams.length - 1]\n    if (\n      lastArg &&\n      typeof lastArg === 'object' &&\n      !isNodeStream(lastArg) &&\n      !isIterable(lastArg) &&\n      !isWebStream(lastArg)\n    ) {\n      const options = ArrayPrototypePop(streams)\n      signal = options.signal\n      end = options.end\n    }\n    pl(\n      streams,\n      (err, value) => {\n        if (err) {\n          reject(err)\n        } else {\n          resolve(value)\n        }\n      },\n      {\n        signal,\n        end\n      }\n    )\n  })\n}\nmodule.exports = {\n  finished,\n  pipeline\n}\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\nexports.destroy = (() => {\n\tlet warned = false;\n\n\treturn () => {\n\t\tif (!warned) {\n\t\t\twarned = true;\n\t\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t\t}\n\t};\n})();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\tlet m;\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && (m = navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)) && parseInt(m[1], 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.debug()` when available.\n * No-op when `console.debug` is not a \"function\".\n * If `console.debug` is not available, falls back\n * to `console.log`.\n *\n * @api public\n */\nexports.log = console.debug || console.log || (() => {});\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\tcreateDebug.destroy = destroy;\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\t\tlet enableOverride = null;\n\t\tlet namespacesCache;\n\t\tlet enabledCache;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn '%';\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = createDebug.selectColor(namespace);\n\t\tdebug.extend = extend;\n\t\tdebug.destroy = createDebug.destroy; // XXX Temporary. Will be removed in the next major release.\n\n\t\tObject.defineProperty(debug, 'enabled', {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: false,\n\t\t\tget: () => {\n\t\t\t\tif (enableOverride !== null) {\n\t\t\t\t\treturn enableOverride;\n\t\t\t\t}\n\t\t\t\tif (namespacesCache !== createDebug.namespaces) {\n\t\t\t\t\tnamespacesCache = createDebug.namespaces;\n\t\t\t\t\tenabledCache = createDebug.enabled(namespace);\n\t\t\t\t}\n\n\t\t\t\treturn enabledCache;\n\t\t\t},\n\t\t\tset: v => {\n\t\t\t\tenableOverride = v;\n\t\t\t}\n\t\t});\n\n\t\t// Env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\treturn debug;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\t\tcreateDebug.namespaces = namespaces;\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.slice(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\t/**\n\t* XXX DO NOT USE. This is a temporary stub function.\n\t* XXX It WILL be removed in the next major release.\n\t*/\n\tfunction destroy() {\n\t\tconsole.warn('Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.');\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/**\n * Detect Electron renderer / nwjs process, which is node, but we should\n * treat as a browser.\n */\n\nif (typeof process === 'undefined' || process.type === 'renderer' || process.browser === true || process.__nwjs) {\n\tmodule.exports = require('./browser.js');\n} else {\n\tmodule.exports = require('./node.js');\n}\n","/**\n * Module dependencies.\n */\n\nconst tty = require('tty');\nconst util = require('util');\n\n/**\n * This is the Node.js implementation of `debug()`.\n */\n\nexports.init = init;\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.destroy = util.deprecate(\n\t() => {},\n\t'Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.'\n);\n\n/**\n * Colors.\n */\n\nexports.colors = [6, 2, 3, 4, 5, 1];\n\ntry {\n\t// Optional dependency (as in, doesn't need to be installed, NOT like optionalDependencies in package.json)\n\t// eslint-disable-next-line import/no-extraneous-dependencies\n\tconst supportsColor = require('supports-color');\n\n\tif (supportsColor && (supportsColor.stderr || supportsColor).level >= 2) {\n\t\texports.colors = [\n\t\t\t20,\n\t\t\t21,\n\t\t\t26,\n\t\t\t27,\n\t\t\t32,\n\t\t\t33,\n\t\t\t38,\n\t\t\t39,\n\t\t\t40,\n\t\t\t41,\n\t\t\t42,\n\t\t\t43,\n\t\t\t44,\n\t\t\t45,\n\t\t\t56,\n\t\t\t57,\n\t\t\t62,\n\t\t\t63,\n\t\t\t68,\n\t\t\t69,\n\t\t\t74,\n\t\t\t75,\n\t\t\t76,\n\t\t\t77,\n\t\t\t78,\n\t\t\t79,\n\t\t\t80,\n\t\t\t81,\n\t\t\t92,\n\t\t\t93,\n\t\t\t98,\n\t\t\t99,\n\t\t\t112,\n\t\t\t113,\n\t\t\t128,\n\t\t\t129,\n\t\t\t134,\n\t\t\t135,\n\t\t\t148,\n\t\t\t149,\n\t\t\t160,\n\t\t\t161,\n\t\t\t162,\n\t\t\t163,\n\t\t\t164,\n\t\t\t165,\n\t\t\t166,\n\t\t\t167,\n\t\t\t168,\n\t\t\t169,\n\t\t\t170,\n\t\t\t171,\n\t\t\t172,\n\t\t\t173,\n\t\t\t178,\n\t\t\t179,\n\t\t\t184,\n\t\t\t185,\n\t\t\t196,\n\t\t\t197,\n\t\t\t198,\n\t\t\t199,\n\t\t\t200,\n\t\t\t201,\n\t\t\t202,\n\t\t\t203,\n\t\t\t204,\n\t\t\t205,\n\t\t\t206,\n\t\t\t207,\n\t\t\t208,\n\t\t\t209,\n\t\t\t214,\n\t\t\t215,\n\t\t\t220,\n\t\t\t221\n\t\t];\n\t}\n} catch (error) {\n\t// Swallow - we only care if `supports-color` is available; it doesn't have to be.\n}\n\n/**\n * Build up the default `inspectOpts` object from the environment variables.\n *\n *   $ DEBUG_COLORS=no DEBUG_DEPTH=10 DEBUG_SHOW_HIDDEN=enabled node script.js\n */\n\nexports.inspectOpts = Object.keys(process.env).filter(key => {\n\treturn /^debug_/i.test(key);\n}).reduce((obj, key) => {\n\t// Camel-case\n\tconst prop = key\n\t\t.substring(6)\n\t\t.toLowerCase()\n\t\t.replace(/_([a-z])/g, (_, k) => {\n\t\t\treturn k.toUpperCase();\n\t\t});\n\n\t// Coerce string value into JS value\n\tlet val = process.env[key];\n\tif (/^(yes|on|true|enabled)$/i.test(val)) {\n\t\tval = true;\n\t} else if (/^(no|off|false|disabled)$/i.test(val)) {\n\t\tval = false;\n\t} else if (val === 'null') {\n\t\tval = null;\n\t} else {\n\t\tval = Number(val);\n\t}\n\n\tobj[prop] = val;\n\treturn obj;\n}, {});\n\n/**\n * Is stdout a TTY? Colored output is enabled when `true`.\n */\n\nfunction useColors() {\n\treturn 'colors' in exports.inspectOpts ?\n\t\tBoolean(exports.inspectOpts.colors) :\n\t\ttty.isatty(process.stderr.fd);\n}\n\n/**\n * Adds ANSI color escape codes if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\tconst {namespace: name, useColors} = this;\n\n\tif (useColors) {\n\t\tconst c = this.color;\n\t\tconst colorCode = '\\u001B[3' + (c < 8 ? c : '8;5;' + c);\n\t\tconst prefix = `  ${colorCode};1m${name} \\u001B[0m`;\n\n\t\targs[0] = prefix + args[0].split('\\n').join('\\n' + prefix);\n\t\targs.push(colorCode + 'm+' + module.exports.humanize(this.diff) + '\\u001B[0m');\n\t} else {\n\t\targs[0] = getDate() + name + ' ' + args[0];\n\t}\n}\n\nfunction getDate() {\n\tif (exports.inspectOpts.hideDate) {\n\t\treturn '';\n\t}\n\treturn new Date().toISOString() + ' ';\n}\n\n/**\n * Invokes `util.formatWithOptions()` with the specified arguments and writes to stderr.\n */\n\nfunction log(...args) {\n\treturn process.stderr.write(util.formatWithOptions(exports.inspectOpts, ...args) + '\\n');\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\tif (namespaces) {\n\t\tprocess.env.DEBUG = namespaces;\n\t} else {\n\t\t// If you set a process.env field to null or undefined, it gets cast to the\n\t\t// string 'null' or 'undefined'. Just delete instead.\n\t\tdelete process.env.DEBUG;\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n\treturn process.env.DEBUG;\n}\n\n/**\n * Init logic for `debug` instances.\n *\n * Create a new `inspectOpts` object in case `useColors` is set\n * differently for a particular `debug` instance.\n */\n\nfunction init(debug) {\n\tdebug.inspectOpts = {};\n\n\tconst keys = Object.keys(exports.inspectOpts);\n\tfor (let i = 0; i < keys.length; i++) {\n\t\tdebug.inspectOpts[keys[i]] = exports.inspectOpts[keys[i]];\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %o to `util.inspect()`, all on a single line.\n */\n\nformatters.o = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts)\n\t\t.split('\\n')\n\t\t.map(str => str.trim())\n\t\t.join(' ');\n};\n\n/**\n * Map %O to `util.inspect()`, allowing multiple lines if needed.\n */\n\nformatters.O = function (v) {\n\tthis.inspectOpts.colors = this.useColors;\n\treturn util.inspect(v, this.inspectOpts);\n};\n","/**\n * @author Toru Nagashima <https://github.com/mysticatea>\n * @copyright 2015 Toru Nagashima. All rights reserved.\n * See LICENSE file in root directory for full license.\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', { value: true });\n\n/**\n * @typedef {object} PrivateData\n * @property {EventTarget} eventTarget The event target.\n * @property {{type:string}} event The original event object.\n * @property {number} eventPhase The current event phase.\n * @property {EventTarget|null} currentTarget The current event target.\n * @property {boolean} canceled The flag to prevent default.\n * @property {boolean} stopped The flag to stop propagation.\n * @property {boolean} immediateStopped The flag to stop propagation immediately.\n * @property {Function|null} passiveListener The listener if the current listener is passive. Otherwise this is null.\n * @property {number} timeStamp The unix time.\n * @private\n */\n\n/**\n * Private data for event wrappers.\n * @type {WeakMap<Event, PrivateData>}\n * @private\n */\nconst privateData = new WeakMap();\n\n/**\n * Cache for wrapper classes.\n * @type {WeakMap<Object, Function>}\n * @private\n */\nconst wrappers = new WeakMap();\n\n/**\n * Get private data.\n * @param {Event} event The event object to get private data.\n * @returns {PrivateData} The private data of the event.\n * @private\n */\nfunction pd(event) {\n    const retv = privateData.get(event);\n    console.assert(\n        retv != null,\n        \"'this' is expected an Event object, but got\",\n        event\n    );\n    return retv\n}\n\n/**\n * https://dom.spec.whatwg.org/#set-the-canceled-flag\n * @param data {PrivateData} private data.\n */\nfunction setCancelFlag(data) {\n    if (data.passiveListener != null) {\n        if (\n            typeof console !== \"undefined\" &&\n            typeof console.error === \"function\"\n        ) {\n            console.error(\n                \"Unable to preventDefault inside passive event listener invocation.\",\n                data.passiveListener\n            );\n        }\n        return\n    }\n    if (!data.event.cancelable) {\n        return\n    }\n\n    data.canceled = true;\n    if (typeof data.event.preventDefault === \"function\") {\n        data.event.preventDefault();\n    }\n}\n\n/**\n * @see https://dom.spec.whatwg.org/#interface-event\n * @private\n */\n/**\n * The event wrapper.\n * @constructor\n * @param {EventTarget} eventTarget The event target of this dispatching.\n * @param {Event|{type:string}} event The original event to wrap.\n */\nfunction Event(eventTarget, event) {\n    privateData.set(this, {\n        eventTarget,\n        event,\n        eventPhase: 2,\n        currentTarget: eventTarget,\n        canceled: false,\n        stopped: false,\n        immediateStopped: false,\n        passiveListener: null,\n        timeStamp: event.timeStamp || Date.now(),\n    });\n\n    // https://heycam.github.io/webidl/#Unforgeable\n    Object.defineProperty(this, \"isTrusted\", { value: false, enumerable: true });\n\n    // Define accessors\n    const keys = Object.keys(event);\n    for (let i = 0; i < keys.length; ++i) {\n        const key = keys[i];\n        if (!(key in this)) {\n            Object.defineProperty(this, key, defineRedirectDescriptor(key));\n        }\n    }\n}\n\n// Should be enumerable, but class methods are not enumerable.\nEvent.prototype = {\n    /**\n     * The type of this event.\n     * @type {string}\n     */\n    get type() {\n        return pd(this).event.type\n    },\n\n    /**\n     * The target of this event.\n     * @type {EventTarget}\n     */\n    get target() {\n        return pd(this).eventTarget\n    },\n\n    /**\n     * The target of this event.\n     * @type {EventTarget}\n     */\n    get currentTarget() {\n        return pd(this).currentTarget\n    },\n\n    /**\n     * @returns {EventTarget[]} The composed path of this event.\n     */\n    composedPath() {\n        const currentTarget = pd(this).currentTarget;\n        if (currentTarget == null) {\n            return []\n        }\n        return [currentTarget]\n    },\n\n    /**\n     * Constant of NONE.\n     * @type {number}\n     */\n    get NONE() {\n        return 0\n    },\n\n    /**\n     * Constant of CAPTURING_PHASE.\n     * @type {number}\n     */\n    get CAPTURING_PHASE() {\n        return 1\n    },\n\n    /**\n     * Constant of AT_TARGET.\n     * @type {number}\n     */\n    get AT_TARGET() {\n        return 2\n    },\n\n    /**\n     * Constant of BUBBLING_PHASE.\n     * @type {number}\n     */\n    get BUBBLING_PHASE() {\n        return 3\n    },\n\n    /**\n     * The target of this event.\n     * @type {number}\n     */\n    get eventPhase() {\n        return pd(this).eventPhase\n    },\n\n    /**\n     * Stop event bubbling.\n     * @returns {void}\n     */\n    stopPropagation() {\n        const data = pd(this);\n\n        data.stopped = true;\n        if (typeof data.event.stopPropagation === \"function\") {\n            data.event.stopPropagation();\n        }\n    },\n\n    /**\n     * Stop event bubbling.\n     * @returns {void}\n     */\n    stopImmediatePropagation() {\n        const data = pd(this);\n\n        data.stopped = true;\n        data.immediateStopped = true;\n        if (typeof data.event.stopImmediatePropagation === \"function\") {\n            data.event.stopImmediatePropagation();\n        }\n    },\n\n    /**\n     * The flag to be bubbling.\n     * @type {boolean}\n     */\n    get bubbles() {\n        return Boolean(pd(this).event.bubbles)\n    },\n\n    /**\n     * The flag to be cancelable.\n     * @type {boolean}\n     */\n    get cancelable() {\n        return Boolean(pd(this).event.cancelable)\n    },\n\n    /**\n     * Cancel this event.\n     * @returns {void}\n     */\n    preventDefault() {\n        setCancelFlag(pd(this));\n    },\n\n    /**\n     * The flag to indicate cancellation state.\n     * @type {boolean}\n     */\n    get defaultPrevented() {\n        return pd(this).canceled\n    },\n\n    /**\n     * The flag to be composed.\n     * @type {boolean}\n     */\n    get composed() {\n        return Boolean(pd(this).event.composed)\n    },\n\n    /**\n     * The unix time of this event.\n     * @type {number}\n     */\n    get timeStamp() {\n        return pd(this).timeStamp\n    },\n\n    /**\n     * The target of this event.\n     * @type {EventTarget}\n     * @deprecated\n     */\n    get srcElement() {\n        return pd(this).eventTarget\n    },\n\n    /**\n     * The flag to stop event bubbling.\n     * @type {boolean}\n     * @deprecated\n     */\n    get cancelBubble() {\n        return pd(this).stopped\n    },\n    set cancelBubble(value) {\n        if (!value) {\n            return\n        }\n        const data = pd(this);\n\n        data.stopped = true;\n        if (typeof data.event.cancelBubble === \"boolean\") {\n            data.event.cancelBubble = true;\n        }\n    },\n\n    /**\n     * The flag to indicate cancellation state.\n     * @type {boolean}\n     * @deprecated\n     */\n    get returnValue() {\n        return !pd(this).canceled\n    },\n    set returnValue(value) {\n        if (!value) {\n            setCancelFlag(pd(this));\n        }\n    },\n\n    /**\n     * Initialize this event object. But do nothing under event dispatching.\n     * @param {string} type The event type.\n     * @param {boolean} [bubbles=false] The flag to be possible to bubble up.\n     * @param {boolean} [cancelable=false] The flag to be possible to cancel.\n     * @deprecated\n     */\n    initEvent() {\n        // Do nothing.\n    },\n};\n\n// `constructor` is not enumerable.\nObject.defineProperty(Event.prototype, \"constructor\", {\n    value: Event,\n    configurable: true,\n    writable: true,\n});\n\n// Ensure `event instanceof window.Event` is `true`.\nif (typeof window !== \"undefined\" && typeof window.Event !== \"undefined\") {\n    Object.setPrototypeOf(Event.prototype, window.Event.prototype);\n\n    // Make association for wrappers.\n    wrappers.set(window.Event.prototype, Event);\n}\n\n/**\n * Get the property descriptor to redirect a given property.\n * @param {string} key Property name to define property descriptor.\n * @returns {PropertyDescriptor} The property descriptor to redirect the property.\n * @private\n */\nfunction defineRedirectDescriptor(key) {\n    return {\n        get() {\n            return pd(this).event[key]\n        },\n        set(value) {\n            pd(this).event[key] = value;\n        },\n        configurable: true,\n        enumerable: true,\n    }\n}\n\n/**\n * Get the property descriptor to call a given method property.\n * @param {string} key Property name to define property descriptor.\n * @returns {PropertyDescriptor} The property descriptor to call the method property.\n * @private\n */\nfunction defineCallDescriptor(key) {\n    return {\n        value() {\n            const event = pd(this).event;\n            return event[key].apply(event, arguments)\n        },\n        configurable: true,\n        enumerable: true,\n    }\n}\n\n/**\n * Define new wrapper class.\n * @param {Function} BaseEvent The base wrapper class.\n * @param {Object} proto The prototype of the original event.\n * @returns {Function} The defined wrapper class.\n * @private\n */\nfunction defineWrapper(BaseEvent, proto) {\n    const keys = Object.keys(proto);\n    if (keys.length === 0) {\n        return BaseEvent\n    }\n\n    /** CustomEvent */\n    function CustomEvent(eventTarget, event) {\n        BaseEvent.call(this, eventTarget, event);\n    }\n\n    CustomEvent.prototype = Object.create(BaseEvent.prototype, {\n        constructor: { value: CustomEvent, configurable: true, writable: true },\n    });\n\n    // Define accessors.\n    for (let i = 0; i < keys.length; ++i) {\n        const key = keys[i];\n        if (!(key in BaseEvent.prototype)) {\n            const descriptor = Object.getOwnPropertyDescriptor(proto, key);\n            const isFunc = typeof descriptor.value === \"function\";\n            Object.defineProperty(\n                CustomEvent.prototype,\n                key,\n                isFunc\n                    ? defineCallDescriptor(key)\n                    : defineRedirectDescriptor(key)\n            );\n        }\n    }\n\n    return CustomEvent\n}\n\n/**\n * Get the wrapper class of a given prototype.\n * @param {Object} proto The prototype of the original event to get its wrapper.\n * @returns {Function} The wrapper class.\n * @private\n */\nfunction getWrapper(proto) {\n    if (proto == null || proto === Object.prototype) {\n        return Event\n    }\n\n    let wrapper = wrappers.get(proto);\n    if (wrapper == null) {\n        wrapper = defineWrapper(getWrapper(Object.getPrototypeOf(proto)), proto);\n        wrappers.set(proto, wrapper);\n    }\n    return wrapper\n}\n\n/**\n * Wrap a given event to management a dispatching.\n * @param {EventTarget} eventTarget The event target of this dispatching.\n * @param {Object} event The event to wrap.\n * @returns {Event} The wrapper instance.\n * @private\n */\nfunction wrapEvent(eventTarget, event) {\n    const Wrapper = getWrapper(Object.getPrototypeOf(event));\n    return new Wrapper(eventTarget, event)\n}\n\n/**\n * Get the immediateStopped flag of a given event.\n * @param {Event} event The event to get.\n * @returns {boolean} The flag to stop propagation immediately.\n * @private\n */\nfunction isStopped(event) {\n    return pd(event).immediateStopped\n}\n\n/**\n * Set the current event phase of a given event.\n * @param {Event} event The event to set current target.\n * @param {number} eventPhase New event phase.\n * @returns {void}\n * @private\n */\nfunction setEventPhase(event, eventPhase) {\n    pd(event).eventPhase = eventPhase;\n}\n\n/**\n * Set the current target of a given event.\n * @param {Event} event The event to set current target.\n * @param {EventTarget|null} currentTarget New current target.\n * @returns {void}\n * @private\n */\nfunction setCurrentTarget(event, currentTarget) {\n    pd(event).currentTarget = currentTarget;\n}\n\n/**\n * Set a passive listener of a given event.\n * @param {Event} event The event to set current target.\n * @param {Function|null} passiveListener New passive listener.\n * @returns {void}\n * @private\n */\nfunction setPassiveListener(event, passiveListener) {\n    pd(event).passiveListener = passiveListener;\n}\n\n/**\n * @typedef {object} ListenerNode\n * @property {Function} listener\n * @property {1|2|3} listenerType\n * @property {boolean} passive\n * @property {boolean} once\n * @property {ListenerNode|null} next\n * @private\n */\n\n/**\n * @type {WeakMap<object, Map<string, ListenerNode>>}\n * @private\n */\nconst listenersMap = new WeakMap();\n\n// Listener types\nconst CAPTURE = 1;\nconst BUBBLE = 2;\nconst ATTRIBUTE = 3;\n\n/**\n * Check whether a given value is an object or not.\n * @param {any} x The value to check.\n * @returns {boolean} `true` if the value is an object.\n */\nfunction isObject(x) {\n    return x !== null && typeof x === \"object\" //eslint-disable-line no-restricted-syntax\n}\n\n/**\n * Get listeners.\n * @param {EventTarget} eventTarget The event target to get.\n * @returns {Map<string, ListenerNode>} The listeners.\n * @private\n */\nfunction getListeners(eventTarget) {\n    const listeners = listenersMap.get(eventTarget);\n    if (listeners == null) {\n        throw new TypeError(\n            \"'this' is expected an EventTarget object, but got another value.\"\n        )\n    }\n    return listeners\n}\n\n/**\n * Get the property descriptor for the event attribute of a given event.\n * @param {string} eventName The event name to get property descriptor.\n * @returns {PropertyDescriptor} The property descriptor.\n * @private\n */\nfunction defineEventAttributeDescriptor(eventName) {\n    return {\n        get() {\n            const listeners = getListeners(this);\n            let node = listeners.get(eventName);\n            while (node != null) {\n                if (node.listenerType === ATTRIBUTE) {\n                    return node.listener\n                }\n                node = node.next;\n            }\n            return null\n        },\n\n        set(listener) {\n            if (typeof listener !== \"function\" && !isObject(listener)) {\n                listener = null; // eslint-disable-line no-param-reassign\n            }\n            const listeners = getListeners(this);\n\n            // Traverse to the tail while removing old value.\n            let prev = null;\n            let node = listeners.get(eventName);\n            while (node != null) {\n                if (node.listenerType === ATTRIBUTE) {\n                    // Remove old value.\n                    if (prev !== null) {\n                        prev.next = node.next;\n                    } else if (node.next !== null) {\n                        listeners.set(eventName, node.next);\n                    } else {\n                        listeners.delete(eventName);\n                    }\n                } else {\n                    prev = node;\n                }\n\n                node = node.next;\n            }\n\n            // Add new value.\n            if (listener !== null) {\n                const newNode = {\n                    listener,\n                    listenerType: ATTRIBUTE,\n                    passive: false,\n                    once: false,\n                    next: null,\n                };\n                if (prev === null) {\n                    listeners.set(eventName, newNode);\n                } else {\n                    prev.next = newNode;\n                }\n            }\n        },\n        configurable: true,\n        enumerable: true,\n    }\n}\n\n/**\n * Define an event attribute (e.g. `eventTarget.onclick`).\n * @param {Object} eventTargetPrototype The event target prototype to define an event attrbite.\n * @param {string} eventName The event name to define.\n * @returns {void}\n */\nfunction defineEventAttribute(eventTargetPrototype, eventName) {\n    Object.defineProperty(\n        eventTargetPrototype,\n        `on${eventName}`,\n        defineEventAttributeDescriptor(eventName)\n    );\n}\n\n/**\n * Define a custom EventTarget with event attributes.\n * @param {string[]} eventNames Event names for event attributes.\n * @returns {EventTarget} The custom EventTarget.\n * @private\n */\nfunction defineCustomEventTarget(eventNames) {\n    /** CustomEventTarget */\n    function CustomEventTarget() {\n        EventTarget.call(this);\n    }\n\n    CustomEventTarget.prototype = Object.create(EventTarget.prototype, {\n        constructor: {\n            value: CustomEventTarget,\n            configurable: true,\n            writable: true,\n        },\n    });\n\n    for (let i = 0; i < eventNames.length; ++i) {\n        defineEventAttribute(CustomEventTarget.prototype, eventNames[i]);\n    }\n\n    return CustomEventTarget\n}\n\n/**\n * EventTarget.\n *\n * - This is constructor if no arguments.\n * - This is a function which returns a CustomEventTarget constructor if there are arguments.\n *\n * For example:\n *\n *     class A extends EventTarget {}\n *     class B extends EventTarget(\"message\") {}\n *     class C extends EventTarget(\"message\", \"error\") {}\n *     class D extends EventTarget([\"message\", \"error\"]) {}\n */\nfunction EventTarget() {\n    /*eslint-disable consistent-return */\n    if (this instanceof EventTarget) {\n        listenersMap.set(this, new Map());\n        return\n    }\n    if (arguments.length === 1 && Array.isArray(arguments[0])) {\n        return defineCustomEventTarget(arguments[0])\n    }\n    if (arguments.length > 0) {\n        const types = new Array(arguments.length);\n        for (let i = 0; i < arguments.length; ++i) {\n            types[i] = arguments[i];\n        }\n        return defineCustomEventTarget(types)\n    }\n    throw new TypeError(\"Cannot call a class as a function\")\n    /*eslint-enable consistent-return */\n}\n\n// Should be enumerable, but class methods are not enumerable.\nEventTarget.prototype = {\n    /**\n     * Add a given listener to this event target.\n     * @param {string} eventName The event name to add.\n     * @param {Function} listener The listener to add.\n     * @param {boolean|{capture?:boolean,passive?:boolean,once?:boolean}} [options] The options for this listener.\n     * @returns {void}\n     */\n    addEventListener(eventName, listener, options) {\n        if (listener == null) {\n            return\n        }\n        if (typeof listener !== \"function\" && !isObject(listener)) {\n            throw new TypeError(\"'listener' should be a function or an object.\")\n        }\n\n        const listeners = getListeners(this);\n        const optionsIsObj = isObject(options);\n        const capture = optionsIsObj\n            ? Boolean(options.capture)\n            : Boolean(options);\n        const listenerType = capture ? CAPTURE : BUBBLE;\n        const newNode = {\n            listener,\n            listenerType,\n            passive: optionsIsObj && Boolean(options.passive),\n            once: optionsIsObj && Boolean(options.once),\n            next: null,\n        };\n\n        // Set it as the first node if the first node is null.\n        let node = listeners.get(eventName);\n        if (node === undefined) {\n            listeners.set(eventName, newNode);\n            return\n        }\n\n        // Traverse to the tail while checking duplication..\n        let prev = null;\n        while (node != null) {\n            if (\n                node.listener === listener &&\n                node.listenerType === listenerType\n            ) {\n                // Should ignore duplication.\n                return\n            }\n            prev = node;\n            node = node.next;\n        }\n\n        // Add it.\n        prev.next = newNode;\n    },\n\n    /**\n     * Remove a given listener from this event target.\n     * @param {string} eventName The event name to remove.\n     * @param {Function} listener The listener to remove.\n     * @param {boolean|{capture?:boolean,passive?:boolean,once?:boolean}} [options] The options for this listener.\n     * @returns {void}\n     */\n    removeEventListener(eventName, listener, options) {\n        if (listener == null) {\n            return\n        }\n\n        const listeners = getListeners(this);\n        const capture = isObject(options)\n            ? Boolean(options.capture)\n            : Boolean(options);\n        const listenerType = capture ? CAPTURE : BUBBLE;\n\n        let prev = null;\n        let node = listeners.get(eventName);\n        while (node != null) {\n            if (\n                node.listener === listener &&\n                node.listenerType === listenerType\n            ) {\n                if (prev !== null) {\n                    prev.next = node.next;\n                } else if (node.next !== null) {\n                    listeners.set(eventName, node.next);\n                } else {\n                    listeners.delete(eventName);\n                }\n                return\n            }\n\n            prev = node;\n            node = node.next;\n        }\n    },\n\n    /**\n     * Dispatch a given event.\n     * @param {Event|{type:string}} event The event to dispatch.\n     * @returns {boolean} `false` if canceled.\n     */\n    dispatchEvent(event) {\n        if (event == null || typeof event.type !== \"string\") {\n            throw new TypeError('\"event.type\" should be a string.')\n        }\n\n        // If listeners aren't registered, terminate.\n        const listeners = getListeners(this);\n        const eventName = event.type;\n        let node = listeners.get(eventName);\n        if (node == null) {\n            return true\n        }\n\n        // Since we cannot rewrite several properties, so wrap object.\n        const wrappedEvent = wrapEvent(this, event);\n\n        // This doesn't process capturing phase and bubbling phase.\n        // This isn't participating in a tree.\n        let prev = null;\n        while (node != null) {\n            // Remove this listener if it's once\n            if (node.once) {\n                if (prev !== null) {\n                    prev.next = node.next;\n                } else if (node.next !== null) {\n                    listeners.set(eventName, node.next);\n                } else {\n                    listeners.delete(eventName);\n                }\n            } else {\n                prev = node;\n            }\n\n            // Call this listener\n            setPassiveListener(\n                wrappedEvent,\n                node.passive ? node.listener : null\n            );\n            if (typeof node.listener === \"function\") {\n                try {\n                    node.listener.call(this, wrappedEvent);\n                } catch (err) {\n                    if (\n                        typeof console !== \"undefined\" &&\n                        typeof console.error === \"function\"\n                    ) {\n                        console.error(err);\n                    }\n                }\n            } else if (\n                node.listenerType !== ATTRIBUTE &&\n                typeof node.listener.handleEvent === \"function\"\n            ) {\n                node.listener.handleEvent(wrappedEvent);\n            }\n\n            // Break if `event.stopImmediatePropagation` was called.\n            if (isStopped(wrappedEvent)) {\n                break\n            }\n\n            node = node.next;\n        }\n        setPassiveListener(wrappedEvent, null);\n        setEventPhase(wrappedEvent, 0);\n        setCurrentTarget(wrappedEvent, null);\n\n        return !wrappedEvent.defaultPrevented\n    },\n};\n\n// `constructor` is not enumerable.\nObject.defineProperty(EventTarget.prototype, \"constructor\", {\n    value: EventTarget,\n    configurable: true,\n    writable: true,\n});\n\n// Ensure `eventTarget instanceof window.EventTarget` is `true`.\nif (\n    typeof window !== \"undefined\" &&\n    typeof window.EventTarget !== \"undefined\"\n) {\n    Object.setPrototypeOf(EventTarget.prototype, window.EventTarget.prototype);\n}\n\nexports.defineEventAttribute = defineEventAttribute;\nexports.EventTarget = EventTarget;\nexports.default = EventTarget;\n\nmodule.exports = EventTarget\nmodule.exports.EventTarget = module.exports[\"default\"] = EventTarget\nmodule.exports.defineEventAttribute = defineEventAttribute\n//# sourceMappingURL=event-target-shim.js.map\n","'use strict';\nmodule.exports = (flag, argv) => {\n\targv = argv || process.argv;\n\tconst prefix = flag.startsWith('-') ? '' : (flag.length === 1 ? '-' : '--');\n\tconst pos = argv.indexOf(prefix + flag);\n\tconst terminatorPos = argv.indexOf('--');\n\treturn pos !== -1 && (terminatorPos === -1 ? true : pos < terminatorPos);\n};\n","try {\n  var util = require('util');\n  /* istanbul ignore next */\n  if (typeof util.inherits !== 'function') throw '';\n  module.exports = util.inherits;\n} catch (e) {\n  /* istanbul ignore next */\n  module.exports = require('./inherits_browser.js');\n}\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","var __extends = this && this.t || function() {\n    var extendStatics = function(e, n) {\n        extendStatics = Object.setPrototypeOf || {\n            __proto__: []\n        } instanceof Array && function(e, n) {\n            e.__proto__ = n;\n        } || function(e, n) {\n            for (var t in n) if (Object.prototype.hasOwnProperty.call(n, t)) e[t] = n[t];\n        };\n        return extendStatics(e, n);\n    };\n    return function(e, n) {\n        if (typeof n !== \"function\" && n !== null) throw new TypeError(\"Class extends value \" + String(n) + \" is not a constructor or null\");\n        extendStatics(e, n);\n        function __() {\n            this.constructor = e;\n        }\n        e.prototype = n === null ? Object.create(n) : (__.prototype = n.prototype, new __);\n    };\n}();\n\nvar TreeNode = function() {\n    function TreeNode(e, n) {\n        this.ee = 1;\n        this.u = undefined;\n        this.p = undefined;\n        this.K = undefined;\n        this.N = undefined;\n        this.rr = undefined;\n        this.u = e;\n        this.p = n;\n    }\n    TreeNode.prototype.L = function() {\n        var e = this;\n        if (e.ee === 1 && e.rr.rr === e) {\n            e = e.N;\n        } else if (e.K) {\n            e = e.K;\n            while (e.N) {\n                e = e.N;\n            }\n        } else {\n            var n = e.rr;\n            while (n.K === e) {\n                e = n;\n                n = e.rr;\n            }\n            e = n;\n        }\n        return e;\n    };\n    TreeNode.prototype.m = function() {\n        var e = this;\n        if (e.N) {\n            e = e.N;\n            while (e.K) {\n                e = e.K;\n            }\n            return e;\n        } else {\n            var n = e.rr;\n            while (n.N === e) {\n                e = n;\n                n = e.rr;\n            }\n            if (e.N !== n) {\n                return n;\n            } else return e;\n        }\n    };\n    TreeNode.prototype.ne = function() {\n        var e = this.rr;\n        var n = this.N;\n        var t = n.K;\n        if (e.rr === this) e.rr = n; else if (e.K === this) e.K = n; else e.N = n;\n        n.rr = e;\n        n.K = this;\n        this.rr = n;\n        this.N = t;\n        if (t) t.rr = this;\n        return n;\n    };\n    TreeNode.prototype.te = function() {\n        var e = this.rr;\n        var n = this.K;\n        var t = n.N;\n        if (e.rr === this) e.rr = n; else if (e.K === this) e.K = n; else e.N = n;\n        n.rr = e;\n        n.N = this;\n        this.rr = n;\n        this.K = t;\n        if (t) t.rr = this;\n        return n;\n    };\n    return TreeNode;\n}();\n\nexport { TreeNode };\n\nvar TreeNodeEnableIndex = function(e) {\n    __extends(TreeNodeEnableIndex, e);\n    function TreeNodeEnableIndex() {\n        var n = e !== null && e.apply(this, arguments) || this;\n        n.tr = 1;\n        return n;\n    }\n    TreeNodeEnableIndex.prototype.ne = function() {\n        var n = e.prototype.ne.call(this);\n        this.ie();\n        n.ie();\n        return n;\n    };\n    TreeNodeEnableIndex.prototype.te = function() {\n        var n = e.prototype.te.call(this);\n        this.ie();\n        n.ie();\n        return n;\n    };\n    TreeNodeEnableIndex.prototype.ie = function() {\n        this.tr = 1;\n        if (this.K) {\n            this.tr += this.K.tr;\n        }\n        if (this.N) {\n            this.tr += this.N.tr;\n        }\n    };\n    return TreeNodeEnableIndex;\n}(TreeNode);\n\nexport { TreeNodeEnableIndex };\n//# sourceMappingURL=TreeNode.js.map\n","var __extends = this && this.t || function() {\n    var extendStatics = function(n, t) {\n        extendStatics = Object.setPrototypeOf || {\n            __proto__: []\n        } instanceof Array && function(n, t) {\n            n.__proto__ = t;\n        } || function(n, t) {\n            for (var r in t) if (Object.prototype.hasOwnProperty.call(t, r)) n[r] = t[r];\n        };\n        return extendStatics(n, t);\n    };\n    return function(n, t) {\n        if (typeof t !== \"function\" && t !== null) throw new TypeError(\"Class extends value \" + String(t) + \" is not a constructor or null\");\n        extendStatics(n, t);\n        function __() {\n            this.constructor = n;\n        }\n        n.prototype = t === null ? Object.create(t) : (__.prototype = t.prototype, new __);\n    };\n}();\n\nvar ContainerIterator = function() {\n    function ContainerIterator(n) {\n        if (n === void 0) {\n            n = 0;\n        }\n        this.iteratorType = n;\n    }\n    ContainerIterator.prototype.equals = function(n) {\n        return this.o === n.o;\n    };\n    return ContainerIterator;\n}();\n\nexport { ContainerIterator };\n\nvar Base = function() {\n    function Base() {\n        this.M = 0;\n    }\n    Object.defineProperty(Base.prototype, \"length\", {\n        get: function() {\n            return this.M;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Base.prototype.size = function() {\n        return this.M;\n    };\n    Base.prototype.empty = function() {\n        return this.M === 0;\n    };\n    return Base;\n}();\n\nexport { Base };\n\nvar Container = function(n) {\n    __extends(Container, n);\n    function Container() {\n        return n !== null && n.apply(this, arguments) || this;\n    }\n    return Container;\n}(Base);\n\nexport { Container };\n//# sourceMappingURL=index.js.map\n","export function throwIteratorAccessError() {\n    throw new RangeError(\"Iterator access denied!\");\n}\n//# sourceMappingURL=throwError.js.map\n","var __extends = this && this.t || function() {\n    var extendStatics = function(e, r) {\n        extendStatics = Object.setPrototypeOf || {\n            __proto__: []\n        } instanceof Array && function(e, r) {\n            e.__proto__ = r;\n        } || function(e, r) {\n            for (var i in r) if (Object.prototype.hasOwnProperty.call(r, i)) e[i] = r[i];\n        };\n        return extendStatics(e, r);\n    };\n    return function(e, r) {\n        if (typeof r !== \"function\" && r !== null) throw new TypeError(\"Class extends value \" + String(r) + \" is not a constructor or null\");\n        extendStatics(e, r);\n        function __() {\n            this.constructor = e;\n        }\n        e.prototype = r === null ? Object.create(r) : (__.prototype = r.prototype, new __);\n    };\n}();\n\nvar __read = this && this.q || function(e, r) {\n    var i = typeof Symbol === \"function\" && e[Symbol.iterator];\n    if (!i) return e;\n    var t = i.call(e), n, s = [], f;\n    try {\n        while ((r === void 0 || r-- > 0) && !(n = t.next()).done) s.push(n.value);\n    } catch (e) {\n        f = {\n            error: e\n        };\n    } finally {\n        try {\n            if (n && !n.done && (i = t[\"return\"])) i.call(t);\n        } finally {\n            if (f) throw f.error;\n        }\n    }\n    return s;\n};\n\nvar __values = this && this.V || function(e) {\n    var r = typeof Symbol === \"function\" && Symbol.iterator, i = r && e[r], t = 0;\n    if (i) return i.call(e);\n    if (e && typeof e.length === \"number\") return {\n        next: function() {\n            if (e && t >= e.length) e = void 0;\n            return {\n                value: e && e[t++],\n                done: !e\n            };\n        }\n    };\n    throw new TypeError(r ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nimport { TreeNode, TreeNodeEnableIndex } from \"./TreeNode\";\n\nimport { Container } from \"../../ContainerBase\";\n\nimport { throwIteratorAccessError } from \"../../../utils/throwError\";\n\nvar TreeContainer = function(e) {\n    __extends(TreeContainer, e);\n    function TreeContainer(r, i) {\n        if (r === void 0) {\n            r = function(e, r) {\n                if (e < r) return -1;\n                if (e > r) return 1;\n                return 0;\n            };\n        }\n        if (i === void 0) {\n            i = false;\n        }\n        var t = e.call(this) || this;\n        t.W = undefined;\n        t.$ = r;\n        if (i) {\n            t.re = TreeNodeEnableIndex;\n            t.v = function(e, r, i) {\n                var t = this.se(e, r, i);\n                if (t) {\n                    var n = t.rr;\n                    while (n !== this.h) {\n                        n.tr += 1;\n                        n = n.rr;\n                    }\n                    var s = this.fe(t);\n                    if (s) {\n                        var f = s, h = f.parentNode, u = f.grandParent, a = f.curNode;\n                        h.ie();\n                        u.ie();\n                        a.ie();\n                    }\n                }\n                return this.M;\n            };\n            t.G = function(e) {\n                var r = this.he(e);\n                while (r !== this.h) {\n                    r.tr -= 1;\n                    r = r.rr;\n                }\n            };\n        } else {\n            t.re = TreeNode;\n            t.v = function(e, r, i) {\n                var t = this.se(e, r, i);\n                if (t) this.fe(t);\n                return this.M;\n            };\n            t.G = t.he;\n        }\n        t.h = new t.re;\n        return t;\n    }\n    TreeContainer.prototype.U = function(e, r) {\n        var i = this.h;\n        while (e) {\n            var t = this.$(e.u, r);\n            if (t < 0) {\n                e = e.N;\n            } else if (t > 0) {\n                i = e;\n                e = e.K;\n            } else return e;\n        }\n        return i;\n    };\n    TreeContainer.prototype.X = function(e, r) {\n        var i = this.h;\n        while (e) {\n            var t = this.$(e.u, r);\n            if (t <= 0) {\n                e = e.N;\n            } else {\n                i = e;\n                e = e.K;\n            }\n        }\n        return i;\n    };\n    TreeContainer.prototype.Y = function(e, r) {\n        var i = this.h;\n        while (e) {\n            var t = this.$(e.u, r);\n            if (t < 0) {\n                i = e;\n                e = e.N;\n            } else if (t > 0) {\n                e = e.K;\n            } else return e;\n        }\n        return i;\n    };\n    TreeContainer.prototype.Z = function(e, r) {\n        var i = this.h;\n        while (e) {\n            var t = this.$(e.u, r);\n            if (t < 0) {\n                i = e;\n                e = e.N;\n            } else {\n                e = e.K;\n            }\n        }\n        return i;\n    };\n    TreeContainer.prototype.ue = function(e) {\n        while (true) {\n            var r = e.rr;\n            if (r === this.h) return;\n            if (e.ee === 1) {\n                e.ee = 0;\n                return;\n            }\n            if (e === r.K) {\n                var i = r.N;\n                if (i.ee === 1) {\n                    i.ee = 0;\n                    r.ee = 1;\n                    if (r === this.W) {\n                        this.W = r.ne();\n                    } else r.ne();\n                } else {\n                    if (i.N && i.N.ee === 1) {\n                        i.ee = r.ee;\n                        r.ee = 0;\n                        i.N.ee = 0;\n                        if (r === this.W) {\n                            this.W = r.ne();\n                        } else r.ne();\n                        return;\n                    } else if (i.K && i.K.ee === 1) {\n                        i.ee = 1;\n                        i.K.ee = 0;\n                        i.te();\n                    } else {\n                        i.ee = 1;\n                        e = r;\n                    }\n                }\n            } else {\n                var i = r.K;\n                if (i.ee === 1) {\n                    i.ee = 0;\n                    r.ee = 1;\n                    if (r === this.W) {\n                        this.W = r.te();\n                    } else r.te();\n                } else {\n                    if (i.K && i.K.ee === 1) {\n                        i.ee = r.ee;\n                        r.ee = 0;\n                        i.K.ee = 0;\n                        if (r === this.W) {\n                            this.W = r.te();\n                        } else r.te();\n                        return;\n                    } else if (i.N && i.N.ee === 1) {\n                        i.ee = 1;\n                        i.N.ee = 0;\n                        i.ne();\n                    } else {\n                        i.ee = 1;\n                        e = r;\n                    }\n                }\n            }\n        }\n    };\n    TreeContainer.prototype.he = function(e) {\n        var r, i;\n        if (this.M === 1) {\n            this.clear();\n            return this.h;\n        }\n        var t = e;\n        while (t.K || t.N) {\n            if (t.N) {\n                t = t.N;\n                while (t.K) t = t.K;\n            } else {\n                t = t.K;\n            }\n            r = __read([ t.u, e.u ], 2), e.u = r[0], t.u = r[1];\n            i = __read([ t.p, e.p ], 2), e.p = i[0], t.p = i[1];\n            e = t;\n        }\n        if (this.h.K === t) {\n            this.h.K = t.rr;\n        } else if (this.h.N === t) {\n            this.h.N = t.rr;\n        }\n        this.ue(t);\n        var n = t.rr;\n        if (t === n.K) {\n            n.K = undefined;\n        } else n.N = undefined;\n        this.M -= 1;\n        this.W.ee = 0;\n        return n;\n    };\n    TreeContainer.prototype.ae = function(e, r) {\n        if (e === undefined) return false;\n        var i = this.ae(e.K, r);\n        if (i) return true;\n        if (r(e)) return true;\n        return this.ae(e.N, r);\n    };\n    TreeContainer.prototype.fe = function(e) {\n        while (true) {\n            var r = e.rr;\n            if (r.ee === 0) return;\n            var i = r.rr;\n            if (r === i.K) {\n                var t = i.N;\n                if (t && t.ee === 1) {\n                    t.ee = r.ee = 0;\n                    if (i === this.W) return;\n                    i.ee = 1;\n                    e = i;\n                    continue;\n                } else if (e === r.N) {\n                    e.ee = 0;\n                    if (e.K) e.K.rr = r;\n                    if (e.N) e.N.rr = i;\n                    r.N = e.K;\n                    i.K = e.N;\n                    e.K = r;\n                    e.N = i;\n                    if (i === this.W) {\n                        this.W = e;\n                        this.h.rr = e;\n                    } else {\n                        var n = i.rr;\n                        if (n.K === i) {\n                            n.K = e;\n                        } else n.N = e;\n                    }\n                    e.rr = i.rr;\n                    r.rr = e;\n                    i.rr = e;\n                    i.ee = 1;\n                    return {\n                        parentNode: r,\n                        grandParent: i,\n                        curNode: e\n                    };\n                } else {\n                    r.ee = 0;\n                    if (i === this.W) {\n                        this.W = i.te();\n                    } else i.te();\n                    i.ee = 1;\n                }\n            } else {\n                var t = i.K;\n                if (t && t.ee === 1) {\n                    t.ee = r.ee = 0;\n                    if (i === this.W) return;\n                    i.ee = 1;\n                    e = i;\n                    continue;\n                } else if (e === r.K) {\n                    e.ee = 0;\n                    if (e.K) e.K.rr = i;\n                    if (e.N) e.N.rr = r;\n                    i.N = e.K;\n                    r.K = e.N;\n                    e.K = i;\n                    e.N = r;\n                    if (i === this.W) {\n                        this.W = e;\n                        this.h.rr = e;\n                    } else {\n                        var n = i.rr;\n                        if (n.K === i) {\n                            n.K = e;\n                        } else n.N = e;\n                    }\n                    e.rr = i.rr;\n                    r.rr = e;\n                    i.rr = e;\n                    i.ee = 1;\n                    return {\n                        parentNode: r,\n                        grandParent: i,\n                        curNode: e\n                    };\n                } else {\n                    r.ee = 0;\n                    if (i === this.W) {\n                        this.W = i.ne();\n                    } else i.ne();\n                    i.ee = 1;\n                }\n            }\n            return;\n        }\n    };\n    TreeContainer.prototype.se = function(e, r, i) {\n        if (this.W === undefined) {\n            this.M += 1;\n            this.W = new this.re(e, r);\n            this.W.ee = 0;\n            this.W.rr = this.h;\n            this.h.rr = this.W;\n            this.h.K = this.W;\n            this.h.N = this.W;\n            return;\n        }\n        var t;\n        var n = this.h.K;\n        var s = this.$(n.u, e);\n        if (s === 0) {\n            n.p = r;\n            return;\n        } else if (s > 0) {\n            n.K = new this.re(e, r);\n            n.K.rr = n;\n            t = n.K;\n            this.h.K = t;\n        } else {\n            var f = this.h.N;\n            var h = this.$(f.u, e);\n            if (h === 0) {\n                f.p = r;\n                return;\n            } else if (h < 0) {\n                f.N = new this.re(e, r);\n                f.N.rr = f;\n                t = f.N;\n                this.h.N = t;\n            } else {\n                if (i !== undefined) {\n                    var u = i.o;\n                    if (u !== this.h) {\n                        var a = this.$(u.u, e);\n                        if (a === 0) {\n                            u.p = r;\n                            return;\n                        } else if (a > 0) {\n                            var o = u.L();\n                            var l = this.$(o.u, e);\n                            if (l === 0) {\n                                o.p = r;\n                                return;\n                            } else if (l < 0) {\n                                t = new this.re(e, r);\n                                if (o.N === undefined) {\n                                    o.N = t;\n                                    t.rr = o;\n                                } else {\n                                    u.K = t;\n                                    t.rr = u;\n                                }\n                            }\n                        }\n                    }\n                }\n                if (t === undefined) {\n                    t = this.W;\n                    while (true) {\n                        var v = this.$(t.u, e);\n                        if (v > 0) {\n                            if (t.K === undefined) {\n                                t.K = new this.re(e, r);\n                                t.K.rr = t;\n                                t = t.K;\n                                break;\n                            }\n                            t = t.K;\n                        } else if (v < 0) {\n                            if (t.N === undefined) {\n                                t.N = new this.re(e, r);\n                                t.N.rr = t;\n                                t = t.N;\n                                break;\n                            }\n                            t = t.N;\n                        } else {\n                            t.p = r;\n                            return;\n                        }\n                    }\n                }\n            }\n        }\n        this.M += 1;\n        return t;\n    };\n    TreeContainer.prototype.g = function(e, r) {\n        while (e) {\n            var i = this.$(e.u, r);\n            if (i < 0) {\n                e = e.N;\n            } else if (i > 0) {\n                e = e.K;\n            } else return e;\n        }\n        return e || this.h;\n    };\n    TreeContainer.prototype.clear = function() {\n        this.M = 0;\n        this.W = undefined;\n        this.h.rr = undefined;\n        this.h.K = this.h.N = undefined;\n    };\n    TreeContainer.prototype.updateKeyByIterator = function(e, r) {\n        var i = e.o;\n        if (i === this.h) {\n            throwIteratorAccessError();\n        }\n        if (this.M === 1) {\n            i.u = r;\n            return true;\n        }\n        if (i === this.h.K) {\n            if (this.$(i.m().u, r) > 0) {\n                i.u = r;\n                return true;\n            }\n            return false;\n        }\n        if (i === this.h.N) {\n            if (this.$(i.L().u, r) < 0) {\n                i.u = r;\n                return true;\n            }\n            return false;\n        }\n        var t = i.L().u;\n        if (this.$(t, r) >= 0) return false;\n        var n = i.m().u;\n        if (this.$(n, r) <= 0) return false;\n        i.u = r;\n        return true;\n    };\n    TreeContainer.prototype.eraseElementByPos = function(e) {\n        if (e < 0 || e > this.M - 1) {\n            throw new RangeError;\n        }\n        var r = 0;\n        var i = this;\n        this.ae(this.W, (function(t) {\n            if (e === r) {\n                i.G(t);\n                return true;\n            }\n            r += 1;\n            return false;\n        }));\n        return this.M;\n    };\n    TreeContainer.prototype.eraseElementByKey = function(e) {\n        if (this.M === 0) return false;\n        var r = this.g(this.W, e);\n        if (r === this.h) return false;\n        this.G(r);\n        return true;\n    };\n    TreeContainer.prototype.eraseElementByIterator = function(e) {\n        var r = e.o;\n        if (r === this.h) {\n            throwIteratorAccessError();\n        }\n        var i = r.N === undefined;\n        var t = e.iteratorType === 0;\n        if (t) {\n            if (i) e.next();\n        } else {\n            if (!i || r.K === undefined) e.next();\n        }\n        this.G(r);\n        return e;\n    };\n    TreeContainer.prototype.forEach = function(e) {\n        var r, i;\n        var t = 0;\n        try {\n            for (var n = __values(this), s = n.next(); !s.done; s = n.next()) {\n                var f = s.value;\n                e(f, t++, this);\n            }\n        } catch (e) {\n            r = {\n                error: e\n            };\n        } finally {\n            try {\n                if (s && !s.done && (i = n.return)) i.call(n);\n            } finally {\n                if (r) throw r.error;\n            }\n        }\n    };\n    TreeContainer.prototype.getElementByPos = function(e) {\n        var r, i;\n        if (e < 0 || e > this.M - 1) {\n            throw new RangeError;\n        }\n        var t;\n        var n = 0;\n        try {\n            for (var s = __values(this), f = s.next(); !f.done; f = s.next()) {\n                var h = f.value;\n                if (n === e) {\n                    t = h;\n                    break;\n                }\n                n += 1;\n            }\n        } catch (e) {\n            r = {\n                error: e\n            };\n        } finally {\n            try {\n                if (f && !f.done && (i = s.return)) i.call(s);\n            } finally {\n                if (r) throw r.error;\n            }\n        }\n        return t;\n    };\n    TreeContainer.prototype.getHeight = function() {\n        if (this.M === 0) return 0;\n        var traversal = function(e) {\n            if (!e) return 0;\n            return Math.max(traversal(e.K), traversal(e.N)) + 1;\n        };\n        return traversal(this.W);\n    };\n    return TreeContainer;\n}(Container);\n\nexport default TreeContainer;\n//# sourceMappingURL=index.js.map\n","var __extends = this && this.t || function() {\n    var extendStatics = function(r, t) {\n        extendStatics = Object.setPrototypeOf || {\n            __proto__: []\n        } instanceof Array && function(r, t) {\n            r.__proto__ = t;\n        } || function(r, t) {\n            for (var e in t) if (Object.prototype.hasOwnProperty.call(t, e)) r[e] = t[e];\n        };\n        return extendStatics(r, t);\n    };\n    return function(r, t) {\n        if (typeof t !== \"function\" && t !== null) throw new TypeError(\"Class extends value \" + String(t) + \" is not a constructor or null\");\n        extendStatics(r, t);\n        function __() {\n            this.constructor = r;\n        }\n        r.prototype = t === null ? Object.create(t) : (__.prototype = t.prototype, new __);\n    };\n}();\n\nimport { ContainerIterator } from \"../../ContainerBase\";\n\nimport { throwIteratorAccessError } from \"../../../utils/throwError\";\n\nvar TreeIterator = function(r) {\n    __extends(TreeIterator, r);\n    function TreeIterator(t, e, i) {\n        var n = r.call(this, i) || this;\n        n.o = t;\n        n.h = e;\n        if (n.iteratorType === 0) {\n            n.pre = function() {\n                if (this.o === this.h.K) {\n                    throwIteratorAccessError();\n                }\n                this.o = this.o.L();\n                return this;\n            };\n            n.next = function() {\n                if (this.o === this.h) {\n                    throwIteratorAccessError();\n                }\n                this.o = this.o.m();\n                return this;\n            };\n        } else {\n            n.pre = function() {\n                if (this.o === this.h.N) {\n                    throwIteratorAccessError();\n                }\n                this.o = this.o.m();\n                return this;\n            };\n            n.next = function() {\n                if (this.o === this.h) {\n                    throwIteratorAccessError();\n                }\n                this.o = this.o.L();\n                return this;\n            };\n        }\n        return n;\n    }\n    Object.defineProperty(TreeIterator.prototype, \"index\", {\n        get: function() {\n            var r = this.o;\n            var t = this.h.rr;\n            if (r === this.h) {\n                if (t) {\n                    return t.tr - 1;\n                }\n                return 0;\n            }\n            var e = 0;\n            if (r.K) {\n                e += r.K.tr;\n            }\n            while (r !== t) {\n                var i = r.rr;\n                if (r === i.N) {\n                    e += 1;\n                    if (i.K) {\n                        e += i.K.tr;\n                    }\n                }\n                r = i;\n            }\n            return e;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    return TreeIterator;\n}(ContainerIterator);\n\nexport default TreeIterator;\n//# sourceMappingURL=TreeIterator.js.map\n","var __extends = this && this.t || function() {\n    var extendStatics = function(e, t) {\n        extendStatics = Object.setPrototypeOf || {\n            __proto__: []\n        } instanceof Array && function(e, t) {\n            e.__proto__ = t;\n        } || function(e, t) {\n            for (var r in t) if (Object.prototype.hasOwnProperty.call(t, r)) e[r] = t[r];\n        };\n        return extendStatics(e, t);\n    };\n    return function(e, t) {\n        if (typeof t !== \"function\" && t !== null) throw new TypeError(\"Class extends value \" + String(t) + \" is not a constructor or null\");\n        extendStatics(e, t);\n        function __() {\n            this.constructor = e;\n        }\n        e.prototype = t === null ? Object.create(t) : (__.prototype = t.prototype, new __);\n    };\n}();\n\nvar __generator = this && this.i || function(e, t) {\n    var r = {\n        label: 0,\n        sent: function() {\n            if (o[0] & 1) throw o[1];\n            return o[1];\n        },\n        trys: [],\n        ops: []\n    }, n, i, o, u;\n    return u = {\n        next: verb(0),\n        throw: verb(1),\n        return: verb(2)\n    }, typeof Symbol === \"function\" && (u[Symbol.iterator] = function() {\n        return this;\n    }), u;\n    function verb(e) {\n        return function(t) {\n            return step([ e, t ]);\n        };\n    }\n    function step(u) {\n        if (n) throw new TypeError(\"Generator is already executing.\");\n        while (r) try {\n            if (n = 1, i && (o = u[0] & 2 ? i[\"return\"] : u[0] ? i[\"throw\"] || ((o = i[\"return\"]) && o.call(i), \n            0) : i.next) && !(o = o.call(i, u[1])).done) return o;\n            if (i = 0, o) u = [ u[0] & 2, o.value ];\n            switch (u[0]) {\n              case 0:\n              case 1:\n                o = u;\n                break;\n\n              case 4:\n                r.label++;\n                return {\n                    value: u[1],\n                    done: false\n                };\n\n              case 5:\n                r.label++;\n                i = u[1];\n                u = [ 0 ];\n                continue;\n\n              case 7:\n                u = r.ops.pop();\n                r.trys.pop();\n                continue;\n\n              default:\n                if (!(o = r.trys, o = o.length > 0 && o[o.length - 1]) && (u[0] === 6 || u[0] === 2)) {\n                    r = 0;\n                    continue;\n                }\n                if (u[0] === 3 && (!o || u[1] > o[0] && u[1] < o[3])) {\n                    r.label = u[1];\n                    break;\n                }\n                if (u[0] === 6 && r.label < o[1]) {\n                    r.label = o[1];\n                    o = u;\n                    break;\n                }\n                if (o && r.label < o[2]) {\n                    r.label = o[2];\n                    r.ops.push(u);\n                    break;\n                }\n                if (o[2]) r.ops.pop();\n                r.trys.pop();\n                continue;\n            }\n            u = t.call(e, r);\n        } catch (e) {\n            u = [ 6, e ];\n            i = 0;\n        } finally {\n            n = o = 0;\n        }\n        if (u[0] & 5) throw u[1];\n        return {\n            value: u[0] ? u[1] : void 0,\n            done: true\n        };\n    }\n};\n\nvar __values = this && this.V || function(e) {\n    var t = typeof Symbol === \"function\" && Symbol.iterator, r = t && e[t], n = 0;\n    if (r) return r.call(e);\n    if (e && typeof e.length === \"number\") return {\n        next: function() {\n            if (e && n >= e.length) e = void 0;\n            return {\n                value: e && e[n++],\n                done: !e\n            };\n        }\n    };\n    throw new TypeError(t ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nimport TreeContainer from \"./Base\";\n\nimport TreeIterator from \"./Base/TreeIterator\";\n\nimport { throwIteratorAccessError } from \"../../utils/throwError\";\n\nvar OrderedSetIterator = function(e) {\n    __extends(OrderedSetIterator, e);\n    function OrderedSetIterator(t, r, n, i) {\n        var o = e.call(this, t, r, i) || this;\n        o.container = n;\n        return o;\n    }\n    Object.defineProperty(OrderedSetIterator.prototype, \"pointer\", {\n        get: function() {\n            if (this.o === this.h) {\n                throwIteratorAccessError();\n            }\n            return this.o.u;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    OrderedSetIterator.prototype.copy = function() {\n        return new OrderedSetIterator(this.o, this.h, this.container, this.iteratorType);\n    };\n    return OrderedSetIterator;\n}(TreeIterator);\n\nvar OrderedSet = function(e) {\n    __extends(OrderedSet, e);\n    function OrderedSet(t, r, n) {\n        if (t === void 0) {\n            t = [];\n        }\n        var i = e.call(this, r, n) || this;\n        var o = i;\n        t.forEach((function(e) {\n            o.insert(e);\n        }));\n        return i;\n    }\n    OrderedSet.prototype.P = function(e) {\n        return __generator(this, (function(t) {\n            switch (t.label) {\n              case 0:\n                if (e === undefined) return [ 2 ];\n                return [ 5, __values(this.P(e.K)) ];\n\n              case 1:\n                t.sent();\n                return [ 4, e.u ];\n\n              case 2:\n                t.sent();\n                return [ 5, __values(this.P(e.N)) ];\n\n              case 3:\n                t.sent();\n                return [ 2 ];\n            }\n        }));\n    };\n    OrderedSet.prototype.begin = function() {\n        return new OrderedSetIterator(this.h.K || this.h, this.h, this);\n    };\n    OrderedSet.prototype.end = function() {\n        return new OrderedSetIterator(this.h, this.h, this);\n    };\n    OrderedSet.prototype.rBegin = function() {\n        return new OrderedSetIterator(this.h.N || this.h, this.h, this, 1);\n    };\n    OrderedSet.prototype.rEnd = function() {\n        return new OrderedSetIterator(this.h, this.h, this, 1);\n    };\n    OrderedSet.prototype.front = function() {\n        return this.h.K ? this.h.K.u : undefined;\n    };\n    OrderedSet.prototype.back = function() {\n        return this.h.N ? this.h.N.u : undefined;\n    };\n    OrderedSet.prototype.insert = function(e, t) {\n        return this.v(e, undefined, t);\n    };\n    OrderedSet.prototype.find = function(e) {\n        var t = this.g(this.W, e);\n        return new OrderedSetIterator(t, this.h, this);\n    };\n    OrderedSet.prototype.lowerBound = function(e) {\n        var t = this.U(this.W, e);\n        return new OrderedSetIterator(t, this.h, this);\n    };\n    OrderedSet.prototype.upperBound = function(e) {\n        var t = this.X(this.W, e);\n        return new OrderedSetIterator(t, this.h, this);\n    };\n    OrderedSet.prototype.reverseLowerBound = function(e) {\n        var t = this.Y(this.W, e);\n        return new OrderedSetIterator(t, this.h, this);\n    };\n    OrderedSet.prototype.reverseUpperBound = function(e) {\n        var t = this.Z(this.W, e);\n        return new OrderedSetIterator(t, this.h, this);\n    };\n    OrderedSet.prototype.union = function(e) {\n        var t = this;\n        e.forEach((function(e) {\n            t.insert(e);\n        }));\n        return this.M;\n    };\n    OrderedSet.prototype[Symbol.iterator] = function() {\n        return this.P(this.W);\n    };\n    return OrderedSet;\n}(TreeContainer);\n\nexport default OrderedSet;\n//# sourceMappingURL=OrderedSet.js.map\n","/* Protocol - protocol constants */\nconst protocol = module.exports\nconst { Buffer } = require('buffer')\n\n/* Command code => mnemonic */\nprotocol.types = {\n  0: 'reserved',\n  1: 'connect',\n  2: 'connack',\n  3: 'publish',\n  4: 'puback',\n  5: 'pubrec',\n  6: 'pubrel',\n  7: 'pubcomp',\n  8: 'subscribe',\n  9: 'suback',\n  10: 'unsubscribe',\n  11: 'unsuback',\n  12: 'pingreq',\n  13: 'pingresp',\n  14: 'disconnect',\n  15: 'auth'\n}\n\nprotocol.requiredHeaderFlags = {\n  1: 0, // 'connect'\n  2: 0, // 'connack'\n  4: 0, // 'puback'\n  5: 0, // 'pubrec'\n  6: 2, // 'pubrel'\n  7: 0, // 'pubcomp'\n  8: 2, // 'subscribe'\n  9: 0, // 'suback'\n  10: 2, // 'unsubscribe'\n  11: 0, // 'unsuback'\n  12: 0, // 'pingreq'\n  13: 0, // 'pingresp'\n  14: 0, // 'disconnect'\n  15: 0 // 'auth'\n}\n\nprotocol.requiredHeaderFlagsErrors = {}\nfor (const k in protocol.requiredHeaderFlags) {\n  const v = protocol.requiredHeaderFlags[k]\n  protocol.requiredHeaderFlagsErrors[k] = 'Invalid header flag bits, must be 0x' + v.toString(16) + ' for ' + protocol.types[k] + ' packet'\n}\n\n/* Mnemonic => Command code */\nprotocol.codes = {}\nfor (const k in protocol.types) {\n  const v = protocol.types[k]\n  protocol.codes[v] = k\n}\n\n/* Header */\nprotocol.CMD_SHIFT = 4\nprotocol.CMD_MASK = 0xF0\nprotocol.DUP_MASK = 0x08\nprotocol.QOS_MASK = 0x03\nprotocol.QOS_SHIFT = 1\nprotocol.RETAIN_MASK = 0x01\n\n/* Length */\nprotocol.VARBYTEINT_MASK = 0x7F\nprotocol.VARBYTEINT_FIN_MASK = 0x80\nprotocol.VARBYTEINT_MAX = 268435455\n\n/* Connack */\nprotocol.SESSIONPRESENT_MASK = 0x01\nprotocol.SESSIONPRESENT_HEADER = Buffer.from([protocol.SESSIONPRESENT_MASK])\nprotocol.CONNACK_HEADER = Buffer.from([protocol.codes.connack << protocol.CMD_SHIFT])\n\n/* Connect */\nprotocol.USERNAME_MASK = 0x80\nprotocol.PASSWORD_MASK = 0x40\nprotocol.WILL_RETAIN_MASK = 0x20\nprotocol.WILL_QOS_MASK = 0x18\nprotocol.WILL_QOS_SHIFT = 3\nprotocol.WILL_FLAG_MASK = 0x04\nprotocol.CLEAN_SESSION_MASK = 0x02\nprotocol.CONNECT_HEADER = Buffer.from([protocol.codes.connect << protocol.CMD_SHIFT])\n\n/* Properties */\nprotocol.properties = {\n  sessionExpiryInterval: 17,\n  willDelayInterval: 24,\n  receiveMaximum: 33,\n  maximumPacketSize: 39,\n  topicAliasMaximum: 34,\n  requestResponseInformation: 25,\n  requestProblemInformation: 23,\n  userProperties: 38,\n  authenticationMethod: 21,\n  authenticationData: 22,\n  payloadFormatIndicator: 1,\n  messageExpiryInterval: 2,\n  contentType: 3,\n  responseTopic: 8,\n  correlationData: 9,\n  maximumQoS: 36,\n  retainAvailable: 37,\n  assignedClientIdentifier: 18,\n  reasonString: 31,\n  wildcardSubscriptionAvailable: 40,\n  subscriptionIdentifiersAvailable: 41,\n  sharedSubscriptionAvailable: 42,\n  serverKeepAlive: 19,\n  responseInformation: 26,\n  serverReference: 28,\n  topicAlias: 35,\n  subscriptionIdentifier: 11\n}\nprotocol.propertiesCodes = {}\nfor (const prop in protocol.properties) {\n  const id = protocol.properties[prop]\n  protocol.propertiesCodes[id] = prop\n}\nprotocol.propertiesTypes = {\n  sessionExpiryInterval: 'int32',\n  willDelayInterval: 'int32',\n  receiveMaximum: 'int16',\n  maximumPacketSize: 'int32',\n  topicAliasMaximum: 'int16',\n  requestResponseInformation: 'byte',\n  requestProblemInformation: 'byte',\n  userProperties: 'pair',\n  authenticationMethod: 'string',\n  authenticationData: 'binary',\n  payloadFormatIndicator: 'byte',\n  messageExpiryInterval: 'int32',\n  contentType: 'string',\n  responseTopic: 'string',\n  correlationData: 'binary',\n  maximumQoS: 'int8',\n  retainAvailable: 'byte',\n  assignedClientIdentifier: 'string',\n  reasonString: 'string',\n  wildcardSubscriptionAvailable: 'byte',\n  subscriptionIdentifiersAvailable: 'byte',\n  sharedSubscriptionAvailable: 'byte',\n  serverKeepAlive: 'int16',\n  responseInformation: 'string',\n  serverReference: 'string',\n  topicAlias: 'int16',\n  subscriptionIdentifier: 'var'\n}\n\nfunction genHeader (type) {\n  return [0, 1, 2].map(qos => {\n    return [0, 1].map(dup => {\n      return [0, 1].map(retain => {\n        const buf = Buffer.alloc(1)\n        buf.writeUInt8(\n          protocol.codes[type] << protocol.CMD_SHIFT |\n          (dup ? protocol.DUP_MASK : 0) |\n          qos << protocol.QOS_SHIFT | retain, 0, true)\n        return buf\n      })\n    })\n  })\n}\n\n/* Publish */\nprotocol.PUBLISH_HEADER = genHeader('publish')\n\n/* Subscribe */\nprotocol.SUBSCRIBE_HEADER = genHeader('subscribe')\nprotocol.SUBSCRIBE_OPTIONS_QOS_MASK = 0x03\nprotocol.SUBSCRIBE_OPTIONS_NL_MASK = 0x01\nprotocol.SUBSCRIBE_OPTIONS_NL_SHIFT = 2\nprotocol.SUBSCRIBE_OPTIONS_RAP_MASK = 0x01\nprotocol.SUBSCRIBE_OPTIONS_RAP_SHIFT = 3\nprotocol.SUBSCRIBE_OPTIONS_RH_MASK = 0x03\nprotocol.SUBSCRIBE_OPTIONS_RH_SHIFT = 4\nprotocol.SUBSCRIBE_OPTIONS_RH = [0x00, 0x10, 0x20]\nprotocol.SUBSCRIBE_OPTIONS_NL = 0x04\nprotocol.SUBSCRIBE_OPTIONS_RAP = 0x08\nprotocol.SUBSCRIBE_OPTIONS_QOS = [0x00, 0x01, 0x02]\n\n/* Unsubscribe */\nprotocol.UNSUBSCRIBE_HEADER = genHeader('unsubscribe')\n\n/* Confirmations */\nprotocol.ACKS = {\n  unsuback: genHeader('unsuback'),\n  puback: genHeader('puback'),\n  pubcomp: genHeader('pubcomp'),\n  pubrel: genHeader('pubrel'),\n  pubrec: genHeader('pubrec')\n}\n\nprotocol.SUBACK_HEADER = Buffer.from([protocol.codes.suback << protocol.CMD_SHIFT])\n\n/* Protocol versions */\nprotocol.VERSION3 = Buffer.from([3])\nprotocol.VERSION4 = Buffer.from([4])\nprotocol.VERSION5 = Buffer.from([5])\nprotocol.VERSION131 = Buffer.from([131])\nprotocol.VERSION132 = Buffer.from([132])\n\n/* QoS */\nprotocol.QOS = [0, 1, 2].map(qos => {\n  return Buffer.from([qos])\n})\n\n/* Empty packets */\nprotocol.EMPTY = {\n  pingreq: Buffer.from([protocol.codes.pingreq << 4, 0]),\n  pingresp: Buffer.from([protocol.codes.pingresp << 4, 0]),\n  disconnect: Buffer.from([protocol.codes.disconnect << 4, 0])\n}\n\nprotocol.MQTT5_PUBACK_PUBREC_CODES = {\n  0x00: 'Success',\n  0x10: 'No matching subscribers',\n  0x80: 'Unspecified error',\n  0x83: 'Implementation specific error',\n  0x87: 'Not authorized',\n  0x90: 'Topic Name invalid',\n  0x91: 'Packet identifier in use',\n  0x97: 'Quota exceeded',\n  0x99: 'Payload format invalid'\n}\n\nprotocol.MQTT5_PUBREL_PUBCOMP_CODES = {\n  0x00: 'Success',\n  0x92: 'Packet Identifier not found'\n}\n\nprotocol.MQTT5_SUBACK_CODES = {\n  0x00: 'Granted QoS 0',\n  0x01: 'Granted QoS 1',\n  0x02: 'Granted QoS 2',\n  0x80: 'Unspecified error',\n  0x83: 'Implementation specific error',\n  0x87: 'Not authorized',\n  0x8F: 'Topic Filter invalid',\n  0x91: 'Packet Identifier in use',\n  0x97: 'Quota exceeded',\n  0x9E: 'Shared Subscriptions not supported',\n  0xA1: 'Subscription Identifiers not supported',\n  0xA2: 'Wildcard Subscriptions not supported'\n}\n\nprotocol.MQTT5_UNSUBACK_CODES = {\n  0x00: 'Success',\n  0x11: 'No subscription existed',\n  0x80: 'Unspecified error',\n  0x83: 'Implementation specific error',\n  0x87: 'Not authorized',\n  0x8F: 'Topic Filter invalid',\n  0x91: 'Packet Identifier in use'\n}\n\nprotocol.MQTT5_DISCONNECT_CODES = {\n  0x00: 'Normal disconnection',\n  0x04: 'Disconnect with Will Message',\n  0x80: 'Unspecified error',\n  0x81: 'Malformed Packet',\n  0x82: 'Protocol Error',\n  0x83: 'Implementation specific error',\n  0x87: 'Not authorized',\n  0x89: 'Server busy',\n  0x8B: 'Server shutting down',\n  0x8D: 'Keep Alive timeout',\n  0x8E: 'Session taken over',\n  0x8F: 'Topic Filter invalid',\n  0x90: 'Topic Name invalid',\n  0x93: 'Receive Maximum exceeded',\n  0x94: 'Topic Alias invalid',\n  0x95: 'Packet too large',\n  0x96: 'Message rate too high',\n  0x97: 'Quota exceeded',\n  0x98: 'Administrative action',\n  0x99: 'Payload format invalid',\n  0x9A: 'Retain not supported',\n  0x9B: 'QoS not supported',\n  0x9C: 'Use another server',\n  0x9D: 'Server moved',\n  0x9E: 'Shared Subscriptions not supported',\n  0x9F: 'Connection rate exceeded',\n  0xA0: 'Maximum connect time',\n  0xA1: 'Subscription Identifiers not supported',\n  0xA2: 'Wildcard Subscriptions not supported'\n}\n\nprotocol.MQTT5_AUTH_CODES = {\n  0x00: 'Success',\n  0x18: 'Continue authentication',\n  0x19: 'Re-authenticate'\n}\n","const writeToStream = require('./writeToStream')\nconst { EventEmitter } = require('events')\nconst { Buffer } = require('buffer')\n\nfunction generate (packet, opts) {\n  const stream = new Accumulator()\n  writeToStream(packet, stream, opts)\n  return stream.concat()\n}\n\nclass Accumulator extends EventEmitter {\n  constructor () {\n    super()\n    this._array = new Array(20)\n    this._i = 0\n  }\n\n  write (chunk) {\n    this._array[this._i++] = chunk\n    return true\n  }\n\n  concat () {\n    let length = 0\n    const lengths = new Array(this._array.length)\n    const list = this._array\n    let pos = 0\n    let i\n\n    for (i = 0; i < list.length && list[i] !== undefined; i++) {\n      if (typeof list[i] !== 'string') lengths[i] = list[i].length\n      else lengths[i] = Buffer.byteLength(list[i])\n\n      length += lengths[i]\n    }\n\n    const result = Buffer.allocUnsafe(length)\n\n    for (i = 0; i < list.length && list[i] !== undefined; i++) {\n      if (typeof list[i] !== 'string') {\n        list[i].copy(result, pos)\n        pos += lengths[i]\n      } else {\n        result.write(list[i], pos)\n        pos += lengths[i]\n      }\n    }\n\n    return result\n  }\n\n  destroy (err) {\n    if (err) this.emit('error', err)\n  }\n}\n\nmodule.exports = generate\n","exports.parser = require('./parser').parser\nexports.generate = require('./generate')\nexports.writeToStream = require('./writeToStream')\n","const { Buffer } = require('buffer')\nconst max = 65536\nconst cache = {}\n\n// in node 6 Buffer.subarray returns a Uint8Array instead of a Buffer\n// later versions return a Buffer\n// alternative is Buffer.slice but that creates a new buffer\n// creating new buffers takes time\n// SubOk is only false on node < 8\nconst SubOk = Buffer.isBuffer(Buffer.from([1, 2]).subarray(0, 1))\n\nfunction generateBuffer (i) {\n  const buffer = Buffer.allocUnsafe(2)\n  buffer.writeUInt8(i >> 8, 0)\n  buffer.writeUInt8(i & 0x00FF, 0 + 1)\n\n  return buffer\n}\n\nfunction generateCache () {\n  for (let i = 0; i < max; i++) {\n    cache[i] = generateBuffer(i)\n  }\n}\n\nfunction genBufVariableByteInt (num) {\n  const maxLength = 4 // max 4 bytes\n  let digit = 0\n  let pos = 0\n  const buffer = Buffer.allocUnsafe(maxLength)\n\n  do {\n    digit = num % 128 | 0\n    num = num / 128 | 0\n    if (num > 0) digit = digit | 0x80\n\n    buffer.writeUInt8(digit, pos++)\n  } while (num > 0 && pos < maxLength)\n\n  if (num > 0) {\n    pos = 0\n  }\n\n  return SubOk ? buffer.subarray(0, pos) : buffer.slice(0, pos)\n}\n\nfunction generate4ByteBuffer (num) {\n  const buffer = Buffer.allocUnsafe(4)\n  buffer.writeUInt32BE(num, 0)\n  return buffer\n}\n\nmodule.exports = {\n  cache,\n  generateCache,\n  generateNumber: generateBuffer,\n  genBufVariableByteInt,\n  generate4ByteBuffer\n}\n","class Packet {\n  constructor () {\n    this.cmd = null\n    this.retain = false\n    this.qos = 0\n    this.dup = false\n    this.length = -1\n    this.topic = null\n    this.payload = null\n  }\n}\n\nmodule.exports = Packet\n","const bl = require('bl')\nconst { EventEmitter } = require('events')\nconst Packet = require('./packet')\nconst constants = require('./constants')\nconst debug = require('debug')('mqtt-packet:parser')\n\nclass Parser extends EventEmitter {\n  constructor () {\n    super()\n    this.parser = this.constructor.parser\n  }\n\n  static parser (opt) {\n    if (!(this instanceof Parser)) return (new Parser()).parser(opt)\n\n    this.settings = opt || {}\n\n    this._states = [\n      '_parseHeader',\n      '_parseLength',\n      '_parsePayload',\n      '_newPacket'\n    ]\n\n    this._resetState()\n    return this\n  }\n\n  _resetState () {\n    debug('_resetState: resetting packet, error, _list, and _stateCounter')\n    this.packet = new Packet()\n    this.error = null\n    this._list = bl()\n    this._stateCounter = 0\n  }\n\n  parse (buf) {\n    if (this.error) this._resetState()\n\n    this._list.append(buf)\n    debug('parse: current state: %s', this._states[this._stateCounter])\n    while ((this.packet.length !== -1 || this._list.length > 0) &&\n      this[this._states[this._stateCounter]]() &&\n      !this.error) {\n      this._stateCounter++\n      debug('parse: state complete. _stateCounter is now: %d', this._stateCounter)\n      debug('parse: packet.length: %d, buffer list length: %d', this.packet.length, this._list.length)\n      if (this._stateCounter >= this._states.length) this._stateCounter = 0\n    }\n    debug('parse: exited while loop. packet: %d, buffer list length: %d', this.packet.length, this._list.length)\n    return this._list.length\n  }\n\n  _parseHeader () {\n    // There is at least one byte in the buffer\n    const zero = this._list.readUInt8(0)\n    const cmdIndex = zero >> constants.CMD_SHIFT\n    this.packet.cmd = constants.types[cmdIndex]\n    const headerFlags = zero & 0xf\n    const requiredHeaderFlags = constants.requiredHeaderFlags[cmdIndex]\n    if (requiredHeaderFlags != null && headerFlags !== requiredHeaderFlags) {\n      // Where a flag bit is marked as “Reserved” in Table 2.2 - Flag Bits, it is reserved for future use and MUST be set to the value listed in that table [MQTT-2.2.2-1]. If invalid flags are received, the receiver MUST close the Network Connection [MQTT-2.2.2-2]\n      return this._emitError(new Error(constants.requiredHeaderFlagsErrors[cmdIndex]))\n    }\n    this.packet.retain = (zero & constants.RETAIN_MASK) !== 0\n    this.packet.qos = (zero >> constants.QOS_SHIFT) & constants.QOS_MASK\n    if (this.packet.qos > 2) {\n      return this._emitError(new Error('Packet must not have both QoS bits set to 1'))\n    }\n    this.packet.dup = (zero & constants.DUP_MASK) !== 0\n    debug('_parseHeader: packet: %o', this.packet)\n\n    this._list.consume(1)\n\n    return true\n  }\n\n  _parseLength () {\n    // There is at least one byte in the list\n    const result = this._parseVarByteNum(true)\n\n    if (result) {\n      this.packet.length = result.value\n      this._list.consume(result.bytes)\n    }\n    debug('_parseLength %d', result.value)\n    return !!result\n  }\n\n  _parsePayload () {\n    debug('_parsePayload: payload %O', this._list)\n    let result = false\n\n    // Do we have a payload? Do we have enough data to complete the payload?\n    // PINGs have no payload\n    if (this.packet.length === 0 || this._list.length >= this.packet.length) {\n      this._pos = 0\n\n      switch (this.packet.cmd) {\n        case 'connect':\n          this._parseConnect()\n          break\n        case 'connack':\n          this._parseConnack()\n          break\n        case 'publish':\n          this._parsePublish()\n          break\n        case 'puback':\n        case 'pubrec':\n        case 'pubrel':\n        case 'pubcomp':\n          this._parseConfirmation()\n          break\n        case 'subscribe':\n          this._parseSubscribe()\n          break\n        case 'suback':\n          this._parseSuback()\n          break\n        case 'unsubscribe':\n          this._parseUnsubscribe()\n          break\n        case 'unsuback':\n          this._parseUnsuback()\n          break\n        case 'pingreq':\n        case 'pingresp':\n          // These are empty, nothing to do\n          break\n        case 'disconnect':\n          this._parseDisconnect()\n          break\n        case 'auth':\n          this._parseAuth()\n          break\n        default:\n          this._emitError(new Error('Not supported'))\n      }\n\n      result = true\n    }\n    debug('_parsePayload complete result: %s', result)\n    return result\n  }\n\n  _parseConnect () {\n    debug('_parseConnect')\n    let topic // Will topic\n    let payload // Will payload\n    let password // Password\n    let username // Username\n    const flags = {}\n    const packet = this.packet\n\n    // Parse protocolId\n    const protocolId = this._parseString()\n\n    if (protocolId === null) return this._emitError(new Error('Cannot parse protocolId'))\n    if (protocolId !== 'MQTT' && protocolId !== 'MQIsdp') {\n      return this._emitError(new Error('Invalid protocolId'))\n    }\n\n    packet.protocolId = protocolId\n\n    // Parse constants version number\n    if (this._pos >= this._list.length) return this._emitError(new Error('Packet too short'))\n\n    packet.protocolVersion = this._list.readUInt8(this._pos)\n\n    if (packet.protocolVersion >= 128) {\n      packet.bridgeMode = true\n      packet.protocolVersion = packet.protocolVersion - 128\n    }\n\n    if (packet.protocolVersion !== 3 && packet.protocolVersion !== 4 && packet.protocolVersion !== 5) {\n      return this._emitError(new Error('Invalid protocol version'))\n    }\n\n    this._pos++\n\n    if (this._pos >= this._list.length) {\n      return this._emitError(new Error('Packet too short'))\n    }\n\n    if (this._list.readUInt8(this._pos) & 0x1) {\n      // The Server MUST validate that the reserved flag in the CONNECT Control Packet is set to zero and disconnect the Client if it is not zero [MQTT-3.1.2-3]\n      return this._emitError(new Error('Connect flag bit 0 must be 0, but got 1'))\n    }\n    // Parse connect flags\n    flags.username = (this._list.readUInt8(this._pos) & constants.USERNAME_MASK)\n    flags.password = (this._list.readUInt8(this._pos) & constants.PASSWORD_MASK)\n    flags.will = (this._list.readUInt8(this._pos) & constants.WILL_FLAG_MASK)\n\n    const willRetain = !!(this._list.readUInt8(this._pos) & constants.WILL_RETAIN_MASK)\n    const willQos = (this._list.readUInt8(this._pos) &\n        constants.WILL_QOS_MASK) >> constants.WILL_QOS_SHIFT\n\n    if (flags.will) {\n      packet.will = {}\n      packet.will.retain = willRetain\n      packet.will.qos = willQos\n    } else {\n      if (willRetain) {\n        return this._emitError(new Error('Will Retain Flag must be set to zero when Will Flag is set to 0'))\n      }\n      if (willQos) {\n        return this._emitError(new Error('Will QoS must be set to zero when Will Flag is set to 0'))\n      }\n    }\n\n    packet.clean = (this._list.readUInt8(this._pos) & constants.CLEAN_SESSION_MASK) !== 0\n    this._pos++\n\n    // Parse keepalive\n    packet.keepalive = this._parseNum()\n    if (packet.keepalive === -1) return this._emitError(new Error('Packet too short'))\n\n    // parse properties\n    if (packet.protocolVersion === 5) {\n      const properties = this._parseProperties()\n      if (Object.getOwnPropertyNames(properties).length) {\n        packet.properties = properties\n      }\n    }\n    // Parse clientId\n    const clientId = this._parseString()\n    if (clientId === null) return this._emitError(new Error('Packet too short'))\n    packet.clientId = clientId\n    debug('_parseConnect: packet.clientId: %s', packet.clientId)\n\n    if (flags.will) {\n      if (packet.protocolVersion === 5) {\n        const willProperties = this._parseProperties()\n        if (Object.getOwnPropertyNames(willProperties).length) {\n          packet.will.properties = willProperties\n        }\n      }\n      // Parse will topic\n      topic = this._parseString()\n      if (topic === null) return this._emitError(new Error('Cannot parse will topic'))\n      packet.will.topic = topic\n      debug('_parseConnect: packet.will.topic: %s', packet.will.topic)\n\n      // Parse will payload\n      payload = this._parseBuffer()\n      if (payload === null) return this._emitError(new Error('Cannot parse will payload'))\n      packet.will.payload = payload\n      debug('_parseConnect: packet.will.paylaod: %s', packet.will.payload)\n    }\n\n    // Parse username\n    if (flags.username) {\n      username = this._parseString()\n      if (username === null) return this._emitError(new Error('Cannot parse username'))\n      packet.username = username\n      debug('_parseConnect: packet.username: %s', packet.username)\n    }\n\n    // Parse password\n    if (flags.password) {\n      password = this._parseBuffer()\n      if (password === null) return this._emitError(new Error('Cannot parse password'))\n      packet.password = password\n    }\n    // need for right parse auth packet and self set up\n    this.settings = packet\n    debug('_parseConnect: complete')\n    return packet\n  }\n\n  _parseConnack () {\n    debug('_parseConnack')\n    const packet = this.packet\n\n    if (this._list.length < 1) return null\n    const flags = this._list.readUInt8(this._pos++)\n    if (flags > 1) {\n      return this._emitError(new Error('Invalid connack flags, bits 7-1 must be set to 0'))\n    }\n    packet.sessionPresent = !!(flags & constants.SESSIONPRESENT_MASK)\n\n    if (this.settings.protocolVersion === 5) {\n      if (this._list.length >= 2) {\n        packet.reasonCode = this._list.readUInt8(this._pos++)\n      } else {\n        packet.reasonCode = 0\n      }\n    } else {\n      if (this._list.length < 2) return null\n      packet.returnCode = this._list.readUInt8(this._pos++)\n    }\n\n    if (packet.returnCode === -1 || packet.reasonCode === -1) return this._emitError(new Error('Cannot parse return code'))\n    // mqtt 5 properties\n    if (this.settings.protocolVersion === 5) {\n      const properties = this._parseProperties()\n      if (Object.getOwnPropertyNames(properties).length) {\n        packet.properties = properties\n      }\n    }\n    debug('_parseConnack: complete')\n  }\n\n  _parsePublish () {\n    debug('_parsePublish')\n    const packet = this.packet\n    packet.topic = this._parseString()\n\n    if (packet.topic === null) return this._emitError(new Error('Cannot parse topic'))\n\n    // Parse messageId\n    if (packet.qos > 0) if (!this._parseMessageId()) { return }\n\n    // Properties mqtt 5\n    if (this.settings.protocolVersion === 5) {\n      const properties = this._parseProperties()\n      if (Object.getOwnPropertyNames(properties).length) {\n        packet.properties = properties\n      }\n    }\n\n    packet.payload = this._list.slice(this._pos, packet.length)\n    debug('_parsePublish: payload from buffer list: %o', packet.payload)\n  }\n\n  _parseSubscribe () {\n    debug('_parseSubscribe')\n    const packet = this.packet\n    let topic\n    let options\n    let qos\n    let rh\n    let rap\n    let nl\n    let subscription\n\n    packet.subscriptions = []\n\n    if (!this._parseMessageId()) { return }\n\n    // Properties mqtt 5\n    if (this.settings.protocolVersion === 5) {\n      const properties = this._parseProperties()\n      if (Object.getOwnPropertyNames(properties).length) {\n        packet.properties = properties\n      }\n    }\n\n    if (packet.length <= 0) { return this._emitError(new Error('Malformed subscribe, no payload specified')) }\n\n    while (this._pos < packet.length) {\n      // Parse topic\n      topic = this._parseString()\n      if (topic === null) return this._emitError(new Error('Cannot parse topic'))\n      if (this._pos >= packet.length) return this._emitError(new Error('Malformed Subscribe Payload'))\n\n      options = this._parseByte()\n\n      if (this.settings.protocolVersion === 5) {\n        if (options & 0xc0) {\n          return this._emitError(new Error('Invalid subscribe topic flag bits, bits 7-6 must be 0'))\n        }\n      } else {\n        if (options & 0xfc) {\n          return this._emitError(new Error('Invalid subscribe topic flag bits, bits 7-2 must be 0'))\n        }\n      }\n\n      qos = options & constants.SUBSCRIBE_OPTIONS_QOS_MASK\n      if (qos > 2) {\n        return this._emitError(new Error('Invalid subscribe QoS, must be <= 2'))\n      }\n      nl = ((options >> constants.SUBSCRIBE_OPTIONS_NL_SHIFT) & constants.SUBSCRIBE_OPTIONS_NL_MASK) !== 0\n      rap = ((options >> constants.SUBSCRIBE_OPTIONS_RAP_SHIFT) & constants.SUBSCRIBE_OPTIONS_RAP_MASK) !== 0\n      rh = (options >> constants.SUBSCRIBE_OPTIONS_RH_SHIFT) & constants.SUBSCRIBE_OPTIONS_RH_MASK\n\n      if (rh > 2) {\n        return this._emitError(new Error('Invalid retain handling, must be <= 2'))\n      }\n\n      subscription = { topic, qos }\n\n      // mqtt 5 options\n      if (this.settings.protocolVersion === 5) {\n        subscription.nl = nl\n        subscription.rap = rap\n        subscription.rh = rh\n      } else if (this.settings.bridgeMode) {\n        subscription.rh = 0\n        subscription.rap = true\n        subscription.nl = true\n      }\n\n      // Push pair to subscriptions\n      debug('_parseSubscribe: push subscription `%s` to subscription', subscription)\n      packet.subscriptions.push(subscription)\n    }\n  }\n\n  _parseSuback () {\n    debug('_parseSuback')\n    const packet = this.packet\n    this.packet.granted = []\n\n    if (!this._parseMessageId()) { return }\n\n    // Properties mqtt 5\n    if (this.settings.protocolVersion === 5) {\n      const properties = this._parseProperties()\n      if (Object.getOwnPropertyNames(properties).length) {\n        packet.properties = properties\n      }\n    }\n\n    if (packet.length <= 0) { return this._emitError(new Error('Malformed suback, no payload specified')) }\n\n    // Parse granted QoSes\n    while (this._pos < this.packet.length) {\n      const code = this._list.readUInt8(this._pos++)\n      if (this.settings.protocolVersion === 5) {\n        if (!constants.MQTT5_SUBACK_CODES[code]) {\n          return this._emitError(new Error('Invalid suback code'))\n        }\n      } else {\n        if (code > 2 && code !== 0x80) {\n          return this._emitError(new Error('Invalid suback QoS, must be 0, 1, 2 or 128'))\n        }\n      }\n      this.packet.granted.push(code)\n    }\n  }\n\n  _parseUnsubscribe () {\n    debug('_parseUnsubscribe')\n    const packet = this.packet\n\n    packet.unsubscriptions = []\n\n    // Parse messageId\n    if (!this._parseMessageId()) { return }\n\n    // Properties mqtt 5\n    if (this.settings.protocolVersion === 5) {\n      const properties = this._parseProperties()\n      if (Object.getOwnPropertyNames(properties).length) {\n        packet.properties = properties\n      }\n    }\n\n    if (packet.length <= 0) { return this._emitError(new Error('Malformed unsubscribe, no payload specified')) }\n\n    while (this._pos < packet.length) {\n      // Parse topic\n      const topic = this._parseString()\n      if (topic === null) return this._emitError(new Error('Cannot parse topic'))\n\n      // Push topic to unsubscriptions\n      debug('_parseUnsubscribe: push topic `%s` to unsubscriptions', topic)\n      packet.unsubscriptions.push(topic)\n    }\n  }\n\n  _parseUnsuback () {\n    debug('_parseUnsuback')\n    const packet = this.packet\n    if (!this._parseMessageId()) return this._emitError(new Error('Cannot parse messageId'))\n\n    if ((this.settings.protocolVersion === 3 ||\n      this.settings.protocolVersion === 4) && packet.length !== 2) {\n      return this._emitError(new Error('Malformed unsuback, payload length must be 2'))\n    }\n    if (packet.length <= 0) { return this._emitError(new Error('Malformed unsuback, no payload specified')) }\n\n    // Properties mqtt 5\n    if (this.settings.protocolVersion === 5) {\n      const properties = this._parseProperties()\n      if (Object.getOwnPropertyNames(properties).length) {\n        packet.properties = properties\n      }\n      // Parse granted QoSes\n      packet.granted = []\n\n      while (this._pos < this.packet.length) {\n        const code = this._list.readUInt8(this._pos++)\n        if (!constants.MQTT5_UNSUBACK_CODES[code]) {\n          return this._emitError(new Error('Invalid unsuback code'))\n        }\n        this.packet.granted.push(code)\n      }\n    }\n  }\n\n  // parse packets like puback, pubrec, pubrel, pubcomp\n  _parseConfirmation () {\n    debug('_parseConfirmation: packet.cmd: `%s`', this.packet.cmd)\n    const packet = this.packet\n\n    this._parseMessageId()\n\n    if (this.settings.protocolVersion === 5) {\n      if (packet.length > 2) {\n        // response code\n        packet.reasonCode = this._parseByte()\n        switch (this.packet.cmd) {\n          case 'puback':\n          case 'pubrec':\n            if (!constants.MQTT5_PUBACK_PUBREC_CODES[packet.reasonCode]) {\n              return this._emitError(new Error('Invalid ' + this.packet.cmd + ' reason code'))\n            }\n            break\n          case 'pubrel':\n          case 'pubcomp':\n            if (!constants.MQTT5_PUBREL_PUBCOMP_CODES[packet.reasonCode]) {\n              return this._emitError(new Error('Invalid ' + this.packet.cmd + ' reason code'))\n            }\n            break\n        }\n        debug('_parseConfirmation: packet.reasonCode `%d`', packet.reasonCode)\n      } else {\n        packet.reasonCode = 0\n      }\n\n      if (packet.length > 3) {\n        // properies mqtt 5\n        const properties = this._parseProperties()\n        if (Object.getOwnPropertyNames(properties).length) {\n          packet.properties = properties\n        }\n      }\n    }\n\n    return true\n  }\n\n  // parse disconnect packet\n  _parseDisconnect () {\n    const packet = this.packet\n    debug('_parseDisconnect')\n\n    if (this.settings.protocolVersion === 5) {\n      // response code\n      if (this._list.length > 0) {\n        packet.reasonCode = this._parseByte()\n        if (!constants.MQTT5_DISCONNECT_CODES[packet.reasonCode]) {\n          this._emitError(new Error('Invalid disconnect reason code'))\n        }\n      } else {\n        packet.reasonCode = 0\n      }\n      // properies mqtt 5\n      const properties = this._parseProperties()\n      if (Object.getOwnPropertyNames(properties).length) {\n        packet.properties = properties\n      }\n    }\n\n    debug('_parseDisconnect result: true')\n    return true\n  }\n\n  // parse auth packet\n  _parseAuth () {\n    debug('_parseAuth')\n    const packet = this.packet\n\n    if (this.settings.protocolVersion !== 5) {\n      return this._emitError(new Error('Not supported auth packet for this version MQTT'))\n    }\n\n    // response code\n    packet.reasonCode = this._parseByte()\n    if (!constants.MQTT5_AUTH_CODES[packet.reasonCode]) {\n      return this._emitError(new Error('Invalid auth reason code'))\n    }\n    // properies mqtt 5\n    const properties = this._parseProperties()\n    if (Object.getOwnPropertyNames(properties).length) {\n      packet.properties = properties\n    }\n\n    debug('_parseAuth: result: true')\n    return true\n  }\n\n  _parseMessageId () {\n    const packet = this.packet\n\n    packet.messageId = this._parseNum()\n\n    if (packet.messageId === null) {\n      this._emitError(new Error('Cannot parse messageId'))\n      return false\n    }\n\n    debug('_parseMessageId: packet.messageId %d', packet.messageId)\n    return true\n  }\n\n  _parseString (maybeBuffer) {\n    const length = this._parseNum()\n    const end = length + this._pos\n\n    if (length === -1 || end > this._list.length || end > this.packet.length) return null\n\n    const result = this._list.toString('utf8', this._pos, end)\n    this._pos += length\n    debug('_parseString: result: %s', result)\n    return result\n  }\n\n  _parseStringPair () {\n    debug('_parseStringPair')\n    return {\n      name: this._parseString(),\n      value: this._parseString()\n    }\n  }\n\n  _parseBuffer () {\n    const length = this._parseNum()\n    const end = length + this._pos\n\n    if (length === -1 || end > this._list.length || end > this.packet.length) return null\n\n    const result = this._list.slice(this._pos, end)\n\n    this._pos += length\n    debug('_parseBuffer: result: %o', result)\n    return result\n  }\n\n  _parseNum () {\n    if (this._list.length - this._pos < 2) return -1\n\n    const result = this._list.readUInt16BE(this._pos)\n    this._pos += 2\n    debug('_parseNum: result: %s', result)\n    return result\n  }\n\n  _parse4ByteNum () {\n    if (this._list.length - this._pos < 4) return -1\n\n    const result = this._list.readUInt32BE(this._pos)\n    this._pos += 4\n    debug('_parse4ByteNum: result: %s', result)\n    return result\n  }\n\n  _parseVarByteNum (fullInfoFlag) {\n    debug('_parseVarByteNum')\n    const maxBytes = 4\n    let bytes = 0\n    let mul = 1\n    let value = 0\n    let result = false\n    let current\n    const padding = this._pos ? this._pos : 0\n\n    while (bytes < maxBytes && (padding + bytes) < this._list.length) {\n      current = this._list.readUInt8(padding + bytes++)\n      value += mul * (current & constants.VARBYTEINT_MASK)\n      mul *= 0x80\n\n      if ((current & constants.VARBYTEINT_FIN_MASK) === 0) {\n        result = true\n        break\n      }\n      if (this._list.length <= bytes) {\n        break\n      }\n    }\n\n    if (!result && bytes === maxBytes && this._list.length >= bytes) {\n      this._emitError(new Error('Invalid variable byte integer'))\n    }\n\n    if (padding) {\n      this._pos += bytes\n    }\n\n    if (result) {\n      if (fullInfoFlag) {\n        result = { bytes, value }\n      } else {\n        result = value\n      }\n    } else {\n      result = false\n    }\n\n    debug('_parseVarByteNum: result: %o', result)\n    return result\n  }\n\n  _parseByte () {\n    let result\n    if (this._pos < this._list.length) {\n      result = this._list.readUInt8(this._pos)\n      this._pos++\n    }\n    debug('_parseByte: result: %o', result)\n    return result\n  }\n\n  _parseByType (type) {\n    debug('_parseByType: type: %s', type)\n    switch (type) {\n      case 'byte': {\n        return this._parseByte() !== 0\n      }\n      case 'int8': {\n        return this._parseByte()\n      }\n      case 'int16': {\n        return this._parseNum()\n      }\n      case 'int32': {\n        return this._parse4ByteNum()\n      }\n      case 'var': {\n        return this._parseVarByteNum()\n      }\n      case 'string': {\n        return this._parseString()\n      }\n      case 'pair': {\n        return this._parseStringPair()\n      }\n      case 'binary': {\n        return this._parseBuffer()\n      }\n    }\n  }\n\n  _parseProperties () {\n    debug('_parseProperties')\n    const length = this._parseVarByteNum()\n    const start = this._pos\n    const end = start + length\n    const result = {}\n    while (this._pos < end) {\n      const type = this._parseByte()\n      if (!type) {\n        this._emitError(new Error('Cannot parse property code type'))\n        return false\n      }\n      const name = constants.propertiesCodes[type]\n      if (!name) {\n        this._emitError(new Error('Unknown property'))\n        return false\n      }\n      // user properties process\n      if (name === 'userProperties') {\n        if (!result[name]) {\n          result[name] = Object.create(null)\n        }\n        const currentUserProperty = this._parseByType(constants.propertiesTypes[name])\n        if (result[name][currentUserProperty.name]) {\n          if (Array.isArray(result[name][currentUserProperty.name])) {\n            result[name][currentUserProperty.name].push(currentUserProperty.value)\n          } else {\n            const currentValue = result[name][currentUserProperty.name]\n            result[name][currentUserProperty.name] = [currentValue]\n            result[name][currentUserProperty.name].push(currentUserProperty.value)\n          }\n        } else {\n          result[name][currentUserProperty.name] = currentUserProperty.value\n        }\n        continue\n      }\n      if (result[name]) {\n        if (Array.isArray(result[name])) {\n          result[name].push(this._parseByType(constants.propertiesTypes[name]))\n        } else {\n          result[name] = [result[name]]\n          result[name].push(this._parseByType(constants.propertiesTypes[name]))\n        }\n      } else {\n        result[name] = this._parseByType(constants.propertiesTypes[name])\n      }\n    }\n    return result\n  }\n\n  _newPacket () {\n    debug('_newPacket')\n    if (this.packet) {\n      this._list.consume(this.packet.length)\n      debug('_newPacket: parser emit packet: packet.cmd: %s, packet.payload: %s, packet.length: %d', this.packet.cmd, this.packet.payload, this.packet.length)\n      this.emit('packet', this.packet)\n    }\n    debug('_newPacket: new packet')\n    this.packet = new Packet()\n\n    this._pos = 0\n\n    return true\n  }\n\n  _emitError (err) {\n    debug('_emitError', err)\n    this.error = err\n    this.emit('error', err)\n  }\n}\n\nmodule.exports = Parser\n","const protocol = require('./constants')\nconst { Buffer } = require('buffer')\nconst empty = Buffer.allocUnsafe(0)\nconst zeroBuf = Buffer.from([0])\nconst numbers = require('./numbers')\nconst nextTick = require('process-nextick-args').nextTick\nconst debug = require('debug')('mqtt-packet:writeToStream')\n\nconst numCache = numbers.cache\nconst generateNumber = numbers.generateNumber\nconst generateCache = numbers.generateCache\nconst genBufVariableByteInt = numbers.genBufVariableByteInt\nconst generate4ByteBuffer = numbers.generate4ByteBuffer\nlet writeNumber = writeNumberCached\nlet toGenerate = true\n\nfunction generate (packet, stream, opts) {\n  debug('generate called')\n  if (stream.cork) {\n    stream.cork()\n    nextTick(uncork, stream)\n  }\n\n  if (toGenerate) {\n    toGenerate = false\n    generateCache()\n  }\n  debug('generate: packet.cmd: %s', packet.cmd)\n  switch (packet.cmd) {\n    case 'connect':\n      return connect(packet, stream, opts)\n    case 'connack':\n      return connack(packet, stream, opts)\n    case 'publish':\n      return publish(packet, stream, opts)\n    case 'puback':\n    case 'pubrec':\n    case 'pubrel':\n    case 'pubcomp':\n      return confirmation(packet, stream, opts)\n    case 'subscribe':\n      return subscribe(packet, stream, opts)\n    case 'suback':\n      return suback(packet, stream, opts)\n    case 'unsubscribe':\n      return unsubscribe(packet, stream, opts)\n    case 'unsuback':\n      return unsuback(packet, stream, opts)\n    case 'pingreq':\n    case 'pingresp':\n      return emptyPacket(packet, stream, opts)\n    case 'disconnect':\n      return disconnect(packet, stream, opts)\n    case 'auth':\n      return auth(packet, stream, opts)\n    default:\n      stream.destroy(new Error('Unknown command'))\n      return false\n  }\n}\n/**\n * Controls numbers cache.\n * Set to \"false\" to allocate buffers on-the-flight instead of pre-generated cache\n */\nObject.defineProperty(generate, 'cacheNumbers', {\n  get () {\n    return writeNumber === writeNumberCached\n  },\n  set (value) {\n    if (value) {\n      if (!numCache || Object.keys(numCache).length === 0) toGenerate = true\n      writeNumber = writeNumberCached\n    } else {\n      toGenerate = false\n      writeNumber = writeNumberGenerated\n    }\n  }\n})\n\nfunction uncork (stream) {\n  stream.uncork()\n}\n\nfunction connect (packet, stream, opts) {\n  const settings = packet || {}\n  const protocolId = settings.protocolId || 'MQTT'\n  let protocolVersion = settings.protocolVersion || 4\n  const will = settings.will\n  let clean = settings.clean\n  const keepalive = settings.keepalive || 0\n  const clientId = settings.clientId || ''\n  const username = settings.username\n  const password = settings.password\n  /* mqtt5 new oprions */\n  const properties = settings.properties\n\n  if (clean === undefined) clean = true\n\n  let length = 0\n\n  // Must be a string and non-falsy\n  if (!protocolId ||\n     (typeof protocolId !== 'string' && !Buffer.isBuffer(protocolId))) {\n    stream.destroy(new Error('Invalid protocolId'))\n    return false\n  } else length += protocolId.length + 2\n\n  // Must be 3 or 4 or 5\n  if (protocolVersion !== 3 && protocolVersion !== 4 && protocolVersion !== 5) {\n    stream.destroy(new Error('Invalid protocol version'))\n    return false\n  } else length += 1\n\n  // ClientId might be omitted in 3.1.1 and 5, but only if cleanSession is set to 1\n  if ((typeof clientId === 'string' || Buffer.isBuffer(clientId)) &&\n     (clientId || protocolVersion >= 4) && (clientId || clean)) {\n    length += Buffer.byteLength(clientId) + 2\n  } else {\n    if (protocolVersion < 4) {\n      stream.destroy(new Error('clientId must be supplied before 3.1.1'))\n      return false\n    }\n    if ((clean * 1) === 0) {\n      stream.destroy(new Error('clientId must be given if cleanSession set to 0'))\n      return false\n    }\n  }\n\n  // Must be a two byte number\n  if (typeof keepalive !== 'number' ||\n      keepalive < 0 ||\n      keepalive > 65535 ||\n      keepalive % 1 !== 0) {\n    stream.destroy(new Error('Invalid keepalive'))\n    return false\n  } else length += 2\n\n  // Connect flags\n  length += 1\n\n  let propertiesData\n  let willProperties\n\n  // Properties\n  if (protocolVersion === 5) {\n    propertiesData = getProperties(stream, properties)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  // If will exists...\n  if (will) {\n    // It must be an object\n    if (typeof will !== 'object') {\n      stream.destroy(new Error('Invalid will'))\n      return false\n    }\n    // It must have topic typeof string\n    if (!will.topic || typeof will.topic !== 'string') {\n      stream.destroy(new Error('Invalid will topic'))\n      return false\n    } else {\n      length += Buffer.byteLength(will.topic) + 2\n    }\n\n    // Payload\n    length += 2 // payload length\n    if (will.payload) {\n      if (will.payload.length >= 0) {\n        if (typeof will.payload === 'string') {\n          length += Buffer.byteLength(will.payload)\n        } else {\n          length += will.payload.length\n        }\n      } else {\n        stream.destroy(new Error('Invalid will payload'))\n        return false\n      }\n    }\n    // will properties\n    willProperties = {}\n    if (protocolVersion === 5) {\n      willProperties = getProperties(stream, will.properties)\n      if (!willProperties) { return false }\n      length += willProperties.length\n    }\n  }\n\n  // Username\n  let providedUsername = false\n  if (username != null) {\n    if (isStringOrBuffer(username)) {\n      providedUsername = true\n      length += Buffer.byteLength(username) + 2\n    } else {\n      stream.destroy(new Error('Invalid username'))\n      return false\n    }\n  }\n\n  // Password\n  if (password != null) {\n    if (!providedUsername) {\n      stream.destroy(new Error('Username is required to use password'))\n      return false\n    }\n\n    if (isStringOrBuffer(password)) {\n      length += byteLength(password) + 2\n    } else {\n      stream.destroy(new Error('Invalid password'))\n      return false\n    }\n  }\n\n  // Generate header\n  stream.write(protocol.CONNECT_HEADER)\n\n  // Generate length\n  writeVarByteInt(stream, length)\n\n  // Generate protocol ID\n  writeStringOrBuffer(stream, protocolId)\n\n  if (settings.bridgeMode) {\n    protocolVersion += 128\n  }\n\n  stream.write(\n    protocolVersion === 131\n      ? protocol.VERSION131\n      : protocolVersion === 132\n        ? protocol.VERSION132\n        : protocolVersion === 4\n          ? protocol.VERSION4\n          : protocolVersion === 5\n            ? protocol.VERSION5\n            : protocol.VERSION3\n  )\n\n  // Connect flags\n  let flags = 0\n  flags |= (username != null) ? protocol.USERNAME_MASK : 0\n  flags |= (password != null) ? protocol.PASSWORD_MASK : 0\n  flags |= (will && will.retain) ? protocol.WILL_RETAIN_MASK : 0\n  flags |= (will && will.qos) ? will.qos << protocol.WILL_QOS_SHIFT : 0\n  flags |= will ? protocol.WILL_FLAG_MASK : 0\n  flags |= clean ? protocol.CLEAN_SESSION_MASK : 0\n\n  stream.write(Buffer.from([flags]))\n\n  // Keepalive\n  writeNumber(stream, keepalive)\n\n  // Properties\n  if (protocolVersion === 5) {\n    propertiesData.write()\n  }\n\n  // Client ID\n  writeStringOrBuffer(stream, clientId)\n\n  // Will\n  if (will) {\n    if (protocolVersion === 5) {\n      willProperties.write()\n    }\n    writeString(stream, will.topic)\n    writeStringOrBuffer(stream, will.payload)\n  }\n\n  // Username and password\n  if (username != null) {\n    writeStringOrBuffer(stream, username)\n  }\n  if (password != null) {\n    writeStringOrBuffer(stream, password)\n  }\n  // This is a small packet that happens only once on a stream\n  // We assume the stream is always free to receive more data after this\n  return true\n}\n\nfunction connack (packet, stream, opts) {\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const rc = version === 5 ? settings.reasonCode : settings.returnCode\n  const properties = settings.properties\n  let length = 2 // length of rc and sessionHeader\n\n  // Check return code\n  if (typeof rc !== 'number') {\n    stream.destroy(new Error('Invalid return code'))\n    return false\n  }\n  // mqtt5 properties\n  let propertiesData = null\n  if (version === 5) {\n    propertiesData = getProperties(stream, properties)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  stream.write(protocol.CONNACK_HEADER)\n  // length\n  writeVarByteInt(stream, length)\n  stream.write(settings.sessionPresent ? protocol.SESSIONPRESENT_HEADER : zeroBuf)\n\n  stream.write(Buffer.from([rc]))\n  if (propertiesData != null) {\n    propertiesData.write()\n  }\n  return true\n}\n\nfunction publish (packet, stream, opts) {\n  debug('publish: packet: %o', packet)\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const qos = settings.qos || 0\n  const retain = settings.retain ? protocol.RETAIN_MASK : 0\n  const topic = settings.topic\n  const payload = settings.payload || empty\n  const id = settings.messageId\n  const properties = settings.properties\n\n  let length = 0\n\n  // Topic must be a non-empty string or Buffer\n  if (typeof topic === 'string') length += Buffer.byteLength(topic) + 2\n  else if (Buffer.isBuffer(topic)) length += topic.length + 2\n  else {\n    stream.destroy(new Error('Invalid topic'))\n    return false\n  }\n\n  // Get the payload length\n  if (!Buffer.isBuffer(payload)) length += Buffer.byteLength(payload)\n  else length += payload.length\n\n  // Message ID must a number if qos > 0\n  if (qos && typeof id !== 'number') {\n    stream.destroy(new Error('Invalid messageId'))\n    return false\n  } else if (qos) length += 2\n\n  // mqtt5 properties\n  let propertiesData = null\n  if (version === 5) {\n    propertiesData = getProperties(stream, properties)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  // Header\n  stream.write(protocol.PUBLISH_HEADER[qos][settings.dup ? 1 : 0][retain ? 1 : 0])\n\n  // Remaining length\n  writeVarByteInt(stream, length)\n\n  // Topic\n  writeNumber(stream, byteLength(topic))\n  stream.write(topic)\n\n  // Message ID\n  if (qos > 0) writeNumber(stream, id)\n\n  // Properties\n  if (propertiesData != null) {\n    propertiesData.write()\n  }\n\n  // Payload\n  debug('publish: payload: %o', payload)\n  return stream.write(payload)\n}\n\n/* Puback, pubrec, pubrel and pubcomp */\nfunction confirmation (packet, stream, opts) {\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const type = settings.cmd || 'puback'\n  const id = settings.messageId\n  const dup = (settings.dup && type === 'pubrel') ? protocol.DUP_MASK : 0\n  let qos = 0\n  const reasonCode = settings.reasonCode\n  const properties = settings.properties\n  let length = version === 5 ? 3 : 2\n\n  if (type === 'pubrel') qos = 1\n\n  // Check message ID\n  if (typeof id !== 'number') {\n    stream.destroy(new Error('Invalid messageId'))\n    return false\n  }\n\n  // properies mqtt 5\n  let propertiesData = null\n  if (version === 5) {\n    // Confirm should not add empty property length with no properties (rfc 3.4.2.2.1)\n    if (typeof properties === 'object') {\n      propertiesData = getPropertiesByMaximumPacketSize(stream, properties, opts, length)\n      if (!propertiesData) { return false }\n      length += propertiesData.length\n    }\n  }\n\n  // Header\n  stream.write(protocol.ACKS[type][qos][dup][0])\n\n  // Length === 3 is only true of version === 5 and no properties; therefore if reasonCode === 0 we are allowed to skip both bytes - but if we write the reason code we also have to write property length [MQTT-3.4.2-1].\n  if (length === 3) length += reasonCode !== 0 ? 1 : -1\n  writeVarByteInt(stream, length)\n\n  // Message ID\n  writeNumber(stream, id)\n\n  // reason code in header - but only if it couldn't be omitted - indicated by length !== 2.\n  if (version === 5 && length !== 2) {\n    stream.write(Buffer.from([reasonCode]))\n  }\n\n  // properties mqtt 5\n  if (propertiesData !== null) {\n    propertiesData.write()\n  } else {\n    if (length === 4) {\n      // we have no properties but have written a reason code - so we need to indicate empty properties by filling in a zero.\n      stream.write(Buffer.from([0]))\n    }\n  }\n  return true\n}\n\nfunction subscribe (packet, stream, opts) {\n  debug('subscribe: packet: ')\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const dup = settings.dup ? protocol.DUP_MASK : 0\n  const id = settings.messageId\n  const subs = settings.subscriptions\n  const properties = settings.properties\n\n  let length = 0\n\n  // Check message ID\n  if (typeof id !== 'number') {\n    stream.destroy(new Error('Invalid messageId'))\n    return false\n  } else length += 2\n\n  // properies mqtt 5\n  let propertiesData = null\n  if (version === 5) {\n    propertiesData = getProperties(stream, properties)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  // Check subscriptions\n  if (typeof subs === 'object' && subs.length) {\n    for (let i = 0; i < subs.length; i += 1) {\n      const itopic = subs[i].topic\n      const iqos = subs[i].qos\n\n      if (typeof itopic !== 'string') {\n        stream.destroy(new Error('Invalid subscriptions - invalid topic'))\n        return false\n      }\n      if (typeof iqos !== 'number') {\n        stream.destroy(new Error('Invalid subscriptions - invalid qos'))\n        return false\n      }\n\n      if (version === 5) {\n        const nl = subs[i].nl || false\n        if (typeof nl !== 'boolean') {\n          stream.destroy(new Error('Invalid subscriptions - invalid No Local'))\n          return false\n        }\n        const rap = subs[i].rap || false\n        if (typeof rap !== 'boolean') {\n          stream.destroy(new Error('Invalid subscriptions - invalid Retain as Published'))\n          return false\n        }\n        const rh = subs[i].rh || 0\n        if (typeof rh !== 'number' || rh > 2) {\n          stream.destroy(new Error('Invalid subscriptions - invalid Retain Handling'))\n          return false\n        }\n      }\n\n      length += Buffer.byteLength(itopic) + 2 + 1\n    }\n  } else {\n    stream.destroy(new Error('Invalid subscriptions'))\n    return false\n  }\n\n  // Generate header\n  debug('subscribe: writing to stream: %o', protocol.SUBSCRIBE_HEADER)\n  stream.write(protocol.SUBSCRIBE_HEADER[1][dup ? 1 : 0][0])\n\n  // Generate length\n  writeVarByteInt(stream, length)\n\n  // Generate message ID\n  writeNumber(stream, id)\n\n  // properies mqtt 5\n  if (propertiesData !== null) {\n    propertiesData.write()\n  }\n\n  let result = true\n\n  // Generate subs\n  for (const sub of subs) {\n    const jtopic = sub.topic\n    const jqos = sub.qos\n    const jnl = +sub.nl\n    const jrap = +sub.rap\n    const jrh = sub.rh\n    let joptions\n\n    // Write topic string\n    writeString(stream, jtopic)\n\n    // options process\n    joptions = protocol.SUBSCRIBE_OPTIONS_QOS[jqos]\n    if (version === 5) {\n      joptions |= jnl ? protocol.SUBSCRIBE_OPTIONS_NL : 0\n      joptions |= jrap ? protocol.SUBSCRIBE_OPTIONS_RAP : 0\n      joptions |= jrh ? protocol.SUBSCRIBE_OPTIONS_RH[jrh] : 0\n    }\n    // Write options\n    result = stream.write(Buffer.from([joptions]))\n  }\n\n  return result\n}\n\nfunction suback (packet, stream, opts) {\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const id = settings.messageId\n  const granted = settings.granted\n  const properties = settings.properties\n  let length = 0\n\n  // Check message ID\n  if (typeof id !== 'number') {\n    stream.destroy(new Error('Invalid messageId'))\n    return false\n  } else length += 2\n\n  // Check granted qos vector\n  if (typeof granted === 'object' && granted.length) {\n    for (let i = 0; i < granted.length; i += 1) {\n      if (typeof granted[i] !== 'number') {\n        stream.destroy(new Error('Invalid qos vector'))\n        return false\n      }\n      length += 1\n    }\n  } else {\n    stream.destroy(new Error('Invalid qos vector'))\n    return false\n  }\n\n  // properies mqtt 5\n  let propertiesData = null\n  if (version === 5) {\n    propertiesData = getPropertiesByMaximumPacketSize(stream, properties, opts, length)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  // header\n  stream.write(protocol.SUBACK_HEADER)\n\n  // Length\n  writeVarByteInt(stream, length)\n\n  // Message ID\n  writeNumber(stream, id)\n\n  // properies mqtt 5\n  if (propertiesData !== null) {\n    propertiesData.write()\n  }\n\n  return stream.write(Buffer.from(granted))\n}\n\nfunction unsubscribe (packet, stream, opts) {\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const id = settings.messageId\n  const dup = settings.dup ? protocol.DUP_MASK : 0\n  const unsubs = settings.unsubscriptions\n  const properties = settings.properties\n\n  let length = 0\n\n  // Check message ID\n  if (typeof id !== 'number') {\n    stream.destroy(new Error('Invalid messageId'))\n    return false\n  } else {\n    length += 2\n  }\n  // Check unsubs\n  if (typeof unsubs === 'object' && unsubs.length) {\n    for (let i = 0; i < unsubs.length; i += 1) {\n      if (typeof unsubs[i] !== 'string') {\n        stream.destroy(new Error('Invalid unsubscriptions'))\n        return false\n      }\n      length += Buffer.byteLength(unsubs[i]) + 2\n    }\n  } else {\n    stream.destroy(new Error('Invalid unsubscriptions'))\n    return false\n  }\n  // properies mqtt 5\n  let propertiesData = null\n  if (version === 5) {\n    propertiesData = getProperties(stream, properties)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  // Header\n  stream.write(protocol.UNSUBSCRIBE_HEADER[1][dup ? 1 : 0][0])\n\n  // Length\n  writeVarByteInt(stream, length)\n\n  // Message ID\n  writeNumber(stream, id)\n\n  // properies mqtt 5\n  if (propertiesData !== null) {\n    propertiesData.write()\n  }\n\n  // Unsubs\n  let result = true\n  for (let j = 0; j < unsubs.length; j++) {\n    result = writeString(stream, unsubs[j])\n  }\n\n  return result\n}\n\nfunction unsuback (packet, stream, opts) {\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const id = settings.messageId\n  const dup = settings.dup ? protocol.DUP_MASK : 0\n  const granted = settings.granted\n  const properties = settings.properties\n  const type = settings.cmd\n  const qos = 0\n\n  let length = 2\n\n  // Check message ID\n  if (typeof id !== 'number') {\n    stream.destroy(new Error('Invalid messageId'))\n    return false\n  }\n\n  // Check granted\n  if (version === 5) {\n    if (typeof granted === 'object' && granted.length) {\n      for (let i = 0; i < granted.length; i += 1) {\n        if (typeof granted[i] !== 'number') {\n          stream.destroy(new Error('Invalid qos vector'))\n          return false\n        }\n        length += 1\n      }\n    } else {\n      stream.destroy(new Error('Invalid qos vector'))\n      return false\n    }\n  }\n\n  // properies mqtt 5\n  let propertiesData = null\n  if (version === 5) {\n    propertiesData = getPropertiesByMaximumPacketSize(stream, properties, opts, length)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  // Header\n  stream.write(protocol.ACKS[type][qos][dup][0])\n\n  // Length\n  writeVarByteInt(stream, length)\n\n  // Message ID\n  writeNumber(stream, id)\n\n  // properies mqtt 5\n  if (propertiesData !== null) {\n    propertiesData.write()\n  }\n\n  // payload\n  if (version === 5) {\n    stream.write(Buffer.from(granted))\n  }\n  return true\n}\n\nfunction emptyPacket (packet, stream, opts) {\n  return stream.write(protocol.EMPTY[packet.cmd])\n}\n\nfunction disconnect (packet, stream, opts) {\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const reasonCode = settings.reasonCode\n  const properties = settings.properties\n  let length = version === 5 ? 1 : 0\n\n  // properies mqtt 5\n  let propertiesData = null\n  if (version === 5) {\n    propertiesData = getPropertiesByMaximumPacketSize(stream, properties, opts, length)\n    if (!propertiesData) { return false }\n    length += propertiesData.length\n  }\n\n  // Header\n  stream.write(Buffer.from([protocol.codes.disconnect << 4]))\n\n  // Length\n  writeVarByteInt(stream, length)\n\n  // reason code in header\n  if (version === 5) {\n    stream.write(Buffer.from([reasonCode]))\n  }\n\n  // properies mqtt 5\n  if (propertiesData !== null) {\n    propertiesData.write()\n  }\n\n  return true\n}\n\nfunction auth (packet, stream, opts) {\n  const version = opts ? opts.protocolVersion : 4\n  const settings = packet || {}\n  const reasonCode = settings.reasonCode\n  const properties = settings.properties\n  let length = version === 5 ? 1 : 0\n\n  if (version !== 5) stream.destroy(new Error('Invalid mqtt version for auth packet'))\n\n  // properies mqtt 5\n  const propertiesData = getPropertiesByMaximumPacketSize(stream, properties, opts, length)\n  if (!propertiesData) { return false }\n  length += propertiesData.length\n\n  // Header\n  stream.write(Buffer.from([protocol.codes.auth << 4]))\n\n  // Length\n  writeVarByteInt(stream, length)\n\n  // reason code in header\n  stream.write(Buffer.from([reasonCode]))\n\n  // properies mqtt 5\n  if (propertiesData !== null) {\n    propertiesData.write()\n  }\n  return true\n}\n\n/**\n * writeVarByteInt - write an MQTT style variable byte integer to the buffer\n *\n * @param <Buffer> buffer - destination\n * @param <Number> pos - offset\n * @param <Number> length - length (>0)\n * @returns <Number> number of bytes written\n *\n * @api private\n */\n\nconst varByteIntCache = {}\nfunction writeVarByteInt (stream, num) {\n  if (num > protocol.VARBYTEINT_MAX) {\n    stream.destroy(new Error(`Invalid variable byte integer: ${num}`))\n    return false\n  }\n\n  let buffer = varByteIntCache[num]\n\n  if (!buffer) {\n    buffer = genBufVariableByteInt(num)\n    if (num < 16384) varByteIntCache[num] = buffer\n  }\n  debug('writeVarByteInt: writing to stream: %o', buffer)\n  return stream.write(buffer)\n}\n\n/**\n * writeString - write a utf8 string to the buffer\n *\n * @param <Buffer> buffer - destination\n * @param <Number> pos - offset\n * @param <String> string - string to write\n * @return <Number> number of bytes written\n *\n * @api private\n */\n\nfunction writeString (stream, string) {\n  const strlen = Buffer.byteLength(string)\n  writeNumber(stream, strlen)\n\n  debug('writeString: %s', string)\n  return stream.write(string, 'utf8')\n}\n\n/**\n * writeStringPair - write a utf8 string pairs to the buffer\n *\n * @param <Buffer> buffer - destination\n * @param <String> name - string name to write\n * @param <String> value - string value to write\n * @return <Number> number of bytes written\n *\n * @api private\n */\nfunction writeStringPair (stream, name, value) {\n  writeString(stream, name)\n  writeString(stream, value)\n}\n\n/**\n * writeNumber - write a two byte number to the buffer\n *\n * @param <Buffer> buffer - destination\n * @param <Number> pos - offset\n * @param <String> number - number to write\n * @return <Number> number of bytes written\n *\n * @api private\n */\nfunction writeNumberCached (stream, number) {\n  debug('writeNumberCached: number: %d', number)\n  debug('writeNumberCached: %o', numCache[number])\n  return stream.write(numCache[number])\n}\nfunction writeNumberGenerated (stream, number) {\n  const generatedNumber = generateNumber(number)\n  debug('writeNumberGenerated: %o', generatedNumber)\n  return stream.write(generatedNumber)\n}\nfunction write4ByteNumber (stream, number) {\n  const generated4ByteBuffer = generate4ByteBuffer(number)\n  debug('write4ByteNumber: %o', generated4ByteBuffer)\n  return stream.write(generated4ByteBuffer)\n}\n/**\n * writeStringOrBuffer - write a String or Buffer with the its length prefix\n *\n * @param <Buffer> buffer - destination\n * @param <Number> pos - offset\n * @param <String> toWrite - String or Buffer\n * @return <Number> number of bytes written\n */\nfunction writeStringOrBuffer (stream, toWrite) {\n  if (typeof toWrite === 'string') {\n    writeString(stream, toWrite)\n  } else if (toWrite) {\n    writeNumber(stream, toWrite.length)\n    stream.write(toWrite)\n  } else writeNumber(stream, 0)\n}\n\nfunction getProperties (stream, properties) {\n  /* connect properties */\n  if (typeof properties !== 'object' || properties.length != null) {\n    return {\n      length: 1,\n      write () {\n        writeProperties(stream, {}, 0)\n      }\n    }\n  }\n  let propertiesLength = 0\n  function getLengthProperty (name, value) {\n    const type = protocol.propertiesTypes[name]\n    let length = 0\n    switch (type) {\n      case 'byte': {\n        if (typeof value !== 'boolean') {\n          stream.destroy(new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += 1 + 1\n        break\n      }\n      case 'int8': {\n        if (typeof value !== 'number' || value < 0 || value > 0xff) {\n          stream.destroy(new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += 1 + 1\n        break\n      }\n      case 'binary': {\n        if (value && value === null) {\n          stream.destroy(new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += 1 + Buffer.byteLength(value) + 2\n        break\n      }\n      case 'int16': {\n        if (typeof value !== 'number' || value < 0 || value > 0xffff) {\n          stream.destroy(new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += 1 + 2\n        break\n      }\n      case 'int32': {\n        if (typeof value !== 'number' || value < 0 || value > 0xffffffff) {\n          stream.destroy(new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += 1 + 4\n        break\n      }\n      case 'var': {\n        // var byte integer is max 24 bits packed in 32 bits\n        if (typeof value !== 'number' || value < 0 || value > 0x0fffffff) {\n          stream.destroy(new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += 1 + Buffer.byteLength(genBufVariableByteInt(value))\n        break\n      }\n      case 'string': {\n        if (typeof value !== 'string') {\n          stream.destroy(new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += 1 + 2 + Buffer.byteLength(value.toString())\n        break\n      }\n      case 'pair': {\n        if (typeof value !== 'object') {\n          stream.destroy(new Error(`Invalid ${name}: ${value}`))\n          return false\n        }\n        length += Object.getOwnPropertyNames(value).reduce((result, name) => {\n          const currentValue = value[name]\n          if (Array.isArray(currentValue)) {\n            result += currentValue.reduce((currentLength, value) => {\n              currentLength += 1 + 2 + Buffer.byteLength(name.toString()) + 2 + Buffer.byteLength(value.toString())\n              return currentLength\n            }, 0)\n          } else {\n            result += 1 + 2 + Buffer.byteLength(name.toString()) + 2 + Buffer.byteLength(value[name].toString())\n          }\n          return result\n        }, 0)\n        break\n      }\n      default: {\n        stream.destroy(new Error(`Invalid property ${name}: ${value}`))\n        return false\n      }\n    }\n    return length\n  }\n  if (properties) {\n    for (const propName in properties) {\n      let propLength = 0\n      let propValueLength = 0\n      const propValue = properties[propName]\n      if (Array.isArray(propValue)) {\n        for (let valueIndex = 0; valueIndex < propValue.length; valueIndex++) {\n          propValueLength = getLengthProperty(propName, propValue[valueIndex])\n          if (!propValueLength) { return false }\n          propLength += propValueLength\n        }\n      } else {\n        propValueLength = getLengthProperty(propName, propValue)\n        if (!propValueLength) { return false }\n        propLength = propValueLength\n      }\n      if (!propLength) return false\n      propertiesLength += propLength\n    }\n  }\n  const propertiesLengthLength = Buffer.byteLength(genBufVariableByteInt(propertiesLength))\n\n  return {\n    length: propertiesLengthLength + propertiesLength,\n    write () {\n      writeProperties(stream, properties, propertiesLength)\n    }\n  }\n}\n\nfunction getPropertiesByMaximumPacketSize (stream, properties, opts, length) {\n  const mayEmptyProps = ['reasonString', 'userProperties']\n  const maximumPacketSize = opts && opts.properties && opts.properties.maximumPacketSize ? opts.properties.maximumPacketSize : 0\n\n  let propertiesData = getProperties(stream, properties)\n  if (maximumPacketSize) {\n    while (length + propertiesData.length > maximumPacketSize) {\n      const currentMayEmptyProp = mayEmptyProps.shift()\n      if (currentMayEmptyProp && properties[currentMayEmptyProp]) {\n        delete properties[currentMayEmptyProp]\n        propertiesData = getProperties(stream, properties)\n      } else {\n        return false\n      }\n    }\n  }\n  return propertiesData\n}\n\nfunction writeProperty (stream, propName, value) {\n  const type = protocol.propertiesTypes[propName]\n  switch (type) {\n    case 'byte': {\n      stream.write(Buffer.from([protocol.properties[propName]]))\n      stream.write(Buffer.from([+value]))\n      break\n    }\n    case 'int8': {\n      stream.write(Buffer.from([protocol.properties[propName]]))\n      stream.write(Buffer.from([value]))\n      break\n    }\n    case 'binary': {\n      stream.write(Buffer.from([protocol.properties[propName]]))\n      writeStringOrBuffer(stream, value)\n      break\n    }\n    case 'int16': {\n      stream.write(Buffer.from([protocol.properties[propName]]))\n      writeNumber(stream, value)\n      break\n    }\n    case 'int32': {\n      stream.write(Buffer.from([protocol.properties[propName]]))\n      write4ByteNumber(stream, value)\n      break\n    }\n    case 'var': {\n      stream.write(Buffer.from([protocol.properties[propName]]))\n      writeVarByteInt(stream, value)\n      break\n    }\n    case 'string': {\n      stream.write(Buffer.from([protocol.properties[propName]]))\n      writeString(stream, value)\n      break\n    }\n    case 'pair': {\n      Object.getOwnPropertyNames(value).forEach(name => {\n        const currentValue = value[name]\n        if (Array.isArray(currentValue)) {\n          currentValue.forEach(value => {\n            stream.write(Buffer.from([protocol.properties[propName]]))\n            writeStringPair(stream, name.toString(), value.toString())\n          })\n        } else {\n          stream.write(Buffer.from([protocol.properties[propName]]))\n          writeStringPair(stream, name.toString(), currentValue.toString())\n        }\n      })\n      break\n    }\n    default: {\n      stream.destroy(new Error(`Invalid property ${propName} value: ${value}`))\n      return false\n    }\n  }\n}\n\nfunction writeProperties (stream, properties, propertiesLength) {\n  /* write properties to stream */\n  writeVarByteInt(stream, propertiesLength)\n  for (const propName in properties) {\n    if (Object.prototype.hasOwnProperty.call(properties, propName) && properties[propName] !== null) {\n      const value = properties[propName]\n      if (Array.isArray(value)) {\n        for (let valueIndex = 0; valueIndex < value.length; valueIndex++) {\n          writeProperty(stream, propName, value[valueIndex])\n        }\n      } else {\n        writeProperty(stream, propName, value)\n      }\n    }\n  }\n}\n\nfunction byteLength (bufOrString) {\n  if (!bufOrString) return 0\n  else if (bufOrString instanceof Buffer) return bufOrString.length\n  else return Buffer.byteLength(bufOrString)\n}\n\nfunction isStringOrBuffer (field) {\n  return typeof field === 'string' || field instanceof Buffer\n}\n\nmodule.exports = generate\n","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst mqtt = __importStar(require(\"./mqtt\"));\nexports.default = mqtt;\n__exportStar(require(\"./mqtt\"), exports);\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BufferedDuplex = exports.writev = void 0;\nconst readable_stream_1 = require(\"readable-stream\");\nconst buffer_1 = require(\"buffer\");\nfunction writev(chunks, cb) {\n    const buffers = new Array(chunks.length);\n    for (let i = 0; i < chunks.length; i++) {\n        if (typeof chunks[i].chunk === 'string') {\n            buffers[i] = buffer_1.Buffer.from(chunks[i].chunk, 'utf8');\n        }\n        else {\n            buffers[i] = chunks[i].chunk;\n        }\n    }\n    this._write(buffer_1.Buffer.concat(buffers), 'binary', cb);\n}\nexports.writev = writev;\nclass BufferedDuplex extends readable_stream_1.Duplex {\n    constructor(opts, proxy, socket) {\n        super({\n            objectMode: true,\n        });\n        this.proxy = proxy;\n        this.socket = socket;\n        this.writeQueue = [];\n        if (!opts.objectMode) {\n            this._writev = writev.bind(this);\n        }\n        this.isSocketOpen = false;\n        this.proxy.on('data', (chunk) => {\n            if (!this.destroyed) {\n                this.push(chunk);\n            }\n        });\n    }\n    _read(size) {\n        this.proxy.read(size);\n    }\n    _write(chunk, encoding, cb) {\n        if (!this.isSocketOpen) {\n            this.writeQueue.push({ chunk, encoding, cb });\n        }\n        else {\n            this.writeToProxy(chunk, encoding, cb);\n        }\n    }\n    _final(callback) {\n        this.writeQueue = [];\n        this.proxy.end(callback);\n    }\n    _destroy(err, callback) {\n        this.writeQueue = [];\n        this.proxy.destroy();\n        callback(err);\n    }\n    socketReady() {\n        this.emit('connect');\n        this.isSocketOpen = true;\n        this.processWriteQueue();\n    }\n    writeToProxy(chunk, encoding, cb) {\n        if (this.proxy.write(chunk, encoding) === false) {\n            this.proxy.once('drain', cb);\n        }\n        else {\n            cb();\n        }\n    }\n    processWriteQueue() {\n        while (this.writeQueue.length > 0) {\n            const { chunk, encoding, cb } = this.writeQueue.shift();\n            this.writeToProxy(chunk, encoding, cb);\n        }\n    }\n}\nexports.BufferedDuplex = BufferedDuplex;\n//# sourceMappingURL=BufferedDuplex.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst get_timer_1 = __importDefault(require(\"./get-timer\"));\nclass KeepaliveManager {\n    get keepaliveTimeoutTimestamp() {\n        return this._keepaliveTimeoutTimestamp;\n    }\n    get intervalEvery() {\n        return this._intervalEvery;\n    }\n    get keepalive() {\n        return this._keepalive;\n    }\n    constructor(client, variant) {\n        this.destroyed = false;\n        this.client = client;\n        this.timer =\n            typeof variant === 'object' &&\n                'set' in variant &&\n                'clear' in variant\n                ? variant\n                : (0, get_timer_1.default)(variant);\n        this.setKeepalive(client.options.keepalive);\n    }\n    clear() {\n        if (this.timerId) {\n            this.timer.clear(this.timerId);\n            this.timerId = null;\n        }\n    }\n    setKeepalive(value) {\n        value *= 1000;\n        if (isNaN(value) ||\n            value <= 0 ||\n            value > 2147483647) {\n            throw new Error(`Keepalive value must be an integer between 0 and 2147483647. Provided value is ${value}`);\n        }\n        this._keepalive = value;\n        this.reschedule();\n        this.client['log'](`KeepaliveManager: set keepalive to ${value}ms`);\n    }\n    destroy() {\n        this.clear();\n        this.destroyed = true;\n    }\n    reschedule() {\n        if (this.destroyed) {\n            return;\n        }\n        this.clear();\n        this.counter = 0;\n        const keepAliveTimeout = Math.ceil(this._keepalive * 1.5);\n        this._keepaliveTimeoutTimestamp = Date.now() + keepAliveTimeout;\n        this._intervalEvery = Math.ceil(this._keepalive / 2);\n        this.timerId = this.timer.set(() => {\n            if (this.destroyed) {\n                return;\n            }\n            this.counter += 1;\n            if (this.counter === 2) {\n                this.client.sendPing();\n            }\n            else if (this.counter > 2) {\n                this.client.onKeepaliveTimeout();\n            }\n        }, this._intervalEvery);\n    }\n}\nexports.default = KeepaliveManager;\n//# sourceMappingURL=KeepaliveManager.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypedEventEmitter = void 0;\nconst events_1 = __importDefault(require(\"events\"));\nconst shared_1 = require(\"./shared\");\nclass TypedEventEmitter {\n}\nexports.TypedEventEmitter = TypedEventEmitter;\n(0, shared_1.applyMixin)(TypedEventEmitter, events_1.default);\n//# sourceMappingURL=TypedEmitter.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst topic_alias_recv_1 = __importDefault(require(\"./topic-alias-recv\"));\nconst mqtt_packet_1 = __importDefault(require(\"mqtt-packet\"));\nconst default_message_id_provider_1 = __importDefault(require(\"./default-message-id-provider\"));\nconst readable_stream_1 = require(\"readable-stream\");\nconst default_1 = __importDefault(require(\"rfdc/default\"));\nconst validations = __importStar(require(\"./validations\"));\nconst debug_1 = __importDefault(require(\"debug\"));\nconst store_1 = __importDefault(require(\"./store\"));\nconst handlers_1 = __importDefault(require(\"./handlers\"));\nconst shared_1 = require(\"./shared\");\nconst TypedEmitter_1 = require(\"./TypedEmitter\");\nconst KeepaliveManager_1 = __importDefault(require(\"./KeepaliveManager\"));\nconst is_browser_1 = __importStar(require(\"./is-browser\"));\nconst setImmediate = globalThis.setImmediate ||\n    ((...args) => {\n        const callback = args.shift();\n        (0, shared_1.nextTick)(() => {\n            callback(...args);\n        });\n    });\nconst defaultConnectOptions = {\n    keepalive: 60,\n    reschedulePings: true,\n    protocolId: 'MQTT',\n    protocolVersion: 4,\n    reconnectPeriod: 1000,\n    connectTimeout: 30 * 1000,\n    clean: true,\n    resubscribe: true,\n    writeCache: true,\n    timerVariant: 'auto',\n};\nclass MqttClient extends TypedEmitter_1.TypedEventEmitter {\n    static defaultId() {\n        return `mqttjs_${Math.random().toString(16).substr(2, 8)}`;\n    }\n    constructor(streamBuilder, options) {\n        super();\n        this.options = options || {};\n        for (const k in defaultConnectOptions) {\n            if (typeof this.options[k] === 'undefined') {\n                this.options[k] = defaultConnectOptions[k];\n            }\n            else {\n                this.options[k] = options[k];\n            }\n        }\n        this.log = this.options.log || (0, debug_1.default)('mqttjs:client');\n        this.noop = this._noop.bind(this);\n        this.log('MqttClient :: version:', MqttClient.VERSION);\n        if (is_browser_1.isWebWorker) {\n            this.log('MqttClient :: environment', 'webworker');\n        }\n        else {\n            this.log('MqttClient :: environment', is_browser_1.default ? 'browser' : 'node');\n        }\n        this.log('MqttClient :: options.protocol', options.protocol);\n        this.log('MqttClient :: options.protocolVersion', options.protocolVersion);\n        this.log('MqttClient :: options.username', options.username);\n        this.log('MqttClient :: options.keepalive', options.keepalive);\n        this.log('MqttClient :: options.reconnectPeriod', options.reconnectPeriod);\n        this.log('MqttClient :: options.rejectUnauthorized', options.rejectUnauthorized);\n        this.log('MqttClient :: options.properties.topicAliasMaximum', options.properties\n            ? options.properties.topicAliasMaximum\n            : undefined);\n        this.options.clientId =\n            typeof options.clientId === 'string'\n                ? options.clientId\n                : MqttClient.defaultId();\n        this.log('MqttClient :: clientId', this.options.clientId);\n        this.options.customHandleAcks =\n            options.protocolVersion === 5 && options.customHandleAcks\n                ? options.customHandleAcks\n                : (...args) => {\n                    args[3](null, 0);\n                };\n        if (!this.options.writeCache) {\n            mqtt_packet_1.default.writeToStream.cacheNumbers = false;\n        }\n        this.streamBuilder = streamBuilder;\n        this.messageIdProvider =\n            typeof this.options.messageIdProvider === 'undefined'\n                ? new default_message_id_provider_1.default()\n                : this.options.messageIdProvider;\n        this.outgoingStore = options.outgoingStore || new store_1.default();\n        this.incomingStore = options.incomingStore || new store_1.default();\n        this.queueQoSZero =\n            options.queueQoSZero === undefined ? true : options.queueQoSZero;\n        this._resubscribeTopics = {};\n        this.messageIdToTopic = {};\n        this.keepaliveManager = null;\n        this.connected = false;\n        this.disconnecting = false;\n        this.reconnecting = false;\n        this.queue = [];\n        this.connackTimer = null;\n        this.reconnectTimer = null;\n        this._storeProcessing = false;\n        this._packetIdsDuringStoreProcessing = {};\n        this._storeProcessingQueue = [];\n        this.outgoing = {};\n        this._firstConnection = true;\n        if (options.properties && options.properties.topicAliasMaximum > 0) {\n            if (options.properties.topicAliasMaximum > 0xffff) {\n                this.log('MqttClient :: options.properties.topicAliasMaximum is out of range');\n            }\n            else {\n                this.topicAliasRecv = new topic_alias_recv_1.default(options.properties.topicAliasMaximum);\n            }\n        }\n        this.on('connect', () => {\n            const { queue } = this;\n            const deliver = () => {\n                const entry = queue.shift();\n                this.log('deliver :: entry %o', entry);\n                let packet = null;\n                if (!entry) {\n                    this._resubscribe();\n                    return;\n                }\n                packet = entry.packet;\n                this.log('deliver :: call _sendPacket for %o', packet);\n                let send = true;\n                if (packet.messageId && packet.messageId !== 0) {\n                    if (!this.messageIdProvider.register(packet.messageId)) {\n                        send = false;\n                    }\n                }\n                if (send) {\n                    this._sendPacket(packet, (err) => {\n                        if (entry.cb) {\n                            entry.cb(err);\n                        }\n                        deliver();\n                    });\n                }\n                else {\n                    this.log('messageId: %d has already used. The message is skipped and removed.', packet.messageId);\n                    deliver();\n                }\n            };\n            this.log('connect :: sending queued packets');\n            deliver();\n        });\n        this.on('close', () => {\n            this.log('close :: connected set to `false`');\n            this.connected = false;\n            this.log('close :: clearing connackTimer');\n            clearTimeout(this.connackTimer);\n            this._destroyKeepaliveManager();\n            if (this.topicAliasRecv) {\n                this.topicAliasRecv.clear();\n            }\n            this.log('close :: calling _setupReconnect');\n            this._setupReconnect();\n        });\n        if (!this.options.manualConnect) {\n            this.log('MqttClient :: setting up stream');\n            this.connect();\n        }\n    }\n    handleAuth(packet, callback) {\n        callback();\n    }\n    handleMessage(packet, callback) {\n        callback();\n    }\n    _nextId() {\n        return this.messageIdProvider.allocate();\n    }\n    getLastMessageId() {\n        return this.messageIdProvider.getLastAllocated();\n    }\n    connect() {\n        var _a;\n        const writable = new readable_stream_1.Writable();\n        const parser = mqtt_packet_1.default.parser(this.options);\n        let completeParse = null;\n        const packets = [];\n        this.log('connect :: calling method to clear reconnect');\n        this._clearReconnect();\n        if (this.disconnected && !this.reconnecting) {\n            this.incomingStore = this.options.incomingStore || new store_1.default();\n            this.outgoingStore = this.options.outgoingStore || new store_1.default();\n            this.disconnecting = false;\n            this.disconnected = false;\n        }\n        this.log('connect :: using streamBuilder provided to client to create stream');\n        this.stream = this.streamBuilder(this);\n        parser.on('packet', (packet) => {\n            this.log('parser :: on packet push to packets array.');\n            packets.push(packet);\n        });\n        const work = () => {\n            this.log('work :: getting next packet in queue');\n            const packet = packets.shift();\n            if (packet) {\n                this.log('work :: packet pulled from queue');\n                (0, handlers_1.default)(this, packet, nextTickWork);\n            }\n            else {\n                this.log('work :: no packets in queue');\n                const done = completeParse;\n                completeParse = null;\n                this.log('work :: done flag is %s', !!done);\n                if (done)\n                    done();\n            }\n        };\n        const nextTickWork = () => {\n            if (packets.length) {\n                (0, shared_1.nextTick)(work);\n            }\n            else {\n                const done = completeParse;\n                completeParse = null;\n                done();\n            }\n        };\n        writable._write = (buf, enc, done) => {\n            completeParse = done;\n            this.log('writable stream :: parsing buffer');\n            parser.parse(buf);\n            work();\n        };\n        const streamErrorHandler = (error) => {\n            this.log('streamErrorHandler :: error', error.message);\n            if (error.code) {\n                this.log('streamErrorHandler :: emitting error');\n                this.emit('error', error);\n            }\n            else {\n                this.noop(error);\n            }\n        };\n        this.log('connect :: pipe stream to writable stream');\n        this.stream.pipe(writable);\n        this.stream.on('error', streamErrorHandler);\n        this.stream.on('close', () => {\n            this.log('(%s)stream :: on close', this.options.clientId);\n            this._flushVolatile();\n            this.log('stream: emit close to MqttClient');\n            this.emit('close');\n        });\n        this.log('connect: sending packet `connect`');\n        const connectPacket = {\n            cmd: 'connect',\n            protocolId: this.options.protocolId,\n            protocolVersion: this.options.protocolVersion,\n            clean: this.options.clean,\n            clientId: this.options.clientId,\n            keepalive: this.options.keepalive,\n            username: this.options.username,\n            password: this.options.password,\n            properties: this.options.properties,\n        };\n        if (this.options.will) {\n            connectPacket.will = Object.assign(Object.assign({}, this.options.will), { payload: (_a = this.options.will) === null || _a === void 0 ? void 0 : _a.payload });\n        }\n        if (this.topicAliasRecv) {\n            if (!connectPacket.properties) {\n                connectPacket.properties = {};\n            }\n            if (this.topicAliasRecv) {\n                connectPacket.properties.topicAliasMaximum =\n                    this.topicAliasRecv.max;\n            }\n        }\n        this._writePacket(connectPacket);\n        parser.on('error', this.emit.bind(this, 'error'));\n        if (this.options.properties) {\n            if (!this.options.properties.authenticationMethod &&\n                this.options.properties.authenticationData) {\n                this.end(() => this.emit('error', new Error('Packet has no Authentication Method')));\n                return this;\n            }\n            if (this.options.properties.authenticationMethod &&\n                this.options.authPacket &&\n                typeof this.options.authPacket === 'object') {\n                const authPacket = Object.assign({ cmd: 'auth', reasonCode: 0 }, this.options.authPacket);\n                this._writePacket(authPacket);\n            }\n        }\n        this.stream.setMaxListeners(1000);\n        clearTimeout(this.connackTimer);\n        this.connackTimer = setTimeout(() => {\n            this.log('!!connectTimeout hit!! Calling _cleanUp with force `true`');\n            this.emit('error', new Error('connack timeout'));\n            this._cleanUp(true);\n        }, this.options.connectTimeout);\n        return this;\n    }\n    publish(topic, message, opts, callback) {\n        this.log('publish :: message `%s` to topic `%s`', message, topic);\n        const { options } = this;\n        if (typeof opts === 'function') {\n            callback = opts;\n            opts = null;\n        }\n        opts = opts || {};\n        const defaultOpts = {\n            qos: 0,\n            retain: false,\n            dup: false,\n        };\n        opts = Object.assign(Object.assign({}, defaultOpts), opts);\n        const { qos, retain, dup, properties, cbStorePut } = opts;\n        if (this._checkDisconnecting(callback)) {\n            return this;\n        }\n        const publishProc = () => {\n            let messageId = 0;\n            if (qos === 1 || qos === 2) {\n                messageId = this._nextId();\n                if (messageId === null) {\n                    this.log('No messageId left');\n                    return false;\n                }\n            }\n            const packet = {\n                cmd: 'publish',\n                topic,\n                payload: message,\n                qos,\n                retain,\n                messageId,\n                dup,\n            };\n            if (options.protocolVersion === 5) {\n                packet.properties = properties;\n            }\n            this.log('publish :: qos', qos);\n            switch (qos) {\n                case 1:\n                case 2:\n                    this.outgoing[packet.messageId] = {\n                        volatile: false,\n                        cb: callback || this.noop,\n                    };\n                    this.log('MqttClient:publish: packet cmd: %s', packet.cmd);\n                    this._sendPacket(packet, undefined, cbStorePut);\n                    break;\n                default:\n                    this.log('MqttClient:publish: packet cmd: %s', packet.cmd);\n                    this._sendPacket(packet, callback, cbStorePut);\n                    break;\n            }\n            return true;\n        };\n        if (this._storeProcessing ||\n            this._storeProcessingQueue.length > 0 ||\n            !publishProc()) {\n            this._storeProcessingQueue.push({\n                invoke: publishProc,\n                cbStorePut: opts.cbStorePut,\n                callback,\n            });\n        }\n        return this;\n    }\n    publishAsync(topic, message, opts) {\n        return new Promise((resolve, reject) => {\n            this.publish(topic, message, opts, (err, packet) => {\n                if (err) {\n                    reject(err);\n                }\n                else {\n                    resolve(packet);\n                }\n            });\n        });\n    }\n    subscribe(topicObject, opts, callback) {\n        const version = this.options.protocolVersion;\n        if (typeof opts === 'function') {\n            callback = opts;\n        }\n        callback = callback || this.noop;\n        let resubscribe = false;\n        let topicsList = [];\n        if (typeof topicObject === 'string') {\n            topicObject = [topicObject];\n            topicsList = topicObject;\n        }\n        else if (Array.isArray(topicObject)) {\n            topicsList = topicObject;\n        }\n        else if (typeof topicObject === 'object') {\n            resubscribe = topicObject.resubscribe;\n            delete topicObject.resubscribe;\n            topicsList = Object.keys(topicObject);\n        }\n        const invalidTopic = validations.validateTopics(topicsList);\n        if (invalidTopic !== null) {\n            setImmediate(callback, new Error(`Invalid topic ${invalidTopic}`));\n            return this;\n        }\n        if (this._checkDisconnecting(callback)) {\n            this.log('subscribe: discconecting true');\n            return this;\n        }\n        const defaultOpts = {\n            qos: 0,\n        };\n        if (version === 5) {\n            defaultOpts.nl = false;\n            defaultOpts.rap = false;\n            defaultOpts.rh = 0;\n        }\n        opts = Object.assign(Object.assign({}, defaultOpts), opts);\n        const properties = opts.properties;\n        const subs = [];\n        const parseSub = (topic, subOptions) => {\n            subOptions = (subOptions || opts);\n            if (!Object.prototype.hasOwnProperty.call(this._resubscribeTopics, topic) ||\n                this._resubscribeTopics[topic].qos < subOptions.qos ||\n                resubscribe) {\n                const currentOpts = {\n                    topic,\n                    qos: subOptions.qos,\n                };\n                if (version === 5) {\n                    currentOpts.nl = subOptions.nl;\n                    currentOpts.rap = subOptions.rap;\n                    currentOpts.rh = subOptions.rh;\n                    currentOpts.properties = properties;\n                }\n                this.log('subscribe: pushing topic `%s` and qos `%s` to subs list', currentOpts.topic, currentOpts.qos);\n                subs.push(currentOpts);\n            }\n        };\n        if (Array.isArray(topicObject)) {\n            topicObject.forEach((topic) => {\n                this.log('subscribe: array topic %s', topic);\n                parseSub(topic);\n            });\n        }\n        else {\n            Object.keys(topicObject).forEach((topic) => {\n                this.log('subscribe: object topic %s, %o', topic, topicObject[topic]);\n                parseSub(topic, topicObject[topic]);\n            });\n        }\n        if (!subs.length) {\n            callback(null, []);\n            return this;\n        }\n        const subscribeProc = () => {\n            const messageId = this._nextId();\n            if (messageId === null) {\n                this.log('No messageId left');\n                return false;\n            }\n            const packet = {\n                cmd: 'subscribe',\n                subscriptions: subs,\n                messageId,\n            };\n            if (properties) {\n                packet.properties = properties;\n            }\n            if (this.options.resubscribe) {\n                this.log('subscribe :: resubscribe true');\n                const topics = [];\n                subs.forEach((sub) => {\n                    if (this.options.reconnectPeriod > 0) {\n                        const topic = { qos: sub.qos };\n                        if (version === 5) {\n                            topic.nl = sub.nl || false;\n                            topic.rap = sub.rap || false;\n                            topic.rh = sub.rh || 0;\n                            topic.properties = sub.properties;\n                        }\n                        this._resubscribeTopics[sub.topic] = topic;\n                        topics.push(sub.topic);\n                    }\n                });\n                this.messageIdToTopic[packet.messageId] = topics;\n            }\n            this.outgoing[packet.messageId] = {\n                volatile: true,\n                cb(err, packet2) {\n                    if (!err) {\n                        const { granted } = packet2;\n                        for (let i = 0; i < granted.length; i += 1) {\n                            subs[i].qos = granted[i];\n                        }\n                    }\n                    callback(err, subs, packet2);\n                },\n            };\n            this.log('subscribe :: call _sendPacket');\n            this._sendPacket(packet);\n            return true;\n        };\n        if (this._storeProcessing ||\n            this._storeProcessingQueue.length > 0 ||\n            !subscribeProc()) {\n            this._storeProcessingQueue.push({\n                invoke: subscribeProc,\n                callback,\n            });\n        }\n        return this;\n    }\n    subscribeAsync(topicObject, opts) {\n        return new Promise((resolve, reject) => {\n            this.subscribe(topicObject, opts, (err, granted) => {\n                if (err) {\n                    reject(err);\n                }\n                else {\n                    resolve(granted);\n                }\n            });\n        });\n    }\n    unsubscribe(topic, opts, callback) {\n        if (typeof topic === 'string') {\n            topic = [topic];\n        }\n        if (typeof opts === 'function') {\n            callback = opts;\n        }\n        callback = callback || this.noop;\n        const invalidTopic = validations.validateTopics(topic);\n        if (invalidTopic !== null) {\n            setImmediate(callback, new Error(`Invalid topic ${invalidTopic}`));\n            return this;\n        }\n        if (this._checkDisconnecting(callback)) {\n            return this;\n        }\n        const unsubscribeProc = () => {\n            const messageId = this._nextId();\n            if (messageId === null) {\n                this.log('No messageId left');\n                return false;\n            }\n            const packet = {\n                cmd: 'unsubscribe',\n                messageId,\n                unsubscriptions: [],\n            };\n            if (typeof topic === 'string') {\n                packet.unsubscriptions = [topic];\n            }\n            else if (Array.isArray(topic)) {\n                packet.unsubscriptions = topic;\n            }\n            if (this.options.resubscribe) {\n                packet.unsubscriptions.forEach((topic2) => {\n                    delete this._resubscribeTopics[topic2];\n                });\n            }\n            if (typeof opts === 'object' && opts.properties) {\n                packet.properties = opts.properties;\n            }\n            this.outgoing[packet.messageId] = {\n                volatile: true,\n                cb: callback,\n            };\n            this.log('unsubscribe: call _sendPacket');\n            this._sendPacket(packet);\n            return true;\n        };\n        if (this._storeProcessing ||\n            this._storeProcessingQueue.length > 0 ||\n            !unsubscribeProc()) {\n            this._storeProcessingQueue.push({\n                invoke: unsubscribeProc,\n                callback,\n            });\n        }\n        return this;\n    }\n    unsubscribeAsync(topic, opts) {\n        return new Promise((resolve, reject) => {\n            this.unsubscribe(topic, opts, (err, packet) => {\n                if (err) {\n                    reject(err);\n                }\n                else {\n                    resolve(packet);\n                }\n            });\n        });\n    }\n    end(force, opts, cb) {\n        this.log('end :: (%s)', this.options.clientId);\n        if (force == null || typeof force !== 'boolean') {\n            cb = cb || opts;\n            opts = force;\n            force = false;\n        }\n        if (typeof opts !== 'object') {\n            cb = cb || opts;\n            opts = null;\n        }\n        this.log('end :: cb? %s', !!cb);\n        if (!cb || typeof cb !== 'function') {\n            cb = this.noop;\n        }\n        const closeStores = () => {\n            this.log('end :: closeStores: closing incoming and outgoing stores');\n            this.disconnected = true;\n            this.incomingStore.close((e1) => {\n                this.outgoingStore.close((e2) => {\n                    this.log('end :: closeStores: emitting end');\n                    this.emit('end');\n                    if (cb) {\n                        const err = e1 || e2;\n                        this.log('end :: closeStores: invoking callback with args');\n                        cb(err);\n                    }\n                });\n            });\n            if (this._deferredReconnect) {\n                this._deferredReconnect();\n            }\n            else if (this.options.reconnectPeriod === 0 ||\n                this.options.manualConnect) {\n                this.disconnecting = false;\n            }\n        };\n        const finish = () => {\n            this.log('end :: (%s) :: finish :: calling _cleanUp with force %s', this.options.clientId, force);\n            this._cleanUp(force, () => {\n                this.log('end :: finish :: calling process.nextTick on closeStores');\n                (0, shared_1.nextTick)(closeStores);\n            }, opts);\n        };\n        if (this.disconnecting) {\n            cb();\n            return this;\n        }\n        this._clearReconnect();\n        this.disconnecting = true;\n        if (!force && Object.keys(this.outgoing).length > 0) {\n            this.log('end :: (%s) :: calling finish in 10ms once outgoing is empty', this.options.clientId);\n            this.once('outgoingEmpty', setTimeout.bind(null, finish, 10));\n        }\n        else {\n            this.log('end :: (%s) :: immediately calling finish', this.options.clientId);\n            finish();\n        }\n        return this;\n    }\n    endAsync(force, opts) {\n        return new Promise((resolve, reject) => {\n            this.end(force, opts, (err) => {\n                if (err) {\n                    reject(err);\n                }\n                else {\n                    resolve();\n                }\n            });\n        });\n    }\n    removeOutgoingMessage(messageId) {\n        if (this.outgoing[messageId]) {\n            const { cb } = this.outgoing[messageId];\n            this._removeOutgoingAndStoreMessage(messageId, () => {\n                cb(new Error('Message removed'));\n            });\n        }\n        return this;\n    }\n    reconnect(opts) {\n        this.log('client reconnect');\n        const f = () => {\n            if (opts) {\n                this.options.incomingStore = opts.incomingStore;\n                this.options.outgoingStore = opts.outgoingStore;\n            }\n            else {\n                this.options.incomingStore = null;\n                this.options.outgoingStore = null;\n            }\n            this.incomingStore = this.options.incomingStore || new store_1.default();\n            this.outgoingStore = this.options.outgoingStore || new store_1.default();\n            this.disconnecting = false;\n            this.disconnected = false;\n            this._deferredReconnect = null;\n            this._reconnect();\n        };\n        if (this.disconnecting && !this.disconnected) {\n            this._deferredReconnect = f;\n        }\n        else {\n            f();\n        }\n        return this;\n    }\n    _flushVolatile() {\n        if (this.outgoing) {\n            this.log('_flushVolatile :: deleting volatile messages from the queue and setting their callbacks as error function');\n            Object.keys(this.outgoing).forEach((messageId) => {\n                if (this.outgoing[messageId].volatile &&\n                    typeof this.outgoing[messageId].cb === 'function') {\n                    this.outgoing[messageId].cb(new Error('Connection closed'));\n                    delete this.outgoing[messageId];\n                }\n            });\n        }\n    }\n    _flush() {\n        if (this.outgoing) {\n            this.log('_flush: queue exists? %b', !!this.outgoing);\n            Object.keys(this.outgoing).forEach((messageId) => {\n                if (typeof this.outgoing[messageId].cb === 'function') {\n                    this.outgoing[messageId].cb(new Error('Connection closed'));\n                    delete this.outgoing[messageId];\n                }\n            });\n        }\n    }\n    _removeTopicAliasAndRecoverTopicName(packet) {\n        let alias;\n        if (packet.properties) {\n            alias = packet.properties.topicAlias;\n        }\n        let topic = packet.topic.toString();\n        this.log('_removeTopicAliasAndRecoverTopicName :: alias %d, topic %o', alias, topic);\n        if (topic.length === 0) {\n            if (typeof alias === 'undefined') {\n                return new Error('Unregistered Topic Alias');\n            }\n            topic = this.topicAliasSend.getTopicByAlias(alias);\n            if (typeof topic === 'undefined') {\n                return new Error('Unregistered Topic Alias');\n            }\n            packet.topic = topic;\n        }\n        if (alias) {\n            delete packet.properties.topicAlias;\n        }\n    }\n    _checkDisconnecting(callback) {\n        if (this.disconnecting) {\n            if (callback && callback !== this.noop) {\n                callback(new Error('client disconnecting'));\n            }\n            else {\n                this.emit('error', new Error('client disconnecting'));\n            }\n        }\n        return this.disconnecting;\n    }\n    _reconnect() {\n        this.log('_reconnect: emitting reconnect to client');\n        this.emit('reconnect');\n        if (this.connected) {\n            this.end(() => {\n                this.connect();\n            });\n            this.log('client already connected. disconnecting first.');\n        }\n        else {\n            this.log('_reconnect: calling connect');\n            this.connect();\n        }\n    }\n    _setupReconnect() {\n        if (!this.disconnecting &&\n            !this.reconnectTimer &&\n            this.options.reconnectPeriod > 0) {\n            if (!this.reconnecting) {\n                this.log('_setupReconnect :: emit `offline` state');\n                this.emit('offline');\n                this.log('_setupReconnect :: set `reconnecting` to `true`');\n                this.reconnecting = true;\n            }\n            this.log('_setupReconnect :: setting reconnectTimer for %d ms', this.options.reconnectPeriod);\n            this.reconnectTimer = setInterval(() => {\n                this.log('reconnectTimer :: reconnect triggered!');\n                this._reconnect();\n            }, this.options.reconnectPeriod);\n        }\n        else {\n            this.log('_setupReconnect :: doing nothing...');\n        }\n    }\n    _clearReconnect() {\n        this.log('_clearReconnect : clearing reconnect timer');\n        if (this.reconnectTimer) {\n            clearInterval(this.reconnectTimer);\n            this.reconnectTimer = null;\n        }\n    }\n    _cleanUp(forced, done, opts = {}) {\n        if (done) {\n            this.log('_cleanUp :: done callback provided for on stream close');\n            this.stream.on('close', done);\n        }\n        this.log('_cleanUp :: forced? %s', forced);\n        if (forced) {\n            if (this.options.reconnectPeriod === 0 && this.options.clean) {\n                this._flush();\n            }\n            this.log('_cleanUp :: (%s) :: destroying stream', this.options.clientId);\n            this.stream.destroy();\n        }\n        else {\n            const packet = Object.assign({ cmd: 'disconnect' }, opts);\n            this.log('_cleanUp :: (%s) :: call _sendPacket with disconnect packet', this.options.clientId);\n            this._sendPacket(packet, () => {\n                this.log('_cleanUp :: (%s) :: destroying stream', this.options.clientId);\n                setImmediate(() => {\n                    this.stream.end(() => {\n                        this.log('_cleanUp :: (%s) :: stream destroyed', this.options.clientId);\n                    });\n                });\n            });\n        }\n        if (!this.disconnecting && !this.reconnecting) {\n            this.log('_cleanUp :: client not disconnecting/reconnecting. Clearing and resetting reconnect.');\n            this._clearReconnect();\n            this._setupReconnect();\n        }\n        this._destroyKeepaliveManager();\n        if (done && !this.connected) {\n            this.log('_cleanUp :: (%s) :: removing stream `done` callback `close` listener', this.options.clientId);\n            this.stream.removeListener('close', done);\n            done();\n        }\n    }\n    _storeAndSend(packet, cb, cbStorePut) {\n        this.log('storeAndSend :: store packet with cmd %s to outgoingStore', packet.cmd);\n        let storePacket = packet;\n        let err;\n        if (storePacket.cmd === 'publish') {\n            storePacket = (0, default_1.default)(packet);\n            err = this._removeTopicAliasAndRecoverTopicName(storePacket);\n            if (err) {\n                return cb && cb(err);\n            }\n        }\n        this.outgoingStore.put(storePacket, (err2) => {\n            if (err2) {\n                return cb && cb(err2);\n            }\n            cbStorePut();\n            this._writePacket(packet, cb);\n        });\n    }\n    _applyTopicAlias(packet) {\n        if (this.options.protocolVersion === 5) {\n            if (packet.cmd === 'publish') {\n                let alias;\n                if (packet.properties) {\n                    alias = packet.properties.topicAlias;\n                }\n                const topic = packet.topic.toString();\n                if (this.topicAliasSend) {\n                    if (alias) {\n                        if (topic.length !== 0) {\n                            this.log('applyTopicAlias :: register topic: %s - alias: %d', topic, alias);\n                            if (!this.topicAliasSend.put(topic, alias)) {\n                                this.log('applyTopicAlias :: error out of range. topic: %s - alias: %d', topic, alias);\n                                return new Error('Sending Topic Alias out of range');\n                            }\n                        }\n                    }\n                    else if (topic.length !== 0) {\n                        if (this.options.autoAssignTopicAlias) {\n                            alias = this.topicAliasSend.getAliasByTopic(topic);\n                            if (alias) {\n                                packet.topic = '';\n                                packet.properties = Object.assign(Object.assign({}, packet.properties), { topicAlias: alias });\n                                this.log('applyTopicAlias :: auto assign(use) topic: %s - alias: %d', topic, alias);\n                            }\n                            else {\n                                alias = this.topicAliasSend.getLruAlias();\n                                this.topicAliasSend.put(topic, alias);\n                                packet.properties = Object.assign(Object.assign({}, packet.properties), { topicAlias: alias });\n                                this.log('applyTopicAlias :: auto assign topic: %s - alias: %d', topic, alias);\n                            }\n                        }\n                        else if (this.options.autoUseTopicAlias) {\n                            alias = this.topicAliasSend.getAliasByTopic(topic);\n                            if (alias) {\n                                packet.topic = '';\n                                packet.properties = Object.assign(Object.assign({}, packet.properties), { topicAlias: alias });\n                                this.log('applyTopicAlias :: auto use topic: %s - alias: %d', topic, alias);\n                            }\n                        }\n                    }\n                }\n                else if (alias) {\n                    this.log('applyTopicAlias :: error out of range. topic: %s - alias: %d', topic, alias);\n                    return new Error('Sending Topic Alias out of range');\n                }\n            }\n        }\n    }\n    _noop(err) {\n        this.log('noop ::', err);\n    }\n    _writePacket(packet, cb) {\n        this.log('_writePacket :: packet: %O', packet);\n        this.log('_writePacket :: emitting `packetsend`');\n        this.emit('packetsend', packet);\n        this.log('_writePacket :: writing to stream');\n        const result = mqtt_packet_1.default.writeToStream(packet, this.stream, this.options);\n        this.log('_writePacket :: writeToStream result %s', result);\n        if (!result && cb && cb !== this.noop) {\n            this.log('_writePacket :: handle events on `drain` once through callback.');\n            this.stream.once('drain', cb);\n        }\n        else if (cb) {\n            this.log('_writePacket :: invoking cb');\n            cb();\n        }\n    }\n    _sendPacket(packet, cb, cbStorePut, noStore) {\n        this.log('_sendPacket :: (%s) ::  start', this.options.clientId);\n        cbStorePut = cbStorePut || this.noop;\n        cb = cb || this.noop;\n        const err = this._applyTopicAlias(packet);\n        if (err) {\n            cb(err);\n            return;\n        }\n        if (!this.connected) {\n            if (packet.cmd === 'auth') {\n                this._writePacket(packet, cb);\n                return;\n            }\n            this.log('_sendPacket :: client not connected. Storing packet offline.');\n            this._storePacket(packet, cb, cbStorePut);\n            return;\n        }\n        if (noStore) {\n            this._writePacket(packet, cb);\n            return;\n        }\n        switch (packet.cmd) {\n            case 'publish':\n                break;\n            case 'pubrel':\n                this._storeAndSend(packet, cb, cbStorePut);\n                return;\n            default:\n                this._writePacket(packet, cb);\n                return;\n        }\n        switch (packet.qos) {\n            case 2:\n            case 1:\n                this._storeAndSend(packet, cb, cbStorePut);\n                break;\n            case 0:\n            default:\n                this._writePacket(packet, cb);\n                break;\n        }\n        this.log('_sendPacket :: (%s) ::  end', this.options.clientId);\n    }\n    _storePacket(packet, cb, cbStorePut) {\n        this.log('_storePacket :: packet: %o', packet);\n        this.log('_storePacket :: cb? %s', !!cb);\n        cbStorePut = cbStorePut || this.noop;\n        let storePacket = packet;\n        if (storePacket.cmd === 'publish') {\n            storePacket = (0, default_1.default)(packet);\n            const err = this._removeTopicAliasAndRecoverTopicName(storePacket);\n            if (err) {\n                return cb && cb(err);\n            }\n        }\n        const qos = storePacket.qos || 0;\n        if ((qos === 0 && this.queueQoSZero) || storePacket.cmd !== 'publish') {\n            this.queue.push({ packet: storePacket, cb });\n        }\n        else if (qos > 0) {\n            cb = this.outgoing[storePacket.messageId]\n                ? this.outgoing[storePacket.messageId].cb\n                : null;\n            this.outgoingStore.put(storePacket, (err) => {\n                if (err) {\n                    return cb && cb(err);\n                }\n                cbStorePut();\n            });\n        }\n        else if (cb) {\n            cb(new Error('No connection to broker'));\n        }\n    }\n    _setupKeepaliveManager() {\n        this.log('_setupKeepaliveManager :: keepalive %d (seconds)', this.options.keepalive);\n        if (!this.keepaliveManager && this.options.keepalive) {\n            this.keepaliveManager = new KeepaliveManager_1.default(this, this.options.timerVariant);\n        }\n    }\n    _destroyKeepaliveManager() {\n        if (this.keepaliveManager) {\n            this.log('_destroyKeepaliveManager :: destroying keepalive manager');\n            this.keepaliveManager.destroy();\n            this.keepaliveManager = null;\n        }\n    }\n    reschedulePing(force = false) {\n        if (this.keepaliveManager &&\n            this.options.keepalive &&\n            (force || this.options.reschedulePings)) {\n            this._reschedulePing();\n        }\n    }\n    _reschedulePing() {\n        this.log('_reschedulePing :: rescheduling ping');\n        this.keepaliveManager.reschedule();\n    }\n    sendPing() {\n        this.log('_sendPing :: sending pingreq');\n        this._sendPacket({ cmd: 'pingreq' });\n    }\n    onKeepaliveTimeout() {\n        this.emit('error', new Error('Keepalive timeout'));\n        this.log('onKeepaliveTimeout :: calling _cleanUp with force true');\n        this._cleanUp(true);\n    }\n    _resubscribe() {\n        this.log('_resubscribe');\n        const _resubscribeTopicsKeys = Object.keys(this._resubscribeTopics);\n        if (!this._firstConnection &&\n            (this.options.clean ||\n                (this.options.protocolVersion >= 4 &&\n                    !this.connackPacket.sessionPresent)) &&\n            _resubscribeTopicsKeys.length > 0) {\n            if (this.options.resubscribe) {\n                if (this.options.protocolVersion === 5) {\n                    this.log('_resubscribe: protocolVersion 5');\n                    for (let topicI = 0; topicI < _resubscribeTopicsKeys.length; topicI++) {\n                        const resubscribeTopic = {};\n                        resubscribeTopic[_resubscribeTopicsKeys[topicI]] =\n                            this._resubscribeTopics[_resubscribeTopicsKeys[topicI]];\n                        resubscribeTopic.resubscribe = true;\n                        this.subscribe(resubscribeTopic, {\n                            properties: resubscribeTopic[_resubscribeTopicsKeys[topicI]]\n                                .properties,\n                        });\n                    }\n                }\n                else {\n                    this._resubscribeTopics.resubscribe = true;\n                    this.subscribe(this._resubscribeTopics);\n                }\n            }\n            else {\n                this._resubscribeTopics = {};\n            }\n        }\n        this._firstConnection = false;\n    }\n    _onConnect(packet) {\n        if (this.disconnected) {\n            this.emit('connect', packet);\n            return;\n        }\n        this.connackPacket = packet;\n        this.messageIdProvider.clear();\n        this._setupKeepaliveManager();\n        this.connected = true;\n        const startStreamProcess = () => {\n            let outStore = this.outgoingStore.createStream();\n            const remove = () => {\n                outStore.destroy();\n                outStore = null;\n                this._flushStoreProcessingQueue();\n                clearStoreProcessing();\n            };\n            const clearStoreProcessing = () => {\n                this._storeProcessing = false;\n                this._packetIdsDuringStoreProcessing = {};\n            };\n            this.once('close', remove);\n            outStore.on('error', (err) => {\n                clearStoreProcessing();\n                this._flushStoreProcessingQueue();\n                this.removeListener('close', remove);\n                this.emit('error', err);\n            });\n            const storeDeliver = () => {\n                if (!outStore) {\n                    return;\n                }\n                const packet2 = outStore.read(1);\n                let cb;\n                if (!packet2) {\n                    outStore.once('readable', storeDeliver);\n                    return;\n                }\n                this._storeProcessing = true;\n                if (this._packetIdsDuringStoreProcessing[packet2.messageId]) {\n                    storeDeliver();\n                    return;\n                }\n                if (!this.disconnecting && !this.reconnectTimer) {\n                    cb = this.outgoing[packet2.messageId]\n                        ? this.outgoing[packet2.messageId].cb\n                        : null;\n                    this.outgoing[packet2.messageId] = {\n                        volatile: false,\n                        cb(err, status) {\n                            if (cb) {\n                                cb(err, status);\n                            }\n                            storeDeliver();\n                        },\n                    };\n                    this._packetIdsDuringStoreProcessing[packet2.messageId] =\n                        true;\n                    if (this.messageIdProvider.register(packet2.messageId)) {\n                        this._sendPacket(packet2, undefined, undefined, true);\n                    }\n                    else {\n                        this.log('messageId: %d has already used.', packet2.messageId);\n                    }\n                }\n                else if (outStore.destroy) {\n                    outStore.destroy();\n                }\n            };\n            outStore.on('end', () => {\n                let allProcessed = true;\n                for (const id in this._packetIdsDuringStoreProcessing) {\n                    if (!this._packetIdsDuringStoreProcessing[id]) {\n                        allProcessed = false;\n                        break;\n                    }\n                }\n                this.removeListener('close', remove);\n                if (allProcessed) {\n                    clearStoreProcessing();\n                    this._invokeAllStoreProcessingQueue();\n                    this.emit('connect', packet);\n                }\n                else {\n                    startStreamProcess();\n                }\n            });\n            storeDeliver();\n        };\n        startStreamProcess();\n    }\n    _invokeStoreProcessingQueue() {\n        if (!this._storeProcessing && this._storeProcessingQueue.length > 0) {\n            const f = this._storeProcessingQueue[0];\n            if (f && f.invoke()) {\n                this._storeProcessingQueue.shift();\n                return true;\n            }\n        }\n        return false;\n    }\n    _invokeAllStoreProcessingQueue() {\n        while (this._invokeStoreProcessingQueue()) {\n        }\n    }\n    _flushStoreProcessingQueue() {\n        for (const f of this._storeProcessingQueue) {\n            if (f.cbStorePut)\n                f.cbStorePut(new Error('Connection closed'));\n            if (f.callback)\n                f.callback(new Error('Connection closed'));\n        }\n        this._storeProcessingQueue.splice(0);\n    }\n    _removeOutgoingAndStoreMessage(messageId, cb) {\n        delete this.outgoing[messageId];\n        this.outgoingStore.del({ messageId }, (err, packet) => {\n            cb(err, packet);\n            this.messageIdProvider.deallocate(messageId);\n            this._invokeStoreProcessingQueue();\n        });\n    }\n}\nMqttClient.VERSION = shared_1.MQTTJS_VERSION;\nexports.default = MqttClient;\n//# sourceMappingURL=client.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst buffer_1 = require(\"buffer\");\nconst readable_stream_1 = require(\"readable-stream\");\nconst BufferedDuplex_1 = require(\"../BufferedDuplex\");\nlet my;\nlet proxy;\nlet stream;\nlet isInitialized = false;\nfunction buildProxy() {\n    const _proxy = new readable_stream_1.Transform();\n    _proxy._write = (chunk, encoding, next) => {\n        my.sendSocketMessage({\n            data: chunk.buffer,\n            success() {\n                next();\n            },\n            fail() {\n                next(new Error());\n            },\n        });\n    };\n    _proxy._flush = (done) => {\n        my.closeSocket({\n            success() {\n                done();\n            },\n        });\n    };\n    return _proxy;\n}\nfunction setDefaultOpts(opts) {\n    if (!opts.hostname) {\n        opts.hostname = 'localhost';\n    }\n    if (!opts.path) {\n        opts.path = '/';\n    }\n    if (!opts.wsOptions) {\n        opts.wsOptions = {};\n    }\n}\nfunction buildUrl(opts, client) {\n    const protocol = opts.protocol === 'alis' ? 'wss' : 'ws';\n    let url = `${protocol}://${opts.hostname}${opts.path}`;\n    if (opts.port && opts.port !== 80 && opts.port !== 443) {\n        url = `${protocol}://${opts.hostname}:${opts.port}${opts.path}`;\n    }\n    if (typeof opts.transformWsUrl === 'function') {\n        url = opts.transformWsUrl(url, opts, client);\n    }\n    return url;\n}\nfunction bindEventHandler() {\n    if (isInitialized)\n        return;\n    isInitialized = true;\n    my.onSocketOpen(() => {\n        stream.socketReady();\n    });\n    my.onSocketMessage((res) => {\n        if (typeof res.data === 'string') {\n            const buffer = buffer_1.Buffer.from(res.data, 'base64');\n            proxy.push(buffer);\n        }\n        else {\n            const reader = new FileReader();\n            reader.addEventListener('load', () => {\n                let data = reader.result;\n                if (data instanceof ArrayBuffer)\n                    data = buffer_1.Buffer.from(data);\n                else\n                    data = buffer_1.Buffer.from(data, 'utf8');\n                proxy.push(data);\n            });\n            reader.readAsArrayBuffer(res.data);\n        }\n    });\n    my.onSocketClose(() => {\n        stream.end();\n        stream.destroy();\n    });\n    my.onSocketError((err) => {\n        stream.destroy(err);\n    });\n}\nconst buildStream = (client, opts) => {\n    opts.hostname = opts.hostname || opts.host;\n    if (!opts.hostname) {\n        throw new Error('Could not determine host. Specify host manually.');\n    }\n    const websocketSubProtocol = opts.protocolId === 'MQIsdp' && opts.protocolVersion === 3\n        ? 'mqttv3.1'\n        : 'mqtt';\n    setDefaultOpts(opts);\n    const url = buildUrl(opts, client);\n    my = opts.my;\n    my.connectSocket({\n        url,\n        protocols: websocketSubProtocol,\n    });\n    proxy = buildProxy();\n    stream = new BufferedDuplex_1.BufferedDuplex(opts, proxy, my);\n    bindEventHandler();\n    return stream;\n};\nexports.default = buildStream;\n//# sourceMappingURL=ali.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.connectAsync = void 0;\nconst debug_1 = __importDefault(require(\"debug\"));\nconst url_1 = __importDefault(require(\"url\"));\nconst client_1 = __importDefault(require(\"../client\"));\nconst is_browser_1 = __importDefault(require(\"../is-browser\"));\nif (typeof (process === null || process === void 0 ? void 0 : process.nextTick) !== 'function') {\n    process.nextTick = setImmediate;\n}\nconst debug = (0, debug_1.default)('mqttjs');\nlet protocols = null;\nfunction parseAuthOptions(opts) {\n    let matches;\n    if (opts.auth) {\n        matches = opts.auth.match(/^(.+):(.+)$/);\n        if (matches) {\n            opts.username = matches[1];\n            opts.password = matches[2];\n        }\n        else {\n            opts.username = opts.auth;\n        }\n    }\n}\nfunction connect(brokerUrl, opts) {\n    var _a, _b, _c, _d;\n    debug('connecting to an MQTT broker...');\n    if (typeof brokerUrl === 'object' && !opts) {\n        opts = brokerUrl;\n        brokerUrl = '';\n    }\n    opts = opts || {};\n    if (brokerUrl && typeof brokerUrl === 'string') {\n        const parsedUrl = url_1.default.parse(brokerUrl, true);\n        const parsedOptions = {};\n        if (parsedUrl.port != null) {\n            parsedOptions.port = Number(parsedUrl.port);\n        }\n        parsedOptions.host = parsedUrl.hostname;\n        parsedOptions.query = parsedUrl.query;\n        parsedOptions.auth = parsedUrl.auth;\n        parsedOptions.protocol = parsedUrl.protocol;\n        parsedOptions.path = parsedUrl.path;\n        parsedOptions.protocol = (_a = parsedOptions.protocol) === null || _a === void 0 ? void 0 : _a.replace(/:$/, '');\n        opts = Object.assign(Object.assign({}, parsedOptions), opts);\n        if (!opts.protocol) {\n            throw new Error('Missing protocol');\n        }\n    }\n    opts.unixSocket = opts.unixSocket || ((_b = opts.protocol) === null || _b === void 0 ? void 0 : _b.includes('+unix'));\n    if (opts.unixSocket) {\n        opts.protocol = opts.protocol.replace('+unix', '');\n    }\n    else if (!((_c = opts.protocol) === null || _c === void 0 ? void 0 : _c.startsWith('ws')) &&\n        !((_d = opts.protocol) === null || _d === void 0 ? void 0 : _d.startsWith('wx'))) {\n        delete opts.path;\n    }\n    parseAuthOptions(opts);\n    if (opts.query && typeof opts.query.clientId === 'string') {\n        opts.clientId = opts.query.clientId;\n    }\n    if (opts.cert && opts.key) {\n        if (opts.protocol) {\n            if (['mqtts', 'wss', 'wxs', 'alis'].indexOf(opts.protocol) === -1) {\n                switch (opts.protocol) {\n                    case 'mqtt':\n                        opts.protocol = 'mqtts';\n                        break;\n                    case 'ws':\n                        opts.protocol = 'wss';\n                        break;\n                    case 'wx':\n                        opts.protocol = 'wxs';\n                        break;\n                    case 'ali':\n                        opts.protocol = 'alis';\n                        break;\n                    default:\n                        throw new Error(`Unknown protocol for secure connection: \"${opts.protocol}\"!`);\n                }\n            }\n        }\n        else {\n            throw new Error('Missing secure protocol key');\n        }\n    }\n    if (!protocols) {\n        protocols = {};\n        if (!is_browser_1.default && !opts.forceNativeWebSocket) {\n            protocols.ws = require('./ws').streamBuilder;\n            protocols.wss = require('./ws').streamBuilder;\n            protocols.mqtt = require('./tcp').default;\n            protocols.tcp = require('./tcp').default;\n            protocols.ssl = require('./tls').default;\n            protocols.tls = protocols.ssl;\n            protocols.mqtts = require('./tls').default;\n        }\n        else {\n            protocols.ws = require('./ws').browserStreamBuilder;\n            protocols.wss = require('./ws').browserStreamBuilder;\n            protocols.wx = require('./wx').default;\n            protocols.wxs = require('./wx').default;\n            protocols.ali = require('./ali').default;\n            protocols.alis = require('./ali').default;\n        }\n    }\n    if (!protocols[opts.protocol]) {\n        const isSecure = ['mqtts', 'wss'].indexOf(opts.protocol) !== -1;\n        opts.protocol = [\n            'mqtt',\n            'mqtts',\n            'ws',\n            'wss',\n            'wx',\n            'wxs',\n            'ali',\n            'alis',\n        ].filter((key, index) => {\n            if (isSecure && index % 2 === 0) {\n                return false;\n            }\n            return typeof protocols[key] === 'function';\n        })[0];\n    }\n    if (opts.clean === false && !opts.clientId) {\n        throw new Error('Missing clientId for unclean clients');\n    }\n    if (opts.protocol) {\n        opts.defaultProtocol = opts.protocol;\n    }\n    function wrapper(client) {\n        if (opts.servers) {\n            if (!client._reconnectCount ||\n                client._reconnectCount === opts.servers.length) {\n                client._reconnectCount = 0;\n            }\n            opts.host = opts.servers[client._reconnectCount].host;\n            opts.port = opts.servers[client._reconnectCount].port;\n            opts.protocol = !opts.servers[client._reconnectCount].protocol\n                ? opts.defaultProtocol\n                : opts.servers[client._reconnectCount].protocol;\n            opts.hostname = opts.host;\n            client._reconnectCount++;\n        }\n        debug('calling streambuilder for', opts.protocol);\n        return protocols[opts.protocol](client, opts);\n    }\n    const client = new client_1.default(wrapper, opts);\n    client.on('error', () => {\n    });\n    return client;\n}\nfunction connectAsync(brokerUrl, opts, allowRetries = true) {\n    return new Promise((resolve, reject) => {\n        const client = connect(brokerUrl, opts);\n        const promiseResolutionListeners = {\n            connect: (connack) => {\n                removePromiseResolutionListeners();\n                resolve(client);\n            },\n            end: () => {\n                removePromiseResolutionListeners();\n                resolve(client);\n            },\n            error: (err) => {\n                removePromiseResolutionListeners();\n                client.end();\n                reject(err);\n            },\n        };\n        if (allowRetries === false) {\n            promiseResolutionListeners.close = () => {\n                promiseResolutionListeners.error(new Error(\"Couldn't connect to server\"));\n            };\n        }\n        function removePromiseResolutionListeners() {\n            Object.keys(promiseResolutionListeners).forEach((eventName) => {\n                client.off(eventName, promiseResolutionListeners[eventName]);\n            });\n        }\n        Object.keys(promiseResolutionListeners).forEach((eventName) => {\n            client.on(eventName, promiseResolutionListeners[eventName]);\n        });\n    });\n}\nexports.connectAsync = connectAsync;\nexports.default = connect;\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst net_1 = __importDefault(require(\"net\"));\nconst debug_1 = __importDefault(require(\"debug\"));\nconst debug = (0, debug_1.default)('mqttjs:tcp');\nconst buildStream = (client, opts) => {\n    opts.port = opts.port || 1883;\n    opts.hostname = opts.hostname || opts.host || 'localhost';\n    const { port, path } = opts;\n    const host = opts.hostname;\n    debug('port %d and host %s', port, host);\n    return net_1.default.createConnection({ port, host, path });\n};\nexports.default = buildStream;\n//# sourceMappingURL=tcp.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst tls_1 = __importDefault(require(\"tls\"));\nconst net_1 = __importDefault(require(\"net\"));\nconst debug_1 = __importDefault(require(\"debug\"));\nconst debug = (0, debug_1.default)('mqttjs:tls');\nconst buildStream = (client, opts) => {\n    opts.port = opts.port || 8883;\n    opts.host = opts.hostname || opts.host || 'localhost';\n    if (net_1.default.isIP(opts.host) === 0) {\n        opts.servername = opts.host;\n    }\n    opts.rejectUnauthorized = opts.rejectUnauthorized !== false;\n    delete opts.path;\n    debug('port %d host %s rejectUnauthorized %b', opts.port, opts.host, opts.rejectUnauthorized);\n    const connection = tls_1.default.connect(opts);\n    connection.on('secureConnect', () => {\n        if (opts.rejectUnauthorized && !connection.authorized) {\n            connection.emit('error', new Error('TLS not authorized'));\n        }\n        else {\n            connection.removeListener('error', handleTLSerrors);\n        }\n    });\n    function handleTLSerrors(err) {\n        if (opts.rejectUnauthorized) {\n            client.emit('error', err);\n        }\n        connection.end();\n    }\n    connection.on('error', handleTLSerrors);\n    return connection;\n};\nexports.default = buildStream;\n//# sourceMappingURL=tls.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.streamBuilder = exports.browserStreamBuilder = void 0;\nconst buffer_1 = require(\"buffer\");\nconst ws_1 = __importDefault(require(\"ws\"));\nconst debug_1 = __importDefault(require(\"debug\"));\nconst readable_stream_1 = require(\"readable-stream\");\nconst is_browser_1 = __importDefault(require(\"../is-browser\"));\nconst BufferedDuplex_1 = require(\"../BufferedDuplex\");\nconst debug = (0, debug_1.default)('mqttjs:ws');\nconst WSS_OPTIONS = [\n    'rejectUnauthorized',\n    'ca',\n    'cert',\n    'key',\n    'pfx',\n    'passphrase',\n];\nfunction buildUrl(opts, client) {\n    let url = `${opts.protocol}://${opts.hostname}:${opts.port}${opts.path}`;\n    if (typeof opts.transformWsUrl === 'function') {\n        url = opts.transformWsUrl(url, opts, client);\n    }\n    return url;\n}\nfunction setDefaultOpts(opts) {\n    const options = opts;\n    if (!opts.port) {\n        if (opts.protocol === 'wss') {\n            options.port = 443;\n        }\n        else {\n            options.port = 80;\n        }\n    }\n    if (!opts.path) {\n        options.path = '/';\n    }\n    if (!opts.wsOptions) {\n        options.wsOptions = {};\n    }\n    if (!is_browser_1.default && !opts.forceNativeWebSocket && opts.protocol === 'wss') {\n        WSS_OPTIONS.forEach((prop) => {\n            if (Object.prototype.hasOwnProperty.call(opts, prop) &&\n                !Object.prototype.hasOwnProperty.call(opts.wsOptions, prop)) {\n                options.wsOptions[prop] = opts[prop];\n            }\n        });\n    }\n    return options;\n}\nfunction setDefaultBrowserOpts(opts) {\n    const options = setDefaultOpts(opts);\n    if (!options.hostname) {\n        options.hostname = options.host;\n    }\n    if (!options.hostname) {\n        if (typeof document === 'undefined') {\n            throw new Error('Could not determine host. Specify host manually.');\n        }\n        const parsed = new URL(document.URL);\n        options.hostname = parsed.hostname;\n        if (!options.port) {\n            options.port = Number(parsed.port);\n        }\n    }\n    if (options.objectMode === undefined) {\n        options.objectMode = !(options.binary === true || options.binary === undefined);\n    }\n    return options;\n}\nfunction createWebSocket(client, url, opts) {\n    debug('createWebSocket');\n    debug(`protocol: ${opts.protocolId} ${opts.protocolVersion}`);\n    const websocketSubProtocol = opts.protocolId === 'MQIsdp' && opts.protocolVersion === 3\n        ? 'mqttv3.1'\n        : 'mqtt';\n    debug(`creating new Websocket for url: ${url} and protocol: ${websocketSubProtocol}`);\n    let socket;\n    if (opts.createWebsocket) {\n        socket = opts.createWebsocket(url, [websocketSubProtocol], opts);\n    }\n    else {\n        socket = new ws_1.default(url, [websocketSubProtocol], opts.wsOptions);\n    }\n    return socket;\n}\nfunction createBrowserWebSocket(client, opts) {\n    const websocketSubProtocol = opts.protocolId === 'MQIsdp' && opts.protocolVersion === 3\n        ? 'mqttv3.1'\n        : 'mqtt';\n    const url = buildUrl(opts, client);\n    let socket;\n    if (opts.createWebsocket) {\n        socket = opts.createWebsocket(url, [websocketSubProtocol], opts);\n    }\n    else {\n        socket = new WebSocket(url, [websocketSubProtocol]);\n    }\n    socket.binaryType = 'arraybuffer';\n    return socket;\n}\nconst streamBuilder = (client, opts) => {\n    debug('streamBuilder');\n    const options = setDefaultOpts(opts);\n    options.hostname = options.hostname || options.host || 'localhost';\n    const url = buildUrl(options, client);\n    const socket = createWebSocket(client, url, options);\n    const webSocketStream = ws_1.default.createWebSocketStream(socket, options.wsOptions);\n    webSocketStream['url'] = url;\n    socket.on('close', () => {\n        webSocketStream.destroy();\n    });\n    return webSocketStream;\n};\nexports.streamBuilder = streamBuilder;\nconst browserStreamBuilder = (client, opts) => {\n    debug('browserStreamBuilder');\n    let stream;\n    const options = setDefaultBrowserOpts(opts);\n    const bufferSize = options.browserBufferSize || 1024 * 512;\n    const bufferTimeout = opts.browserBufferTimeout || 1000;\n    const coerceToBuffer = !opts.objectMode;\n    const socket = createBrowserWebSocket(client, opts);\n    const proxy = buildProxy(opts, socketWriteBrowser, socketEndBrowser);\n    if (!opts.objectMode) {\n        proxy._writev = BufferedDuplex_1.writev.bind(proxy);\n    }\n    proxy.on('close', () => {\n        socket.close();\n    });\n    const eventListenerSupport = typeof socket.addEventListener !== 'undefined';\n    if (socket.readyState === socket.OPEN) {\n        stream = proxy;\n        stream.socket = socket;\n    }\n    else {\n        stream = new BufferedDuplex_1.BufferedDuplex(opts, proxy, socket);\n        if (eventListenerSupport) {\n            socket.addEventListener('open', onOpen);\n        }\n        else {\n            socket.onopen = onOpen;\n        }\n    }\n    if (eventListenerSupport) {\n        socket.addEventListener('close', onClose);\n        socket.addEventListener('error', onError);\n        socket.addEventListener('message', onMessage);\n    }\n    else {\n        socket.onclose = onClose;\n        socket.onerror = onError;\n        socket.onmessage = onMessage;\n    }\n    function buildProxy(pOptions, socketWrite, socketEnd) {\n        const _proxy = new readable_stream_1.Transform({\n            objectMode: pOptions.objectMode,\n        });\n        _proxy._write = socketWrite;\n        _proxy._flush = socketEnd;\n        return _proxy;\n    }\n    function onOpen() {\n        debug('WebSocket onOpen');\n        if (stream instanceof BufferedDuplex_1.BufferedDuplex) {\n            stream.socketReady();\n        }\n    }\n    function onClose(event) {\n        debug('WebSocket onClose', event);\n        stream.end();\n        stream.destroy();\n    }\n    function onError(err) {\n        debug('WebSocket onError', err);\n        const error = new Error('WebSocket error');\n        error['event'] = err;\n        stream.destroy(error);\n    }\n    async function onMessage(event) {\n        let { data } = event;\n        if (data instanceof ArrayBuffer)\n            data = buffer_1.Buffer.from(data);\n        else if (data instanceof Blob)\n            data = buffer_1.Buffer.from(await new Response(data).arrayBuffer());\n        else\n            data = buffer_1.Buffer.from(data, 'utf8');\n        if (proxy && !proxy.destroyed) {\n            proxy.push(data);\n        }\n    }\n    function socketWriteBrowser(chunk, enc, next) {\n        if (socket.bufferedAmount > bufferSize) {\n            setTimeout(socketWriteBrowser, bufferTimeout, chunk, enc, next);\n            return;\n        }\n        if (coerceToBuffer && typeof chunk === 'string') {\n            chunk = buffer_1.Buffer.from(chunk, 'utf8');\n        }\n        try {\n            socket.send(chunk);\n        }\n        catch (err) {\n            return next(err);\n        }\n        next();\n    }\n    function socketEndBrowser(done) {\n        socket.close();\n        done();\n    }\n    return stream;\n};\nexports.browserStreamBuilder = browserStreamBuilder;\n//# sourceMappingURL=ws.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst buffer_1 = require(\"buffer\");\nconst readable_stream_1 = require(\"readable-stream\");\nconst BufferedDuplex_1 = require(\"../BufferedDuplex\");\nlet socketTask;\nlet proxy;\nlet stream;\nfunction buildProxy() {\n    const _proxy = new readable_stream_1.Transform();\n    _proxy._write = (chunk, encoding, next) => {\n        socketTask.send({\n            data: chunk.buffer,\n            success() {\n                next();\n            },\n            fail(errMsg) {\n                next(new Error(errMsg));\n            },\n        });\n    };\n    _proxy._flush = (done) => {\n        socketTask.close({\n            success() {\n                done();\n            },\n        });\n    };\n    return _proxy;\n}\nfunction setDefaultOpts(opts) {\n    if (!opts.hostname) {\n        opts.hostname = 'localhost';\n    }\n    if (!opts.path) {\n        opts.path = '/';\n    }\n    if (!opts.wsOptions) {\n        opts.wsOptions = {};\n    }\n}\nfunction buildUrl(opts, client) {\n    const protocol = opts.protocol === 'wxs' ? 'wss' : 'ws';\n    let url = `${protocol}://${opts.hostname}${opts.path}`;\n    if (opts.port && opts.port !== 80 && opts.port !== 443) {\n        url = `${protocol}://${opts.hostname}:${opts.port}${opts.path}`;\n    }\n    if (typeof opts.transformWsUrl === 'function') {\n        url = opts.transformWsUrl(url, opts, client);\n    }\n    return url;\n}\nfunction bindEventHandler() {\n    socketTask.onOpen(() => {\n        stream.socketReady();\n    });\n    socketTask.onMessage((res) => {\n        let { data } = res;\n        if (data instanceof ArrayBuffer)\n            data = buffer_1.Buffer.from(data);\n        else\n            data = buffer_1.Buffer.from(data, 'utf8');\n        proxy.push(data);\n    });\n    socketTask.onClose(() => {\n        stream.emit('close');\n        stream.end();\n        stream.destroy();\n    });\n    socketTask.onError((error) => {\n        const err = new Error(error.errMsg);\n        stream.destroy(err);\n    });\n}\nconst buildStream = (client, opts) => {\n    opts.hostname = opts.hostname || opts.host;\n    if (!opts.hostname) {\n        throw new Error('Could not determine host. Specify host manually.');\n    }\n    const websocketSubProtocol = opts.protocolId === 'MQIsdp' && opts.protocolVersion === 3\n        ? 'mqttv3.1'\n        : 'mqtt';\n    setDefaultOpts(opts);\n    const url = buildUrl(opts, client);\n    socketTask = wx.connectSocket({\n        url,\n        protocols: [websocketSubProtocol],\n    });\n    proxy = buildProxy();\n    stream = new BufferedDuplex_1.BufferedDuplex(opts, proxy, socketTask);\n    stream._destroy = (err, cb) => {\n        socketTask.close({\n            success() {\n                if (cb)\n                    cb(err);\n            },\n        });\n    };\n    const destroyRef = stream.destroy;\n    stream.destroy = (err, cb) => {\n        stream.destroy = destroyRef;\n        setTimeout(() => {\n            socketTask.close({\n                fail() {\n                    stream._destroy(err, cb);\n                },\n            });\n        }, 0);\n        return stream;\n    };\n    bindEventHandler();\n    return stream;\n};\nexports.default = buildStream;\n//# sourceMappingURL=wx.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass DefaultMessageIdProvider {\n    constructor() {\n        this.nextId = Math.max(1, Math.floor(Math.random() * 65535));\n    }\n    allocate() {\n        const id = this.nextId++;\n        if (this.nextId === 65536) {\n            this.nextId = 1;\n        }\n        return id;\n    }\n    getLastAllocated() {\n        return this.nextId === 1 ? 65535 : this.nextId - 1;\n    }\n    register(messageId) {\n        return true;\n    }\n    deallocate(messageId) { }\n    clear() { }\n}\nexports.default = DefaultMessageIdProvider;\n//# sourceMappingURL=default-message-id-provider.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst is_browser_1 = __importStar(require(\"./is-browser\"));\nconst worker_timers_1 = require(\"worker-timers\");\nconst workerTimer = {\n    set: worker_timers_1.setInterval,\n    clear: worker_timers_1.clearInterval,\n};\nconst nativeTimer = {\n    set: (func, time) => setInterval(func, time),\n    clear: (timerId) => clearInterval(timerId),\n};\nconst getTimer = (variant) => {\n    switch (variant) {\n        case 'native': {\n            return nativeTimer;\n        }\n        case 'worker': {\n            return workerTimer;\n        }\n        case 'auto':\n        default: {\n            return is_browser_1.default && !is_browser_1.isWebWorker && !is_browser_1.isReactNativeBrowser\n                ? workerTimer\n                : nativeTimer;\n        }\n    }\n};\nexports.default = getTimer;\n//# sourceMappingURL=get-timer.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReasonCodes = void 0;\nconst shared_1 = require(\"../shared\");\nexports.ReasonCodes = {\n    0: '',\n    1: 'Unacceptable protocol version',\n    2: 'Identifier rejected',\n    3: 'Server unavailable',\n    4: 'Bad username or password',\n    5: 'Not authorized',\n    16: 'No matching subscribers',\n    17: 'No subscription existed',\n    128: 'Unspecified error',\n    129: 'Malformed Packet',\n    130: 'Protocol Error',\n    131: 'Implementation specific error',\n    132: 'Unsupported Protocol Version',\n    133: 'Client Identifier not valid',\n    134: 'Bad User Name or Password',\n    135: 'Not authorized',\n    136: 'Server unavailable',\n    137: 'Server busy',\n    138: 'Banned',\n    139: 'Server shutting down',\n    140: 'Bad authentication method',\n    141: 'Keep Alive timeout',\n    142: 'Session taken over',\n    143: 'Topic Filter invalid',\n    144: 'Topic Name invalid',\n    145: 'Packet identifier in use',\n    146: 'Packet Identifier not found',\n    147: 'Receive Maximum exceeded',\n    148: 'Topic Alias invalid',\n    149: 'Packet too large',\n    150: 'Message rate too high',\n    151: 'Quota exceeded',\n    152: 'Administrative action',\n    153: 'Payload format invalid',\n    154: 'Retain not supported',\n    155: 'QoS not supported',\n    156: 'Use another server',\n    157: 'Server moved',\n    158: 'Shared Subscriptions not supported',\n    159: 'Connection rate exceeded',\n    160: 'Maximum connect time',\n    161: 'Subscription Identifiers not supported',\n    162: 'Wildcard Subscriptions not supported',\n};\nconst handleAck = (client, packet) => {\n    const { messageId } = packet;\n    const type = packet.cmd;\n    let response = null;\n    const cb = client.outgoing[messageId] ? client.outgoing[messageId].cb : null;\n    let err = null;\n    if (!cb) {\n        client.log('_handleAck :: Server sent an ack in error. Ignoring.');\n        return;\n    }\n    client.log('_handleAck :: packet type', type);\n    switch (type) {\n        case 'pubcomp':\n        case 'puback': {\n            const pubackRC = packet.reasonCode;\n            if (pubackRC && pubackRC > 0 && pubackRC !== 16) {\n                err = new shared_1.ErrorWithReasonCode(`Publish error: ${exports.ReasonCodes[pubackRC]}`, pubackRC);\n                client['_removeOutgoingAndStoreMessage'](messageId, () => {\n                    cb(err, packet);\n                });\n            }\n            else {\n                client['_removeOutgoingAndStoreMessage'](messageId, cb);\n            }\n            break;\n        }\n        case 'pubrec': {\n            response = {\n                cmd: 'pubrel',\n                qos: 2,\n                messageId,\n            };\n            const pubrecRC = packet.reasonCode;\n            if (pubrecRC && pubrecRC > 0 && pubrecRC !== 16) {\n                err = new shared_1.ErrorWithReasonCode(`Publish error: ${exports.ReasonCodes[pubrecRC]}`, pubrecRC);\n                client['_removeOutgoingAndStoreMessage'](messageId, () => {\n                    cb(err, packet);\n                });\n            }\n            else {\n                client['_sendPacket'](response);\n            }\n            break;\n        }\n        case 'suback': {\n            delete client.outgoing[messageId];\n            client.messageIdProvider.deallocate(messageId);\n            const granted = packet.granted;\n            for (let grantedI = 0; grantedI < granted.length; grantedI++) {\n                const subackRC = granted[grantedI];\n                if ((subackRC & 0x80) !== 0) {\n                    err = new Error(`Subscribe error: ${exports.ReasonCodes[subackRC]}`);\n                    err.code = subackRC;\n                    const topics = client.messageIdToTopic[messageId];\n                    if (topics) {\n                        topics.forEach((topic) => {\n                            delete client['_resubscribeTopics'][topic];\n                        });\n                    }\n                }\n            }\n            delete client.messageIdToTopic[messageId];\n            client['_invokeStoreProcessingQueue']();\n            cb(err, packet);\n            break;\n        }\n        case 'unsuback': {\n            delete client.outgoing[messageId];\n            client.messageIdProvider.deallocate(messageId);\n            client['_invokeStoreProcessingQueue']();\n            cb(null, packet);\n            break;\n        }\n        default:\n            client.emit('error', new Error('unrecognized packet type'));\n    }\n    if (client.disconnecting && Object.keys(client.outgoing).length === 0) {\n        client.emit('outgoingEmpty');\n    }\n};\nexports.default = handleAck;\n//# sourceMappingURL=ack.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst shared_1 = require(\"../shared\");\nconst ack_1 = require(\"./ack\");\nconst handleAuth = (client, packet) => {\n    const { options } = client;\n    const version = options.protocolVersion;\n    const rc = version === 5 ? packet.reasonCode : packet.returnCode;\n    if (version !== 5) {\n        const err = new shared_1.ErrorWithReasonCode(`Protocol error: Auth packets are only supported in MQTT 5. Your version:${version}`, rc);\n        client.emit('error', err);\n        return;\n    }\n    client.handleAuth(packet, (err, packet2) => {\n        if (err) {\n            client.emit('error', err);\n            return;\n        }\n        if (rc === 24) {\n            client.reconnecting = false;\n            client['_sendPacket'](packet2);\n        }\n        else {\n            const error = new shared_1.ErrorWithReasonCode(`Connection refused: ${ack_1.ReasonCodes[rc]}`, rc);\n            client.emit('error', error);\n        }\n    });\n};\nexports.default = handleAuth;\n//# sourceMappingURL=auth.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ack_1 = require(\"./ack\");\nconst topic_alias_send_1 = __importDefault(require(\"../topic-alias-send\"));\nconst shared_1 = require(\"../shared\");\nconst handleConnack = (client, packet) => {\n    client.log('_handleConnack');\n    const { options } = client;\n    const version = options.protocolVersion;\n    const rc = version === 5 ? packet.reasonCode : packet.returnCode;\n    clearTimeout(client['connackTimer']);\n    delete client['topicAliasSend'];\n    if (packet.properties) {\n        if (packet.properties.topicAliasMaximum) {\n            if (packet.properties.topicAliasMaximum > 0xffff) {\n                client.emit('error', new Error('topicAliasMaximum from broker is out of range'));\n                return;\n            }\n            if (packet.properties.topicAliasMaximum > 0) {\n                client['topicAliasSend'] = new topic_alias_send_1.default(packet.properties.topicAliasMaximum);\n            }\n        }\n        if (packet.properties.serverKeepAlive && options.keepalive) {\n            options.keepalive = packet.properties.serverKeepAlive;\n        }\n        if (packet.properties.maximumPacketSize) {\n            if (!options.properties) {\n                options.properties = {};\n            }\n            options.properties.maximumPacketSize =\n                packet.properties.maximumPacketSize;\n        }\n    }\n    if (rc === 0) {\n        client.reconnecting = false;\n        client['_onConnect'](packet);\n    }\n    else if (rc > 0) {\n        const err = new shared_1.ErrorWithReasonCode(`Connection refused: ${ack_1.ReasonCodes[rc]}`, rc);\n        client.emit('error', err);\n    }\n};\nexports.default = handleConnack;\n//# sourceMappingURL=connack.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst publish_1 = __importDefault(require(\"./publish\"));\nconst auth_1 = __importDefault(require(\"./auth\"));\nconst connack_1 = __importDefault(require(\"./connack\"));\nconst ack_1 = __importDefault(require(\"./ack\"));\nconst pubrel_1 = __importDefault(require(\"./pubrel\"));\nconst handle = (client, packet, done) => {\n    const { options } = client;\n    if (options.protocolVersion === 5 &&\n        options.properties &&\n        options.properties.maximumPacketSize &&\n        options.properties.maximumPacketSize < packet.length) {\n        client.emit('error', new Error(`exceeding packets size ${packet.cmd}`));\n        client.end({\n            reasonCode: 149,\n            properties: { reasonString: 'Maximum packet size was exceeded' },\n        });\n        return client;\n    }\n    client.log('_handlePacket :: emitting packetreceive');\n    client.emit('packetreceive', packet);\n    switch (packet.cmd) {\n        case 'publish':\n            (0, publish_1.default)(client, packet, done);\n            break;\n        case 'puback':\n        case 'pubrec':\n        case 'pubcomp':\n        case 'suback':\n        case 'unsuback':\n            client.reschedulePing();\n            (0, ack_1.default)(client, packet);\n            done();\n            break;\n        case 'pubrel':\n            client.reschedulePing();\n            (0, pubrel_1.default)(client, packet, done);\n            break;\n        case 'connack':\n            (0, connack_1.default)(client, packet);\n            done();\n            break;\n        case 'auth':\n            client.reschedulePing();\n            (0, auth_1.default)(client, packet);\n            done();\n            break;\n        case 'pingresp':\n            client.log('_handlePacket :: received pingresp');\n            client.reschedulePing(true);\n            done();\n            break;\n        case 'disconnect':\n            client.emit('disconnect', packet);\n            done();\n            break;\n        default:\n            client.log('_handlePacket :: unknown command');\n            done();\n            break;\n    }\n};\nexports.default = handle;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst validReasonCodes = [0, 16, 128, 131, 135, 144, 145, 151, 153];\nconst handlePublish = (client, packet, done) => {\n    client.log('handlePublish: packet %o', packet);\n    done = typeof done !== 'undefined' ? done : client.noop;\n    let topic = packet.topic.toString();\n    const message = packet.payload;\n    const { qos } = packet;\n    const { messageId } = packet;\n    const { options } = client;\n    if (client.options.protocolVersion === 5) {\n        let alias;\n        if (packet.properties) {\n            alias = packet.properties.topicAlias;\n        }\n        if (typeof alias !== 'undefined') {\n            if (topic.length === 0) {\n                if (alias > 0 && alias <= 0xffff) {\n                    const gotTopic = client['topicAliasRecv'].getTopicByAlias(alias);\n                    if (gotTopic) {\n                        topic = gotTopic;\n                        client.log('handlePublish :: topic complemented by alias. topic: %s - alias: %d', topic, alias);\n                    }\n                    else {\n                        client.log('handlePublish :: unregistered topic alias. alias: %d', alias);\n                        client.emit('error', new Error('Received unregistered Topic Alias'));\n                        return;\n                    }\n                }\n                else {\n                    client.log('handlePublish :: topic alias out of range. alias: %d', alias);\n                    client.emit('error', new Error('Received Topic Alias is out of range'));\n                    return;\n                }\n            }\n            else if (client['topicAliasRecv'].put(topic, alias)) {\n                client.log('handlePublish :: registered topic: %s - alias: %d', topic, alias);\n            }\n            else {\n                client.log('handlePublish :: topic alias out of range. alias: %d', alias);\n                client.emit('error', new Error('Received Topic Alias is out of range'));\n                return;\n            }\n        }\n    }\n    client.log('handlePublish: qos %d', qos);\n    switch (qos) {\n        case 2: {\n            options.customHandleAcks(topic, message, packet, (error, code) => {\n                if (typeof error === 'number') {\n                    code = error;\n                    error = null;\n                }\n                if (error) {\n                    return client.emit('error', error);\n                }\n                if (validReasonCodes.indexOf(code) === -1) {\n                    return client.emit('error', new Error('Wrong reason code for pubrec'));\n                }\n                if (code) {\n                    client['_sendPacket']({ cmd: 'pubrec', messageId, reasonCode: code }, done);\n                }\n                else {\n                    client.incomingStore.put(packet, () => {\n                        client['_sendPacket']({ cmd: 'pubrec', messageId }, done);\n                    });\n                }\n            });\n            break;\n        }\n        case 1: {\n            options.customHandleAcks(topic, message, packet, (error, code) => {\n                if (typeof error === 'number') {\n                    code = error;\n                    error = null;\n                }\n                if (error) {\n                    return client.emit('error', error);\n                }\n                if (validReasonCodes.indexOf(code) === -1) {\n                    return client.emit('error', new Error('Wrong reason code for puback'));\n                }\n                if (!code) {\n                    client.emit('message', topic, message, packet);\n                }\n                client.handleMessage(packet, (err) => {\n                    if (err) {\n                        return done && done(err);\n                    }\n                    client['_sendPacket']({ cmd: 'puback', messageId, reasonCode: code }, done);\n                });\n            });\n            break;\n        }\n        case 0:\n            client.emit('message', topic, message, packet);\n            client.handleMessage(packet, done);\n            break;\n        default:\n            client.log('handlePublish: unknown QoS. Doing nothing.');\n            break;\n    }\n};\nexports.default = handlePublish;\n//# sourceMappingURL=publish.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst handlePubrel = (client, packet, done) => {\n    client.log('handling pubrel packet');\n    const callback = typeof done !== 'undefined' ? done : client.noop;\n    const { messageId } = packet;\n    const comp = { cmd: 'pubcomp', messageId };\n    client.incomingStore.get(packet, (err, pub) => {\n        if (!err) {\n            client.emit('message', pub.topic, pub.payload, pub);\n            client.handleMessage(pub, (err2) => {\n                if (err2) {\n                    return callback(err2);\n                }\n                client.incomingStore.del(pub, client.noop);\n                client['_sendPacket'](comp, callback);\n            });\n        }\n        else {\n            client['_sendPacket'](comp, callback);\n        }\n    });\n};\nexports.default = handlePubrel;\n//# sourceMappingURL=pubrel.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isReactNativeBrowser = exports.isWebWorker = void 0;\nconst isStandardBrowserEnv = () => {\n    var _a;\n    if (typeof window !== 'undefined') {\n        const electronRenderCheck = typeof navigator !== 'undefined' &&\n            ((_a = navigator.userAgent) === null || _a === void 0 ? void 0 : _a.toLowerCase().indexOf(' electron/')) > -1;\n        if (electronRenderCheck && (process === null || process === void 0 ? void 0 : process.versions)) {\n            const electronMainCheck = Object.prototype.hasOwnProperty.call(process.versions, 'electron');\n            return !electronMainCheck;\n        }\n        return typeof window.document !== 'undefined';\n    }\n    return false;\n};\nconst isWebWorkerEnv = () => {\n    var _a, _b;\n    return Boolean(typeof self === 'object' &&\n        ((_b = (_a = self === null || self === void 0 ? void 0 : self.constructor) === null || _a === void 0 ? void 0 : _a.name) === null || _b === void 0 ? void 0 : _b.includes('WorkerGlobalScope')));\n};\nconst isReactNativeEnv = () => typeof navigator !== 'undefined' && navigator.product === 'ReactNative';\nconst isBrowser = isStandardBrowserEnv() || isWebWorkerEnv() || isReactNativeEnv();\nexports.isWebWorker = isWebWorkerEnv();\nexports.isReactNativeBrowser = isReactNativeEnv();\nexports.default = isBrowser;\n//# sourceMappingURL=is-browser.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.MQTTJS_VERSION = exports.nextTick = exports.applyMixin = exports.ErrorWithReasonCode = void 0;\nclass ErrorWithReasonCode extends Error {\n    constructor(message, code) {\n        super(message);\n        this.code = code;\n        Object.setPrototypeOf(this, ErrorWithReasonCode.prototype);\n        Object.getPrototypeOf(this).name = 'ErrorWithReasonCode';\n    }\n}\nexports.ErrorWithReasonCode = ErrorWithReasonCode;\nfunction applyMixin(target, mixin, includeConstructor = false) {\n    var _a;\n    const inheritanceChain = [mixin];\n    while (true) {\n        const current = inheritanceChain[0];\n        const base = Object.getPrototypeOf(current);\n        if (base === null || base === void 0 ? void 0 : base.prototype) {\n            inheritanceChain.unshift(base);\n        }\n        else {\n            break;\n        }\n    }\n    for (const ctor of inheritanceChain) {\n        for (const prop of Object.getOwnPropertyNames(ctor.prototype)) {\n            if (includeConstructor || prop !== 'constructor') {\n                Object.defineProperty(target.prototype, prop, (_a = Object.getOwnPropertyDescriptor(ctor.prototype, prop)) !== null && _a !== void 0 ? _a : Object.create(null));\n            }\n        }\n    }\n}\nexports.applyMixin = applyMixin;\nexports.nextTick = typeof (process === null || process === void 0 ? void 0 : process.nextTick) === 'function'\n    ? process.nextTick\n    : (callback) => {\n        setTimeout(callback, 0);\n    };\nexports.MQTTJS_VERSION = require('../../package.json').version;\n//# sourceMappingURL=shared.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst readable_stream_1 = require(\"readable-stream\");\nconst streamsOpts = { objectMode: true };\nconst defaultStoreOptions = {\n    clean: true,\n};\nclass Store {\n    constructor(options) {\n        this.options = options || {};\n        this.options = Object.assign(Object.assign({}, defaultStoreOptions), options);\n        this._inflights = new Map();\n    }\n    put(packet, cb) {\n        this._inflights.set(packet.messageId, packet);\n        if (cb) {\n            cb();\n        }\n        return this;\n    }\n    createStream() {\n        const stream = new readable_stream_1.Readable(streamsOpts);\n        const values = [];\n        let destroyed = false;\n        let i = 0;\n        this._inflights.forEach((value, key) => {\n            values.push(value);\n        });\n        stream._read = () => {\n            if (!destroyed && i < values.length) {\n                stream.push(values[i++]);\n            }\n            else {\n                stream.push(null);\n            }\n        };\n        stream.destroy = (err) => {\n            if (destroyed) {\n                return;\n            }\n            destroyed = true;\n            setTimeout(() => {\n                stream.emit('close');\n            }, 0);\n            return stream;\n        };\n        return stream;\n    }\n    del(packet, cb) {\n        const toDelete = this._inflights.get(packet.messageId);\n        if (toDelete) {\n            this._inflights.delete(packet.messageId);\n            cb(null, toDelete);\n        }\n        else if (cb) {\n            cb(new Error('missing packet'));\n        }\n        return this;\n    }\n    get(packet, cb) {\n        const storedPacket = this._inflights.get(packet.messageId);\n        if (storedPacket) {\n            cb(null, storedPacket);\n        }\n        else if (cb) {\n            cb(new Error('missing packet'));\n        }\n        return this;\n    }\n    close(cb) {\n        if (this.options.clean) {\n            this._inflights = null;\n        }\n        if (cb) {\n            cb();\n        }\n    }\n}\nexports.default = Store;\n//# sourceMappingURL=store.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass TopicAliasRecv {\n    constructor(max) {\n        this.aliasToTopic = {};\n        this.max = max;\n    }\n    put(topic, alias) {\n        if (alias === 0 || alias > this.max) {\n            return false;\n        }\n        this.aliasToTopic[alias] = topic;\n        this.length = Object.keys(this.aliasToTopic).length;\n        return true;\n    }\n    getTopicByAlias(alias) {\n        return this.aliasToTopic[alias];\n    }\n    clear() {\n        this.aliasToTopic = {};\n    }\n}\nexports.default = TopicAliasRecv;\n//# sourceMappingURL=topic-alias-recv.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst lru_cache_1 = require(\"lru-cache\");\nconst number_allocator_1 = require(\"number-allocator\");\nclass TopicAliasSend {\n    constructor(max) {\n        if (max > 0) {\n            this.aliasToTopic = new lru_cache_1.LRUCache({ max });\n            this.topicToAlias = {};\n            this.numberAllocator = new number_allocator_1.NumberAllocator(1, max);\n            this.max = max;\n            this.length = 0;\n        }\n    }\n    put(topic, alias) {\n        if (alias === 0 || alias > this.max) {\n            return false;\n        }\n        const entry = this.aliasToTopic.get(alias);\n        if (entry) {\n            delete this.topicToAlias[entry];\n        }\n        this.aliasToTopic.set(alias, topic);\n        this.topicToAlias[topic] = alias;\n        this.numberAllocator.use(alias);\n        this.length = this.aliasToTopic.size;\n        return true;\n    }\n    getTopicByAlias(alias) {\n        return this.aliasToTopic.get(alias);\n    }\n    getAliasByTopic(topic) {\n        const alias = this.topicToAlias[topic];\n        if (typeof alias !== 'undefined') {\n            this.aliasToTopic.get(alias);\n        }\n        return alias;\n    }\n    clear() {\n        this.aliasToTopic.clear();\n        this.topicToAlias = {};\n        this.numberAllocator.clear();\n        this.length = 0;\n    }\n    getLruAlias() {\n        const alias = this.numberAllocator.firstVacant();\n        if (alias)\n            return alias;\n        return [...this.aliasToTopic.keys()][this.aliasToTopic.size - 1];\n    }\n}\nexports.default = TopicAliasSend;\n//# sourceMappingURL=topic-alias-send.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst number_allocator_1 = require(\"number-allocator\");\nclass UniqueMessageIdProvider {\n    constructor() {\n        this.numberAllocator = new number_allocator_1.NumberAllocator(1, 65535);\n    }\n    allocate() {\n        this.lastId = this.numberAllocator.alloc();\n        return this.lastId;\n    }\n    getLastAllocated() {\n        return this.lastId;\n    }\n    register(messageId) {\n        return this.numberAllocator.use(messageId);\n    }\n    deallocate(messageId) {\n        this.numberAllocator.free(messageId);\n    }\n    clear() {\n        this.numberAllocator.clear();\n    }\n}\nexports.default = UniqueMessageIdProvider;\n//# sourceMappingURL=unique-message-id-provider.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateTopics = exports.validateTopic = void 0;\nfunction validateTopic(topic) {\n    const parts = topic.split('/');\n    for (let i = 0; i < parts.length; i++) {\n        if (parts[i] === '+') {\n            continue;\n        }\n        if (parts[i] === '#') {\n            return i === parts.length - 1;\n        }\n        if (parts[i].indexOf('+') !== -1 || parts[i].indexOf('#') !== -1) {\n            return false;\n        }\n    }\n    return true;\n}\nexports.validateTopic = validateTopic;\nfunction validateTopics(topics) {\n    if (topics.length === 0) {\n        return 'empty_topic_list';\n    }\n    for (let i = 0; i < topics.length; i++) {\n        if (!validateTopic(topics[i])) {\n            return topics[i];\n        }\n    }\n    return null;\n}\nexports.validateTopics = validateTopics;\n//# sourceMappingURL=validations.js.map","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    var desc = Object.getOwnPropertyDescriptor(m, k);\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n    }\n    Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ReasonCodes = exports.KeepaliveManager = exports.UniqueMessageIdProvider = exports.DefaultMessageIdProvider = exports.Store = exports.MqttClient = exports.connectAsync = exports.connect = exports.Client = void 0;\nconst client_1 = __importDefault(require(\"./lib/client\"));\nexports.MqttClient = client_1.default;\nconst default_message_id_provider_1 = __importDefault(require(\"./lib/default-message-id-provider\"));\nexports.DefaultMessageIdProvider = default_message_id_provider_1.default;\nconst unique_message_id_provider_1 = __importDefault(require(\"./lib/unique-message-id-provider\"));\nexports.UniqueMessageIdProvider = unique_message_id_provider_1.default;\nconst store_1 = __importDefault(require(\"./lib/store\"));\nexports.Store = store_1.default;\nconst connect_1 = __importStar(require(\"./lib/connect\"));\nexports.connect = connect_1.default;\nObject.defineProperty(exports, \"connectAsync\", { enumerable: true, get: function () { return connect_1.connectAsync; } });\nconst KeepaliveManager_1 = __importDefault(require(\"./lib/KeepaliveManager\"));\nexports.KeepaliveManager = KeepaliveManager_1.default;\nexports.Client = client_1.default;\n__exportStar(require(\"./lib/client\"), exports);\n__exportStar(require(\"./lib/shared\"), exports);\nvar ack_1 = require(\"./lib/handlers/ack\");\nObject.defineProperty(exports, \"ReasonCodes\", { enumerable: true, get: function () { return ack_1.ReasonCodes; } });\n//# sourceMappingURL=mqtt.js.map","'use strict'\n\nconst { SymbolDispose } = require('../../ours/primordials')\nconst { AbortError, codes } = require('../../ours/errors')\nconst { isNodeStream, isWebStream, kControllerErrorFunction } = require('./utils')\nconst eos = require('./end-of-stream')\nconst { ERR_INVALID_ARG_TYPE } = codes\nlet addAbortListener\n\n// This method is inlined here for readable-stream\n// It also does not allow for signal to not exist on the stream\n// https://github.com/nodejs/node/pull/36061#discussion_r533718029\nconst validateAbortSignal = (signal, name) => {\n  if (typeof signal !== 'object' || !('aborted' in signal)) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'AbortSignal', signal)\n  }\n}\nmodule.exports.addAbortSignal = function addAbortSignal(signal, stream) {\n  validateAbortSignal(signal, 'signal')\n  if (!isNodeStream(stream) && !isWebStream(stream)) {\n    throw new ERR_INVALID_ARG_TYPE('stream', ['ReadableStream', 'WritableStream', 'Stream'], stream)\n  }\n  return module.exports.addAbortSignalNoValidate(signal, stream)\n}\nmodule.exports.addAbortSignalNoValidate = function (signal, stream) {\n  if (typeof signal !== 'object' || !('aborted' in signal)) {\n    return stream\n  }\n  const onAbort = isNodeStream(stream)\n    ? () => {\n        stream.destroy(\n          new AbortError(undefined, {\n            cause: signal.reason\n          })\n        )\n      }\n    : () => {\n        stream[kControllerErrorFunction](\n          new AbortError(undefined, {\n            cause: signal.reason\n          })\n        )\n      }\n  if (signal.aborted) {\n    onAbort()\n  } else {\n    addAbortListener = addAbortListener || require('../../ours/util').addAbortListener\n    const disposable = addAbortListener(signal, onAbort)\n    eos(stream, disposable[SymbolDispose])\n  }\n  return stream\n}\n","'use strict'\n\nconst { StringPrototypeSlice, SymbolIterator, TypedArrayPrototypeSet, Uint8Array } = require('../../ours/primordials')\nconst { Buffer } = require('buffer')\nconst { inspect } = require('../../ours/util')\nmodule.exports = class BufferList {\n  constructor() {\n    this.head = null\n    this.tail = null\n    this.length = 0\n  }\n  push(v) {\n    const entry = {\n      data: v,\n      next: null\n    }\n    if (this.length > 0) this.tail.next = entry\n    else this.head = entry\n    this.tail = entry\n    ++this.length\n  }\n  unshift(v) {\n    const entry = {\n      data: v,\n      next: this.head\n    }\n    if (this.length === 0) this.tail = entry\n    this.head = entry\n    ++this.length\n  }\n  shift() {\n    if (this.length === 0) return\n    const ret = this.head.data\n    if (this.length === 1) this.head = this.tail = null\n    else this.head = this.head.next\n    --this.length\n    return ret\n  }\n  clear() {\n    this.head = this.tail = null\n    this.length = 0\n  }\n  join(s) {\n    if (this.length === 0) return ''\n    let p = this.head\n    let ret = '' + p.data\n    while ((p = p.next) !== null) ret += s + p.data\n    return ret\n  }\n  concat(n) {\n    if (this.length === 0) return Buffer.alloc(0)\n    const ret = Buffer.allocUnsafe(n >>> 0)\n    let p = this.head\n    let i = 0\n    while (p) {\n      TypedArrayPrototypeSet(ret, p.data, i)\n      i += p.data.length\n      p = p.next\n    }\n    return ret\n  }\n\n  // Consumes a specified amount of bytes or characters from the buffered data.\n  consume(n, hasStrings) {\n    const data = this.head.data\n    if (n < data.length) {\n      // `slice` is the same for buffers and strings.\n      const slice = data.slice(0, n)\n      this.head.data = data.slice(n)\n      return slice\n    }\n    if (n === data.length) {\n      // First chunk is a perfect match.\n      return this.shift()\n    }\n    // Result spans more than one buffer.\n    return hasStrings ? this._getString(n) : this._getBuffer(n)\n  }\n  first() {\n    return this.head.data\n  }\n  *[SymbolIterator]() {\n    for (let p = this.head; p; p = p.next) {\n      yield p.data\n    }\n  }\n\n  // Consumes a specified amount of characters from the buffered data.\n  _getString(n) {\n    let ret = ''\n    let p = this.head\n    let c = 0\n    do {\n      const str = p.data\n      if (n > str.length) {\n        ret += str\n        n -= str.length\n      } else {\n        if (n === str.length) {\n          ret += str\n          ++c\n          if (p.next) this.head = p.next\n          else this.head = this.tail = null\n        } else {\n          ret += StringPrototypeSlice(str, 0, n)\n          this.head = p\n          p.data = StringPrototypeSlice(str, n)\n        }\n        break\n      }\n      ++c\n    } while ((p = p.next) !== null)\n    this.length -= c\n    return ret\n  }\n\n  // Consumes a specified amount of bytes from the buffered data.\n  _getBuffer(n) {\n    const ret = Buffer.allocUnsafe(n)\n    const retLen = n\n    let p = this.head\n    let c = 0\n    do {\n      const buf = p.data\n      if (n > buf.length) {\n        TypedArrayPrototypeSet(ret, buf, retLen - n)\n        n -= buf.length\n      } else {\n        if (n === buf.length) {\n          TypedArrayPrototypeSet(ret, buf, retLen - n)\n          ++c\n          if (p.next) this.head = p.next\n          else this.head = this.tail = null\n        } else {\n          TypedArrayPrototypeSet(ret, new Uint8Array(buf.buffer, buf.byteOffset, n), retLen - n)\n          this.head = p\n          p.data = buf.slice(n)\n        }\n        break\n      }\n      ++c\n    } while ((p = p.next) !== null)\n    this.length -= c\n    return ret\n  }\n\n  // Make sure the linked list only shows the minimal necessary information.\n  [Symbol.for('nodejs.util.inspect.custom')](_, options) {\n    return inspect(this, {\n      ...options,\n      // Only inspect one level.\n      depth: 0,\n      // It should not recurse.\n      customInspect: false\n    })\n  }\n}\n","'use strict'\n\nconst { pipeline } = require('./pipeline')\nconst Duplex = require('./duplex')\nconst { destroyer } = require('./destroy')\nconst {\n  isNodeStream,\n  isReadable,\n  isWritable,\n  isWebStream,\n  isTransformStream,\n  isWritableStream,\n  isReadableStream\n} = require('./utils')\nconst {\n  AbortError,\n  codes: { ERR_INVALID_ARG_VALUE, ERR_MISSING_ARGS }\n} = require('../../ours/errors')\nconst eos = require('./end-of-stream')\nmodule.exports = function compose(...streams) {\n  if (streams.length === 0) {\n    throw new ERR_MISSING_ARGS('streams')\n  }\n  if (streams.length === 1) {\n    return Duplex.from(streams[0])\n  }\n  const orgStreams = [...streams]\n  if (typeof streams[0] === 'function') {\n    streams[0] = Duplex.from(streams[0])\n  }\n  if (typeof streams[streams.length - 1] === 'function') {\n    const idx = streams.length - 1\n    streams[idx] = Duplex.from(streams[idx])\n  }\n  for (let n = 0; n < streams.length; ++n) {\n    if (!isNodeStream(streams[n]) && !isWebStream(streams[n])) {\n      // TODO(ronag): Add checks for non streams.\n      continue\n    }\n    if (\n      n < streams.length - 1 &&\n      !(isReadable(streams[n]) || isReadableStream(streams[n]) || isTransformStream(streams[n]))\n    ) {\n      throw new ERR_INVALID_ARG_VALUE(`streams[${n}]`, orgStreams[n], 'must be readable')\n    }\n    if (n > 0 && !(isWritable(streams[n]) || isWritableStream(streams[n]) || isTransformStream(streams[n]))) {\n      throw new ERR_INVALID_ARG_VALUE(`streams[${n}]`, orgStreams[n], 'must be writable')\n    }\n  }\n  let ondrain\n  let onfinish\n  let onreadable\n  let onclose\n  let d\n  function onfinished(err) {\n    const cb = onclose\n    onclose = null\n    if (cb) {\n      cb(err)\n    } else if (err) {\n      d.destroy(err)\n    } else if (!readable && !writable) {\n      d.destroy()\n    }\n  }\n  const head = streams[0]\n  const tail = pipeline(streams, onfinished)\n  const writable = !!(isWritable(head) || isWritableStream(head) || isTransformStream(head))\n  const readable = !!(isReadable(tail) || isReadableStream(tail) || isTransformStream(tail))\n\n  // TODO(ronag): Avoid double buffering.\n  // Implement Writable/Readable/Duplex traits.\n  // See, https://github.com/nodejs/node/pull/33515.\n  d = new Duplex({\n    // TODO (ronag): highWaterMark?\n    writableObjectMode: !!(head !== null && head !== undefined && head.writableObjectMode),\n    readableObjectMode: !!(tail !== null && tail !== undefined && tail.readableObjectMode),\n    writable,\n    readable\n  })\n  if (writable) {\n    if (isNodeStream(head)) {\n      d._write = function (chunk, encoding, callback) {\n        if (head.write(chunk, encoding)) {\n          callback()\n        } else {\n          ondrain = callback\n        }\n      }\n      d._final = function (callback) {\n        head.end()\n        onfinish = callback\n      }\n      head.on('drain', function () {\n        if (ondrain) {\n          const cb = ondrain\n          ondrain = null\n          cb()\n        }\n      })\n    } else if (isWebStream(head)) {\n      const writable = isTransformStream(head) ? head.writable : head\n      const writer = writable.getWriter()\n      d._write = async function (chunk, encoding, callback) {\n        try {\n          await writer.ready\n          writer.write(chunk).catch(() => {})\n          callback()\n        } catch (err) {\n          callback(err)\n        }\n      }\n      d._final = async function (callback) {\n        try {\n          await writer.ready\n          writer.close().catch(() => {})\n          onfinish = callback\n        } catch (err) {\n          callback(err)\n        }\n      }\n    }\n    const toRead = isTransformStream(tail) ? tail.readable : tail\n    eos(toRead, () => {\n      if (onfinish) {\n        const cb = onfinish\n        onfinish = null\n        cb()\n      }\n    })\n  }\n  if (readable) {\n    if (isNodeStream(tail)) {\n      tail.on('readable', function () {\n        if (onreadable) {\n          const cb = onreadable\n          onreadable = null\n          cb()\n        }\n      })\n      tail.on('end', function () {\n        d.push(null)\n      })\n      d._read = function () {\n        while (true) {\n          const buf = tail.read()\n          if (buf === null) {\n            onreadable = d._read\n            return\n          }\n          if (!d.push(buf)) {\n            return\n          }\n        }\n      }\n    } else if (isWebStream(tail)) {\n      const readable = isTransformStream(tail) ? tail.readable : tail\n      const reader = readable.getReader()\n      d._read = async function () {\n        while (true) {\n          try {\n            const { value, done } = await reader.read()\n            if (!d.push(value)) {\n              return\n            }\n            if (done) {\n              d.push(null)\n              return\n            }\n          } catch {\n            return\n          }\n        }\n      }\n    }\n  }\n  d._destroy = function (err, callback) {\n    if (!err && onclose !== null) {\n      err = new AbortError()\n    }\n    onreadable = null\n    ondrain = null\n    onfinish = null\n    if (onclose === null) {\n      callback(err)\n    } else {\n      onclose = callback\n      if (isNodeStream(tail)) {\n        destroyer(tail, err)\n      }\n    }\n  }\n  return d\n}\n","'use strict'\n\n/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n\nconst {\n  aggregateTwoErrors,\n  codes: { ERR_MULTIPLE_CALLBACK },\n  AbortError\n} = require('../../ours/errors')\nconst { Symbol } = require('../../ours/primordials')\nconst { kIsDestroyed, isDestroyed, isFinished, isServerRequest } = require('./utils')\nconst kDestroy = Symbol('kDestroy')\nconst kConstruct = Symbol('kConstruct')\nfunction checkError(err, w, r) {\n  if (err) {\n    // Avoid V8 leak, https://github.com/nodejs/node/pull/34103#issuecomment-652002364\n    err.stack // eslint-disable-line no-unused-expressions\n\n    if (w && !w.errored) {\n      w.errored = err\n    }\n    if (r && !r.errored) {\n      r.errored = err\n    }\n  }\n}\n\n// Backwards compat. cb() is undocumented and unused in core but\n// unfortunately might be used by modules.\nfunction destroy(err, cb) {\n  const r = this._readableState\n  const w = this._writableState\n  // With duplex streams we use the writable side for state.\n  const s = w || r\n  if ((w !== null && w !== undefined && w.destroyed) || (r !== null && r !== undefined && r.destroyed)) {\n    if (typeof cb === 'function') {\n      cb()\n    }\n    return this\n  }\n\n  // We set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n  checkError(err, w, r)\n  if (w) {\n    w.destroyed = true\n  }\n  if (r) {\n    r.destroyed = true\n  }\n\n  // If still constructing then defer calling _destroy.\n  if (!s.constructed) {\n    this.once(kDestroy, function (er) {\n      _destroy(this, aggregateTwoErrors(er, err), cb)\n    })\n  } else {\n    _destroy(this, err, cb)\n  }\n  return this\n}\nfunction _destroy(self, err, cb) {\n  let called = false\n  function onDestroy(err) {\n    if (called) {\n      return\n    }\n    called = true\n    const r = self._readableState\n    const w = self._writableState\n    checkError(err, w, r)\n    if (w) {\n      w.closed = true\n    }\n    if (r) {\n      r.closed = true\n    }\n    if (typeof cb === 'function') {\n      cb(err)\n    }\n    if (err) {\n      process.nextTick(emitErrorCloseNT, self, err)\n    } else {\n      process.nextTick(emitCloseNT, self)\n    }\n  }\n  try {\n    self._destroy(err || null, onDestroy)\n  } catch (err) {\n    onDestroy(err)\n  }\n}\nfunction emitErrorCloseNT(self, err) {\n  emitErrorNT(self, err)\n  emitCloseNT(self)\n}\nfunction emitCloseNT(self) {\n  const r = self._readableState\n  const w = self._writableState\n  if (w) {\n    w.closeEmitted = true\n  }\n  if (r) {\n    r.closeEmitted = true\n  }\n  if ((w !== null && w !== undefined && w.emitClose) || (r !== null && r !== undefined && r.emitClose)) {\n    self.emit('close')\n  }\n}\nfunction emitErrorNT(self, err) {\n  const r = self._readableState\n  const w = self._writableState\n  if ((w !== null && w !== undefined && w.errorEmitted) || (r !== null && r !== undefined && r.errorEmitted)) {\n    return\n  }\n  if (w) {\n    w.errorEmitted = true\n  }\n  if (r) {\n    r.errorEmitted = true\n  }\n  self.emit('error', err)\n}\nfunction undestroy() {\n  const r = this._readableState\n  const w = this._writableState\n  if (r) {\n    r.constructed = true\n    r.closed = false\n    r.closeEmitted = false\n    r.destroyed = false\n    r.errored = null\n    r.errorEmitted = false\n    r.reading = false\n    r.ended = r.readable === false\n    r.endEmitted = r.readable === false\n  }\n  if (w) {\n    w.constructed = true\n    w.destroyed = false\n    w.closed = false\n    w.closeEmitted = false\n    w.errored = null\n    w.errorEmitted = false\n    w.finalCalled = false\n    w.prefinished = false\n    w.ended = w.writable === false\n    w.ending = w.writable === false\n    w.finished = w.writable === false\n  }\n}\nfunction errorOrDestroy(stream, err, sync) {\n  // We have tests that rely on errors being emitted\n  // in the same tick, so changing this is semver major.\n  // For now when you opt-in to autoDestroy we allow\n  // the error to be emitted nextTick. In a future\n  // semver major update we should change the default to this.\n\n  const r = stream._readableState\n  const w = stream._writableState\n  if ((w !== null && w !== undefined && w.destroyed) || (r !== null && r !== undefined && r.destroyed)) {\n    return this\n  }\n  if ((r !== null && r !== undefined && r.autoDestroy) || (w !== null && w !== undefined && w.autoDestroy))\n    stream.destroy(err)\n  else if (err) {\n    // Avoid V8 leak, https://github.com/nodejs/node/pull/34103#issuecomment-652002364\n    err.stack // eslint-disable-line no-unused-expressions\n\n    if (w && !w.errored) {\n      w.errored = err\n    }\n    if (r && !r.errored) {\n      r.errored = err\n    }\n    if (sync) {\n      process.nextTick(emitErrorNT, stream, err)\n    } else {\n      emitErrorNT(stream, err)\n    }\n  }\n}\nfunction construct(stream, cb) {\n  if (typeof stream._construct !== 'function') {\n    return\n  }\n  const r = stream._readableState\n  const w = stream._writableState\n  if (r) {\n    r.constructed = false\n  }\n  if (w) {\n    w.constructed = false\n  }\n  stream.once(kConstruct, cb)\n  if (stream.listenerCount(kConstruct) > 1) {\n    // Duplex\n    return\n  }\n  process.nextTick(constructNT, stream)\n}\nfunction constructNT(stream) {\n  let called = false\n  function onConstruct(err) {\n    if (called) {\n      errorOrDestroy(stream, err !== null && err !== undefined ? err : new ERR_MULTIPLE_CALLBACK())\n      return\n    }\n    called = true\n    const r = stream._readableState\n    const w = stream._writableState\n    const s = w || r\n    if (r) {\n      r.constructed = true\n    }\n    if (w) {\n      w.constructed = true\n    }\n    if (s.destroyed) {\n      stream.emit(kDestroy, err)\n    } else if (err) {\n      errorOrDestroy(stream, err, true)\n    } else {\n      process.nextTick(emitConstructNT, stream)\n    }\n  }\n  try {\n    stream._construct((err) => {\n      process.nextTick(onConstruct, err)\n    })\n  } catch (err) {\n    process.nextTick(onConstruct, err)\n  }\n}\nfunction emitConstructNT(stream) {\n  stream.emit(kConstruct)\n}\nfunction isRequest(stream) {\n  return (stream === null || stream === undefined ? undefined : stream.setHeader) && typeof stream.abort === 'function'\n}\nfunction emitCloseLegacy(stream) {\n  stream.emit('close')\n}\nfunction emitErrorCloseLegacy(stream, err) {\n  stream.emit('error', err)\n  process.nextTick(emitCloseLegacy, stream)\n}\n\n// Normalize destroy for legacy.\nfunction destroyer(stream, err) {\n  if (!stream || isDestroyed(stream)) {\n    return\n  }\n  if (!err && !isFinished(stream)) {\n    err = new AbortError()\n  }\n\n  // TODO: Remove isRequest branches.\n  if (isServerRequest(stream)) {\n    stream.socket = null\n    stream.destroy(err)\n  } else if (isRequest(stream)) {\n    stream.abort()\n  } else if (isRequest(stream.req)) {\n    stream.req.abort()\n  } else if (typeof stream.destroy === 'function') {\n    stream.destroy(err)\n  } else if (typeof stream.close === 'function') {\n    // TODO: Don't lose err?\n    stream.close()\n  } else if (err) {\n    process.nextTick(emitErrorCloseLegacy, stream, err)\n  } else {\n    process.nextTick(emitCloseLegacy, stream)\n  }\n  if (!stream.destroyed) {\n    stream[kIsDestroyed] = true\n  }\n}\nmodule.exports = {\n  construct,\n  destroyer,\n  destroy,\n  undestroy,\n  errorOrDestroy\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototype inheritance, this class\n// prototypically inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict'\n\nconst {\n  ObjectDefineProperties,\n  ObjectGetOwnPropertyDescriptor,\n  ObjectKeys,\n  ObjectSetPrototypeOf\n} = require('../../ours/primordials')\nmodule.exports = Duplex\nconst Readable = require('./readable')\nconst Writable = require('./writable')\nObjectSetPrototypeOf(Duplex.prototype, Readable.prototype)\nObjectSetPrototypeOf(Duplex, Readable)\n{\n  const keys = ObjectKeys(Writable.prototype)\n  // Allow the keys array to be GC'ed.\n  for (let i = 0; i < keys.length; i++) {\n    const method = keys[i]\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method]\n  }\n}\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options)\n  Readable.call(this, options)\n  Writable.call(this, options)\n  if (options) {\n    this.allowHalfOpen = options.allowHalfOpen !== false\n    if (options.readable === false) {\n      this._readableState.readable = false\n      this._readableState.ended = true\n      this._readableState.endEmitted = true\n    }\n    if (options.writable === false) {\n      this._writableState.writable = false\n      this._writableState.ending = true\n      this._writableState.ended = true\n      this._writableState.finished = true\n    }\n  } else {\n    this.allowHalfOpen = true\n  }\n}\nObjectDefineProperties(Duplex.prototype, {\n  writable: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writable')\n  },\n  writableHighWaterMark: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableHighWaterMark')\n  },\n  writableObjectMode: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableObjectMode')\n  },\n  writableBuffer: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableBuffer')\n  },\n  writableLength: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableLength')\n  },\n  writableFinished: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableFinished')\n  },\n  writableCorked: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableCorked')\n  },\n  writableEnded: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableEnded')\n  },\n  writableNeedDrain: {\n    __proto__: null,\n    ...ObjectGetOwnPropertyDescriptor(Writable.prototype, 'writableNeedDrain')\n  },\n  destroyed: {\n    __proto__: null,\n    get() {\n      if (this._readableState === undefined || this._writableState === undefined) {\n        return false\n      }\n      return this._readableState.destroyed && this._writableState.destroyed\n    },\n    set(value) {\n      // Backward compatibility, the user is explicitly\n      // managing destroyed.\n      if (this._readableState && this._writableState) {\n        this._readableState.destroyed = value\n        this._writableState.destroyed = value\n      }\n    }\n  }\n})\nlet webStreamsAdapters\n\n// Lazy to avoid circular references\nfunction lazyWebStreams() {\n  if (webStreamsAdapters === undefined) webStreamsAdapters = {}\n  return webStreamsAdapters\n}\nDuplex.fromWeb = function (pair, options) {\n  return lazyWebStreams().newStreamDuplexFromReadableWritablePair(pair, options)\n}\nDuplex.toWeb = function (duplex) {\n  return lazyWebStreams().newReadableWritablePairFromDuplex(duplex)\n}\nlet duplexify\nDuplex.from = function (body) {\n  if (!duplexify) {\n    duplexify = require('./duplexify')\n  }\n  return duplexify(body, 'body')\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n\n;('use strict')\nconst bufferModule = require('buffer')\nconst {\n  isReadable,\n  isWritable,\n  isIterable,\n  isNodeStream,\n  isReadableNodeStream,\n  isWritableNodeStream,\n  isDuplexNodeStream,\n  isReadableStream,\n  isWritableStream\n} = require('./utils')\nconst eos = require('./end-of-stream')\nconst {\n  AbortError,\n  codes: { ERR_INVALID_ARG_TYPE, ERR_INVALID_RETURN_VALUE }\n} = require('../../ours/errors')\nconst { destroyer } = require('./destroy')\nconst Duplex = require('./duplex')\nconst Readable = require('./readable')\nconst Writable = require('./writable')\nconst { createDeferredPromise } = require('../../ours/util')\nconst from = require('./from')\nconst Blob = globalThis.Blob || bufferModule.Blob\nconst isBlob =\n  typeof Blob !== 'undefined'\n    ? function isBlob(b) {\n        return b instanceof Blob\n      }\n    : function isBlob(b) {\n        return false\n      }\nconst AbortController = globalThis.AbortController || require('abort-controller').AbortController\nconst { FunctionPrototypeCall } = require('../../ours/primordials')\n\n// This is needed for pre node 17.\nclass Duplexify extends Duplex {\n  constructor(options) {\n    super(options)\n\n    // https://github.com/nodejs/node/pull/34385\n\n    if ((options === null || options === undefined ? undefined : options.readable) === false) {\n      this._readableState.readable = false\n      this._readableState.ended = true\n      this._readableState.endEmitted = true\n    }\n    if ((options === null || options === undefined ? undefined : options.writable) === false) {\n      this._writableState.writable = false\n      this._writableState.ending = true\n      this._writableState.ended = true\n      this._writableState.finished = true\n    }\n  }\n}\nmodule.exports = function duplexify(body, name) {\n  if (isDuplexNodeStream(body)) {\n    return body\n  }\n  if (isReadableNodeStream(body)) {\n    return _duplexify({\n      readable: body\n    })\n  }\n  if (isWritableNodeStream(body)) {\n    return _duplexify({\n      writable: body\n    })\n  }\n  if (isNodeStream(body)) {\n    return _duplexify({\n      writable: false,\n      readable: false\n    })\n  }\n  if (isReadableStream(body)) {\n    return _duplexify({\n      readable: Readable.fromWeb(body)\n    })\n  }\n  if (isWritableStream(body)) {\n    return _duplexify({\n      writable: Writable.fromWeb(body)\n    })\n  }\n  if (typeof body === 'function') {\n    const { value, write, final, destroy } = fromAsyncGen(body)\n    if (isIterable(value)) {\n      return from(Duplexify, value, {\n        // TODO (ronag): highWaterMark?\n        objectMode: true,\n        write,\n        final,\n        destroy\n      })\n    }\n    const then = value === null || value === undefined ? undefined : value.then\n    if (typeof then === 'function') {\n      let d\n      const promise = FunctionPrototypeCall(\n        then,\n        value,\n        (val) => {\n          if (val != null) {\n            throw new ERR_INVALID_RETURN_VALUE('nully', 'body', val)\n          }\n        },\n        (err) => {\n          destroyer(d, err)\n        }\n      )\n      return (d = new Duplexify({\n        // TODO (ronag): highWaterMark?\n        objectMode: true,\n        readable: false,\n        write,\n        final(cb) {\n          final(async () => {\n            try {\n              await promise\n              process.nextTick(cb, null)\n            } catch (err) {\n              process.nextTick(cb, err)\n            }\n          })\n        },\n        destroy\n      }))\n    }\n    throw new ERR_INVALID_RETURN_VALUE('Iterable, AsyncIterable or AsyncFunction', name, value)\n  }\n  if (isBlob(body)) {\n    return duplexify(body.arrayBuffer())\n  }\n  if (isIterable(body)) {\n    return from(Duplexify, body, {\n      // TODO (ronag): highWaterMark?\n      objectMode: true,\n      writable: false\n    })\n  }\n  if (\n    isReadableStream(body === null || body === undefined ? undefined : body.readable) &&\n    isWritableStream(body === null || body === undefined ? undefined : body.writable)\n  ) {\n    return Duplexify.fromWeb(body)\n  }\n  if (\n    typeof (body === null || body === undefined ? undefined : body.writable) === 'object' ||\n    typeof (body === null || body === undefined ? undefined : body.readable) === 'object'\n  ) {\n    const readable =\n      body !== null && body !== undefined && body.readable\n        ? isReadableNodeStream(body === null || body === undefined ? undefined : body.readable)\n          ? body === null || body === undefined\n            ? undefined\n            : body.readable\n          : duplexify(body.readable)\n        : undefined\n    const writable =\n      body !== null && body !== undefined && body.writable\n        ? isWritableNodeStream(body === null || body === undefined ? undefined : body.writable)\n          ? body === null || body === undefined\n            ? undefined\n            : body.writable\n          : duplexify(body.writable)\n        : undefined\n    return _duplexify({\n      readable,\n      writable\n    })\n  }\n  const then = body === null || body === undefined ? undefined : body.then\n  if (typeof then === 'function') {\n    let d\n    FunctionPrototypeCall(\n      then,\n      body,\n      (val) => {\n        if (val != null) {\n          d.push(val)\n        }\n        d.push(null)\n      },\n      (err) => {\n        destroyer(d, err)\n      }\n    )\n    return (d = new Duplexify({\n      objectMode: true,\n      writable: false,\n      read() {}\n    }))\n  }\n  throw new ERR_INVALID_ARG_TYPE(\n    name,\n    [\n      'Blob',\n      'ReadableStream',\n      'WritableStream',\n      'Stream',\n      'Iterable',\n      'AsyncIterable',\n      'Function',\n      '{ readable, writable } pair',\n      'Promise'\n    ],\n    body\n  )\n}\nfunction fromAsyncGen(fn) {\n  let { promise, resolve } = createDeferredPromise()\n  const ac = new AbortController()\n  const signal = ac.signal\n  const value = fn(\n    (async function* () {\n      while (true) {\n        const _promise = promise\n        promise = null\n        const { chunk, done, cb } = await _promise\n        process.nextTick(cb)\n        if (done) return\n        if (signal.aborted)\n          throw new AbortError(undefined, {\n            cause: signal.reason\n          })\n        ;({ promise, resolve } = createDeferredPromise())\n        yield chunk\n      }\n    })(),\n    {\n      signal\n    }\n  )\n  return {\n    value,\n    write(chunk, encoding, cb) {\n      const _resolve = resolve\n      resolve = null\n      _resolve({\n        chunk,\n        done: false,\n        cb\n      })\n    },\n    final(cb) {\n      const _resolve = resolve\n      resolve = null\n      _resolve({\n        done: true,\n        cb\n      })\n    },\n    destroy(err, cb) {\n      ac.abort()\n      cb(err)\n    }\n  }\n}\nfunction _duplexify(pair) {\n  const r = pair.readable && typeof pair.readable.read !== 'function' ? Readable.wrap(pair.readable) : pair.readable\n  const w = pair.writable\n  let readable = !!isReadable(r)\n  let writable = !!isWritable(w)\n  let ondrain\n  let onfinish\n  let onreadable\n  let onclose\n  let d\n  function onfinished(err) {\n    const cb = onclose\n    onclose = null\n    if (cb) {\n      cb(err)\n    } else if (err) {\n      d.destroy(err)\n    }\n  }\n\n  // TODO(ronag): Avoid double buffering.\n  // Implement Writable/Readable/Duplex traits.\n  // See, https://github.com/nodejs/node/pull/33515.\n  d = new Duplexify({\n    // TODO (ronag): highWaterMark?\n    readableObjectMode: !!(r !== null && r !== undefined && r.readableObjectMode),\n    writableObjectMode: !!(w !== null && w !== undefined && w.writableObjectMode),\n    readable,\n    writable\n  })\n  if (writable) {\n    eos(w, (err) => {\n      writable = false\n      if (err) {\n        destroyer(r, err)\n      }\n      onfinished(err)\n    })\n    d._write = function (chunk, encoding, callback) {\n      if (w.write(chunk, encoding)) {\n        callback()\n      } else {\n        ondrain = callback\n      }\n    }\n    d._final = function (callback) {\n      w.end()\n      onfinish = callback\n    }\n    w.on('drain', function () {\n      if (ondrain) {\n        const cb = ondrain\n        ondrain = null\n        cb()\n      }\n    })\n    w.on('finish', function () {\n      if (onfinish) {\n        const cb = onfinish\n        onfinish = null\n        cb()\n      }\n    })\n  }\n  if (readable) {\n    eos(r, (err) => {\n      readable = false\n      if (err) {\n        destroyer(r, err)\n      }\n      onfinished(err)\n    })\n    r.on('readable', function () {\n      if (onreadable) {\n        const cb = onreadable\n        onreadable = null\n        cb()\n      }\n    })\n    r.on('end', function () {\n      d.push(null)\n    })\n    d._read = function () {\n      while (true) {\n        const buf = r.read()\n        if (buf === null) {\n          onreadable = d._read\n          return\n        }\n        if (!d.push(buf)) {\n          return\n        }\n      }\n    }\n  }\n  d._destroy = function (err, callback) {\n    if (!err && onclose !== null) {\n      err = new AbortError()\n    }\n    onreadable = null\n    ondrain = null\n    onfinish = null\n    if (onclose === null) {\n      callback(err)\n    } else {\n      onclose = callback\n      destroyer(w, err)\n      destroyer(r, err)\n    }\n  }\n  return d\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n// Ported from https://github.com/mafintosh/end-of-stream with\n// permission from the author, Mathias Buus (@mafintosh).\n\n;('use strict')\nconst { AbortError, codes } = require('../../ours/errors')\nconst { ERR_INVALID_ARG_TYPE, ERR_STREAM_PREMATURE_CLOSE } = codes\nconst { kEmptyObject, once } = require('../../ours/util')\nconst { validateAbortSignal, validateFunction, validateObject, validateBoolean } = require('../validators')\nconst { Promise, PromisePrototypeThen, SymbolDispose } = require('../../ours/primordials')\nconst {\n  isClosed,\n  isReadable,\n  isReadableNodeStream,\n  isReadableStream,\n  isReadableFinished,\n  isReadableErrored,\n  isWritable,\n  isWritableNodeStream,\n  isWritableStream,\n  isWritableFinished,\n  isWritableErrored,\n  isNodeStream,\n  willEmitClose: _willEmitClose,\n  kIsClosedPromise\n} = require('./utils')\nlet addAbortListener\nfunction isRequest(stream) {\n  return stream.setHeader && typeof stream.abort === 'function'\n}\nconst nop = () => {}\nfunction eos(stream, options, callback) {\n  var _options$readable, _options$writable\n  if (arguments.length === 2) {\n    callback = options\n    options = kEmptyObject\n  } else if (options == null) {\n    options = kEmptyObject\n  } else {\n    validateObject(options, 'options')\n  }\n  validateFunction(callback, 'callback')\n  validateAbortSignal(options.signal, 'options.signal')\n  callback = once(callback)\n  if (isReadableStream(stream) || isWritableStream(stream)) {\n    return eosWeb(stream, options, callback)\n  }\n  if (!isNodeStream(stream)) {\n    throw new ERR_INVALID_ARG_TYPE('stream', ['ReadableStream', 'WritableStream', 'Stream'], stream)\n  }\n  const readable =\n    (_options$readable = options.readable) !== null && _options$readable !== undefined\n      ? _options$readable\n      : isReadableNodeStream(stream)\n  const writable =\n    (_options$writable = options.writable) !== null && _options$writable !== undefined\n      ? _options$writable\n      : isWritableNodeStream(stream)\n  const wState = stream._writableState\n  const rState = stream._readableState\n  const onlegacyfinish = () => {\n    if (!stream.writable) {\n      onfinish()\n    }\n  }\n\n  // TODO (ronag): Improve soft detection to include core modules and\n  // common ecosystem modules that do properly emit 'close' but fail\n  // this generic check.\n  let willEmitClose =\n    _willEmitClose(stream) && isReadableNodeStream(stream) === readable && isWritableNodeStream(stream) === writable\n  let writableFinished = isWritableFinished(stream, false)\n  const onfinish = () => {\n    writableFinished = true\n    // Stream should not be destroyed here. If it is that\n    // means that user space is doing something differently and\n    // we cannot trust willEmitClose.\n    if (stream.destroyed) {\n      willEmitClose = false\n    }\n    if (willEmitClose && (!stream.readable || readable)) {\n      return\n    }\n    if (!readable || readableFinished) {\n      callback.call(stream)\n    }\n  }\n  let readableFinished = isReadableFinished(stream, false)\n  const onend = () => {\n    readableFinished = true\n    // Stream should not be destroyed here. If it is that\n    // means that user space is doing something differently and\n    // we cannot trust willEmitClose.\n    if (stream.destroyed) {\n      willEmitClose = false\n    }\n    if (willEmitClose && (!stream.writable || writable)) {\n      return\n    }\n    if (!writable || writableFinished) {\n      callback.call(stream)\n    }\n  }\n  const onerror = (err) => {\n    callback.call(stream, err)\n  }\n  let closed = isClosed(stream)\n  const onclose = () => {\n    closed = true\n    const errored = isWritableErrored(stream) || isReadableErrored(stream)\n    if (errored && typeof errored !== 'boolean') {\n      return callback.call(stream, errored)\n    }\n    if (readable && !readableFinished && isReadableNodeStream(stream, true)) {\n      if (!isReadableFinished(stream, false)) return callback.call(stream, new ERR_STREAM_PREMATURE_CLOSE())\n    }\n    if (writable && !writableFinished) {\n      if (!isWritableFinished(stream, false)) return callback.call(stream, new ERR_STREAM_PREMATURE_CLOSE())\n    }\n    callback.call(stream)\n  }\n  const onclosed = () => {\n    closed = true\n    const errored = isWritableErrored(stream) || isReadableErrored(stream)\n    if (errored && typeof errored !== 'boolean') {\n      return callback.call(stream, errored)\n    }\n    callback.call(stream)\n  }\n  const onrequest = () => {\n    stream.req.on('finish', onfinish)\n  }\n  if (isRequest(stream)) {\n    stream.on('complete', onfinish)\n    if (!willEmitClose) {\n      stream.on('abort', onclose)\n    }\n    if (stream.req) {\n      onrequest()\n    } else {\n      stream.on('request', onrequest)\n    }\n  } else if (writable && !wState) {\n    // legacy streams\n    stream.on('end', onlegacyfinish)\n    stream.on('close', onlegacyfinish)\n  }\n\n  // Not all streams will emit 'close' after 'aborted'.\n  if (!willEmitClose && typeof stream.aborted === 'boolean') {\n    stream.on('aborted', onclose)\n  }\n  stream.on('end', onend)\n  stream.on('finish', onfinish)\n  if (options.error !== false) {\n    stream.on('error', onerror)\n  }\n  stream.on('close', onclose)\n  if (closed) {\n    process.nextTick(onclose)\n  } else if (\n    (wState !== null && wState !== undefined && wState.errorEmitted) ||\n    (rState !== null && rState !== undefined && rState.errorEmitted)\n  ) {\n    if (!willEmitClose) {\n      process.nextTick(onclosed)\n    }\n  } else if (\n    !readable &&\n    (!willEmitClose || isReadable(stream)) &&\n    (writableFinished || isWritable(stream) === false)\n  ) {\n    process.nextTick(onclosed)\n  } else if (\n    !writable &&\n    (!willEmitClose || isWritable(stream)) &&\n    (readableFinished || isReadable(stream) === false)\n  ) {\n    process.nextTick(onclosed)\n  } else if (rState && stream.req && stream.aborted) {\n    process.nextTick(onclosed)\n  }\n  const cleanup = () => {\n    callback = nop\n    stream.removeListener('aborted', onclose)\n    stream.removeListener('complete', onfinish)\n    stream.removeListener('abort', onclose)\n    stream.removeListener('request', onrequest)\n    if (stream.req) stream.req.removeListener('finish', onfinish)\n    stream.removeListener('end', onlegacyfinish)\n    stream.removeListener('close', onlegacyfinish)\n    stream.removeListener('finish', onfinish)\n    stream.removeListener('end', onend)\n    stream.removeListener('error', onerror)\n    stream.removeListener('close', onclose)\n  }\n  if (options.signal && !closed) {\n    const abort = () => {\n      // Keep it because cleanup removes it.\n      const endCallback = callback\n      cleanup()\n      endCallback.call(\n        stream,\n        new AbortError(undefined, {\n          cause: options.signal.reason\n        })\n      )\n    }\n    if (options.signal.aborted) {\n      process.nextTick(abort)\n    } else {\n      addAbortListener = addAbortListener || require('../../ours/util').addAbortListener\n      const disposable = addAbortListener(options.signal, abort)\n      const originalCallback = callback\n      callback = once((...args) => {\n        disposable[SymbolDispose]()\n        originalCallback.apply(stream, args)\n      })\n    }\n  }\n  return cleanup\n}\nfunction eosWeb(stream, options, callback) {\n  let isAborted = false\n  let abort = nop\n  if (options.signal) {\n    abort = () => {\n      isAborted = true\n      callback.call(\n        stream,\n        new AbortError(undefined, {\n          cause: options.signal.reason\n        })\n      )\n    }\n    if (options.signal.aborted) {\n      process.nextTick(abort)\n    } else {\n      addAbortListener = addAbortListener || require('../../ours/util').addAbortListener\n      const disposable = addAbortListener(options.signal, abort)\n      const originalCallback = callback\n      callback = once((...args) => {\n        disposable[SymbolDispose]()\n        originalCallback.apply(stream, args)\n      })\n    }\n  }\n  const resolverFn = (...args) => {\n    if (!isAborted) {\n      process.nextTick(() => callback.apply(stream, args))\n    }\n  }\n  PromisePrototypeThen(stream[kIsClosedPromise].promise, resolverFn, resolverFn)\n  return nop\n}\nfunction finished(stream, opts) {\n  var _opts\n  let autoCleanup = false\n  if (opts === null) {\n    opts = kEmptyObject\n  }\n  if ((_opts = opts) !== null && _opts !== undefined && _opts.cleanup) {\n    validateBoolean(opts.cleanup, 'cleanup')\n    autoCleanup = opts.cleanup\n  }\n  return new Promise((resolve, reject) => {\n    const cleanup = eos(stream, opts, (err) => {\n      if (autoCleanup) {\n        cleanup()\n      }\n      if (err) {\n        reject(err)\n      } else {\n        resolve()\n      }\n    })\n  })\n}\nmodule.exports = eos\nmodule.exports.finished = finished\n","'use strict'\n\n/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n\nconst { PromisePrototypeThen, SymbolAsyncIterator, SymbolIterator } = require('../../ours/primordials')\nconst { Buffer } = require('buffer')\nconst { ERR_INVALID_ARG_TYPE, ERR_STREAM_NULL_VALUES } = require('../../ours/errors').codes\nfunction from(Readable, iterable, opts) {\n  let iterator\n  if (typeof iterable === 'string' || iterable instanceof Buffer) {\n    return new Readable({\n      objectMode: true,\n      ...opts,\n      read() {\n        this.push(iterable)\n        this.push(null)\n      }\n    })\n  }\n  let isAsync\n  if (iterable && iterable[SymbolAsyncIterator]) {\n    isAsync = true\n    iterator = iterable[SymbolAsyncIterator]()\n  } else if (iterable && iterable[SymbolIterator]) {\n    isAsync = false\n    iterator = iterable[SymbolIterator]()\n  } else {\n    throw new ERR_INVALID_ARG_TYPE('iterable', ['Iterable'], iterable)\n  }\n  const readable = new Readable({\n    objectMode: true,\n    highWaterMark: 1,\n    // TODO(ronag): What options should be allowed?\n    ...opts\n  })\n\n  // Flag to protect against _read\n  // being called before last iteration completion.\n  let reading = false\n  readable._read = function () {\n    if (!reading) {\n      reading = true\n      next()\n    }\n  }\n  readable._destroy = function (error, cb) {\n    PromisePrototypeThen(\n      close(error),\n      () => process.nextTick(cb, error),\n      // nextTick is here in case cb throws\n      (e) => process.nextTick(cb, e || error)\n    )\n  }\n  async function close(error) {\n    const hadError = error !== undefined && error !== null\n    const hasThrow = typeof iterator.throw === 'function'\n    if (hadError && hasThrow) {\n      const { value, done } = await iterator.throw(error)\n      await value\n      if (done) {\n        return\n      }\n    }\n    if (typeof iterator.return === 'function') {\n      const { value } = await iterator.return()\n      await value\n    }\n  }\n  async function next() {\n    for (;;) {\n      try {\n        const { value, done } = isAsync ? await iterator.next() : iterator.next()\n        if (done) {\n          readable.push(null)\n        } else {\n          const res = value && typeof value.then === 'function' ? await value : value\n          if (res === null) {\n            reading = false\n            throw new ERR_STREAM_NULL_VALUES()\n          } else if (readable.push(res)) {\n            continue\n          } else {\n            reading = false\n          }\n        }\n      } catch (err) {\n        readable.destroy(err)\n      }\n      break\n    }\n  }\n  return readable\n}\nmodule.exports = from\n","'use strict'\n\nconst { ArrayIsArray, ObjectSetPrototypeOf } = require('../../ours/primordials')\nconst { EventEmitter: EE } = require('events')\nfunction Stream(opts) {\n  EE.call(this, opts)\n}\nObjectSetPrototypeOf(Stream.prototype, EE.prototype)\nObjectSetPrototypeOf(Stream, EE)\nStream.prototype.pipe = function (dest, options) {\n  const source = this\n  function ondata(chunk) {\n    if (dest.writable && dest.write(chunk) === false && source.pause) {\n      source.pause()\n    }\n  }\n  source.on('data', ondata)\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume()\n    }\n  }\n  dest.on('drain', ondrain)\n\n  // If the 'end' option is not supplied, dest.end() will be called when\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend)\n    source.on('close', onclose)\n  }\n  let didOnEnd = false\n  function onend() {\n    if (didOnEnd) return\n    didOnEnd = true\n    dest.end()\n  }\n  function onclose() {\n    if (didOnEnd) return\n    didOnEnd = true\n    if (typeof dest.destroy === 'function') dest.destroy()\n  }\n\n  // Don't leave dangling pipes when there are errors.\n  function onerror(er) {\n    cleanup()\n    if (EE.listenerCount(this, 'error') === 0) {\n      this.emit('error', er)\n    }\n  }\n  prependListener(source, 'error', onerror)\n  prependListener(dest, 'error', onerror)\n\n  // Remove all the event listeners that were added.\n  function cleanup() {\n    source.removeListener('data', ondata)\n    dest.removeListener('drain', ondrain)\n    source.removeListener('end', onend)\n    source.removeListener('close', onclose)\n    source.removeListener('error', onerror)\n    dest.removeListener('error', onerror)\n    source.removeListener('end', cleanup)\n    source.removeListener('close', cleanup)\n    dest.removeListener('close', cleanup)\n  }\n  source.on('end', cleanup)\n  source.on('close', cleanup)\n  dest.on('close', cleanup)\n  dest.emit('pipe', source)\n\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\n  return dest\n}\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn)\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn)\n  else if (ArrayIsArray(emitter._events[event])) emitter._events[event].unshift(fn)\n  else emitter._events[event] = [fn, emitter._events[event]]\n}\nmodule.exports = {\n  Stream,\n  prependListener\n}\n","'use strict'\n\nconst AbortController = globalThis.AbortController || require('abort-controller').AbortController\nconst {\n  codes: { ERR_INVALID_ARG_VALUE, ERR_INVALID_ARG_TYPE, ERR_MISSING_ARGS, ERR_OUT_OF_RANGE },\n  AbortError\n} = require('../../ours/errors')\nconst { validateAbortSignal, validateInteger, validateObject } = require('../validators')\nconst kWeakHandler = require('../../ours/primordials').Symbol('kWeak')\nconst kResistStopPropagation = require('../../ours/primordials').Symbol('kResistStopPropagation')\nconst { finished } = require('./end-of-stream')\nconst staticCompose = require('./compose')\nconst { addAbortSignalNoValidate } = require('./add-abort-signal')\nconst { isWritable, isNodeStream } = require('./utils')\nconst { deprecate } = require('../../ours/util')\nconst {\n  ArrayPrototypePush,\n  Boolean,\n  MathFloor,\n  Number,\n  NumberIsNaN,\n  Promise,\n  PromiseReject,\n  PromiseResolve,\n  PromisePrototypeThen,\n  Symbol\n} = require('../../ours/primordials')\nconst kEmpty = Symbol('kEmpty')\nconst kEof = Symbol('kEof')\nfunction compose(stream, options) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  if (isNodeStream(stream) && !isWritable(stream)) {\n    throw new ERR_INVALID_ARG_VALUE('stream', stream, 'must be writable')\n  }\n  const composedStream = staticCompose(this, stream)\n  if (options !== null && options !== undefined && options.signal) {\n    // Not validating as we already validated before\n    addAbortSignalNoValidate(options.signal, composedStream)\n  }\n  return composedStream\n}\nfunction map(fn, options) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', ['Function', 'AsyncFunction'], fn)\n  }\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  let concurrency = 1\n  if ((options === null || options === undefined ? undefined : options.concurrency) != null) {\n    concurrency = MathFloor(options.concurrency)\n  }\n  let highWaterMark = concurrency - 1\n  if ((options === null || options === undefined ? undefined : options.highWaterMark) != null) {\n    highWaterMark = MathFloor(options.highWaterMark)\n  }\n  validateInteger(concurrency, 'options.concurrency', 1)\n  validateInteger(highWaterMark, 'options.highWaterMark', 0)\n  highWaterMark += concurrency\n  return async function* map() {\n    const signal = require('../../ours/util').AbortSignalAny(\n      [options === null || options === undefined ? undefined : options.signal].filter(Boolean)\n    )\n    const stream = this\n    const queue = []\n    const signalOpt = {\n      signal\n    }\n    let next\n    let resume\n    let done = false\n    let cnt = 0\n    function onCatch() {\n      done = true\n      afterItemProcessed()\n    }\n    function afterItemProcessed() {\n      cnt -= 1\n      maybeResume()\n    }\n    function maybeResume() {\n      if (resume && !done && cnt < concurrency && queue.length < highWaterMark) {\n        resume()\n        resume = null\n      }\n    }\n    async function pump() {\n      try {\n        for await (let val of stream) {\n          if (done) {\n            return\n          }\n          if (signal.aborted) {\n            throw new AbortError()\n          }\n          try {\n            val = fn(val, signalOpt)\n            if (val === kEmpty) {\n              continue\n            }\n            val = PromiseResolve(val)\n          } catch (err) {\n            val = PromiseReject(err)\n          }\n          cnt += 1\n          PromisePrototypeThen(val, afterItemProcessed, onCatch)\n          queue.push(val)\n          if (next) {\n            next()\n            next = null\n          }\n          if (!done && (queue.length >= highWaterMark || cnt >= concurrency)) {\n            await new Promise((resolve) => {\n              resume = resolve\n            })\n          }\n        }\n        queue.push(kEof)\n      } catch (err) {\n        const val = PromiseReject(err)\n        PromisePrototypeThen(val, afterItemProcessed, onCatch)\n        queue.push(val)\n      } finally {\n        done = true\n        if (next) {\n          next()\n          next = null\n        }\n      }\n    }\n    pump()\n    try {\n      while (true) {\n        while (queue.length > 0) {\n          const val = await queue[0]\n          if (val === kEof) {\n            return\n          }\n          if (signal.aborted) {\n            throw new AbortError()\n          }\n          if (val !== kEmpty) {\n            yield val\n          }\n          queue.shift()\n          maybeResume()\n        }\n        await new Promise((resolve) => {\n          next = resolve\n        })\n      }\n    } finally {\n      done = true\n      if (resume) {\n        resume()\n        resume = null\n      }\n    }\n  }.call(this)\n}\nfunction asIndexedPairs(options = undefined) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  return async function* asIndexedPairs() {\n    let index = 0\n    for await (const val of this) {\n      var _options$signal\n      if (\n        options !== null &&\n        options !== undefined &&\n        (_options$signal = options.signal) !== null &&\n        _options$signal !== undefined &&\n        _options$signal.aborted\n      ) {\n        throw new AbortError({\n          cause: options.signal.reason\n        })\n      }\n      yield [index++, val]\n    }\n  }.call(this)\n}\nasync function some(fn, options = undefined) {\n  for await (const unused of filter.call(this, fn, options)) {\n    return true\n  }\n  return false\n}\nasync function every(fn, options = undefined) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', ['Function', 'AsyncFunction'], fn)\n  }\n  // https://en.wikipedia.org/wiki/De_Morgan%27s_laws\n  return !(await some.call(\n    this,\n    async (...args) => {\n      return !(await fn(...args))\n    },\n    options\n  ))\n}\nasync function find(fn, options) {\n  for await (const result of filter.call(this, fn, options)) {\n    return result\n  }\n  return undefined\n}\nasync function forEach(fn, options) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', ['Function', 'AsyncFunction'], fn)\n  }\n  async function forEachFn(value, options) {\n    await fn(value, options)\n    return kEmpty\n  }\n  // eslint-disable-next-line no-unused-vars\n  for await (const unused of map.call(this, forEachFn, options));\n}\nfunction filter(fn, options) {\n  if (typeof fn !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('fn', ['Function', 'AsyncFunction'], fn)\n  }\n  async function filterFn(value, options) {\n    if (await fn(value, options)) {\n      return value\n    }\n    return kEmpty\n  }\n  return map.call(this, filterFn, options)\n}\n\n// Specific to provide better error to reduce since the argument is only\n// missing if the stream has no items in it - but the code is still appropriate\nclass ReduceAwareErrMissingArgs extends ERR_MISSING_ARGS {\n  constructor() {\n    super('reduce')\n    this.message = 'Reduce of an empty stream requires an initial value'\n  }\n}\nasync function reduce(reducer, initialValue, options) {\n  var _options$signal2\n  if (typeof reducer !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE('reducer', ['Function', 'AsyncFunction'], reducer)\n  }\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  let hasInitialValue = arguments.length > 1\n  if (\n    options !== null &&\n    options !== undefined &&\n    (_options$signal2 = options.signal) !== null &&\n    _options$signal2 !== undefined &&\n    _options$signal2.aborted\n  ) {\n    const err = new AbortError(undefined, {\n      cause: options.signal.reason\n    })\n    this.once('error', () => {}) // The error is already propagated\n    await finished(this.destroy(err))\n    throw err\n  }\n  const ac = new AbortController()\n  const signal = ac.signal\n  if (options !== null && options !== undefined && options.signal) {\n    const opts = {\n      once: true,\n      [kWeakHandler]: this,\n      [kResistStopPropagation]: true\n    }\n    options.signal.addEventListener('abort', () => ac.abort(), opts)\n  }\n  let gotAnyItemFromStream = false\n  try {\n    for await (const value of this) {\n      var _options$signal3\n      gotAnyItemFromStream = true\n      if (\n        options !== null &&\n        options !== undefined &&\n        (_options$signal3 = options.signal) !== null &&\n        _options$signal3 !== undefined &&\n        _options$signal3.aborted\n      ) {\n        throw new AbortError()\n      }\n      if (!hasInitialValue) {\n        initialValue = value\n        hasInitialValue = true\n      } else {\n        initialValue = await reducer(initialValue, value, {\n          signal\n        })\n      }\n    }\n    if (!gotAnyItemFromStream && !hasInitialValue) {\n      throw new ReduceAwareErrMissingArgs()\n    }\n  } finally {\n    ac.abort()\n  }\n  return initialValue\n}\nasync function toArray(options) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  const result = []\n  for await (const val of this) {\n    var _options$signal4\n    if (\n      options !== null &&\n      options !== undefined &&\n      (_options$signal4 = options.signal) !== null &&\n      _options$signal4 !== undefined &&\n      _options$signal4.aborted\n    ) {\n      throw new AbortError(undefined, {\n        cause: options.signal.reason\n      })\n    }\n    ArrayPrototypePush(result, val)\n  }\n  return result\n}\nfunction flatMap(fn, options) {\n  const values = map.call(this, fn, options)\n  return async function* flatMap() {\n    for await (const val of values) {\n      yield* val\n    }\n  }.call(this)\n}\nfunction toIntegerOrInfinity(number) {\n  // We coerce here to align with the spec\n  // https://github.com/tc39/proposal-iterator-helpers/issues/169\n  number = Number(number)\n  if (NumberIsNaN(number)) {\n    return 0\n  }\n  if (number < 0) {\n    throw new ERR_OUT_OF_RANGE('number', '>= 0', number)\n  }\n  return number\n}\nfunction drop(number, options = undefined) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  number = toIntegerOrInfinity(number)\n  return async function* drop() {\n    var _options$signal5\n    if (\n      options !== null &&\n      options !== undefined &&\n      (_options$signal5 = options.signal) !== null &&\n      _options$signal5 !== undefined &&\n      _options$signal5.aborted\n    ) {\n      throw new AbortError()\n    }\n    for await (const val of this) {\n      var _options$signal6\n      if (\n        options !== null &&\n        options !== undefined &&\n        (_options$signal6 = options.signal) !== null &&\n        _options$signal6 !== undefined &&\n        _options$signal6.aborted\n      ) {\n        throw new AbortError()\n      }\n      if (number-- <= 0) {\n        yield val\n      }\n    }\n  }.call(this)\n}\nfunction take(number, options = undefined) {\n  if (options != null) {\n    validateObject(options, 'options')\n  }\n  if ((options === null || options === undefined ? undefined : options.signal) != null) {\n    validateAbortSignal(options.signal, 'options.signal')\n  }\n  number = toIntegerOrInfinity(number)\n  return async function* take() {\n    var _options$signal7\n    if (\n      options !== null &&\n      options !== undefined &&\n      (_options$signal7 = options.signal) !== null &&\n      _options$signal7 !== undefined &&\n      _options$signal7.aborted\n    ) {\n      throw new AbortError()\n    }\n    for await (const val of this) {\n      var _options$signal8\n      if (\n        options !== null &&\n        options !== undefined &&\n        (_options$signal8 = options.signal) !== null &&\n        _options$signal8 !== undefined &&\n        _options$signal8.aborted\n      ) {\n        throw new AbortError()\n      }\n      if (number-- > 0) {\n        yield val\n      }\n\n      // Don't get another item from iterator in case we reached the end\n      if (number <= 0) {\n        return\n      }\n    }\n  }.call(this)\n}\nmodule.exports.streamReturningOperators = {\n  asIndexedPairs: deprecate(asIndexedPairs, 'readable.asIndexedPairs will be removed in a future version.'),\n  drop,\n  filter,\n  flatMap,\n  map,\n  take,\n  compose\n}\nmodule.exports.promiseReturningOperators = {\n  every,\n  forEach,\n  reduce,\n  toArray,\n  some,\n  find\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict'\n\nconst { ObjectSetPrototypeOf } = require('../../ours/primordials')\nmodule.exports = PassThrough\nconst Transform = require('./transform')\nObjectSetPrototypeOf(PassThrough.prototype, Transform.prototype)\nObjectSetPrototypeOf(PassThrough, Transform)\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options)\n  Transform.call(this, options)\n}\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk)\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n// Ported from https://github.com/mafintosh/pump with\n// permission from the author, Mathias Buus (@mafintosh).\n\n;('use strict')\nconst { ArrayIsArray, Promise, SymbolAsyncIterator, SymbolDispose } = require('../../ours/primordials')\nconst eos = require('./end-of-stream')\nconst { once } = require('../../ours/util')\nconst destroyImpl = require('./destroy')\nconst Duplex = require('./duplex')\nconst {\n  aggregateTwoErrors,\n  codes: {\n    ERR_INVALID_ARG_TYPE,\n    ERR_INVALID_RETURN_VALUE,\n    ERR_MISSING_ARGS,\n    ERR_STREAM_DESTROYED,\n    ERR_STREAM_PREMATURE_CLOSE\n  },\n  AbortError\n} = require('../../ours/errors')\nconst { validateFunction, validateAbortSignal } = require('../validators')\nconst {\n  isIterable,\n  isReadable,\n  isReadableNodeStream,\n  isNodeStream,\n  isTransformStream,\n  isWebStream,\n  isReadableStream,\n  isReadableFinished\n} = require('./utils')\nconst AbortController = globalThis.AbortController || require('abort-controller').AbortController\nlet PassThrough\nlet Readable\nlet addAbortListener\nfunction destroyer(stream, reading, writing) {\n  let finished = false\n  stream.on('close', () => {\n    finished = true\n  })\n  const cleanup = eos(\n    stream,\n    {\n      readable: reading,\n      writable: writing\n    },\n    (err) => {\n      finished = !err\n    }\n  )\n  return {\n    destroy: (err) => {\n      if (finished) return\n      finished = true\n      destroyImpl.destroyer(stream, err || new ERR_STREAM_DESTROYED('pipe'))\n    },\n    cleanup\n  }\n}\nfunction popCallback(streams) {\n  // Streams should never be an empty array. It should always contain at least\n  // a single stream. Therefore optimize for the average case instead of\n  // checking for length === 0 as well.\n  validateFunction(streams[streams.length - 1], 'streams[stream.length - 1]')\n  return streams.pop()\n}\nfunction makeAsyncIterable(val) {\n  if (isIterable(val)) {\n    return val\n  } else if (isReadableNodeStream(val)) {\n    // Legacy streams are not Iterable.\n    return fromReadable(val)\n  }\n  throw new ERR_INVALID_ARG_TYPE('val', ['Readable', 'Iterable', 'AsyncIterable'], val)\n}\nasync function* fromReadable(val) {\n  if (!Readable) {\n    Readable = require('./readable')\n  }\n  yield* Readable.prototype[SymbolAsyncIterator].call(val)\n}\nasync function pumpToNode(iterable, writable, finish, { end }) {\n  let error\n  let onresolve = null\n  const resume = (err) => {\n    if (err) {\n      error = err\n    }\n    if (onresolve) {\n      const callback = onresolve\n      onresolve = null\n      callback()\n    }\n  }\n  const wait = () =>\n    new Promise((resolve, reject) => {\n      if (error) {\n        reject(error)\n      } else {\n        onresolve = () => {\n          if (error) {\n            reject(error)\n          } else {\n            resolve()\n          }\n        }\n      }\n    })\n  writable.on('drain', resume)\n  const cleanup = eos(\n    writable,\n    {\n      readable: false\n    },\n    resume\n  )\n  try {\n    if (writable.writableNeedDrain) {\n      await wait()\n    }\n    for await (const chunk of iterable) {\n      if (!writable.write(chunk)) {\n        await wait()\n      }\n    }\n    if (end) {\n      writable.end()\n      await wait()\n    }\n    finish()\n  } catch (err) {\n    finish(error !== err ? aggregateTwoErrors(error, err) : err)\n  } finally {\n    cleanup()\n    writable.off('drain', resume)\n  }\n}\nasync function pumpToWeb(readable, writable, finish, { end }) {\n  if (isTransformStream(writable)) {\n    writable = writable.writable\n  }\n  // https://streams.spec.whatwg.org/#example-manual-write-with-backpressure\n  const writer = writable.getWriter()\n  try {\n    for await (const chunk of readable) {\n      await writer.ready\n      writer.write(chunk).catch(() => {})\n    }\n    await writer.ready\n    if (end) {\n      await writer.close()\n    }\n    finish()\n  } catch (err) {\n    try {\n      await writer.abort(err)\n      finish(err)\n    } catch (err) {\n      finish(err)\n    }\n  }\n}\nfunction pipeline(...streams) {\n  return pipelineImpl(streams, once(popCallback(streams)))\n}\nfunction pipelineImpl(streams, callback, opts) {\n  if (streams.length === 1 && ArrayIsArray(streams[0])) {\n    streams = streams[0]\n  }\n  if (streams.length < 2) {\n    throw new ERR_MISSING_ARGS('streams')\n  }\n  const ac = new AbortController()\n  const signal = ac.signal\n  const outerSignal = opts === null || opts === undefined ? undefined : opts.signal\n\n  // Need to cleanup event listeners if last stream is readable\n  // https://github.com/nodejs/node/issues/35452\n  const lastStreamCleanup = []\n  validateAbortSignal(outerSignal, 'options.signal')\n  function abort() {\n    finishImpl(new AbortError())\n  }\n  addAbortListener = addAbortListener || require('../../ours/util').addAbortListener\n  let disposable\n  if (outerSignal) {\n    disposable = addAbortListener(outerSignal, abort)\n  }\n  let error\n  let value\n  const destroys = []\n  let finishCount = 0\n  function finish(err) {\n    finishImpl(err, --finishCount === 0)\n  }\n  function finishImpl(err, final) {\n    var _disposable\n    if (err && (!error || error.code === 'ERR_STREAM_PREMATURE_CLOSE')) {\n      error = err\n    }\n    if (!error && !final) {\n      return\n    }\n    while (destroys.length) {\n      destroys.shift()(error)\n    }\n    ;(_disposable = disposable) === null || _disposable === undefined ? undefined : _disposable[SymbolDispose]()\n    ac.abort()\n    if (final) {\n      if (!error) {\n        lastStreamCleanup.forEach((fn) => fn())\n      }\n      process.nextTick(callback, error, value)\n    }\n  }\n  let ret\n  for (let i = 0; i < streams.length; i++) {\n    const stream = streams[i]\n    const reading = i < streams.length - 1\n    const writing = i > 0\n    const end = reading || (opts === null || opts === undefined ? undefined : opts.end) !== false\n    const isLastStream = i === streams.length - 1\n    if (isNodeStream(stream)) {\n      if (end) {\n        const { destroy, cleanup } = destroyer(stream, reading, writing)\n        destroys.push(destroy)\n        if (isReadable(stream) && isLastStream) {\n          lastStreamCleanup.push(cleanup)\n        }\n      }\n\n      // Catch stream errors that occur after pipe/pump has completed.\n      function onError(err) {\n        if (err && err.name !== 'AbortError' && err.code !== 'ERR_STREAM_PREMATURE_CLOSE') {\n          finish(err)\n        }\n      }\n      stream.on('error', onError)\n      if (isReadable(stream) && isLastStream) {\n        lastStreamCleanup.push(() => {\n          stream.removeListener('error', onError)\n        })\n      }\n    }\n    if (i === 0) {\n      if (typeof stream === 'function') {\n        ret = stream({\n          signal\n        })\n        if (!isIterable(ret)) {\n          throw new ERR_INVALID_RETURN_VALUE('Iterable, AsyncIterable or Stream', 'source', ret)\n        }\n      } else if (isIterable(stream) || isReadableNodeStream(stream) || isTransformStream(stream)) {\n        ret = stream\n      } else {\n        ret = Duplex.from(stream)\n      }\n    } else if (typeof stream === 'function') {\n      if (isTransformStream(ret)) {\n        var _ret\n        ret = makeAsyncIterable((_ret = ret) === null || _ret === undefined ? undefined : _ret.readable)\n      } else {\n        ret = makeAsyncIterable(ret)\n      }\n      ret = stream(ret, {\n        signal\n      })\n      if (reading) {\n        if (!isIterable(ret, true)) {\n          throw new ERR_INVALID_RETURN_VALUE('AsyncIterable', `transform[${i - 1}]`, ret)\n        }\n      } else {\n        var _ret2\n        if (!PassThrough) {\n          PassThrough = require('./passthrough')\n        }\n\n        // If the last argument to pipeline is not a stream\n        // we must create a proxy stream so that pipeline(...)\n        // always returns a stream which can be further\n        // composed through `.pipe(stream)`.\n\n        const pt = new PassThrough({\n          objectMode: true\n        })\n\n        // Handle Promises/A+ spec, `then` could be a getter that throws on\n        // second use.\n        const then = (_ret2 = ret) === null || _ret2 === undefined ? undefined : _ret2.then\n        if (typeof then === 'function') {\n          finishCount++\n          then.call(\n            ret,\n            (val) => {\n              value = val\n              if (val != null) {\n                pt.write(val)\n              }\n              if (end) {\n                pt.end()\n              }\n              process.nextTick(finish)\n            },\n            (err) => {\n              pt.destroy(err)\n              process.nextTick(finish, err)\n            }\n          )\n        } else if (isIterable(ret, true)) {\n          finishCount++\n          pumpToNode(ret, pt, finish, {\n            end\n          })\n        } else if (isReadableStream(ret) || isTransformStream(ret)) {\n          const toRead = ret.readable || ret\n          finishCount++\n          pumpToNode(toRead, pt, finish, {\n            end\n          })\n        } else {\n          throw new ERR_INVALID_RETURN_VALUE('AsyncIterable or Promise', 'destination', ret)\n        }\n        ret = pt\n        const { destroy, cleanup } = destroyer(ret, false, true)\n        destroys.push(destroy)\n        if (isLastStream) {\n          lastStreamCleanup.push(cleanup)\n        }\n      }\n    } else if (isNodeStream(stream)) {\n      if (isReadableNodeStream(ret)) {\n        finishCount += 2\n        const cleanup = pipe(ret, stream, finish, {\n          end\n        })\n        if (isReadable(stream) && isLastStream) {\n          lastStreamCleanup.push(cleanup)\n        }\n      } else if (isTransformStream(ret) || isReadableStream(ret)) {\n        const toRead = ret.readable || ret\n        finishCount++\n        pumpToNode(toRead, stream, finish, {\n          end\n        })\n      } else if (isIterable(ret)) {\n        finishCount++\n        pumpToNode(ret, stream, finish, {\n          end\n        })\n      } else {\n        throw new ERR_INVALID_ARG_TYPE(\n          'val',\n          ['Readable', 'Iterable', 'AsyncIterable', 'ReadableStream', 'TransformStream'],\n          ret\n        )\n      }\n      ret = stream\n    } else if (isWebStream(stream)) {\n      if (isReadableNodeStream(ret)) {\n        finishCount++\n        pumpToWeb(makeAsyncIterable(ret), stream, finish, {\n          end\n        })\n      } else if (isReadableStream(ret) || isIterable(ret)) {\n        finishCount++\n        pumpToWeb(ret, stream, finish, {\n          end\n        })\n      } else if (isTransformStream(ret)) {\n        finishCount++\n        pumpToWeb(ret.readable, stream, finish, {\n          end\n        })\n      } else {\n        throw new ERR_INVALID_ARG_TYPE(\n          'val',\n          ['Readable', 'Iterable', 'AsyncIterable', 'ReadableStream', 'TransformStream'],\n          ret\n        )\n      }\n      ret = stream\n    } else {\n      ret = Duplex.from(stream)\n    }\n  }\n  if (\n    (signal !== null && signal !== undefined && signal.aborted) ||\n    (outerSignal !== null && outerSignal !== undefined && outerSignal.aborted)\n  ) {\n    process.nextTick(abort)\n  }\n  return ret\n}\nfunction pipe(src, dst, finish, { end }) {\n  let ended = false\n  dst.on('close', () => {\n    if (!ended) {\n      // Finish if the destination closes before the source has completed.\n      finish(new ERR_STREAM_PREMATURE_CLOSE())\n    }\n  })\n  src.pipe(dst, {\n    end: false\n  }) // If end is true we already will have a listener to end dst.\n\n  if (end) {\n    // Compat. Before node v10.12.0 stdio used to throw an error so\n    // pipe() did/does not end() stdio destinations.\n    // Now they allow it but \"secretly\" don't close the underlying fd.\n\n    function endFn() {\n      ended = true\n      dst.end()\n    }\n    if (isReadableFinished(src)) {\n      // End the destination if the source has already ended.\n      process.nextTick(endFn)\n    } else {\n      src.once('end', endFn)\n    }\n  } else {\n    finish()\n  }\n  eos(\n    src,\n    {\n      readable: true,\n      writable: false\n    },\n    (err) => {\n      const rState = src._readableState\n      if (\n        err &&\n        err.code === 'ERR_STREAM_PREMATURE_CLOSE' &&\n        rState &&\n        rState.ended &&\n        !rState.errored &&\n        !rState.errorEmitted\n      ) {\n        // Some readable streams will emit 'close' before 'end'. However, since\n        // this is on the readable side 'end' should still be emitted if the\n        // stream has been ended and no error emitted. This should be allowed in\n        // favor of backwards compatibility. Since the stream is piped to a\n        // destination this should not result in any observable difference.\n        // We don't need to check if this is a writable premature close since\n        // eos will only fail with premature close on the reading side for\n        // duplex streams.\n        src.once('end', finish).once('error', finish)\n      } else {\n        finish(err)\n      }\n    }\n  )\n  return eos(\n    dst,\n    {\n      readable: false,\n      writable: true\n    },\n    finish\n  )\n}\nmodule.exports = {\n  pipelineImpl,\n  pipeline\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n;('use strict')\nconst {\n  ArrayPrototypeIndexOf,\n  NumberIsInteger,\n  NumberIsNaN,\n  NumberParseInt,\n  ObjectDefineProperties,\n  ObjectKeys,\n  ObjectSetPrototypeOf,\n  Promise,\n  SafeSet,\n  SymbolAsyncDispose,\n  SymbolAsyncIterator,\n  Symbol\n} = require('../../ours/primordials')\nmodule.exports = Readable\nReadable.ReadableState = ReadableState\nconst { EventEmitter: EE } = require('events')\nconst { Stream, prependListener } = require('./legacy')\nconst { Buffer } = require('buffer')\nconst { addAbortSignal } = require('./add-abort-signal')\nconst eos = require('./end-of-stream')\nlet debug = require('../../ours/util').debuglog('stream', (fn) => {\n  debug = fn\n})\nconst BufferList = require('./buffer_list')\nconst destroyImpl = require('./destroy')\nconst { getHighWaterMark, getDefaultHighWaterMark } = require('./state')\nconst {\n  aggregateTwoErrors,\n  codes: {\n    ERR_INVALID_ARG_TYPE,\n    ERR_METHOD_NOT_IMPLEMENTED,\n    ERR_OUT_OF_RANGE,\n    ERR_STREAM_PUSH_AFTER_EOF,\n    ERR_STREAM_UNSHIFT_AFTER_END_EVENT\n  },\n  AbortError\n} = require('../../ours/errors')\nconst { validateObject } = require('../validators')\nconst kPaused = Symbol('kPaused')\nconst { StringDecoder } = require('string_decoder')\nconst from = require('./from')\nObjectSetPrototypeOf(Readable.prototype, Stream.prototype)\nObjectSetPrototypeOf(Readable, Stream)\nconst nop = () => {}\nconst { errorOrDestroy } = destroyImpl\nconst kObjectMode = 1 << 0\nconst kEnded = 1 << 1\nconst kEndEmitted = 1 << 2\nconst kReading = 1 << 3\nconst kConstructed = 1 << 4\nconst kSync = 1 << 5\nconst kNeedReadable = 1 << 6\nconst kEmittedReadable = 1 << 7\nconst kReadableListening = 1 << 8\nconst kResumeScheduled = 1 << 9\nconst kErrorEmitted = 1 << 10\nconst kEmitClose = 1 << 11\nconst kAutoDestroy = 1 << 12\nconst kDestroyed = 1 << 13\nconst kClosed = 1 << 14\nconst kCloseEmitted = 1 << 15\nconst kMultiAwaitDrain = 1 << 16\nconst kReadingMore = 1 << 17\nconst kDataEmitted = 1 << 18\n\n// TODO(benjamingr) it is likely slower to do it this way than with free functions\nfunction makeBitMapDescriptor(bit) {\n  return {\n    enumerable: false,\n    get() {\n      return (this.state & bit) !== 0\n    },\n    set(value) {\n      if (value) this.state |= bit\n      else this.state &= ~bit\n    }\n  }\n}\nObjectDefineProperties(ReadableState.prototype, {\n  objectMode: makeBitMapDescriptor(kObjectMode),\n  ended: makeBitMapDescriptor(kEnded),\n  endEmitted: makeBitMapDescriptor(kEndEmitted),\n  reading: makeBitMapDescriptor(kReading),\n  // Stream is still being constructed and cannot be\n  // destroyed until construction finished or failed.\n  // Async construction is opt in, therefore we start as\n  // constructed.\n  constructed: makeBitMapDescriptor(kConstructed),\n  // A flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  sync: makeBitMapDescriptor(kSync),\n  // Whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  needReadable: makeBitMapDescriptor(kNeedReadable),\n  emittedReadable: makeBitMapDescriptor(kEmittedReadable),\n  readableListening: makeBitMapDescriptor(kReadableListening),\n  resumeScheduled: makeBitMapDescriptor(kResumeScheduled),\n  // True if the error was already emitted and should not be thrown again.\n  errorEmitted: makeBitMapDescriptor(kErrorEmitted),\n  emitClose: makeBitMapDescriptor(kEmitClose),\n  autoDestroy: makeBitMapDescriptor(kAutoDestroy),\n  // Has it been destroyed.\n  destroyed: makeBitMapDescriptor(kDestroyed),\n  // Indicates whether the stream has finished destroying.\n  closed: makeBitMapDescriptor(kClosed),\n  // True if close has been emitted or would have been emitted\n  // depending on emitClose.\n  closeEmitted: makeBitMapDescriptor(kCloseEmitted),\n  multiAwaitDrain: makeBitMapDescriptor(kMultiAwaitDrain),\n  // If true, a maybeReadMore has been scheduled.\n  readingMore: makeBitMapDescriptor(kReadingMore),\n  dataEmitted: makeBitMapDescriptor(kDataEmitted)\n})\nfunction ReadableState(options, stream, isDuplex) {\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof require('./duplex')\n\n  // Bit map field to store ReadableState more effciently with 1 bit per field\n  // instead of a V8 slot per field.\n  this.state = kEmitClose | kAutoDestroy | kConstructed | kSync\n  // Object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away.\n  if (options && options.objectMode) this.state |= kObjectMode\n  if (isDuplex && options && options.readableObjectMode) this.state |= kObjectMode\n\n  // The point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  this.highWaterMark = options\n    ? getHighWaterMark(this, options, 'readableHighWaterMark', isDuplex)\n    : getDefaultHighWaterMark(false)\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift().\n  this.buffer = new BufferList()\n  this.length = 0\n  this.pipes = []\n  this.flowing = null\n  this[kPaused] = null\n\n  // Should close be emitted on destroy. Defaults to true.\n  if (options && options.emitClose === false) this.state &= ~kEmitClose\n\n  // Should .destroy() be called after 'end' (and potentially 'finish').\n  if (options && options.autoDestroy === false) this.state &= ~kAutoDestroy\n\n  // Indicates whether the stream has errored. When true no further\n  // _read calls, 'data' or 'readable' events should occur. This is needed\n  // since when autoDestroy is disabled we need a way to tell whether the\n  // stream has failed.\n  this.errored = null\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = (options && options.defaultEncoding) || 'utf8'\n\n  // Ref the piped dest which we need a drain event on it\n  // type: null | Writable | Set<Writable>.\n  this.awaitDrainWriters = null\n  this.decoder = null\n  this.encoding = null\n  if (options && options.encoding) {\n    this.decoder = new StringDecoder(options.encoding)\n    this.encoding = options.encoding\n  }\n}\nfunction Readable(options) {\n  if (!(this instanceof Readable)) return new Readable(options)\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the ReadableState constructor, at least with V8 6.5.\n  const isDuplex = this instanceof require('./duplex')\n  this._readableState = new ReadableState(options, this, isDuplex)\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read\n    if (typeof options.destroy === 'function') this._destroy = options.destroy\n    if (typeof options.construct === 'function') this._construct = options.construct\n    if (options.signal && !isDuplex) addAbortSignal(options.signal, this)\n  }\n  Stream.call(this, options)\n  destroyImpl.construct(this, () => {\n    if (this._readableState.needReadable) {\n      maybeReadMore(this, this._readableState)\n    }\n  })\n}\nReadable.prototype.destroy = destroyImpl.destroy\nReadable.prototype._undestroy = destroyImpl.undestroy\nReadable.prototype._destroy = function (err, cb) {\n  cb(err)\n}\nReadable.prototype[EE.captureRejectionSymbol] = function (err) {\n  this.destroy(err)\n}\nReadable.prototype[SymbolAsyncDispose] = function () {\n  let error\n  if (!this.destroyed) {\n    error = this.readableEnded ? null : new AbortError()\n    this.destroy(error)\n  }\n  return new Promise((resolve, reject) => eos(this, (err) => (err && err !== error ? reject(err) : resolve(null))))\n}\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  return readableAddChunk(this, chunk, encoding, false)\n}\n\n// Unshift should *always* be something directly out of read().\nReadable.prototype.unshift = function (chunk, encoding) {\n  return readableAddChunk(this, chunk, encoding, true)\n}\nfunction readableAddChunk(stream, chunk, encoding, addToFront) {\n  debug('readableAddChunk', chunk)\n  const state = stream._readableState\n  let err\n  if ((state.state & kObjectMode) === 0) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding\n      if (state.encoding !== encoding) {\n        if (addToFront && state.encoding) {\n          // When unshifting, if state.encoding is set, we have to save\n          // the string in the BufferList with the state encoding.\n          chunk = Buffer.from(chunk, encoding).toString(state.encoding)\n        } else {\n          chunk = Buffer.from(chunk, encoding)\n          encoding = ''\n        }\n      }\n    } else if (chunk instanceof Buffer) {\n      encoding = ''\n    } else if (Stream._isUint8Array(chunk)) {\n      chunk = Stream._uint8ArrayToBuffer(chunk)\n      encoding = ''\n    } else if (chunk != null) {\n      err = new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk)\n    }\n  }\n  if (err) {\n    errorOrDestroy(stream, err)\n  } else if (chunk === null) {\n    state.state &= ~kReading\n    onEofChunk(stream, state)\n  } else if ((state.state & kObjectMode) !== 0 || (chunk && chunk.length > 0)) {\n    if (addToFront) {\n      if ((state.state & kEndEmitted) !== 0) errorOrDestroy(stream, new ERR_STREAM_UNSHIFT_AFTER_END_EVENT())\n      else if (state.destroyed || state.errored) return false\n      else addChunk(stream, state, chunk, true)\n    } else if (state.ended) {\n      errorOrDestroy(stream, new ERR_STREAM_PUSH_AFTER_EOF())\n    } else if (state.destroyed || state.errored) {\n      return false\n    } else {\n      state.state &= ~kReading\n      if (state.decoder && !encoding) {\n        chunk = state.decoder.write(chunk)\n        if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false)\n        else maybeReadMore(stream, state)\n      } else {\n        addChunk(stream, state, chunk, false)\n      }\n    }\n  } else if (!addToFront) {\n    state.state &= ~kReading\n    maybeReadMore(stream, state)\n  }\n\n  // We can push more data if we are below the highWaterMark.\n  // Also, if we have no data yet, we can stand some more bytes.\n  // This is to work around cases where hwm=0, such as the repl.\n  return !state.ended && (state.length < state.highWaterMark || state.length === 0)\n}\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync && stream.listenerCount('data') > 0) {\n    // Use the guard to avoid creating `Set()` repeatedly\n    // when we have multiple pipes.\n    if ((state.state & kMultiAwaitDrain) !== 0) {\n      state.awaitDrainWriters.clear()\n    } else {\n      state.awaitDrainWriters = null\n    }\n    state.dataEmitted = true\n    stream.emit('data', chunk)\n  } else {\n    // Update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length\n    if (addToFront) state.buffer.unshift(chunk)\n    else state.buffer.push(chunk)\n    if ((state.state & kNeedReadable) !== 0) emitReadable(stream)\n  }\n  maybeReadMore(stream, state)\n}\nReadable.prototype.isPaused = function () {\n  const state = this._readableState\n  return state[kPaused] === true || state.flowing === false\n}\n\n// Backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  const decoder = new StringDecoder(enc)\n  this._readableState.decoder = decoder\n  // If setEncoding(null), decoder.encoding equals utf8.\n  this._readableState.encoding = this._readableState.decoder.encoding\n  const buffer = this._readableState.buffer\n  // Iterate over current buffer to convert already stored Buffers:\n  let content = ''\n  for (const data of buffer) {\n    content += decoder.write(data)\n  }\n  buffer.clear()\n  if (content !== '') buffer.push(content)\n  this._readableState.length = content.length\n  return this\n}\n\n// Don't raise the hwm > 1GB.\nconst MAX_HWM = 0x40000000\nfunction computeNewHighWaterMark(n) {\n  if (n > MAX_HWM) {\n    throw new ERR_OUT_OF_RANGE('size', '<= 1GiB', n)\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts.\n    n--\n    n |= n >>> 1\n    n |= n >>> 2\n    n |= n >>> 4\n    n |= n >>> 8\n    n |= n >>> 16\n    n++\n  }\n  return n\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || (state.length === 0 && state.ended)) return 0\n  if ((state.state & kObjectMode) !== 0) return 1\n  if (NumberIsNaN(n)) {\n    // Only flow one buffer at a time.\n    if (state.flowing && state.length) return state.buffer.first().length\n    return state.length\n  }\n  if (n <= state.length) return n\n  return state.ended ? state.length : 0\n}\n\n// You can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n)\n  // Same as parseInt(undefined, 10), however V8 7.3 performance regressed\n  // in this scenario, so we are doing it manually.\n  if (n === undefined) {\n    n = NaN\n  } else if (!NumberIsInteger(n)) {\n    n = NumberParseInt(n, 10)\n  }\n  const state = this._readableState\n  const nOrig = n\n\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n)\n  if (n !== 0) state.state &= ~kEmittedReadable\n\n  // If we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (\n    n === 0 &&\n    state.needReadable &&\n    ((state.highWaterMark !== 0 ? state.length >= state.highWaterMark : state.length > 0) || state.ended)\n  ) {\n    debug('read: emitReadable', state.length, state.ended)\n    if (state.length === 0 && state.ended) endReadable(this)\n    else emitReadable(this)\n    return null\n  }\n  n = howMuchToRead(n, state)\n\n  // If we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this)\n    return null\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  let doRead = (state.state & kNeedReadable) !== 0\n  debug('need readable', doRead)\n\n  // If we currently have less than the highWaterMark, then also read some.\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true\n    debug('length less than watermark', doRead)\n  }\n\n  // However, if we've ended, then there's no point, if we're already\n  // reading, then it's unnecessary, if we're constructing we have to wait,\n  // and if we're destroyed or errored, then it's not allowed,\n  if (state.ended || state.reading || state.destroyed || state.errored || !state.constructed) {\n    doRead = false\n    debug('reading, ended or constructing', doRead)\n  } else if (doRead) {\n    debug('do read')\n    state.state |= kReading | kSync\n    // If the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.state |= kNeedReadable\n\n    // Call internal read method\n    try {\n      this._read(state.highWaterMark)\n    } catch (err) {\n      errorOrDestroy(this, err)\n    }\n    state.state &= ~kSync\n\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state)\n  }\n  let ret\n  if (n > 0) ret = fromList(n, state)\n  else ret = null\n  if (ret === null) {\n    state.needReadable = state.length <= state.highWaterMark\n    n = 0\n  } else {\n    state.length -= n\n    if (state.multiAwaitDrain) {\n      state.awaitDrainWriters.clear()\n    } else {\n      state.awaitDrainWriters = null\n    }\n  }\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this)\n  }\n  if (ret !== null && !state.errorEmitted && !state.closeEmitted) {\n    state.dataEmitted = true\n    this.emit('data', ret)\n  }\n  return ret\n}\nfunction onEofChunk(stream, state) {\n  debug('onEofChunk')\n  if (state.ended) return\n  if (state.decoder) {\n    const chunk = state.decoder.end()\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk)\n      state.length += state.objectMode ? 1 : chunk.length\n    }\n  }\n  state.ended = true\n  if (state.sync) {\n    // If we are sync, wait until next tick to emit the data.\n    // Otherwise we risk emitting data in the flow()\n    // the readable code triggers during a read() call.\n    emitReadable(stream)\n  } else {\n    // Emit 'readable' now to make sure it gets picked up.\n    state.needReadable = false\n    state.emittedReadable = true\n    // We have to emit readable now that we are EOF. Modules\n    // in the ecosystem (e.g. dicer) rely on this event being sync.\n    emitReadable_(stream)\n  }\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  const state = stream._readableState\n  debug('emitReadable', state.needReadable, state.emittedReadable)\n  state.needReadable = false\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing)\n    state.emittedReadable = true\n    process.nextTick(emitReadable_, stream)\n  }\n}\nfunction emitReadable_(stream) {\n  const state = stream._readableState\n  debug('emitReadable_', state.destroyed, state.length, state.ended)\n  if (!state.destroyed && !state.errored && (state.length || state.ended)) {\n    stream.emit('readable')\n    state.emittedReadable = false\n  }\n\n  // The stream needs another readable event if:\n  // 1. It is not flowing, as the flow mechanism will take\n  //    care of it.\n  // 2. It is not ended.\n  // 3. It is below the highWaterMark, so we can schedule\n  //    another readable later.\n  state.needReadable = !state.flowing && !state.ended && state.length <= state.highWaterMark\n  flow(stream)\n}\n\n// At this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore && state.constructed) {\n    state.readingMore = true\n    process.nextTick(maybeReadMore_, stream, state)\n  }\n}\nfunction maybeReadMore_(stream, state) {\n  // Attempt to read more data if we should.\n  //\n  // The conditions for reading more data are (one of):\n  // - Not enough data buffered (state.length < state.highWaterMark). The loop\n  //   is responsible for filling the buffer with enough data if such data\n  //   is available. If highWaterMark is 0 and we are not in the flowing mode\n  //   we should _not_ attempt to buffer any extra data. We'll get more data\n  //   when the stream consumer calls read() instead.\n  // - No data in the buffer, and the stream is in flowing mode. In this mode\n  //   the loop below is responsible for ensuring read() is called. Failing to\n  //   call read here would abort the flow and there's no other mechanism for\n  //   continuing the flow if the stream consumer has just subscribed to the\n  //   'data' event.\n  //\n  // In addition to the above conditions to keep reading data, the following\n  // conditions prevent the data from being read:\n  // - The stream has ended (state.ended).\n  // - There is already a pending 'read' operation (state.reading). This is a\n  //   case where the stream has called the implementation defined _read()\n  //   method, but they are processing the call asynchronously and have _not_\n  //   called push() with new data. In this case we skip performing more\n  //   read()s. The execution ends in this method again after the _read() ends\n  //   up calling push() with more data.\n  while (\n    !state.reading &&\n    !state.ended &&\n    (state.length < state.highWaterMark || (state.flowing && state.length === 0))\n  ) {\n    const len = state.length\n    debug('maybeReadMore read 0')\n    stream.read(0)\n    if (len === state.length)\n      // Didn't get any data, stop spinning.\n      break\n  }\n  state.readingMore = false\n}\n\n// Abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  throw new ERR_METHOD_NOT_IMPLEMENTED('_read()')\n}\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  const src = this\n  const state = this._readableState\n  if (state.pipes.length === 1) {\n    if (!state.multiAwaitDrain) {\n      state.multiAwaitDrain = true\n      state.awaitDrainWriters = new SafeSet(state.awaitDrainWriters ? [state.awaitDrainWriters] : [])\n    }\n  }\n  state.pipes.push(dest)\n  debug('pipe count=%d opts=%j', state.pipes.length, pipeOpts)\n  const doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr\n  const endFn = doEnd ? onend : unpipe\n  if (state.endEmitted) process.nextTick(endFn)\n  else src.once('end', endFn)\n  dest.on('unpipe', onunpipe)\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe')\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true\n        cleanup()\n      }\n    }\n  }\n  function onend() {\n    debug('onend')\n    dest.end()\n  }\n  let ondrain\n  let cleanedUp = false\n  function cleanup() {\n    debug('cleanup')\n    // Cleanup event handlers once the pipe is broken.\n    dest.removeListener('close', onclose)\n    dest.removeListener('finish', onfinish)\n    if (ondrain) {\n      dest.removeListener('drain', ondrain)\n    }\n    dest.removeListener('error', onerror)\n    dest.removeListener('unpipe', onunpipe)\n    src.removeListener('end', onend)\n    src.removeListener('end', unpipe)\n    src.removeListener('data', ondata)\n    cleanedUp = true\n\n    // If the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (ondrain && state.awaitDrainWriters && (!dest._writableState || dest._writableState.needDrain)) ondrain()\n  }\n  function pause() {\n    // If the user unpiped during `dest.write()`, it is possible\n    // to get stuck in a permanently paused state if that write\n    // also returned false.\n    // => Check whether `dest` is still a piping destination.\n    if (!cleanedUp) {\n      if (state.pipes.length === 1 && state.pipes[0] === dest) {\n        debug('false write response, pause', 0)\n        state.awaitDrainWriters = dest\n        state.multiAwaitDrain = false\n      } else if (state.pipes.length > 1 && state.pipes.includes(dest)) {\n        debug('false write response, pause', state.awaitDrainWriters.size)\n        state.awaitDrainWriters.add(dest)\n      }\n      src.pause()\n    }\n    if (!ondrain) {\n      // When the dest drains, it reduces the awaitDrain counter\n      // on the source.  This would be more elegant with a .once()\n      // handler in flow(), but adding and removing repeatedly is\n      // too slow.\n      ondrain = pipeOnDrain(src, dest)\n      dest.on('drain', ondrain)\n    }\n  }\n  src.on('data', ondata)\n  function ondata(chunk) {\n    debug('ondata')\n    const ret = dest.write(chunk)\n    debug('dest.write', ret)\n    if (ret === false) {\n      pause()\n    }\n  }\n\n  // If the dest has an error, then stop piping into it.\n  // However, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er)\n    unpipe()\n    dest.removeListener('error', onerror)\n    if (dest.listenerCount('error') === 0) {\n      const s = dest._writableState || dest._readableState\n      if (s && !s.errorEmitted) {\n        // User incorrectly emitted 'error' directly on the stream.\n        errorOrDestroy(dest, er)\n      } else {\n        dest.emit('error', er)\n      }\n    }\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror)\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish)\n    unpipe()\n  }\n  dest.once('close', onclose)\n  function onfinish() {\n    debug('onfinish')\n    dest.removeListener('close', onclose)\n    unpipe()\n  }\n  dest.once('finish', onfinish)\n  function unpipe() {\n    debug('unpipe')\n    src.unpipe(dest)\n  }\n\n  // Tell the dest that it's being piped to.\n  dest.emit('pipe', src)\n\n  // Start the flow if it hasn't been started already.\n\n  if (dest.writableNeedDrain === true) {\n    pause()\n  } else if (!state.flowing) {\n    debug('pipe resume')\n    src.resume()\n  }\n  return dest\n}\nfunction pipeOnDrain(src, dest) {\n  return function pipeOnDrainFunctionResult() {\n    const state = src._readableState\n\n    // `ondrain` will call directly,\n    // `this` maybe not a reference to dest,\n    // so we use the real dest here.\n    if (state.awaitDrainWriters === dest) {\n      debug('pipeOnDrain', 1)\n      state.awaitDrainWriters = null\n    } else if (state.multiAwaitDrain) {\n      debug('pipeOnDrain', state.awaitDrainWriters.size)\n      state.awaitDrainWriters.delete(dest)\n    }\n    if ((!state.awaitDrainWriters || state.awaitDrainWriters.size === 0) && src.listenerCount('data')) {\n      src.resume()\n    }\n  }\n}\nReadable.prototype.unpipe = function (dest) {\n  const state = this._readableState\n  const unpipeInfo = {\n    hasUnpiped: false\n  }\n\n  // If we're not piping anywhere, then do nothing.\n  if (state.pipes.length === 0) return this\n  if (!dest) {\n    // remove all.\n    const dests = state.pipes\n    state.pipes = []\n    this.pause()\n    for (let i = 0; i < dests.length; i++)\n      dests[i].emit('unpipe', this, {\n        hasUnpiped: false\n      })\n    return this\n  }\n\n  // Try to find the right one.\n  const index = ArrayPrototypeIndexOf(state.pipes, dest)\n  if (index === -1) return this\n  state.pipes.splice(index, 1)\n  if (state.pipes.length === 0) this.pause()\n  dest.emit('unpipe', this, unpipeInfo)\n  return this\n}\n\n// Set up data events if they are asked for\n// Ensure readable listeners eventually get something.\nReadable.prototype.on = function (ev, fn) {\n  const res = Stream.prototype.on.call(this, ev, fn)\n  const state = this._readableState\n  if (ev === 'data') {\n    // Update readableListening so that resume() may be a no-op\n    // a few lines down. This is needed to support once('readable').\n    state.readableListening = this.listenerCount('readable') > 0\n\n    // Try start flowing on next tick if stream isn't explicitly paused.\n    if (state.flowing !== false) this.resume()\n  } else if (ev === 'readable') {\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true\n      state.flowing = false\n      state.emittedReadable = false\n      debug('on readable', state.length, state.reading)\n      if (state.length) {\n        emitReadable(this)\n      } else if (!state.reading) {\n        process.nextTick(nReadingNextTick, this)\n      }\n    }\n  }\n  return res\n}\nReadable.prototype.addListener = Readable.prototype.on\nReadable.prototype.removeListener = function (ev, fn) {\n  const res = Stream.prototype.removeListener.call(this, ev, fn)\n  if (ev === 'readable') {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this)\n  }\n  return res\n}\nReadable.prototype.off = Readable.prototype.removeListener\nReadable.prototype.removeAllListeners = function (ev) {\n  const res = Stream.prototype.removeAllListeners.apply(this, arguments)\n  if (ev === 'readable' || ev === undefined) {\n    // We need to check if there is someone still listening to\n    // readable and reset the state. However this needs to happen\n    // after readable has been emitted but before I/O (nextTick) to\n    // support once('readable', fn) cycles. This means that calling\n    // resume within the same tick will have no\n    // effect.\n    process.nextTick(updateReadableListening, this)\n  }\n  return res\n}\nfunction updateReadableListening(self) {\n  const state = self._readableState\n  state.readableListening = self.listenerCount('readable') > 0\n  if (state.resumeScheduled && state[kPaused] === false) {\n    // Flowing needs to be set to true now, otherwise\n    // the upcoming resume will not flow.\n    state.flowing = true\n\n    // Crude way to check if we should resume.\n  } else if (self.listenerCount('data') > 0) {\n    self.resume()\n  } else if (!state.readableListening) {\n    state.flowing = null\n  }\n}\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0')\n  self.read(0)\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  const state = this._readableState\n  if (!state.flowing) {\n    debug('resume')\n    // We flow only if there is no one listening\n    // for readable, but we still have to call\n    // resume().\n    state.flowing = !state.readableListening\n    resume(this, state)\n  }\n  state[kPaused] = false\n  return this\n}\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true\n    process.nextTick(resume_, stream, state)\n  }\n}\nfunction resume_(stream, state) {\n  debug('resume', state.reading)\n  if (!state.reading) {\n    stream.read(0)\n  }\n  state.resumeScheduled = false\n  stream.emit('resume')\n  flow(stream)\n  if (state.flowing && !state.reading) stream.read(0)\n}\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing)\n  if (this._readableState.flowing !== false) {\n    debug('pause')\n    this._readableState.flowing = false\n    this.emit('pause')\n  }\n  this._readableState[kPaused] = true\n  return this\n}\nfunction flow(stream) {\n  const state = stream._readableState\n  debug('flow', state.flowing)\n  while (state.flowing && stream.read() !== null);\n}\n\n// Wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  let paused = false\n\n  // TODO (ronag): Should this.destroy(err) emit\n  // 'error' on the wrapped stream? Would require\n  // a static factory method, e.g. Readable.wrap(stream).\n\n  stream.on('data', (chunk) => {\n    if (!this.push(chunk) && stream.pause) {\n      paused = true\n      stream.pause()\n    }\n  })\n  stream.on('end', () => {\n    this.push(null)\n  })\n  stream.on('error', (err) => {\n    errorOrDestroy(this, err)\n  })\n  stream.on('close', () => {\n    this.destroy()\n  })\n  stream.on('destroy', () => {\n    this.destroy()\n  })\n  this._read = () => {\n    if (paused && stream.resume) {\n      paused = false\n      stream.resume()\n    }\n  }\n\n  // Proxy all the other methods. Important when wrapping filters and duplexes.\n  const streamKeys = ObjectKeys(stream)\n  for (let j = 1; j < streamKeys.length; j++) {\n    const i = streamKeys[j]\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = stream[i].bind(stream)\n    }\n  }\n  return this\n}\nReadable.prototype[SymbolAsyncIterator] = function () {\n  return streamToAsyncIterator(this)\n}\nReadable.prototype.iterator = function (options) {\n  if (options !== undefined) {\n    validateObject(options, 'options')\n  }\n  return streamToAsyncIterator(this, options)\n}\nfunction streamToAsyncIterator(stream, options) {\n  if (typeof stream.read !== 'function') {\n    stream = Readable.wrap(stream, {\n      objectMode: true\n    })\n  }\n  const iter = createAsyncIterator(stream, options)\n  iter.stream = stream\n  return iter\n}\nasync function* createAsyncIterator(stream, options) {\n  let callback = nop\n  function next(resolve) {\n    if (this === stream) {\n      callback()\n      callback = nop\n    } else {\n      callback = resolve\n    }\n  }\n  stream.on('readable', next)\n  let error\n  const cleanup = eos(\n    stream,\n    {\n      writable: false\n    },\n    (err) => {\n      error = err ? aggregateTwoErrors(error, err) : null\n      callback()\n      callback = nop\n    }\n  )\n  try {\n    while (true) {\n      const chunk = stream.destroyed ? null : stream.read()\n      if (chunk !== null) {\n        yield chunk\n      } else if (error) {\n        throw error\n      } else if (error === null) {\n        return\n      } else {\n        await new Promise(next)\n      }\n    }\n  } catch (err) {\n    error = aggregateTwoErrors(error, err)\n    throw error\n  } finally {\n    if (\n      (error || (options === null || options === undefined ? undefined : options.destroyOnReturn) !== false) &&\n      (error === undefined || stream._readableState.autoDestroy)\n    ) {\n      destroyImpl.destroyer(stream, null)\n    } else {\n      stream.off('readable', next)\n      cleanup()\n    }\n  }\n}\n\n// Making it explicit these properties are not enumerable\n// because otherwise some prototype manipulation in\n// userland will fail.\nObjectDefineProperties(Readable.prototype, {\n  readable: {\n    __proto__: null,\n    get() {\n      const r = this._readableState\n      // r.readable === false means that this is part of a Duplex stream\n      // where the readable side was disabled upon construction.\n      // Compat. The user might manually disable readable side through\n      // deprecated setter.\n      return !!r && r.readable !== false && !r.destroyed && !r.errorEmitted && !r.endEmitted\n    },\n    set(val) {\n      // Backwards compat.\n      if (this._readableState) {\n        this._readableState.readable = !!val\n      }\n    }\n  },\n  readableDidRead: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return this._readableState.dataEmitted\n    }\n  },\n  readableAborted: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return !!(\n        this._readableState.readable !== false &&\n        (this._readableState.destroyed || this._readableState.errored) &&\n        !this._readableState.endEmitted\n      )\n    }\n  },\n  readableHighWaterMark: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return this._readableState.highWaterMark\n    }\n  },\n  readableBuffer: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return this._readableState && this._readableState.buffer\n    }\n  },\n  readableFlowing: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return this._readableState.flowing\n    },\n    set: function (state) {\n      if (this._readableState) {\n        this._readableState.flowing = state\n      }\n    }\n  },\n  readableLength: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState.length\n    }\n  },\n  readableObjectMode: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.objectMode : false\n    }\n  },\n  readableEncoding: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.encoding : null\n    }\n  },\n  errored: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.errored : null\n    }\n  },\n  closed: {\n    __proto__: null,\n    get() {\n      return this._readableState ? this._readableState.closed : false\n    }\n  },\n  destroyed: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.destroyed : false\n    },\n    set(value) {\n      // We ignore the value if the stream\n      // has not been initialized yet.\n      if (!this._readableState) {\n        return\n      }\n\n      // Backward compatibility, the user is explicitly\n      // managing destroyed.\n      this._readableState.destroyed = value\n    }\n  },\n  readableEnded: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._readableState ? this._readableState.endEmitted : false\n    }\n  }\n})\nObjectDefineProperties(ReadableState.prototype, {\n  // Legacy getter for `pipesCount`.\n  pipesCount: {\n    __proto__: null,\n    get() {\n      return this.pipes.length\n    }\n  },\n  // Legacy property for `paused`.\n  paused: {\n    __proto__: null,\n    get() {\n      return this[kPaused] !== false\n    },\n    set(value) {\n      this[kPaused] = !!value\n    }\n  }\n})\n\n// Exposed for testing purposes only.\nReadable._fromList = fromList\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered.\n  if (state.length === 0) return null\n  let ret\n  if (state.objectMode) ret = state.buffer.shift()\n  else if (!n || n >= state.length) {\n    // Read it all, truncate the list.\n    if (state.decoder) ret = state.buffer.join('')\n    else if (state.buffer.length === 1) ret = state.buffer.first()\n    else ret = state.buffer.concat(state.length)\n    state.buffer.clear()\n  } else {\n    // read part of list.\n    ret = state.buffer.consume(n, state.decoder)\n  }\n  return ret\n}\nfunction endReadable(stream) {\n  const state = stream._readableState\n  debug('endReadable', state.endEmitted)\n  if (!state.endEmitted) {\n    state.ended = true\n    process.nextTick(endReadableNT, state, stream)\n  }\n}\nfunction endReadableNT(state, stream) {\n  debug('endReadableNT', state.endEmitted, state.length)\n\n  // Check that we didn't get one last unshift.\n  if (!state.errored && !state.closeEmitted && !state.endEmitted && state.length === 0) {\n    state.endEmitted = true\n    stream.emit('end')\n    if (stream.writable && stream.allowHalfOpen === false) {\n      process.nextTick(endWritableNT, stream)\n    } else if (state.autoDestroy) {\n      // In case of duplex streams we need a way to detect\n      // if the writable side is ready for autoDestroy as well.\n      const wState = stream._writableState\n      const autoDestroy =\n        !wState ||\n        (wState.autoDestroy &&\n          // We don't expect the writable to ever 'finish'\n          // if writable is explicitly set to false.\n          (wState.finished || wState.writable === false))\n      if (autoDestroy) {\n        stream.destroy()\n      }\n    }\n  }\n}\nfunction endWritableNT(stream) {\n  const writable = stream.writable && !stream.writableEnded && !stream.destroyed\n  if (writable) {\n    stream.end()\n  }\n}\nReadable.from = function (iterable, opts) {\n  return from(Readable, iterable, opts)\n}\nlet webStreamsAdapters\n\n// Lazy to avoid circular references\nfunction lazyWebStreams() {\n  if (webStreamsAdapters === undefined) webStreamsAdapters = {}\n  return webStreamsAdapters\n}\nReadable.fromWeb = function (readableStream, options) {\n  return lazyWebStreams().newStreamReadableFromReadableStream(readableStream, options)\n}\nReadable.toWeb = function (streamReadable, options) {\n  return lazyWebStreams().newReadableStreamFromStreamReadable(streamReadable, options)\n}\nReadable.wrap = function (src, options) {\n  var _ref, _src$readableObjectMo\n  return new Readable({\n    objectMode:\n      (_ref =\n        (_src$readableObjectMo = src.readableObjectMode) !== null && _src$readableObjectMo !== undefined\n          ? _src$readableObjectMo\n          : src.objectMode) !== null && _ref !== undefined\n        ? _ref\n        : true,\n    ...options,\n    destroy(err, callback) {\n      destroyImpl.destroyer(src, err)\n      callback(err)\n    }\n  }).wrap(src)\n}\n","'use strict'\n\nconst { MathFloor, NumberIsInteger } = require('../../ours/primordials')\nconst { validateInteger } = require('../validators')\nconst { ERR_INVALID_ARG_VALUE } = require('../../ours/errors').codes\nlet defaultHighWaterMarkBytes = 16 * 1024\nlet defaultHighWaterMarkObjectMode = 16\nfunction highWaterMarkFrom(options, isDuplex, duplexKey) {\n  return options.highWaterMark != null ? options.highWaterMark : isDuplex ? options[duplexKey] : null\n}\nfunction getDefaultHighWaterMark(objectMode) {\n  return objectMode ? defaultHighWaterMarkObjectMode : defaultHighWaterMarkBytes\n}\nfunction setDefaultHighWaterMark(objectMode, value) {\n  validateInteger(value, 'value', 0)\n  if (objectMode) {\n    defaultHighWaterMarkObjectMode = value\n  } else {\n    defaultHighWaterMarkBytes = value\n  }\n}\nfunction getHighWaterMark(state, options, duplexKey, isDuplex) {\n  const hwm = highWaterMarkFrom(options, isDuplex, duplexKey)\n  if (hwm != null) {\n    if (!NumberIsInteger(hwm) || hwm < 0) {\n      const name = isDuplex ? `options.${duplexKey}` : 'options.highWaterMark'\n      throw new ERR_INVALID_ARG_VALUE(name, hwm)\n    }\n    return MathFloor(hwm)\n  }\n\n  // Default value\n  return getDefaultHighWaterMark(state.objectMode)\n}\nmodule.exports = {\n  getHighWaterMark,\n  getDefaultHighWaterMark,\n  setDefaultHighWaterMark\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict'\n\nconst { ObjectSetPrototypeOf, Symbol } = require('../../ours/primordials')\nmodule.exports = Transform\nconst { ERR_METHOD_NOT_IMPLEMENTED } = require('../../ours/errors').codes\nconst Duplex = require('./duplex')\nconst { getHighWaterMark } = require('./state')\nObjectSetPrototypeOf(Transform.prototype, Duplex.prototype)\nObjectSetPrototypeOf(Transform, Duplex)\nconst kCallback = Symbol('kCallback')\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options)\n\n  // TODO (ronag): This should preferably always be\n  // applied but would be semver-major. Or even better;\n  // make Transform a Readable with the Writable interface.\n  const readableHighWaterMark = options ? getHighWaterMark(this, options, 'readableHighWaterMark', true) : null\n  if (readableHighWaterMark === 0) {\n    // A Duplex will buffer both on the writable and readable side while\n    // a Transform just wants to buffer hwm number of elements. To avoid\n    // buffering twice we disable buffering on the writable side.\n    options = {\n      ...options,\n      highWaterMark: null,\n      readableHighWaterMark,\n      // TODO (ronag): 0 is not optimal since we have\n      // a \"bug\" where we check needDrain before calling _write and not after.\n      // Refs: https://github.com/nodejs/node/pull/32887\n      // Refs: https://github.com/nodejs/node/pull/35941\n      writableHighWaterMark: options.writableHighWaterMark || 0\n    }\n  }\n  Duplex.call(this, options)\n\n  // We have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false\n  this[kCallback] = null\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform\n    if (typeof options.flush === 'function') this._flush = options.flush\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  // Backwards compat. Some Transform streams incorrectly implement _final\n  // instead of or in addition to _flush. By using 'prefinish' instead of\n  // implementing _final we continue supporting this unfortunate use case.\n  this.on('prefinish', prefinish)\n}\nfunction final(cb) {\n  if (typeof this._flush === 'function' && !this.destroyed) {\n    this._flush((er, data) => {\n      if (er) {\n        if (cb) {\n          cb(er)\n        } else {\n          this.destroy(er)\n        }\n        return\n      }\n      if (data != null) {\n        this.push(data)\n      }\n      this.push(null)\n      if (cb) {\n        cb()\n      }\n    })\n  } else {\n    this.push(null)\n    if (cb) {\n      cb()\n    }\n  }\n}\nfunction prefinish() {\n  if (this._final !== final) {\n    final.call(this)\n  }\n}\nTransform.prototype._final = final\nTransform.prototype._transform = function (chunk, encoding, callback) {\n  throw new ERR_METHOD_NOT_IMPLEMENTED('_transform()')\n}\nTransform.prototype._write = function (chunk, encoding, callback) {\n  const rState = this._readableState\n  const wState = this._writableState\n  const length = rState.length\n  this._transform(chunk, encoding, (err, val) => {\n    if (err) {\n      callback(err)\n      return\n    }\n    if (val != null) {\n      this.push(val)\n    }\n    if (\n      wState.ended ||\n      // Backwards compat.\n      length === rState.length ||\n      // Backwards compat.\n      rState.length < rState.highWaterMark\n    ) {\n      callback()\n    } else {\n      this[kCallback] = callback\n    }\n  })\n}\nTransform.prototype._read = function () {\n  if (this[kCallback]) {\n    const callback = this[kCallback]\n    this[kCallback] = null\n    callback()\n  }\n}\n","'use strict'\n\nconst { SymbolAsyncIterator, SymbolIterator, SymbolFor } = require('../../ours/primordials')\n\n// We need to use SymbolFor to make these globally available\n// for interopt with readable-stream, i.e. readable-stream\n// and node core needs to be able to read/write private state\n// from each other for proper interoperability.\nconst kIsDestroyed = SymbolFor('nodejs.stream.destroyed')\nconst kIsErrored = SymbolFor('nodejs.stream.errored')\nconst kIsReadable = SymbolFor('nodejs.stream.readable')\nconst kIsWritable = SymbolFor('nodejs.stream.writable')\nconst kIsDisturbed = SymbolFor('nodejs.stream.disturbed')\nconst kIsClosedPromise = SymbolFor('nodejs.webstream.isClosedPromise')\nconst kControllerErrorFunction = SymbolFor('nodejs.webstream.controllerErrorFunction')\nfunction isReadableNodeStream(obj, strict = false) {\n  var _obj$_readableState\n  return !!(\n    (\n      obj &&\n      typeof obj.pipe === 'function' &&\n      typeof obj.on === 'function' &&\n      (!strict || (typeof obj.pause === 'function' && typeof obj.resume === 'function')) &&\n      (!obj._writableState ||\n        ((_obj$_readableState = obj._readableState) === null || _obj$_readableState === undefined\n          ? undefined\n          : _obj$_readableState.readable) !== false) &&\n      // Duplex\n      (!obj._writableState || obj._readableState)\n    ) // Writable has .pipe.\n  )\n}\n\nfunction isWritableNodeStream(obj) {\n  var _obj$_writableState\n  return !!(\n    (\n      obj &&\n      typeof obj.write === 'function' &&\n      typeof obj.on === 'function' &&\n      (!obj._readableState ||\n        ((_obj$_writableState = obj._writableState) === null || _obj$_writableState === undefined\n          ? undefined\n          : _obj$_writableState.writable) !== false)\n    ) // Duplex\n  )\n}\n\nfunction isDuplexNodeStream(obj) {\n  return !!(\n    obj &&\n    typeof obj.pipe === 'function' &&\n    obj._readableState &&\n    typeof obj.on === 'function' &&\n    typeof obj.write === 'function'\n  )\n}\nfunction isNodeStream(obj) {\n  return (\n    obj &&\n    (obj._readableState ||\n      obj._writableState ||\n      (typeof obj.write === 'function' && typeof obj.on === 'function') ||\n      (typeof obj.pipe === 'function' && typeof obj.on === 'function'))\n  )\n}\nfunction isReadableStream(obj) {\n  return !!(\n    obj &&\n    !isNodeStream(obj) &&\n    typeof obj.pipeThrough === 'function' &&\n    typeof obj.getReader === 'function' &&\n    typeof obj.cancel === 'function'\n  )\n}\nfunction isWritableStream(obj) {\n  return !!(obj && !isNodeStream(obj) && typeof obj.getWriter === 'function' && typeof obj.abort === 'function')\n}\nfunction isTransformStream(obj) {\n  return !!(obj && !isNodeStream(obj) && typeof obj.readable === 'object' && typeof obj.writable === 'object')\n}\nfunction isWebStream(obj) {\n  return isReadableStream(obj) || isWritableStream(obj) || isTransformStream(obj)\n}\nfunction isIterable(obj, isAsync) {\n  if (obj == null) return false\n  if (isAsync === true) return typeof obj[SymbolAsyncIterator] === 'function'\n  if (isAsync === false) return typeof obj[SymbolIterator] === 'function'\n  return typeof obj[SymbolAsyncIterator] === 'function' || typeof obj[SymbolIterator] === 'function'\n}\nfunction isDestroyed(stream) {\n  if (!isNodeStream(stream)) return null\n  const wState = stream._writableState\n  const rState = stream._readableState\n  const state = wState || rState\n  return !!(stream.destroyed || stream[kIsDestroyed] || (state !== null && state !== undefined && state.destroyed))\n}\n\n// Have been end():d.\nfunction isWritableEnded(stream) {\n  if (!isWritableNodeStream(stream)) return null\n  if (stream.writableEnded === true) return true\n  const wState = stream._writableState\n  if (wState !== null && wState !== undefined && wState.errored) return false\n  if (typeof (wState === null || wState === undefined ? undefined : wState.ended) !== 'boolean') return null\n  return wState.ended\n}\n\n// Have emitted 'finish'.\nfunction isWritableFinished(stream, strict) {\n  if (!isWritableNodeStream(stream)) return null\n  if (stream.writableFinished === true) return true\n  const wState = stream._writableState\n  if (wState !== null && wState !== undefined && wState.errored) return false\n  if (typeof (wState === null || wState === undefined ? undefined : wState.finished) !== 'boolean') return null\n  return !!(wState.finished || (strict === false && wState.ended === true && wState.length === 0))\n}\n\n// Have been push(null):d.\nfunction isReadableEnded(stream) {\n  if (!isReadableNodeStream(stream)) return null\n  if (stream.readableEnded === true) return true\n  const rState = stream._readableState\n  if (!rState || rState.errored) return false\n  if (typeof (rState === null || rState === undefined ? undefined : rState.ended) !== 'boolean') return null\n  return rState.ended\n}\n\n// Have emitted 'end'.\nfunction isReadableFinished(stream, strict) {\n  if (!isReadableNodeStream(stream)) return null\n  const rState = stream._readableState\n  if (rState !== null && rState !== undefined && rState.errored) return false\n  if (typeof (rState === null || rState === undefined ? undefined : rState.endEmitted) !== 'boolean') return null\n  return !!(rState.endEmitted || (strict === false && rState.ended === true && rState.length === 0))\n}\nfunction isReadable(stream) {\n  if (stream && stream[kIsReadable] != null) return stream[kIsReadable]\n  if (typeof (stream === null || stream === undefined ? undefined : stream.readable) !== 'boolean') return null\n  if (isDestroyed(stream)) return false\n  return isReadableNodeStream(stream) && stream.readable && !isReadableFinished(stream)\n}\nfunction isWritable(stream) {\n  if (stream && stream[kIsWritable] != null) return stream[kIsWritable]\n  if (typeof (stream === null || stream === undefined ? undefined : stream.writable) !== 'boolean') return null\n  if (isDestroyed(stream)) return false\n  return isWritableNodeStream(stream) && stream.writable && !isWritableEnded(stream)\n}\nfunction isFinished(stream, opts) {\n  if (!isNodeStream(stream)) {\n    return null\n  }\n  if (isDestroyed(stream)) {\n    return true\n  }\n  if ((opts === null || opts === undefined ? undefined : opts.readable) !== false && isReadable(stream)) {\n    return false\n  }\n  if ((opts === null || opts === undefined ? undefined : opts.writable) !== false && isWritable(stream)) {\n    return false\n  }\n  return true\n}\nfunction isWritableErrored(stream) {\n  var _stream$_writableStat, _stream$_writableStat2\n  if (!isNodeStream(stream)) {\n    return null\n  }\n  if (stream.writableErrored) {\n    return stream.writableErrored\n  }\n  return (_stream$_writableStat =\n    (_stream$_writableStat2 = stream._writableState) === null || _stream$_writableStat2 === undefined\n      ? undefined\n      : _stream$_writableStat2.errored) !== null && _stream$_writableStat !== undefined\n    ? _stream$_writableStat\n    : null\n}\nfunction isReadableErrored(stream) {\n  var _stream$_readableStat, _stream$_readableStat2\n  if (!isNodeStream(stream)) {\n    return null\n  }\n  if (stream.readableErrored) {\n    return stream.readableErrored\n  }\n  return (_stream$_readableStat =\n    (_stream$_readableStat2 = stream._readableState) === null || _stream$_readableStat2 === undefined\n      ? undefined\n      : _stream$_readableStat2.errored) !== null && _stream$_readableStat !== undefined\n    ? _stream$_readableStat\n    : null\n}\nfunction isClosed(stream) {\n  if (!isNodeStream(stream)) {\n    return null\n  }\n  if (typeof stream.closed === 'boolean') {\n    return stream.closed\n  }\n  const wState = stream._writableState\n  const rState = stream._readableState\n  if (\n    typeof (wState === null || wState === undefined ? undefined : wState.closed) === 'boolean' ||\n    typeof (rState === null || rState === undefined ? undefined : rState.closed) === 'boolean'\n  ) {\n    return (\n      (wState === null || wState === undefined ? undefined : wState.closed) ||\n      (rState === null || rState === undefined ? undefined : rState.closed)\n    )\n  }\n  if (typeof stream._closed === 'boolean' && isOutgoingMessage(stream)) {\n    return stream._closed\n  }\n  return null\n}\nfunction isOutgoingMessage(stream) {\n  return (\n    typeof stream._closed === 'boolean' &&\n    typeof stream._defaultKeepAlive === 'boolean' &&\n    typeof stream._removedConnection === 'boolean' &&\n    typeof stream._removedContLen === 'boolean'\n  )\n}\nfunction isServerResponse(stream) {\n  return typeof stream._sent100 === 'boolean' && isOutgoingMessage(stream)\n}\nfunction isServerRequest(stream) {\n  var _stream$req\n  return (\n    typeof stream._consuming === 'boolean' &&\n    typeof stream._dumped === 'boolean' &&\n    ((_stream$req = stream.req) === null || _stream$req === undefined ? undefined : _stream$req.upgradeOrConnect) ===\n      undefined\n  )\n}\nfunction willEmitClose(stream) {\n  if (!isNodeStream(stream)) return null\n  const wState = stream._writableState\n  const rState = stream._readableState\n  const state = wState || rState\n  return (\n    (!state && isServerResponse(stream)) || !!(state && state.autoDestroy && state.emitClose && state.closed === false)\n  )\n}\nfunction isDisturbed(stream) {\n  var _stream$kIsDisturbed\n  return !!(\n    stream &&\n    ((_stream$kIsDisturbed = stream[kIsDisturbed]) !== null && _stream$kIsDisturbed !== undefined\n      ? _stream$kIsDisturbed\n      : stream.readableDidRead || stream.readableAborted)\n  )\n}\nfunction isErrored(stream) {\n  var _ref,\n    _ref2,\n    _ref3,\n    _ref4,\n    _ref5,\n    _stream$kIsErrored,\n    _stream$_readableStat3,\n    _stream$_writableStat3,\n    _stream$_readableStat4,\n    _stream$_writableStat4\n  return !!(\n    stream &&\n    ((_ref =\n      (_ref2 =\n        (_ref3 =\n          (_ref4 =\n            (_ref5 =\n              (_stream$kIsErrored = stream[kIsErrored]) !== null && _stream$kIsErrored !== undefined\n                ? _stream$kIsErrored\n                : stream.readableErrored) !== null && _ref5 !== undefined\n              ? _ref5\n              : stream.writableErrored) !== null && _ref4 !== undefined\n            ? _ref4\n            : (_stream$_readableStat3 = stream._readableState) === null || _stream$_readableStat3 === undefined\n            ? undefined\n            : _stream$_readableStat3.errorEmitted) !== null && _ref3 !== undefined\n          ? _ref3\n          : (_stream$_writableStat3 = stream._writableState) === null || _stream$_writableStat3 === undefined\n          ? undefined\n          : _stream$_writableStat3.errorEmitted) !== null && _ref2 !== undefined\n        ? _ref2\n        : (_stream$_readableStat4 = stream._readableState) === null || _stream$_readableStat4 === undefined\n        ? undefined\n        : _stream$_readableStat4.errored) !== null && _ref !== undefined\n      ? _ref\n      : (_stream$_writableStat4 = stream._writableState) === null || _stream$_writableStat4 === undefined\n      ? undefined\n      : _stream$_writableStat4.errored)\n  )\n}\nmodule.exports = {\n  isDestroyed,\n  kIsDestroyed,\n  isDisturbed,\n  kIsDisturbed,\n  isErrored,\n  kIsErrored,\n  isReadable,\n  kIsReadable,\n  kIsClosedPromise,\n  kControllerErrorFunction,\n  kIsWritable,\n  isClosed,\n  isDuplexNodeStream,\n  isFinished,\n  isIterable,\n  isReadableNodeStream,\n  isReadableStream,\n  isReadableEnded,\n  isReadableFinished,\n  isReadableErrored,\n  isNodeStream,\n  isWebStream,\n  isWritable,\n  isWritableNodeStream,\n  isWritableStream,\n  isWritableEnded,\n  isWritableFinished,\n  isWritableErrored,\n  isServerRequest,\n  isServerResponse,\n  willEmitClose,\n  isTransformStream\n}\n","/* replacement start */\n\nconst process = require('process/')\n\n/* replacement end */\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n;('use strict')\nconst {\n  ArrayPrototypeSlice,\n  Error,\n  FunctionPrototypeSymbolHasInstance,\n  ObjectDefineProperty,\n  ObjectDefineProperties,\n  ObjectSetPrototypeOf,\n  StringPrototypeToLowerCase,\n  Symbol,\n  SymbolHasInstance\n} = require('../../ours/primordials')\nmodule.exports = Writable\nWritable.WritableState = WritableState\nconst { EventEmitter: EE } = require('events')\nconst Stream = require('./legacy').Stream\nconst { Buffer } = require('buffer')\nconst destroyImpl = require('./destroy')\nconst { addAbortSignal } = require('./add-abort-signal')\nconst { getHighWaterMark, getDefaultHighWaterMark } = require('./state')\nconst {\n  ERR_INVALID_ARG_TYPE,\n  ERR_METHOD_NOT_IMPLEMENTED,\n  ERR_MULTIPLE_CALLBACK,\n  ERR_STREAM_CANNOT_PIPE,\n  ERR_STREAM_DESTROYED,\n  ERR_STREAM_ALREADY_FINISHED,\n  ERR_STREAM_NULL_VALUES,\n  ERR_STREAM_WRITE_AFTER_END,\n  ERR_UNKNOWN_ENCODING\n} = require('../../ours/errors').codes\nconst { errorOrDestroy } = destroyImpl\nObjectSetPrototypeOf(Writable.prototype, Stream.prototype)\nObjectSetPrototypeOf(Writable, Stream)\nfunction nop() {}\nconst kOnFinished = Symbol('kOnFinished')\nfunction WritableState(options, stream, isDuplex) {\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream,\n  // e.g. options.readableObjectMode vs. options.writableObjectMode, etc.\n  if (typeof isDuplex !== 'boolean') isDuplex = stream instanceof require('./duplex')\n\n  // Object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!(options && options.objectMode)\n  if (isDuplex) this.objectMode = this.objectMode || !!(options && options.writableObjectMode)\n\n  // The point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write().\n  this.highWaterMark = options\n    ? getHighWaterMark(this, options, 'writableHighWaterMark', isDuplex)\n    : getDefaultHighWaterMark(false)\n\n  // if _final has been called.\n  this.finalCalled = false\n\n  // drain event flag.\n  this.needDrain = false\n  // At the start of calling end()\n  this.ending = false\n  // When end() has been called, and returned.\n  this.ended = false\n  // When 'finish' is emitted.\n  this.finished = false\n\n  // Has it been destroyed\n  this.destroyed = false\n\n  // Should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  const noDecode = !!(options && options.decodeStrings === false)\n  this.decodeStrings = !noDecode\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = (options && options.defaultEncoding) || 'utf8'\n\n  // Not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0\n\n  // A flag to see when we're in the middle of a write.\n  this.writing = false\n\n  // When true all writes will be buffered until .uncork() call.\n  this.corked = 0\n\n  // A flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true\n\n  // A flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false\n\n  // The callback that's passed to _write(chunk, cb).\n  this.onwrite = onwrite.bind(undefined, stream)\n\n  // The callback that the user supplies to write(chunk, encoding, cb).\n  this.writecb = null\n\n  // The amount that is being written when _write is called.\n  this.writelen = 0\n\n  // Storage for data passed to the afterWrite() callback in case of\n  // synchronous _write() completion.\n  this.afterWriteTickInfo = null\n  resetBuffer(this)\n\n  // Number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted.\n  this.pendingcb = 0\n\n  // Stream is still being constructed and cannot be\n  // destroyed until construction finished or failed.\n  // Async construction is opt in, therefore we start as\n  // constructed.\n  this.constructed = true\n\n  // Emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams.\n  this.prefinished = false\n\n  // True if the error was already emitted and should not be thrown again.\n  this.errorEmitted = false\n\n  // Should close be emitted on destroy. Defaults to true.\n  this.emitClose = !options || options.emitClose !== false\n\n  // Should .destroy() be called after 'finish' (and potentially 'end').\n  this.autoDestroy = !options || options.autoDestroy !== false\n\n  // Indicates whether the stream has errored. When true all write() calls\n  // should return false. This is needed since when autoDestroy\n  // is disabled we need a way to tell whether the stream has failed.\n  this.errored = null\n\n  // Indicates whether the stream has finished destroying.\n  this.closed = false\n\n  // True if close has been emitted or would have been emitted\n  // depending on emitClose.\n  this.closeEmitted = false\n  this[kOnFinished] = []\n}\nfunction resetBuffer(state) {\n  state.buffered = []\n  state.bufferedIndex = 0\n  state.allBuffers = true\n  state.allNoop = true\n}\nWritableState.prototype.getBuffer = function getBuffer() {\n  return ArrayPrototypeSlice(this.buffered, this.bufferedIndex)\n}\nObjectDefineProperty(WritableState.prototype, 'bufferedRequestCount', {\n  __proto__: null,\n  get() {\n    return this.buffered.length - this.bufferedIndex\n  }\n})\nfunction Writable(options) {\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n\n  // Checking for a Stream.Duplex instance is faster here instead of inside\n  // the WritableState constructor, at least with V8 6.5.\n  const isDuplex = this instanceof require('./duplex')\n  if (!isDuplex && !FunctionPrototypeSymbolHasInstance(Writable, this)) return new Writable(options)\n  this._writableState = new WritableState(options, this, isDuplex)\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write\n    if (typeof options.writev === 'function') this._writev = options.writev\n    if (typeof options.destroy === 'function') this._destroy = options.destroy\n    if (typeof options.final === 'function') this._final = options.final\n    if (typeof options.construct === 'function') this._construct = options.construct\n    if (options.signal) addAbortSignal(options.signal, this)\n  }\n  Stream.call(this, options)\n  destroyImpl.construct(this, () => {\n    const state = this._writableState\n    if (!state.writing) {\n      clearBuffer(this, state)\n    }\n    finishMaybe(this, state)\n  })\n}\nObjectDefineProperty(Writable, SymbolHasInstance, {\n  __proto__: null,\n  value: function (object) {\n    if (FunctionPrototypeSymbolHasInstance(this, object)) return true\n    if (this !== Writable) return false\n    return object && object._writableState instanceof WritableState\n  }\n})\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  errorOrDestroy(this, new ERR_STREAM_CANNOT_PIPE())\n}\nfunction _write(stream, chunk, encoding, cb) {\n  const state = stream._writableState\n  if (typeof encoding === 'function') {\n    cb = encoding\n    encoding = state.defaultEncoding\n  } else {\n    if (!encoding) encoding = state.defaultEncoding\n    else if (encoding !== 'buffer' && !Buffer.isEncoding(encoding)) throw new ERR_UNKNOWN_ENCODING(encoding)\n    if (typeof cb !== 'function') cb = nop\n  }\n  if (chunk === null) {\n    throw new ERR_STREAM_NULL_VALUES()\n  } else if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      if (state.decodeStrings !== false) {\n        chunk = Buffer.from(chunk, encoding)\n        encoding = 'buffer'\n      }\n    } else if (chunk instanceof Buffer) {\n      encoding = 'buffer'\n    } else if (Stream._isUint8Array(chunk)) {\n      chunk = Stream._uint8ArrayToBuffer(chunk)\n      encoding = 'buffer'\n    } else {\n      throw new ERR_INVALID_ARG_TYPE('chunk', ['string', 'Buffer', 'Uint8Array'], chunk)\n    }\n  }\n  let err\n  if (state.ending) {\n    err = new ERR_STREAM_WRITE_AFTER_END()\n  } else if (state.destroyed) {\n    err = new ERR_STREAM_DESTROYED('write')\n  }\n  if (err) {\n    process.nextTick(cb, err)\n    errorOrDestroy(stream, err, true)\n    return err\n  }\n  state.pendingcb++\n  return writeOrBuffer(stream, state, chunk, encoding, cb)\n}\nWritable.prototype.write = function (chunk, encoding, cb) {\n  return _write(this, chunk, encoding, cb) === true\n}\nWritable.prototype.cork = function () {\n  this._writableState.corked++\n}\nWritable.prototype.uncork = function () {\n  const state = this._writableState\n  if (state.corked) {\n    state.corked--\n    if (!state.writing) clearBuffer(this, state)\n  }\n}\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = StringPrototypeToLowerCase(encoding)\n  if (!Buffer.isEncoding(encoding)) throw new ERR_UNKNOWN_ENCODING(encoding)\n  this._writableState.defaultEncoding = encoding\n  return this\n}\n\n// If we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, chunk, encoding, callback) {\n  const len = state.objectMode ? 1 : chunk.length\n  state.length += len\n\n  // stream._write resets state.length\n  const ret = state.length < state.highWaterMark\n  // We must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true\n  if (state.writing || state.corked || state.errored || !state.constructed) {\n    state.buffered.push({\n      chunk,\n      encoding,\n      callback\n    })\n    if (state.allBuffers && encoding !== 'buffer') {\n      state.allBuffers = false\n    }\n    if (state.allNoop && callback !== nop) {\n      state.allNoop = false\n    }\n  } else {\n    state.writelen = len\n    state.writecb = callback\n    state.writing = true\n    state.sync = true\n    stream._write(chunk, encoding, state.onwrite)\n    state.sync = false\n  }\n\n  // Return false if errored or destroyed in order to break\n  // any synchronous while(stream.write(data)) loops.\n  return ret && !state.errored && !state.destroyed\n}\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len\n  state.writecb = cb\n  state.writing = true\n  state.sync = true\n  if (state.destroyed) state.onwrite(new ERR_STREAM_DESTROYED('write'))\n  else if (writev) stream._writev(chunk, state.onwrite)\n  else stream._write(chunk, encoding, state.onwrite)\n  state.sync = false\n}\nfunction onwriteError(stream, state, er, cb) {\n  --state.pendingcb\n  cb(er)\n  // Ensure callbacks are invoked even when autoDestroy is\n  // not enabled. Passing `er` here doesn't make sense since\n  // it's related to one specific write, not to the buffered\n  // writes.\n  errorBuffer(state)\n  // This can emit error, but error must always follow cb.\n  errorOrDestroy(stream, er)\n}\nfunction onwrite(stream, er) {\n  const state = stream._writableState\n  const sync = state.sync\n  const cb = state.writecb\n  if (typeof cb !== 'function') {\n    errorOrDestroy(stream, new ERR_MULTIPLE_CALLBACK())\n    return\n  }\n  state.writing = false\n  state.writecb = null\n  state.length -= state.writelen\n  state.writelen = 0\n  if (er) {\n    // Avoid V8 leak, https://github.com/nodejs/node/pull/34103#issuecomment-652002364\n    er.stack // eslint-disable-line no-unused-expressions\n\n    if (!state.errored) {\n      state.errored = er\n    }\n\n    // In case of duplex streams we need to notify the readable side of the\n    // error.\n    if (stream._readableState && !stream._readableState.errored) {\n      stream._readableState.errored = er\n    }\n    if (sync) {\n      process.nextTick(onwriteError, stream, state, er, cb)\n    } else {\n      onwriteError(stream, state, er, cb)\n    }\n  } else {\n    if (state.buffered.length > state.bufferedIndex) {\n      clearBuffer(stream, state)\n    }\n    if (sync) {\n      // It is a common case that the callback passed to .write() is always\n      // the same. In that case, we do not schedule a new nextTick(), but\n      // rather just increase a counter, to improve performance and avoid\n      // memory allocations.\n      if (state.afterWriteTickInfo !== null && state.afterWriteTickInfo.cb === cb) {\n        state.afterWriteTickInfo.count++\n      } else {\n        state.afterWriteTickInfo = {\n          count: 1,\n          cb,\n          stream,\n          state\n        }\n        process.nextTick(afterWriteTick, state.afterWriteTickInfo)\n      }\n    } else {\n      afterWrite(stream, state, 1, cb)\n    }\n  }\n}\nfunction afterWriteTick({ stream, state, count, cb }) {\n  state.afterWriteTickInfo = null\n  return afterWrite(stream, state, count, cb)\n}\nfunction afterWrite(stream, state, count, cb) {\n  const needDrain = !state.ending && !stream.destroyed && state.length === 0 && state.needDrain\n  if (needDrain) {\n    state.needDrain = false\n    stream.emit('drain')\n  }\n  while (count-- > 0) {\n    state.pendingcb--\n    cb()\n  }\n  if (state.destroyed) {\n    errorBuffer(state)\n  }\n  finishMaybe(stream, state)\n}\n\n// If there's something in the buffer waiting, then invoke callbacks.\nfunction errorBuffer(state) {\n  if (state.writing) {\n    return\n  }\n  for (let n = state.bufferedIndex; n < state.buffered.length; ++n) {\n    var _state$errored\n    const { chunk, callback } = state.buffered[n]\n    const len = state.objectMode ? 1 : chunk.length\n    state.length -= len\n    callback(\n      (_state$errored = state.errored) !== null && _state$errored !== undefined\n        ? _state$errored\n        : new ERR_STREAM_DESTROYED('write')\n    )\n  }\n  const onfinishCallbacks = state[kOnFinished].splice(0)\n  for (let i = 0; i < onfinishCallbacks.length; i++) {\n    var _state$errored2\n    onfinishCallbacks[i](\n      (_state$errored2 = state.errored) !== null && _state$errored2 !== undefined\n        ? _state$errored2\n        : new ERR_STREAM_DESTROYED('end')\n    )\n  }\n  resetBuffer(state)\n}\n\n// If there's something in the buffer waiting, then process it.\nfunction clearBuffer(stream, state) {\n  if (state.corked || state.bufferProcessing || state.destroyed || !state.constructed) {\n    return\n  }\n  const { buffered, bufferedIndex, objectMode } = state\n  const bufferedLength = buffered.length - bufferedIndex\n  if (!bufferedLength) {\n    return\n  }\n  let i = bufferedIndex\n  state.bufferProcessing = true\n  if (bufferedLength > 1 && stream._writev) {\n    state.pendingcb -= bufferedLength - 1\n    const callback = state.allNoop\n      ? nop\n      : (err) => {\n          for (let n = i; n < buffered.length; ++n) {\n            buffered[n].callback(err)\n          }\n        }\n    // Make a copy of `buffered` if it's going to be used by `callback` above,\n    // since `doWrite` will mutate the array.\n    const chunks = state.allNoop && i === 0 ? buffered : ArrayPrototypeSlice(buffered, i)\n    chunks.allBuffers = state.allBuffers\n    doWrite(stream, state, true, state.length, chunks, '', callback)\n    resetBuffer(state)\n  } else {\n    do {\n      const { chunk, encoding, callback } = buffered[i]\n      buffered[i++] = null\n      const len = objectMode ? 1 : chunk.length\n      doWrite(stream, state, false, len, chunk, encoding, callback)\n    } while (i < buffered.length && !state.writing)\n    if (i === buffered.length) {\n      resetBuffer(state)\n    } else if (i > 256) {\n      buffered.splice(0, i)\n      state.bufferedIndex = 0\n    } else {\n      state.bufferedIndex = i\n    }\n  }\n  state.bufferProcessing = false\n}\nWritable.prototype._write = function (chunk, encoding, cb) {\n  if (this._writev) {\n    this._writev(\n      [\n        {\n          chunk,\n          encoding\n        }\n      ],\n      cb\n    )\n  } else {\n    throw new ERR_METHOD_NOT_IMPLEMENTED('_write()')\n  }\n}\nWritable.prototype._writev = null\nWritable.prototype.end = function (chunk, encoding, cb) {\n  const state = this._writableState\n  if (typeof chunk === 'function') {\n    cb = chunk\n    chunk = null\n    encoding = null\n  } else if (typeof encoding === 'function') {\n    cb = encoding\n    encoding = null\n  }\n  let err\n  if (chunk !== null && chunk !== undefined) {\n    const ret = _write(this, chunk, encoding)\n    if (ret instanceof Error) {\n      err = ret\n    }\n  }\n\n  // .end() fully uncorks.\n  if (state.corked) {\n    state.corked = 1\n    this.uncork()\n  }\n  if (err) {\n    // Do nothing...\n  } else if (!state.errored && !state.ending) {\n    // This is forgiving in terms of unnecessary calls to end() and can hide\n    // logic errors. However, usually such errors are harmless and causing a\n    // hard error can be disproportionately destructive. It is not always\n    // trivial for the user to determine whether end() needs to be called\n    // or not.\n\n    state.ending = true\n    finishMaybe(this, state, true)\n    state.ended = true\n  } else if (state.finished) {\n    err = new ERR_STREAM_ALREADY_FINISHED('end')\n  } else if (state.destroyed) {\n    err = new ERR_STREAM_DESTROYED('end')\n  }\n  if (typeof cb === 'function') {\n    if (err || state.finished) {\n      process.nextTick(cb, err)\n    } else {\n      state[kOnFinished].push(cb)\n    }\n  }\n  return this\n}\nfunction needFinish(state) {\n  return (\n    state.ending &&\n    !state.destroyed &&\n    state.constructed &&\n    state.length === 0 &&\n    !state.errored &&\n    state.buffered.length === 0 &&\n    !state.finished &&\n    !state.writing &&\n    !state.errorEmitted &&\n    !state.closeEmitted\n  )\n}\nfunction callFinal(stream, state) {\n  let called = false\n  function onFinish(err) {\n    if (called) {\n      errorOrDestroy(stream, err !== null && err !== undefined ? err : ERR_MULTIPLE_CALLBACK())\n      return\n    }\n    called = true\n    state.pendingcb--\n    if (err) {\n      const onfinishCallbacks = state[kOnFinished].splice(0)\n      for (let i = 0; i < onfinishCallbacks.length; i++) {\n        onfinishCallbacks[i](err)\n      }\n      errorOrDestroy(stream, err, state.sync)\n    } else if (needFinish(state)) {\n      state.prefinished = true\n      stream.emit('prefinish')\n      // Backwards compat. Don't check state.sync here.\n      // Some streams assume 'finish' will be emitted\n      // asynchronously relative to _final callback.\n      state.pendingcb++\n      process.nextTick(finish, stream, state)\n    }\n  }\n  state.sync = true\n  state.pendingcb++\n  try {\n    stream._final(onFinish)\n  } catch (err) {\n    onFinish(err)\n  }\n  state.sync = false\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function' && !state.destroyed) {\n      state.finalCalled = true\n      callFinal(stream, state)\n    } else {\n      state.prefinished = true\n      stream.emit('prefinish')\n    }\n  }\n}\nfunction finishMaybe(stream, state, sync) {\n  if (needFinish(state)) {\n    prefinish(stream, state)\n    if (state.pendingcb === 0) {\n      if (sync) {\n        state.pendingcb++\n        process.nextTick(\n          (stream, state) => {\n            if (needFinish(state)) {\n              finish(stream, state)\n            } else {\n              state.pendingcb--\n            }\n          },\n          stream,\n          state\n        )\n      } else if (needFinish(state)) {\n        state.pendingcb++\n        finish(stream, state)\n      }\n    }\n  }\n}\nfunction finish(stream, state) {\n  state.pendingcb--\n  state.finished = true\n  const onfinishCallbacks = state[kOnFinished].splice(0)\n  for (let i = 0; i < onfinishCallbacks.length; i++) {\n    onfinishCallbacks[i]()\n  }\n  stream.emit('finish')\n  if (state.autoDestroy) {\n    // In case of duplex streams we need a way to detect\n    // if the readable side is ready for autoDestroy as well.\n    const rState = stream._readableState\n    const autoDestroy =\n      !rState ||\n      (rState.autoDestroy &&\n        // We don't expect the readable to ever 'end'\n        // if readable is explicitly set to false.\n        (rState.endEmitted || rState.readable === false))\n    if (autoDestroy) {\n      stream.destroy()\n    }\n  }\n}\nObjectDefineProperties(Writable.prototype, {\n  closed: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.closed : false\n    }\n  },\n  destroyed: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.destroyed : false\n    },\n    set(value) {\n      // Backward compatibility, the user is explicitly managing destroyed.\n      if (this._writableState) {\n        this._writableState.destroyed = value\n      }\n    }\n  },\n  writable: {\n    __proto__: null,\n    get() {\n      const w = this._writableState\n      // w.writable === false means that this is part of a Duplex stream\n      // where the writable side was disabled upon construction.\n      // Compat. The user might manually disable writable side through\n      // deprecated setter.\n      return !!w && w.writable !== false && !w.destroyed && !w.errored && !w.ending && !w.ended\n    },\n    set(val) {\n      // Backwards compatible.\n      if (this._writableState) {\n        this._writableState.writable = !!val\n      }\n    }\n  },\n  writableFinished: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.finished : false\n    }\n  },\n  writableObjectMode: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.objectMode : false\n    }\n  },\n  writableBuffer: {\n    __proto__: null,\n    get() {\n      return this._writableState && this._writableState.getBuffer()\n    }\n  },\n  writableEnded: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.ending : false\n    }\n  },\n  writableNeedDrain: {\n    __proto__: null,\n    get() {\n      const wState = this._writableState\n      if (!wState) return false\n      return !wState.destroyed && !wState.ending && wState.needDrain\n    }\n  },\n  writableHighWaterMark: {\n    __proto__: null,\n    get() {\n      return this._writableState && this._writableState.highWaterMark\n    }\n  },\n  writableCorked: {\n    __proto__: null,\n    get() {\n      return this._writableState ? this._writableState.corked : 0\n    }\n  },\n  writableLength: {\n    __proto__: null,\n    get() {\n      return this._writableState && this._writableState.length\n    }\n  },\n  errored: {\n    __proto__: null,\n    enumerable: false,\n    get() {\n      return this._writableState ? this._writableState.errored : null\n    }\n  },\n  writableAborted: {\n    __proto__: null,\n    enumerable: false,\n    get: function () {\n      return !!(\n        this._writableState.writable !== false &&\n        (this._writableState.destroyed || this._writableState.errored) &&\n        !this._writableState.finished\n      )\n    }\n  }\n})\nconst destroy = destroyImpl.destroy\nWritable.prototype.destroy = function (err, cb) {\n  const state = this._writableState\n\n  // Invoke pending callbacks.\n  if (!state.destroyed && (state.bufferedIndex < state.buffered.length || state[kOnFinished].length)) {\n    process.nextTick(errorBuffer, state)\n  }\n  destroy.call(this, err, cb)\n  return this\n}\nWritable.prototype._undestroy = destroyImpl.undestroy\nWritable.prototype._destroy = function (err, cb) {\n  cb(err)\n}\nWritable.prototype[EE.captureRejectionSymbol] = function (err) {\n  this.destroy(err)\n}\nlet webStreamsAdapters\n\n// Lazy to avoid circular references\nfunction lazyWebStreams() {\n  if (webStreamsAdapters === undefined) webStreamsAdapters = {}\n  return webStreamsAdapters\n}\nWritable.fromWeb = function (writableStream, options) {\n  return lazyWebStreams().newStreamWritableFromWritableStream(writableStream, options)\n}\nWritable.toWeb = function (streamWritable) {\n  return lazyWebStreams().newWritableStreamFromStreamWritable(streamWritable)\n}\n","/* eslint jsdoc/require-jsdoc: \"error\" */\n\n'use strict'\n\nconst {\n  ArrayIsArray,\n  ArrayPrototypeIncludes,\n  ArrayPrototypeJoin,\n  ArrayPrototypeMap,\n  NumberIsInteger,\n  NumberIsNaN,\n  NumberMAX_SAFE_INTEGER,\n  NumberMIN_SAFE_INTEGER,\n  NumberParseInt,\n  ObjectPrototypeHasOwnProperty,\n  RegExpPrototypeExec,\n  String,\n  StringPrototypeToUpperCase,\n  StringPrototypeTrim\n} = require('../ours/primordials')\nconst {\n  hideStackFrames,\n  codes: { ERR_SOCKET_BAD_PORT, ERR_INVALID_ARG_TYPE, ERR_INVALID_ARG_VALUE, ERR_OUT_OF_RANGE, ERR_UNKNOWN_SIGNAL }\n} = require('../ours/errors')\nconst { normalizeEncoding } = require('../ours/util')\nconst { isAsyncFunction, isArrayBufferView } = require('../ours/util').types\nconst signals = {}\n\n/**\n * @param {*} value\n * @returns {boolean}\n */\nfunction isInt32(value) {\n  return value === (value | 0)\n}\n\n/**\n * @param {*} value\n * @returns {boolean}\n */\nfunction isUint32(value) {\n  return value === value >>> 0\n}\nconst octalReg = /^[0-7]+$/\nconst modeDesc = 'must be a 32-bit unsigned integer or an octal string'\n\n/**\n * Parse and validate values that will be converted into mode_t (the S_*\n * constants). Only valid numbers and octal strings are allowed. They could be\n * converted to 32-bit unsigned integers or non-negative signed integers in the\n * C++ land, but any value higher than 0o777 will result in platform-specific\n * behaviors.\n * @param {*} value Values to be validated\n * @param {string} name Name of the argument\n * @param {number} [def] If specified, will be returned for invalid values\n * @returns {number}\n */\nfunction parseFileMode(value, name, def) {\n  if (typeof value === 'undefined') {\n    value = def\n  }\n  if (typeof value === 'string') {\n    if (RegExpPrototypeExec(octalReg, value) === null) {\n      throw new ERR_INVALID_ARG_VALUE(name, value, modeDesc)\n    }\n    value = NumberParseInt(value, 8)\n  }\n  validateUint32(value, name)\n  return value\n}\n\n/**\n * @callback validateInteger\n * @param {*} value\n * @param {string} name\n * @param {number} [min]\n * @param {number} [max]\n * @returns {asserts value is number}\n */\n\n/** @type {validateInteger} */\nconst validateInteger = hideStackFrames((value, name, min = NumberMIN_SAFE_INTEGER, max = NumberMAX_SAFE_INTEGER) => {\n  if (typeof value !== 'number') throw new ERR_INVALID_ARG_TYPE(name, 'number', value)\n  if (!NumberIsInteger(value)) throw new ERR_OUT_OF_RANGE(name, 'an integer', value)\n  if (value < min || value > max) throw new ERR_OUT_OF_RANGE(name, `>= ${min} && <= ${max}`, value)\n})\n\n/**\n * @callback validateInt32\n * @param {*} value\n * @param {string} name\n * @param {number} [min]\n * @param {number} [max]\n * @returns {asserts value is number}\n */\n\n/** @type {validateInt32} */\nconst validateInt32 = hideStackFrames((value, name, min = -2147483648, max = 2147483647) => {\n  // The defaults for min and max correspond to the limits of 32-bit integers.\n  if (typeof value !== 'number') {\n    throw new ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n  if (!NumberIsInteger(value)) {\n    throw new ERR_OUT_OF_RANGE(name, 'an integer', value)\n  }\n  if (value < min || value > max) {\n    throw new ERR_OUT_OF_RANGE(name, `>= ${min} && <= ${max}`, value)\n  }\n})\n\n/**\n * @callback validateUint32\n * @param {*} value\n * @param {string} name\n * @param {number|boolean} [positive=false]\n * @returns {asserts value is number}\n */\n\n/** @type {validateUint32} */\nconst validateUint32 = hideStackFrames((value, name, positive = false) => {\n  if (typeof value !== 'number') {\n    throw new ERR_INVALID_ARG_TYPE(name, 'number', value)\n  }\n  if (!NumberIsInteger(value)) {\n    throw new ERR_OUT_OF_RANGE(name, 'an integer', value)\n  }\n  const min = positive ? 1 : 0\n  // 2 ** 32 === 4294967296\n  const max = 4294967295\n  if (value < min || value > max) {\n    throw new ERR_OUT_OF_RANGE(name, `>= ${min} && <= ${max}`, value)\n  }\n})\n\n/**\n * @callback validateString\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is string}\n */\n\n/** @type {validateString} */\nfunction validateString(value, name) {\n  if (typeof value !== 'string') throw new ERR_INVALID_ARG_TYPE(name, 'string', value)\n}\n\n/**\n * @callback validateNumber\n * @param {*} value\n * @param {string} name\n * @param {number} [min]\n * @param {number} [max]\n * @returns {asserts value is number}\n */\n\n/** @type {validateNumber} */\nfunction validateNumber(value, name, min = undefined, max) {\n  if (typeof value !== 'number') throw new ERR_INVALID_ARG_TYPE(name, 'number', value)\n  if (\n    (min != null && value < min) ||\n    (max != null && value > max) ||\n    ((min != null || max != null) && NumberIsNaN(value))\n  ) {\n    throw new ERR_OUT_OF_RANGE(\n      name,\n      `${min != null ? `>= ${min}` : ''}${min != null && max != null ? ' && ' : ''}${max != null ? `<= ${max}` : ''}`,\n      value\n    )\n  }\n}\n\n/**\n * @callback validateOneOf\n * @template T\n * @param {T} value\n * @param {string} name\n * @param {T[]} oneOf\n */\n\n/** @type {validateOneOf} */\nconst validateOneOf = hideStackFrames((value, name, oneOf) => {\n  if (!ArrayPrototypeIncludes(oneOf, value)) {\n    const allowed = ArrayPrototypeJoin(\n      ArrayPrototypeMap(oneOf, (v) => (typeof v === 'string' ? `'${v}'` : String(v))),\n      ', '\n    )\n    const reason = 'must be one of: ' + allowed\n    throw new ERR_INVALID_ARG_VALUE(name, value, reason)\n  }\n})\n\n/**\n * @callback validateBoolean\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is boolean}\n */\n\n/** @type {validateBoolean} */\nfunction validateBoolean(value, name) {\n  if (typeof value !== 'boolean') throw new ERR_INVALID_ARG_TYPE(name, 'boolean', value)\n}\n\n/**\n * @param {any} options\n * @param {string} key\n * @param {boolean} defaultValue\n * @returns {boolean}\n */\nfunction getOwnPropertyValueOrDefault(options, key, defaultValue) {\n  return options == null || !ObjectPrototypeHasOwnProperty(options, key) ? defaultValue : options[key]\n}\n\n/**\n * @callback validateObject\n * @param {*} value\n * @param {string} name\n * @param {{\n *   allowArray?: boolean,\n *   allowFunction?: boolean,\n *   nullable?: boolean\n * }} [options]\n */\n\n/** @type {validateObject} */\nconst validateObject = hideStackFrames((value, name, options = null) => {\n  const allowArray = getOwnPropertyValueOrDefault(options, 'allowArray', false)\n  const allowFunction = getOwnPropertyValueOrDefault(options, 'allowFunction', false)\n  const nullable = getOwnPropertyValueOrDefault(options, 'nullable', false)\n  if (\n    (!nullable && value === null) ||\n    (!allowArray && ArrayIsArray(value)) ||\n    (typeof value !== 'object' && (!allowFunction || typeof value !== 'function'))\n  ) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'Object', value)\n  }\n})\n\n/**\n * @callback validateDictionary - We are using the Web IDL Standard definition\n *                                of \"dictionary\" here, which means any value\n *                                whose Type is either Undefined, Null, or\n *                                Object (which includes functions).\n * @param {*} value\n * @param {string} name\n * @see https://webidl.spec.whatwg.org/#es-dictionary\n * @see https://tc39.es/ecma262/#table-typeof-operator-results\n */\n\n/** @type {validateDictionary} */\nconst validateDictionary = hideStackFrames((value, name) => {\n  if (value != null && typeof value !== 'object' && typeof value !== 'function') {\n    throw new ERR_INVALID_ARG_TYPE(name, 'a dictionary', value)\n  }\n})\n\n/**\n * @callback validateArray\n * @param {*} value\n * @param {string} name\n * @param {number} [minLength]\n * @returns {asserts value is any[]}\n */\n\n/** @type {validateArray} */\nconst validateArray = hideStackFrames((value, name, minLength = 0) => {\n  if (!ArrayIsArray(value)) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'Array', value)\n  }\n  if (value.length < minLength) {\n    const reason = `must be longer than ${minLength}`\n    throw new ERR_INVALID_ARG_VALUE(name, value, reason)\n  }\n})\n\n/**\n * @callback validateStringArray\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is string[]}\n */\n\n/** @type {validateStringArray} */\nfunction validateStringArray(value, name) {\n  validateArray(value, name)\n  for (let i = 0; i < value.length; i++) {\n    validateString(value[i], `${name}[${i}]`)\n  }\n}\n\n/**\n * @callback validateBooleanArray\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is boolean[]}\n */\n\n/** @type {validateBooleanArray} */\nfunction validateBooleanArray(value, name) {\n  validateArray(value, name)\n  for (let i = 0; i < value.length; i++) {\n    validateBoolean(value[i], `${name}[${i}]`)\n  }\n}\n\n/**\n * @callback validateAbortSignalArray\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is AbortSignal[]}\n */\n\n/** @type {validateAbortSignalArray} */\nfunction validateAbortSignalArray(value, name) {\n  validateArray(value, name)\n  for (let i = 0; i < value.length; i++) {\n    const signal = value[i]\n    const indexedName = `${name}[${i}]`\n    if (signal == null) {\n      throw new ERR_INVALID_ARG_TYPE(indexedName, 'AbortSignal', signal)\n    }\n    validateAbortSignal(signal, indexedName)\n  }\n}\n\n/**\n * @param {*} signal\n * @param {string} [name='signal']\n * @returns {asserts signal is keyof signals}\n */\nfunction validateSignalName(signal, name = 'signal') {\n  validateString(signal, name)\n  if (signals[signal] === undefined) {\n    if (signals[StringPrototypeToUpperCase(signal)] !== undefined) {\n      throw new ERR_UNKNOWN_SIGNAL(signal + ' (signals must use all capital letters)')\n    }\n    throw new ERR_UNKNOWN_SIGNAL(signal)\n  }\n}\n\n/**\n * @callback validateBuffer\n * @param {*} buffer\n * @param {string} [name='buffer']\n * @returns {asserts buffer is ArrayBufferView}\n */\n\n/** @type {validateBuffer} */\nconst validateBuffer = hideStackFrames((buffer, name = 'buffer') => {\n  if (!isArrayBufferView(buffer)) {\n    throw new ERR_INVALID_ARG_TYPE(name, ['Buffer', 'TypedArray', 'DataView'], buffer)\n  }\n})\n\n/**\n * @param {string} data\n * @param {string} encoding\n */\nfunction validateEncoding(data, encoding) {\n  const normalizedEncoding = normalizeEncoding(encoding)\n  const length = data.length\n  if (normalizedEncoding === 'hex' && length % 2 !== 0) {\n    throw new ERR_INVALID_ARG_VALUE('encoding', encoding, `is invalid for data of length ${length}`)\n  }\n}\n\n/**\n * Check that the port number is not NaN when coerced to a number,\n * is an integer and that it falls within the legal range of port numbers.\n * @param {*} port\n * @param {string} [name='Port']\n * @param {boolean} [allowZero=true]\n * @returns {number}\n */\nfunction validatePort(port, name = 'Port', allowZero = true) {\n  if (\n    (typeof port !== 'number' && typeof port !== 'string') ||\n    (typeof port === 'string' && StringPrototypeTrim(port).length === 0) ||\n    +port !== +port >>> 0 ||\n    port > 0xffff ||\n    (port === 0 && !allowZero)\n  ) {\n    throw new ERR_SOCKET_BAD_PORT(name, port, allowZero)\n  }\n  return port | 0\n}\n\n/**\n * @callback validateAbortSignal\n * @param {*} signal\n * @param {string} name\n */\n\n/** @type {validateAbortSignal} */\nconst validateAbortSignal = hideStackFrames((signal, name) => {\n  if (signal !== undefined && (signal === null || typeof signal !== 'object' || !('aborted' in signal))) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'AbortSignal', signal)\n  }\n})\n\n/**\n * @callback validateFunction\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is Function}\n */\n\n/** @type {validateFunction} */\nconst validateFunction = hideStackFrames((value, name) => {\n  if (typeof value !== 'function') throw new ERR_INVALID_ARG_TYPE(name, 'Function', value)\n})\n\n/**\n * @callback validatePlainFunction\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is Function}\n */\n\n/** @type {validatePlainFunction} */\nconst validatePlainFunction = hideStackFrames((value, name) => {\n  if (typeof value !== 'function' || isAsyncFunction(value)) throw new ERR_INVALID_ARG_TYPE(name, 'Function', value)\n})\n\n/**\n * @callback validateUndefined\n * @param {*} value\n * @param {string} name\n * @returns {asserts value is undefined}\n */\n\n/** @type {validateUndefined} */\nconst validateUndefined = hideStackFrames((value, name) => {\n  if (value !== undefined) throw new ERR_INVALID_ARG_TYPE(name, 'undefined', value)\n})\n\n/**\n * @template T\n * @param {T} value\n * @param {string} name\n * @param {T[]} union\n */\nfunction validateUnion(value, name, union) {\n  if (!ArrayPrototypeIncludes(union, value)) {\n    throw new ERR_INVALID_ARG_TYPE(name, `('${ArrayPrototypeJoin(union, '|')}')`, value)\n  }\n}\n\n/*\n  The rules for the Link header field are described here:\n  https://www.rfc-editor.org/rfc/rfc8288.html#section-3\n\n  This regex validates any string surrounded by angle brackets\n  (not necessarily a valid URI reference) followed by zero or more\n  link-params separated by semicolons.\n*/\nconst linkValueRegExp = /^(?:<[^>]*>)(?:\\s*;\\s*[^;\"\\s]+(?:=(\")?[^;\"\\s]*\\1)?)*$/\n\n/**\n * @param {any} value\n * @param {string} name\n */\nfunction validateLinkHeaderFormat(value, name) {\n  if (typeof value === 'undefined' || !RegExpPrototypeExec(linkValueRegExp, value)) {\n    throw new ERR_INVALID_ARG_VALUE(\n      name,\n      value,\n      'must be an array or string of format \"</styles.css>; rel=preload; as=style\"'\n    )\n  }\n}\n\n/**\n * @param {any} hints\n * @return {string}\n */\nfunction validateLinkHeaderValue(hints) {\n  if (typeof hints === 'string') {\n    validateLinkHeaderFormat(hints, 'hints')\n    return hints\n  } else if (ArrayIsArray(hints)) {\n    const hintsLength = hints.length\n    let result = ''\n    if (hintsLength === 0) {\n      return result\n    }\n    for (let i = 0; i < hintsLength; i++) {\n      const link = hints[i]\n      validateLinkHeaderFormat(link, 'hints')\n      result += link\n      if (i !== hintsLength - 1) {\n        result += ', '\n      }\n    }\n    return result\n  }\n  throw new ERR_INVALID_ARG_VALUE(\n    'hints',\n    hints,\n    'must be an array or string of format \"</styles.css>; rel=preload; as=style\"'\n  )\n}\nmodule.exports = {\n  isInt32,\n  isUint32,\n  parseFileMode,\n  validateArray,\n  validateStringArray,\n  validateBooleanArray,\n  validateAbortSignalArray,\n  validateBoolean,\n  validateBuffer,\n  validateDictionary,\n  validateEncoding,\n  validateFunction,\n  validateInt32,\n  validateInteger,\n  validateNumber,\n  validateObject,\n  validateOneOf,\n  validatePlainFunction,\n  validatePort,\n  validateSignalName,\n  validateString,\n  validateUint32,\n  validateUndefined,\n  validateUnion,\n  validateAbortSignal,\n  validateLinkHeaderValue\n}\n","'use strict'\n\nconst { format, inspect, AggregateError: CustomAggregateError } = require('./util')\n\n/*\n  This file is a reduced and adapted version of the main lib/internal/errors.js file defined at\n\n  https://github.com/nodejs/node/blob/master/lib/internal/errors.js\n\n  Don't try to replace with the original file and keep it up to date (starting from E(...) definitions)\n  with the upstream file.\n*/\n\nconst AggregateError = globalThis.AggregateError || CustomAggregateError\nconst kIsNodeError = Symbol('kIsNodeError')\nconst kTypes = [\n  'string',\n  'function',\n  'number',\n  'object',\n  // Accept 'Function' and 'Object' as alternative to the lower cased version.\n  'Function',\n  'Object',\n  'boolean',\n  'bigint',\n  'symbol'\n]\nconst classRegExp = /^([A-Z][a-z0-9]*)+$/\nconst nodeInternalPrefix = '__node_internal_'\nconst codes = {}\nfunction assert(value, message) {\n  if (!value) {\n    throw new codes.ERR_INTERNAL_ASSERTION(message)\n  }\n}\n\n// Only use this for integers! Decimal numbers do not work with this function.\nfunction addNumericalSeparator(val) {\n  let res = ''\n  let i = val.length\n  const start = val[0] === '-' ? 1 : 0\n  for (; i >= start + 4; i -= 3) {\n    res = `_${val.slice(i - 3, i)}${res}`\n  }\n  return `${val.slice(0, i)}${res}`\n}\nfunction getMessage(key, msg, args) {\n  if (typeof msg === 'function') {\n    assert(\n      msg.length <= args.length,\n      // Default options do not count.\n      `Code: ${key}; The provided arguments length (${args.length}) does not match the required ones (${msg.length}).`\n    )\n    return msg(...args)\n  }\n  const expectedLength = (msg.match(/%[dfijoOs]/g) || []).length\n  assert(\n    expectedLength === args.length,\n    `Code: ${key}; The provided arguments length (${args.length}) does not match the required ones (${expectedLength}).`\n  )\n  if (args.length === 0) {\n    return msg\n  }\n  return format(msg, ...args)\n}\nfunction E(code, message, Base) {\n  if (!Base) {\n    Base = Error\n  }\n  class NodeError extends Base {\n    constructor(...args) {\n      super(getMessage(code, message, args))\n    }\n    toString() {\n      return `${this.name} [${code}]: ${this.message}`\n    }\n  }\n  Object.defineProperties(NodeError.prototype, {\n    name: {\n      value: Base.name,\n      writable: true,\n      enumerable: false,\n      configurable: true\n    },\n    toString: {\n      value() {\n        return `${this.name} [${code}]: ${this.message}`\n      },\n      writable: true,\n      enumerable: false,\n      configurable: true\n    }\n  })\n  NodeError.prototype.code = code\n  NodeError.prototype[kIsNodeError] = true\n  codes[code] = NodeError\n}\nfunction hideStackFrames(fn) {\n  // We rename the functions that will be hidden to cut off the stacktrace\n  // at the outermost one\n  const hidden = nodeInternalPrefix + fn.name\n  Object.defineProperty(fn, 'name', {\n    value: hidden\n  })\n  return fn\n}\nfunction aggregateTwoErrors(innerError, outerError) {\n  if (innerError && outerError && innerError !== outerError) {\n    if (Array.isArray(outerError.errors)) {\n      // If `outerError` is already an `AggregateError`.\n      outerError.errors.push(innerError)\n      return outerError\n    }\n    const err = new AggregateError([outerError, innerError], outerError.message)\n    err.code = outerError.code\n    return err\n  }\n  return innerError || outerError\n}\nclass AbortError extends Error {\n  constructor(message = 'The operation was aborted', options = undefined) {\n    if (options !== undefined && typeof options !== 'object') {\n      throw new codes.ERR_INVALID_ARG_TYPE('options', 'Object', options)\n    }\n    super(message, options)\n    this.code = 'ABORT_ERR'\n    this.name = 'AbortError'\n  }\n}\nE('ERR_ASSERTION', '%s', Error)\nE(\n  'ERR_INVALID_ARG_TYPE',\n  (name, expected, actual) => {\n    assert(typeof name === 'string', \"'name' must be a string\")\n    if (!Array.isArray(expected)) {\n      expected = [expected]\n    }\n    let msg = 'The '\n    if (name.endsWith(' argument')) {\n      // For cases like 'first argument'\n      msg += `${name} `\n    } else {\n      msg += `\"${name}\" ${name.includes('.') ? 'property' : 'argument'} `\n    }\n    msg += 'must be '\n    const types = []\n    const instances = []\n    const other = []\n    for (const value of expected) {\n      assert(typeof value === 'string', 'All expected entries have to be of type string')\n      if (kTypes.includes(value)) {\n        types.push(value.toLowerCase())\n      } else if (classRegExp.test(value)) {\n        instances.push(value)\n      } else {\n        assert(value !== 'object', 'The value \"object\" should be written as \"Object\"')\n        other.push(value)\n      }\n    }\n\n    // Special handle `object` in case other instances are allowed to outline\n    // the differences between each other.\n    if (instances.length > 0) {\n      const pos = types.indexOf('object')\n      if (pos !== -1) {\n        types.splice(types, pos, 1)\n        instances.push('Object')\n      }\n    }\n    if (types.length > 0) {\n      switch (types.length) {\n        case 1:\n          msg += `of type ${types[0]}`\n          break\n        case 2:\n          msg += `one of type ${types[0]} or ${types[1]}`\n          break\n        default: {\n          const last = types.pop()\n          msg += `one of type ${types.join(', ')}, or ${last}`\n        }\n      }\n      if (instances.length > 0 || other.length > 0) {\n        msg += ' or '\n      }\n    }\n    if (instances.length > 0) {\n      switch (instances.length) {\n        case 1:\n          msg += `an instance of ${instances[0]}`\n          break\n        case 2:\n          msg += `an instance of ${instances[0]} or ${instances[1]}`\n          break\n        default: {\n          const last = instances.pop()\n          msg += `an instance of ${instances.join(', ')}, or ${last}`\n        }\n      }\n      if (other.length > 0) {\n        msg += ' or '\n      }\n    }\n    switch (other.length) {\n      case 0:\n        break\n      case 1:\n        if (other[0].toLowerCase() !== other[0]) {\n          msg += 'an '\n        }\n        msg += `${other[0]}`\n        break\n      case 2:\n        msg += `one of ${other[0]} or ${other[1]}`\n        break\n      default: {\n        const last = other.pop()\n        msg += `one of ${other.join(', ')}, or ${last}`\n      }\n    }\n    if (actual == null) {\n      msg += `. Received ${actual}`\n    } else if (typeof actual === 'function' && actual.name) {\n      msg += `. Received function ${actual.name}`\n    } else if (typeof actual === 'object') {\n      var _actual$constructor\n      if (\n        (_actual$constructor = actual.constructor) !== null &&\n        _actual$constructor !== undefined &&\n        _actual$constructor.name\n      ) {\n        msg += `. Received an instance of ${actual.constructor.name}`\n      } else {\n        const inspected = inspect(actual, {\n          depth: -1\n        })\n        msg += `. Received ${inspected}`\n      }\n    } else {\n      let inspected = inspect(actual, {\n        colors: false\n      })\n      if (inspected.length > 25) {\n        inspected = `${inspected.slice(0, 25)}...`\n      }\n      msg += `. Received type ${typeof actual} (${inspected})`\n    }\n    return msg\n  },\n  TypeError\n)\nE(\n  'ERR_INVALID_ARG_VALUE',\n  (name, value, reason = 'is invalid') => {\n    let inspected = inspect(value)\n    if (inspected.length > 128) {\n      inspected = inspected.slice(0, 128) + '...'\n    }\n    const type = name.includes('.') ? 'property' : 'argument'\n    return `The ${type} '${name}' ${reason}. Received ${inspected}`\n  },\n  TypeError\n)\nE(\n  'ERR_INVALID_RETURN_VALUE',\n  (input, name, value) => {\n    var _value$constructor\n    const type =\n      value !== null &&\n      value !== undefined &&\n      (_value$constructor = value.constructor) !== null &&\n      _value$constructor !== undefined &&\n      _value$constructor.name\n        ? `instance of ${value.constructor.name}`\n        : `type ${typeof value}`\n    return `Expected ${input} to be returned from the \"${name}\"` + ` function but got ${type}.`\n  },\n  TypeError\n)\nE(\n  'ERR_MISSING_ARGS',\n  (...args) => {\n    assert(args.length > 0, 'At least one arg needs to be specified')\n    let msg\n    const len = args.length\n    args = (Array.isArray(args) ? args : [args]).map((a) => `\"${a}\"`).join(' or ')\n    switch (len) {\n      case 1:\n        msg += `The ${args[0]} argument`\n        break\n      case 2:\n        msg += `The ${args[0]} and ${args[1]} arguments`\n        break\n      default:\n        {\n          const last = args.pop()\n          msg += `The ${args.join(', ')}, and ${last} arguments`\n        }\n        break\n    }\n    return `${msg} must be specified`\n  },\n  TypeError\n)\nE(\n  'ERR_OUT_OF_RANGE',\n  (str, range, input) => {\n    assert(range, 'Missing \"range\" argument')\n    let received\n    if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n      received = addNumericalSeparator(String(input))\n    } else if (typeof input === 'bigint') {\n      received = String(input)\n      if (input > 2n ** 32n || input < -(2n ** 32n)) {\n        received = addNumericalSeparator(received)\n      }\n      received += 'n'\n    } else {\n      received = inspect(input)\n    }\n    return `The value of \"${str}\" is out of range. It must be ${range}. Received ${received}`\n  },\n  RangeError\n)\nE('ERR_MULTIPLE_CALLBACK', 'Callback called multiple times', Error)\nE('ERR_METHOD_NOT_IMPLEMENTED', 'The %s method is not implemented', Error)\nE('ERR_STREAM_ALREADY_FINISHED', 'Cannot call %s after a stream was finished', Error)\nE('ERR_STREAM_CANNOT_PIPE', 'Cannot pipe, not readable', Error)\nE('ERR_STREAM_DESTROYED', 'Cannot call %s after a stream was destroyed', Error)\nE('ERR_STREAM_NULL_VALUES', 'May not write null values to stream', TypeError)\nE('ERR_STREAM_PREMATURE_CLOSE', 'Premature close', Error)\nE('ERR_STREAM_PUSH_AFTER_EOF', 'stream.push() after EOF', Error)\nE('ERR_STREAM_UNSHIFT_AFTER_END_EVENT', 'stream.unshift() after end event', Error)\nE('ERR_STREAM_WRITE_AFTER_END', 'write after end', Error)\nE('ERR_UNKNOWN_ENCODING', 'Unknown encoding: %s', TypeError)\nmodule.exports = {\n  AbortError,\n  aggregateTwoErrors: hideStackFrames(aggregateTwoErrors),\n  hideStackFrames,\n  codes\n}\n","'use strict'\n\nconst Stream = require('stream')\nif (Stream && process.env.READABLE_STREAM === 'disable') {\n  const promises = Stream.promises\n\n  // Explicit export naming is needed for ESM\n  module.exports._uint8ArrayToBuffer = Stream._uint8ArrayToBuffer\n  module.exports._isUint8Array = Stream._isUint8Array\n  module.exports.isDisturbed = Stream.isDisturbed\n  module.exports.isErrored = Stream.isErrored\n  module.exports.isReadable = Stream.isReadable\n  module.exports.Readable = Stream.Readable\n  module.exports.Writable = Stream.Writable\n  module.exports.Duplex = Stream.Duplex\n  module.exports.Transform = Stream.Transform\n  module.exports.PassThrough = Stream.PassThrough\n  module.exports.addAbortSignal = Stream.addAbortSignal\n  module.exports.finished = Stream.finished\n  module.exports.destroy = Stream.destroy\n  module.exports.pipeline = Stream.pipeline\n  module.exports.compose = Stream.compose\n  Object.defineProperty(Stream, 'promises', {\n    configurable: true,\n    enumerable: true,\n    get() {\n      return promises\n    }\n  })\n  module.exports.Stream = Stream.Stream\n} else {\n  const CustomStream = require('../stream')\n  const promises = require('../stream/promises')\n  const originalDestroy = CustomStream.Readable.destroy\n  module.exports = CustomStream.Readable\n\n  // Explicit export naming is needed for ESM\n  module.exports._uint8ArrayToBuffer = CustomStream._uint8ArrayToBuffer\n  module.exports._isUint8Array = CustomStream._isUint8Array\n  module.exports.isDisturbed = CustomStream.isDisturbed\n  module.exports.isErrored = CustomStream.isErrored\n  module.exports.isReadable = CustomStream.isReadable\n  module.exports.Readable = CustomStream.Readable\n  module.exports.Writable = CustomStream.Writable\n  module.exports.Duplex = CustomStream.Duplex\n  module.exports.Transform = CustomStream.Transform\n  module.exports.PassThrough = CustomStream.PassThrough\n  module.exports.addAbortSignal = CustomStream.addAbortSignal\n  module.exports.finished = CustomStream.finished\n  module.exports.destroy = CustomStream.destroy\n  module.exports.destroy = originalDestroy\n  module.exports.pipeline = CustomStream.pipeline\n  module.exports.compose = CustomStream.compose\n  Object.defineProperty(CustomStream, 'promises', {\n    configurable: true,\n    enumerable: true,\n    get() {\n      return promises\n    }\n  })\n  module.exports.Stream = CustomStream.Stream\n}\n\n// Allow default importing\nmodule.exports.default = module.exports\n","'use strict'\n\n/*\n  This file is a reduced and adapted version of the main lib/internal/per_context/primordials.js file defined at\n\n  https://github.com/nodejs/node/blob/master/lib/internal/per_context/primordials.js\n\n  Don't try to replace with the original file and keep it up to date with the upstream file.\n*/\nmodule.exports = {\n  ArrayIsArray(self) {\n    return Array.isArray(self)\n  },\n  ArrayPrototypeIncludes(self, el) {\n    return self.includes(el)\n  },\n  ArrayPrototypeIndexOf(self, el) {\n    return self.indexOf(el)\n  },\n  ArrayPrototypeJoin(self, sep) {\n    return self.join(sep)\n  },\n  ArrayPrototypeMap(self, fn) {\n    return self.map(fn)\n  },\n  ArrayPrototypePop(self, el) {\n    return self.pop(el)\n  },\n  ArrayPrototypePush(self, el) {\n    return self.push(el)\n  },\n  ArrayPrototypeSlice(self, start, end) {\n    return self.slice(start, end)\n  },\n  Error,\n  FunctionPrototypeCall(fn, thisArgs, ...args) {\n    return fn.call(thisArgs, ...args)\n  },\n  FunctionPrototypeSymbolHasInstance(self, instance) {\n    return Function.prototype[Symbol.hasInstance].call(self, instance)\n  },\n  MathFloor: Math.floor,\n  Number,\n  NumberIsInteger: Number.isInteger,\n  NumberIsNaN: Number.isNaN,\n  NumberMAX_SAFE_INTEGER: Number.MAX_SAFE_INTEGER,\n  NumberMIN_SAFE_INTEGER: Number.MIN_SAFE_INTEGER,\n  NumberParseInt: Number.parseInt,\n  ObjectDefineProperties(self, props) {\n    return Object.defineProperties(self, props)\n  },\n  ObjectDefineProperty(self, name, prop) {\n    return Object.defineProperty(self, name, prop)\n  },\n  ObjectGetOwnPropertyDescriptor(self, name) {\n    return Object.getOwnPropertyDescriptor(self, name)\n  },\n  ObjectKeys(obj) {\n    return Object.keys(obj)\n  },\n  ObjectSetPrototypeOf(target, proto) {\n    return Object.setPrototypeOf(target, proto)\n  },\n  Promise,\n  PromisePrototypeCatch(self, fn) {\n    return self.catch(fn)\n  },\n  PromisePrototypeThen(self, thenFn, catchFn) {\n    return self.then(thenFn, catchFn)\n  },\n  PromiseReject(err) {\n    return Promise.reject(err)\n  },\n  PromiseResolve(val) {\n    return Promise.resolve(val)\n  },\n  ReflectApply: Reflect.apply,\n  RegExpPrototypeTest(self, value) {\n    return self.test(value)\n  },\n  SafeSet: Set,\n  String,\n  StringPrototypeSlice(self, start, end) {\n    return self.slice(start, end)\n  },\n  StringPrototypeToLowerCase(self) {\n    return self.toLowerCase()\n  },\n  StringPrototypeToUpperCase(self) {\n    return self.toUpperCase()\n  },\n  StringPrototypeTrim(self) {\n    return self.trim()\n  },\n  Symbol,\n  SymbolFor: Symbol.for,\n  SymbolAsyncIterator: Symbol.asyncIterator,\n  SymbolHasInstance: Symbol.hasInstance,\n  SymbolIterator: Symbol.iterator,\n  SymbolDispose: Symbol.dispose || Symbol('Symbol.dispose'),\n  SymbolAsyncDispose: Symbol.asyncDispose || Symbol('Symbol.asyncDispose'),\n  TypedArrayPrototypeSet(self, buf, len) {\n    return self.set(buf, len)\n  },\n  Boolean: Boolean,\n  Uint8Array\n}\n","'use strict'\n\nconst bufferModule = require('buffer')\nconst { kResistStopPropagation, SymbolDispose } = require('./primordials')\nconst AbortSignal = globalThis.AbortSignal || require('abort-controller').AbortSignal\nconst AbortController = globalThis.AbortController || require('abort-controller').AbortController\nconst AsyncFunction = Object.getPrototypeOf(async function () {}).constructor\nconst Blob = globalThis.Blob || bufferModule.Blob\n/* eslint-disable indent */\nconst isBlob =\n  typeof Blob !== 'undefined'\n    ? function isBlob(b) {\n        // eslint-disable-next-line indent\n        return b instanceof Blob\n      }\n    : function isBlob(b) {\n        return false\n      }\n/* eslint-enable indent */\n\nconst validateAbortSignal = (signal, name) => {\n  if (signal !== undefined && (signal === null || typeof signal !== 'object' || !('aborted' in signal))) {\n    throw new ERR_INVALID_ARG_TYPE(name, 'AbortSignal', signal)\n  }\n}\nconst validateFunction = (value, name) => {\n  if (typeof value !== 'function') throw new ERR_INVALID_ARG_TYPE(name, 'Function', value)\n}\n\n// This is a simplified version of AggregateError\nclass AggregateError extends Error {\n  constructor(errors) {\n    if (!Array.isArray(errors)) {\n      throw new TypeError(`Expected input to be an Array, got ${typeof errors}`)\n    }\n    let message = ''\n    for (let i = 0; i < errors.length; i++) {\n      message += `    ${errors[i].stack}\\n`\n    }\n    super(message)\n    this.name = 'AggregateError'\n    this.errors = errors\n  }\n}\nmodule.exports = {\n  AggregateError,\n  kEmptyObject: Object.freeze({}),\n  once(callback) {\n    let called = false\n    return function (...args) {\n      if (called) {\n        return\n      }\n      called = true\n      callback.apply(this, args)\n    }\n  },\n  createDeferredPromise: function () {\n    let resolve\n    let reject\n\n    // eslint-disable-next-line promise/param-names\n    const promise = new Promise((res, rej) => {\n      resolve = res\n      reject = rej\n    })\n    return {\n      promise,\n      resolve,\n      reject\n    }\n  },\n  promisify(fn) {\n    return new Promise((resolve, reject) => {\n      fn((err, ...args) => {\n        if (err) {\n          return reject(err)\n        }\n        return resolve(...args)\n      })\n    })\n  },\n  debuglog() {\n    return function () {}\n  },\n  format(format, ...args) {\n    // Simplified version of https://nodejs.org/api/util.html#utilformatformat-args\n    return format.replace(/%([sdifj])/g, function (...[_unused, type]) {\n      const replacement = args.shift()\n      if (type === 'f') {\n        return replacement.toFixed(6)\n      } else if (type === 'j') {\n        return JSON.stringify(replacement)\n      } else if (type === 's' && typeof replacement === 'object') {\n        const ctor = replacement.constructor !== Object ? replacement.constructor.name : ''\n        return `${ctor} {}`.trim()\n      } else {\n        return replacement.toString()\n      }\n    })\n  },\n  inspect(value) {\n    // Vastly simplified version of https://nodejs.org/api/util.html#utilinspectobject-options\n    switch (typeof value) {\n      case 'string':\n        if (value.includes(\"'\")) {\n          if (!value.includes('\"')) {\n            return `\"${value}\"`\n          } else if (!value.includes('`') && !value.includes('${')) {\n            return `\\`${value}\\``\n          }\n        }\n        return `'${value}'`\n      case 'number':\n        if (isNaN(value)) {\n          return 'NaN'\n        } else if (Object.is(value, -0)) {\n          return String(value)\n        }\n        return value\n      case 'bigint':\n        return `${String(value)}n`\n      case 'boolean':\n      case 'undefined':\n        return String(value)\n      case 'object':\n        return '{}'\n    }\n  },\n  types: {\n    isAsyncFunction(fn) {\n      return fn instanceof AsyncFunction\n    },\n    isArrayBufferView(arr) {\n      return ArrayBuffer.isView(arr)\n    }\n  },\n  isBlob,\n  deprecate(fn, message) {\n    return fn\n  },\n  addAbortListener:\n    require('events').addAbortListener ||\n    function addAbortListener(signal, listener) {\n      if (signal === undefined) {\n        throw new ERR_INVALID_ARG_TYPE('signal', 'AbortSignal', signal)\n      }\n      validateAbortSignal(signal, 'signal')\n      validateFunction(listener, 'listener')\n      let removeEventListener\n      if (signal.aborted) {\n        queueMicrotask(() => listener())\n      } else {\n        signal.addEventListener('abort', listener, {\n          __proto__: null,\n          once: true,\n          [kResistStopPropagation]: true\n        })\n        removeEventListener = () => {\n          signal.removeEventListener('abort', listener)\n        }\n      }\n      return {\n        __proto__: null,\n        [SymbolDispose]() {\n          var _removeEventListener\n          ;(_removeEventListener = removeEventListener) === null || _removeEventListener === undefined\n            ? undefined\n            : _removeEventListener()\n        }\n      }\n    },\n  AbortSignalAny:\n    AbortSignal.any ||\n    function AbortSignalAny(signals) {\n      // Fast path if there is only one signal.\n      if (signals.length === 1) {\n        return signals[0]\n      }\n      const ac = new AbortController()\n      const abort = () => ac.abort()\n      signals.forEach((signal) => {\n        validateAbortSignal(signal, 'signals')\n        signal.addEventListener('abort', abort, {\n          once: true\n        })\n      })\n      ac.signal.addEventListener(\n        'abort',\n        () => {\n          signals.forEach((signal) => signal.removeEventListener('abort', abort))\n        },\n        {\n          once: true\n        }\n      )\n      return ac.signal\n    }\n}\nmodule.exports.promisify.custom = Symbol.for('nodejs.util.promisify.custom')\n","/* replacement start */\n\nconst { Buffer } = require('buffer')\n\n/* replacement end */\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n;('use strict')\nconst { ObjectDefineProperty, ObjectKeys, ReflectApply } = require('./ours/primordials')\nconst {\n  promisify: { custom: customPromisify }\n} = require('./ours/util')\nconst { streamReturningOperators, promiseReturningOperators } = require('./internal/streams/operators')\nconst {\n  codes: { ERR_ILLEGAL_CONSTRUCTOR }\n} = require('./ours/errors')\nconst compose = require('./internal/streams/compose')\nconst { setDefaultHighWaterMark, getDefaultHighWaterMark } = require('./internal/streams/state')\nconst { pipeline } = require('./internal/streams/pipeline')\nconst { destroyer } = require('./internal/streams/destroy')\nconst eos = require('./internal/streams/end-of-stream')\nconst internalBuffer = {}\nconst promises = require('./stream/promises')\nconst utils = require('./internal/streams/utils')\nconst Stream = (module.exports = require('./internal/streams/legacy').Stream)\nStream.isDestroyed = utils.isDestroyed\nStream.isDisturbed = utils.isDisturbed\nStream.isErrored = utils.isErrored\nStream.isReadable = utils.isReadable\nStream.isWritable = utils.isWritable\nStream.Readable = require('./internal/streams/readable')\nfor (const key of ObjectKeys(streamReturningOperators)) {\n  const op = streamReturningOperators[key]\n  function fn(...args) {\n    if (new.target) {\n      throw ERR_ILLEGAL_CONSTRUCTOR()\n    }\n    return Stream.Readable.from(ReflectApply(op, this, args))\n  }\n  ObjectDefineProperty(fn, 'name', {\n    __proto__: null,\n    value: op.name\n  })\n  ObjectDefineProperty(fn, 'length', {\n    __proto__: null,\n    value: op.length\n  })\n  ObjectDefineProperty(Stream.Readable.prototype, key, {\n    __proto__: null,\n    value: fn,\n    enumerable: false,\n    configurable: true,\n    writable: true\n  })\n}\nfor (const key of ObjectKeys(promiseReturningOperators)) {\n  const op = promiseReturningOperators[key]\n  function fn(...args) {\n    if (new.target) {\n      throw ERR_ILLEGAL_CONSTRUCTOR()\n    }\n    return ReflectApply(op, this, args)\n  }\n  ObjectDefineProperty(fn, 'name', {\n    __proto__: null,\n    value: op.name\n  })\n  ObjectDefineProperty(fn, 'length', {\n    __proto__: null,\n    value: op.length\n  })\n  ObjectDefineProperty(Stream.Readable.prototype, key, {\n    __proto__: null,\n    value: fn,\n    enumerable: false,\n    configurable: true,\n    writable: true\n  })\n}\nStream.Writable = require('./internal/streams/writable')\nStream.Duplex = require('./internal/streams/duplex')\nStream.Transform = require('./internal/streams/transform')\nStream.PassThrough = require('./internal/streams/passthrough')\nStream.pipeline = pipeline\nconst { addAbortSignal } = require('./internal/streams/add-abort-signal')\nStream.addAbortSignal = addAbortSignal\nStream.finished = eos\nStream.destroy = destroyer\nStream.compose = compose\nStream.setDefaultHighWaterMark = setDefaultHighWaterMark\nStream.getDefaultHighWaterMark = getDefaultHighWaterMark\nObjectDefineProperty(Stream, 'promises', {\n  __proto__: null,\n  configurable: true,\n  enumerable: true,\n  get() {\n    return promises\n  }\n})\nObjectDefineProperty(pipeline, customPromisify, {\n  __proto__: null,\n  enumerable: true,\n  get() {\n    return promises.pipeline\n  }\n})\nObjectDefineProperty(eos, customPromisify, {\n  __proto__: null,\n  enumerable: true,\n  get() {\n    return promises.finished\n  }\n})\n\n// Backwards-compat with node 0.4.x\nStream.Stream = Stream\nStream._isUint8Array = function isUint8Array(value) {\n  return value instanceof Uint8Array\n}\nStream._uint8ArrayToBuffer = function _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk.buffer, chunk.byteOffset, chunk.byteLength)\n}\n","'use strict'\n\nconst { ArrayPrototypePop, Promise } = require('../ours/primordials')\nconst { isIterable, isNodeStream, isWebStream } = require('../internal/streams/utils')\nconst { pipelineImpl: pl } = require('../internal/streams/pipeline')\nconst { finished } = require('../internal/streams/end-of-stream')\nrequire('../../lib/stream.js')\nfunction pipeline(...streams) {\n  return new Promise((resolve, reject) => {\n    let signal\n    let end\n    const lastArg = streams[streams.length - 1]\n    if (\n      lastArg &&\n      typeof lastArg === 'object' &&\n      !isNodeStream(lastArg) &&\n      !isIterable(lastArg) &&\n      !isWebStream(lastArg)\n    ) {\n      const options = ArrayPrototypePop(streams)\n      signal = options.signal\n      end = options.end\n    }\n    pl(\n      streams,\n      (err, value) => {\n        if (err) {\n          reject(err)\n        } else {\n          resolve(value)\n        }\n      },\n      {\n        signal,\n        end\n      }\n    )\n  })\n}\nmodule.exports = {\n  finished,\n  pipeline\n}\n","'use strict';\n\nconst WebSocket = require('./lib/websocket');\n\nWebSocket.createWebSocketStream = require('./lib/stream');\nWebSocket.Server = require('./lib/websocket-server');\nWebSocket.Receiver = require('./lib/receiver');\nWebSocket.Sender = require('./lib/sender');\n\nWebSocket.WebSocket = WebSocket;\nWebSocket.WebSocketServer = WebSocket.Server;\n\nmodule.exports = WebSocket;\n","'use strict';\n\nconst { EMPTY_BUFFER } = require('./constants');\n\nconst FastBuffer = Buffer[Symbol.species];\n\n/**\n * Merges an array of buffers into a new buffer.\n *\n * @param {Buffer[]} list The array of buffers to concat\n * @param {Number} totalLength The total length of buffers in the list\n * @return {Buffer} The resulting buffer\n * @public\n */\nfunction concat(list, totalLength) {\n  if (list.length === 0) return EMPTY_BUFFER;\n  if (list.length === 1) return list[0];\n\n  const target = Buffer.allocUnsafe(totalLength);\n  let offset = 0;\n\n  for (let i = 0; i < list.length; i++) {\n    const buf = list[i];\n    target.set(buf, offset);\n    offset += buf.length;\n  }\n\n  if (offset < totalLength) {\n    return new FastBuffer(target.buffer, target.byteOffset, offset);\n  }\n\n  return target;\n}\n\n/**\n * Masks a buffer using the given mask.\n *\n * @param {Buffer} source The buffer to mask\n * @param {Buffer} mask The mask to use\n * @param {Buffer} output The buffer where to store the result\n * @param {Number} offset The offset at which to start writing\n * @param {Number} length The number of bytes to mask.\n * @public\n */\nfunction _mask(source, mask, output, offset, length) {\n  for (let i = 0; i < length; i++) {\n    output[offset + i] = source[i] ^ mask[i & 3];\n  }\n}\n\n/**\n * Unmasks a buffer using the given mask.\n *\n * @param {Buffer} buffer The buffer to unmask\n * @param {Buffer} mask The mask to use\n * @public\n */\nfunction _unmask(buffer, mask) {\n  for (let i = 0; i < buffer.length; i++) {\n    buffer[i] ^= mask[i & 3];\n  }\n}\n\n/**\n * Converts a buffer to an `ArrayBuffer`.\n *\n * @param {Buffer} buf The buffer to convert\n * @return {ArrayBuffer} Converted buffer\n * @public\n */\nfunction toArrayBuffer(buf) {\n  if (buf.length === buf.buffer.byteLength) {\n    return buf.buffer;\n  }\n\n  return buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.length);\n}\n\n/**\n * Converts `data` to a `Buffer`.\n *\n * @param {*} data The data to convert\n * @return {Buffer} The buffer\n * @throws {TypeError}\n * @public\n */\nfunction toBuffer(data) {\n  toBuffer.readOnly = true;\n\n  if (Buffer.isBuffer(data)) return data;\n\n  let buf;\n\n  if (data instanceof ArrayBuffer) {\n    buf = new FastBuffer(data);\n  } else if (ArrayBuffer.isView(data)) {\n    buf = new FastBuffer(data.buffer, data.byteOffset, data.byteLength);\n  } else {\n    buf = Buffer.from(data);\n    toBuffer.readOnly = false;\n  }\n\n  return buf;\n}\n\nmodule.exports = {\n  concat,\n  mask: _mask,\n  toArrayBuffer,\n  toBuffer,\n  unmask: _unmask\n};\n\n/* istanbul ignore else  */\nif (!process.env.WS_NO_BUFFER_UTIL) {\n  try {\n    const bufferUtil = require('bufferutil');\n\n    module.exports.mask = function (source, mask, output, offset, length) {\n      if (length < 48) _mask(source, mask, output, offset, length);\n      else bufferUtil.mask(source, mask, output, offset, length);\n    };\n\n    module.exports.unmask = function (buffer, mask) {\n      if (buffer.length < 32) _unmask(buffer, mask);\n      else bufferUtil.unmask(buffer, mask);\n    };\n  } catch (e) {\n    // Continue regardless of the error.\n  }\n}\n","'use strict';\n\nconst BINARY_TYPES = ['nodebuffer', 'arraybuffer', 'fragments'];\nconst hasBlob = typeof Blob !== 'undefined';\n\nif (hasBlob) BINARY_TYPES.push('blob');\n\nmodule.exports = {\n  BINARY_TYPES,\n  EMPTY_BUFFER: Buffer.alloc(0),\n  GUID: '258EAFA5-E914-47DA-95CA-C5AB0DC85B11',\n  hasBlob,\n  kForOnEventAttribute: Symbol('kIsForOnEventAttribute'),\n  kListener: Symbol('kListener'),\n  kStatusCode: Symbol('status-code'),\n  kWebSocket: Symbol('websocket'),\n  NOOP: () => {}\n};\n","'use strict';\n\nconst { kForOnEventAttribute, kListener } = require('./constants');\n\nconst kCode = Symbol('kCode');\nconst kData = Symbol('kData');\nconst kError = Symbol('kError');\nconst kMessage = Symbol('kMessage');\nconst kReason = Symbol('kReason');\nconst kTarget = Symbol('kTarget');\nconst kType = Symbol('kType');\nconst kWasClean = Symbol('kWasClean');\n\n/**\n * Class representing an event.\n */\nclass Event {\n  /**\n   * Create a new `Event`.\n   *\n   * @param {String} type The name of the event\n   * @throws {TypeError} If the `type` argument is not specified\n   */\n  constructor(type) {\n    this[kTarget] = null;\n    this[kType] = type;\n  }\n\n  /**\n   * @type {*}\n   */\n  get target() {\n    return this[kTarget];\n  }\n\n  /**\n   * @type {String}\n   */\n  get type() {\n    return this[kType];\n  }\n}\n\nObject.defineProperty(Event.prototype, 'target', { enumerable: true });\nObject.defineProperty(Event.prototype, 'type', { enumerable: true });\n\n/**\n * Class representing a close event.\n *\n * @extends Event\n */\nclass CloseEvent extends Event {\n  /**\n   * Create a new `CloseEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {Number} [options.code=0] The status code explaining why the\n   *     connection was closed\n   * @param {String} [options.reason=''] A human-readable string explaining why\n   *     the connection was closed\n   * @param {Boolean} [options.wasClean=false] Indicates whether or not the\n   *     connection was cleanly closed\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kCode] = options.code === undefined ? 0 : options.code;\n    this[kReason] = options.reason === undefined ? '' : options.reason;\n    this[kWasClean] = options.wasClean === undefined ? false : options.wasClean;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get code() {\n    return this[kCode];\n  }\n\n  /**\n   * @type {String}\n   */\n  get reason() {\n    return this[kReason];\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get wasClean() {\n    return this[kWasClean];\n  }\n}\n\nObject.defineProperty(CloseEvent.prototype, 'code', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'reason', { enumerable: true });\nObject.defineProperty(CloseEvent.prototype, 'wasClean', { enumerable: true });\n\n/**\n * Class representing an error event.\n *\n * @extends Event\n */\nclass ErrorEvent extends Event {\n  /**\n   * Create a new `ErrorEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.error=null] The error that generated this event\n   * @param {String} [options.message=''] The error message\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kError] = options.error === undefined ? null : options.error;\n    this[kMessage] = options.message === undefined ? '' : options.message;\n  }\n\n  /**\n   * @type {*}\n   */\n  get error() {\n    return this[kError];\n  }\n\n  /**\n   * @type {String}\n   */\n  get message() {\n    return this[kMessage];\n  }\n}\n\nObject.defineProperty(ErrorEvent.prototype, 'error', { enumerable: true });\nObject.defineProperty(ErrorEvent.prototype, 'message', { enumerable: true });\n\n/**\n * Class representing a message event.\n *\n * @extends Event\n */\nclass MessageEvent extends Event {\n  /**\n   * Create a new `MessageEvent`.\n   *\n   * @param {String} type The name of the event\n   * @param {Object} [options] A dictionary object that allows for setting\n   *     attributes via object members of the same name\n   * @param {*} [options.data=null] The message content\n   */\n  constructor(type, options = {}) {\n    super(type);\n\n    this[kData] = options.data === undefined ? null : options.data;\n  }\n\n  /**\n   * @type {*}\n   */\n  get data() {\n    return this[kData];\n  }\n}\n\nObject.defineProperty(MessageEvent.prototype, 'data', { enumerable: true });\n\n/**\n * This provides methods for emulating the `EventTarget` interface. It's not\n * meant to be used directly.\n *\n * @mixin\n */\nconst EventTarget = {\n  /**\n   * Register an event listener.\n   *\n   * @param {String} type A string representing the event type to listen for\n   * @param {(Function|Object)} handler The listener to add\n   * @param {Object} [options] An options object specifies characteristics about\n   *     the event listener\n   * @param {Boolean} [options.once=false] A `Boolean` indicating that the\n   *     listener should be invoked at most once after being added. If `true`,\n   *     the listener would be automatically removed when invoked.\n   * @public\n   */\n  addEventListener(type, handler, options = {}) {\n    for (const listener of this.listeners(type)) {\n      if (\n        !options[kForOnEventAttribute] &&\n        listener[kListener] === handler &&\n        !listener[kForOnEventAttribute]\n      ) {\n        return;\n      }\n    }\n\n    let wrapper;\n\n    if (type === 'message') {\n      wrapper = function onMessage(data, isBinary) {\n        const event = new MessageEvent('message', {\n          data: isBinary ? data : data.toString()\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'close') {\n      wrapper = function onClose(code, message) {\n        const event = new CloseEvent('close', {\n          code,\n          reason: message.toString(),\n          wasClean: this._closeFrameReceived && this._closeFrameSent\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'error') {\n      wrapper = function onError(error) {\n        const event = new ErrorEvent('error', {\n          error,\n          message: error.message\n        });\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else if (type === 'open') {\n      wrapper = function onOpen() {\n        const event = new Event('open');\n\n        event[kTarget] = this;\n        callListener(handler, this, event);\n      };\n    } else {\n      return;\n    }\n\n    wrapper[kForOnEventAttribute] = !!options[kForOnEventAttribute];\n    wrapper[kListener] = handler;\n\n    if (options.once) {\n      this.once(type, wrapper);\n    } else {\n      this.on(type, wrapper);\n    }\n  },\n\n  /**\n   * Remove an event listener.\n   *\n   * @param {String} type A string representing the event type to remove\n   * @param {(Function|Object)} handler The listener to remove\n   * @public\n   */\n  removeEventListener(type, handler) {\n    for (const listener of this.listeners(type)) {\n      if (listener[kListener] === handler && !listener[kForOnEventAttribute]) {\n        this.removeListener(type, listener);\n        break;\n      }\n    }\n  }\n};\n\nmodule.exports = {\n  CloseEvent,\n  ErrorEvent,\n  Event,\n  EventTarget,\n  MessageEvent\n};\n\n/**\n * Call an event listener\n *\n * @param {(Function|Object)} listener The listener to call\n * @param {*} thisArg The value to use as `this`` when calling the listener\n * @param {Event} event The event to pass to the listener\n * @private\n */\nfunction callListener(listener, thisArg, event) {\n  if (typeof listener === 'object' && listener.handleEvent) {\n    listener.handleEvent.call(listener, event);\n  } else {\n    listener.call(thisArg, event);\n  }\n}\n","'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Adds an offer to the map of extension offers or a parameter to the map of\n * parameters.\n *\n * @param {Object} dest The map of extension offers or parameters\n * @param {String} name The extension or parameter name\n * @param {(Object|Boolean|String)} elem The extension parameters or the\n *     parameter value\n * @private\n */\nfunction push(dest, name, elem) {\n  if (dest[name] === undefined) dest[name] = [elem];\n  else dest[name].push(elem);\n}\n\n/**\n * Parses the `Sec-WebSocket-Extensions` header into an object.\n *\n * @param {String} header The field value of the header\n * @return {Object} The parsed object\n * @public\n */\nfunction parse(header) {\n  const offers = Object.create(null);\n  let params = Object.create(null);\n  let mustUnescape = false;\n  let isEscaping = false;\n  let inQuotes = false;\n  let extensionName;\n  let paramName;\n  let start = -1;\n  let code = -1;\n  let end = -1;\n  let i = 0;\n\n  for (; i < header.length; i++) {\n    code = header.charCodeAt(i);\n\n    if (extensionName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (\n        i !== 0 &&\n        (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n      ) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b /* ';' */ || code === 0x2c /* ',' */) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        const name = header.slice(start, end);\n        if (code === 0x2c) {\n          push(offers, name, params);\n          params = Object.create(null);\n        } else {\n          extensionName = name;\n        }\n\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else if (paramName === undefined) {\n      if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (code === 0x20 || code === 0x09) {\n        if (end === -1 && start !== -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        push(params, header.slice(start, end), true);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        start = end = -1;\n      } else if (code === 0x3d /* '=' */ && start !== -1 && end === -1) {\n        paramName = header.slice(start, i);\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    } else {\n      //\n      // The value of a quoted-string after unescaping must conform to the\n      // token ABNF, so only token characters are valid.\n      // Ref: https://tools.ietf.org/html/rfc6455#section-9.1\n      //\n      if (isEscaping) {\n        if (tokenChars[code] !== 1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n        if (start === -1) start = i;\n        else if (!mustUnescape) mustUnescape = true;\n        isEscaping = false;\n      } else if (inQuotes) {\n        if (tokenChars[code] === 1) {\n          if (start === -1) start = i;\n        } else if (code === 0x22 /* '\"' */ && start !== -1) {\n          inQuotes = false;\n          end = i;\n        } else if (code === 0x5c /* '\\' */) {\n          isEscaping = true;\n        } else {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n      } else if (code === 0x22 && header.charCodeAt(i - 1) === 0x3d) {\n        inQuotes = true;\n      } else if (end === -1 && tokenChars[code] === 1) {\n        if (start === -1) start = i;\n      } else if (start !== -1 && (code === 0x20 || code === 0x09)) {\n        if (end === -1) end = i;\n      } else if (code === 0x3b || code === 0x2c) {\n        if (start === -1) {\n          throw new SyntaxError(`Unexpected character at index ${i}`);\n        }\n\n        if (end === -1) end = i;\n        let value = header.slice(start, end);\n        if (mustUnescape) {\n          value = value.replace(/\\\\/g, '');\n          mustUnescape = false;\n        }\n        push(params, paramName, value);\n        if (code === 0x2c) {\n          push(offers, extensionName, params);\n          params = Object.create(null);\n          extensionName = undefined;\n        }\n\n        paramName = undefined;\n        start = end = -1;\n      } else {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n    }\n  }\n\n  if (start === -1 || inQuotes || code === 0x20 || code === 0x09) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  if (end === -1) end = i;\n  const token = header.slice(start, end);\n  if (extensionName === undefined) {\n    push(offers, token, params);\n  } else {\n    if (paramName === undefined) {\n      push(params, token, true);\n    } else if (mustUnescape) {\n      push(params, paramName, token.replace(/\\\\/g, ''));\n    } else {\n      push(params, paramName, token);\n    }\n    push(offers, extensionName, params);\n  }\n\n  return offers;\n}\n\n/**\n * Builds the `Sec-WebSocket-Extensions` header field value.\n *\n * @param {Object} extensions The map of extensions and parameters to format\n * @return {String} A string representing the given object\n * @public\n */\nfunction format(extensions) {\n  return Object.keys(extensions)\n    .map((extension) => {\n      let configurations = extensions[extension];\n      if (!Array.isArray(configurations)) configurations = [configurations];\n      return configurations\n        .map((params) => {\n          return [extension]\n            .concat(\n              Object.keys(params).map((k) => {\n                let values = params[k];\n                if (!Array.isArray(values)) values = [values];\n                return values\n                  .map((v) => (v === true ? k : `${k}=${v}`))\n                  .join('; ');\n              })\n            )\n            .join('; ');\n        })\n        .join(', ');\n    })\n    .join(', ');\n}\n\nmodule.exports = { format, parse };\n","'use strict';\n\nconst kDone = Symbol('kDone');\nconst kRun = Symbol('kRun');\n\n/**\n * A very simple job queue with adjustable concurrency. Adapted from\n * https://github.com/STRML/async-limiter\n */\nclass Limiter {\n  /**\n   * Creates a new `Limiter`.\n   *\n   * @param {Number} [concurrency=Infinity] The maximum number of jobs allowed\n   *     to run concurrently\n   */\n  constructor(concurrency) {\n    this[kDone] = () => {\n      this.pending--;\n      this[kRun]();\n    };\n    this.concurrency = concurrency || Infinity;\n    this.jobs = [];\n    this.pending = 0;\n  }\n\n  /**\n   * Adds a job to the queue.\n   *\n   * @param {Function} job The job to run\n   * @public\n   */\n  add(job) {\n    this.jobs.push(job);\n    this[kRun]();\n  }\n\n  /**\n   * Removes a job from the queue and runs it if possible.\n   *\n   * @private\n   */\n  [kRun]() {\n    if (this.pending === this.concurrency) return;\n\n    if (this.jobs.length) {\n      const job = this.jobs.shift();\n\n      this.pending++;\n      job(this[kDone]);\n    }\n  }\n}\n\nmodule.exports = Limiter;\n","'use strict';\n\nconst zlib = require('zlib');\n\nconst bufferUtil = require('./buffer-util');\nconst Limiter = require('./limiter');\nconst { kStatusCode } = require('./constants');\n\nconst FastBuffer = Buffer[Symbol.species];\nconst TRAILER = Buffer.from([0x00, 0x00, 0xff, 0xff]);\nconst kPerMessageDeflate = Symbol('permessage-deflate');\nconst kTotalLength = Symbol('total-length');\nconst kCallback = Symbol('callback');\nconst kBuffers = Symbol('buffers');\nconst kError = Symbol('error');\n\n//\n// We limit zlib concurrency, which prevents severe memory fragmentation\n// as documented in https://github.com/nodejs/node/issues/8871#issuecomment-250915913\n// and https://github.com/websockets/ws/issues/1202\n//\n// Intentionally global; it's the global thread pool that's an issue.\n//\nlet zlibLimiter;\n\n/**\n * permessage-deflate implementation.\n */\nclass PerMessageDeflate {\n  /**\n   * Creates a PerMessageDeflate instance.\n   *\n   * @param {Object} [options] Configuration options\n   * @param {(Boolean|Number)} [options.clientMaxWindowBits] Advertise support\n   *     for, or request, a custom client window size\n   * @param {Boolean} [options.clientNoContextTakeover=false] Advertise/\n   *     acknowledge disabling of client context takeover\n   * @param {Number} [options.concurrencyLimit=10] The number of concurrent\n   *     calls to zlib\n   * @param {(Boolean|Number)} [options.serverMaxWindowBits] Request/confirm the\n   *     use of a custom server window size\n   * @param {Boolean} [options.serverNoContextTakeover=false] Request/accept\n   *     disabling of server context takeover\n   * @param {Number} [options.threshold=1024] Size (in bytes) below which\n   *     messages should not be compressed if context takeover is disabled\n   * @param {Object} [options.zlibDeflateOptions] Options to pass to zlib on\n   *     deflate\n   * @param {Object} [options.zlibInflateOptions] Options to pass to zlib on\n   *     inflate\n   * @param {Boolean} [isServer=false] Create the instance in either server or\n   *     client mode\n   * @param {Number} [maxPayload=0] The maximum allowed message length\n   */\n  constructor(options, isServer, maxPayload) {\n    this._maxPayload = maxPayload | 0;\n    this._options = options || {};\n    this._threshold =\n      this._options.threshold !== undefined ? this._options.threshold : 1024;\n    this._isServer = !!isServer;\n    this._deflate = null;\n    this._inflate = null;\n\n    this.params = null;\n\n    if (!zlibLimiter) {\n      const concurrency =\n        this._options.concurrencyLimit !== undefined\n          ? this._options.concurrencyLimit\n          : 10;\n      zlibLimiter = new Limiter(concurrency);\n    }\n  }\n\n  /**\n   * @type {String}\n   */\n  static get extensionName() {\n    return 'permessage-deflate';\n  }\n\n  /**\n   * Create an extension negotiation offer.\n   *\n   * @return {Object} Extension parameters\n   * @public\n   */\n  offer() {\n    const params = {};\n\n    if (this._options.serverNoContextTakeover) {\n      params.server_no_context_takeover = true;\n    }\n    if (this._options.clientNoContextTakeover) {\n      params.client_no_context_takeover = true;\n    }\n    if (this._options.serverMaxWindowBits) {\n      params.server_max_window_bits = this._options.serverMaxWindowBits;\n    }\n    if (this._options.clientMaxWindowBits) {\n      params.client_max_window_bits = this._options.clientMaxWindowBits;\n    } else if (this._options.clientMaxWindowBits == null) {\n      params.client_max_window_bits = true;\n    }\n\n    return params;\n  }\n\n  /**\n   * Accept an extension negotiation offer/response.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Object} Accepted configuration\n   * @public\n   */\n  accept(configurations) {\n    configurations = this.normalizeParams(configurations);\n\n    this.params = this._isServer\n      ? this.acceptAsServer(configurations)\n      : this.acceptAsClient(configurations);\n\n    return this.params;\n  }\n\n  /**\n   * Releases all resources used by the extension.\n   *\n   * @public\n   */\n  cleanup() {\n    if (this._inflate) {\n      this._inflate.close();\n      this._inflate = null;\n    }\n\n    if (this._deflate) {\n      const callback = this._deflate[kCallback];\n\n      this._deflate.close();\n      this._deflate = null;\n\n      if (callback) {\n        callback(\n          new Error(\n            'The deflate stream was closed while data was being processed'\n          )\n        );\n      }\n    }\n  }\n\n  /**\n   *  Accept an extension negotiation offer.\n   *\n   * @param {Array} offers The extension negotiation offers\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsServer(offers) {\n    const opts = this._options;\n    const accepted = offers.find((params) => {\n      if (\n        (opts.serverNoContextTakeover === false &&\n          params.server_no_context_takeover) ||\n        (params.server_max_window_bits &&\n          (opts.serverMaxWindowBits === false ||\n            (typeof opts.serverMaxWindowBits === 'number' &&\n              opts.serverMaxWindowBits > params.server_max_window_bits))) ||\n        (typeof opts.clientMaxWindowBits === 'number' &&\n          !params.client_max_window_bits)\n      ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    if (!accepted) {\n      throw new Error('None of the extension offers can be accepted');\n    }\n\n    if (opts.serverNoContextTakeover) {\n      accepted.server_no_context_takeover = true;\n    }\n    if (opts.clientNoContextTakeover) {\n      accepted.client_no_context_takeover = true;\n    }\n    if (typeof opts.serverMaxWindowBits === 'number') {\n      accepted.server_max_window_bits = opts.serverMaxWindowBits;\n    }\n    if (typeof opts.clientMaxWindowBits === 'number') {\n      accepted.client_max_window_bits = opts.clientMaxWindowBits;\n    } else if (\n      accepted.client_max_window_bits === true ||\n      opts.clientMaxWindowBits === false\n    ) {\n      delete accepted.client_max_window_bits;\n    }\n\n    return accepted;\n  }\n\n  /**\n   * Accept the extension negotiation response.\n   *\n   * @param {Array} response The extension negotiation response\n   * @return {Object} Accepted configuration\n   * @private\n   */\n  acceptAsClient(response) {\n    const params = response[0];\n\n    if (\n      this._options.clientNoContextTakeover === false &&\n      params.client_no_context_takeover\n    ) {\n      throw new Error('Unexpected parameter \"client_no_context_takeover\"');\n    }\n\n    if (!params.client_max_window_bits) {\n      if (typeof this._options.clientMaxWindowBits === 'number') {\n        params.client_max_window_bits = this._options.clientMaxWindowBits;\n      }\n    } else if (\n      this._options.clientMaxWindowBits === false ||\n      (typeof this._options.clientMaxWindowBits === 'number' &&\n        params.client_max_window_bits > this._options.clientMaxWindowBits)\n    ) {\n      throw new Error(\n        'Unexpected or invalid parameter \"client_max_window_bits\"'\n      );\n    }\n\n    return params;\n  }\n\n  /**\n   * Normalize parameters.\n   *\n   * @param {Array} configurations The extension negotiation offers/reponse\n   * @return {Array} The offers/response with normalized parameters\n   * @private\n   */\n  normalizeParams(configurations) {\n    configurations.forEach((params) => {\n      Object.keys(params).forEach((key) => {\n        let value = params[key];\n\n        if (value.length > 1) {\n          throw new Error(`Parameter \"${key}\" must have only a single value`);\n        }\n\n        value = value[0];\n\n        if (key === 'client_max_window_bits') {\n          if (value !== true) {\n            const num = +value;\n            if (!Number.isInteger(num) || num < 8 || num > 15) {\n              throw new TypeError(\n                `Invalid value for parameter \"${key}\": ${value}`\n              );\n            }\n            value = num;\n          } else if (!this._isServer) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else if (key === 'server_max_window_bits') {\n          const num = +value;\n          if (!Number.isInteger(num) || num < 8 || num > 15) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n          value = num;\n        } else if (\n          key === 'client_no_context_takeover' ||\n          key === 'server_no_context_takeover'\n        ) {\n          if (value !== true) {\n            throw new TypeError(\n              `Invalid value for parameter \"${key}\": ${value}`\n            );\n          }\n        } else {\n          throw new Error(`Unknown parameter \"${key}\"`);\n        }\n\n        params[key] = value;\n      });\n    });\n\n    return configurations;\n  }\n\n  /**\n   * Decompress data. Concurrency limited.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  decompress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._decompress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Compress data. Concurrency limited.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @public\n   */\n  compress(data, fin, callback) {\n    zlibLimiter.add((done) => {\n      this._compress(data, fin, (err, result) => {\n        done();\n        callback(err, result);\n      });\n    });\n  }\n\n  /**\n   * Decompress data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _decompress(data, fin, callback) {\n    const endpoint = this._isServer ? 'client' : 'server';\n\n    if (!this._inflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._inflate = zlib.createInflateRaw({\n        ...this._options.zlibInflateOptions,\n        windowBits\n      });\n      this._inflate[kPerMessageDeflate] = this;\n      this._inflate[kTotalLength] = 0;\n      this._inflate[kBuffers] = [];\n      this._inflate.on('error', inflateOnError);\n      this._inflate.on('data', inflateOnData);\n    }\n\n    this._inflate[kCallback] = callback;\n\n    this._inflate.write(data);\n    if (fin) this._inflate.write(TRAILER);\n\n    this._inflate.flush(() => {\n      const err = this._inflate[kError];\n\n      if (err) {\n        this._inflate.close();\n        this._inflate = null;\n        callback(err);\n        return;\n      }\n\n      const data = bufferUtil.concat(\n        this._inflate[kBuffers],\n        this._inflate[kTotalLength]\n      );\n\n      if (this._inflate._readableState.endEmitted) {\n        this._inflate.close();\n        this._inflate = null;\n      } else {\n        this._inflate[kTotalLength] = 0;\n        this._inflate[kBuffers] = [];\n\n        if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n          this._inflate.reset();\n        }\n      }\n\n      callback(null, data);\n    });\n  }\n\n  /**\n   * Compress data.\n   *\n   * @param {(Buffer|String)} data Data to compress\n   * @param {Boolean} fin Specifies whether or not this is the last fragment\n   * @param {Function} callback Callback\n   * @private\n   */\n  _compress(data, fin, callback) {\n    const endpoint = this._isServer ? 'server' : 'client';\n\n    if (!this._deflate) {\n      const key = `${endpoint}_max_window_bits`;\n      const windowBits =\n        typeof this.params[key] !== 'number'\n          ? zlib.Z_DEFAULT_WINDOWBITS\n          : this.params[key];\n\n      this._deflate = zlib.createDeflateRaw({\n        ...this._options.zlibDeflateOptions,\n        windowBits\n      });\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      this._deflate.on('data', deflateOnData);\n    }\n\n    this._deflate[kCallback] = callback;\n\n    this._deflate.write(data);\n    this._deflate.flush(zlib.Z_SYNC_FLUSH, () => {\n      if (!this._deflate) {\n        //\n        // The deflate stream was closed while data was being processed.\n        //\n        return;\n      }\n\n      let data = bufferUtil.concat(\n        this._deflate[kBuffers],\n        this._deflate[kTotalLength]\n      );\n\n      if (fin) {\n        data = new FastBuffer(data.buffer, data.byteOffset, data.length - 4);\n      }\n\n      //\n      // Ensure that the callback will not be called again in\n      // `PerMessageDeflate#cleanup()`.\n      //\n      this._deflate[kCallback] = null;\n\n      this._deflate[kTotalLength] = 0;\n      this._deflate[kBuffers] = [];\n\n      if (fin && this.params[`${endpoint}_no_context_takeover`]) {\n        this._deflate.reset();\n      }\n\n      callback(null, data);\n    });\n  }\n}\n\nmodule.exports = PerMessageDeflate;\n\n/**\n * The listener of the `zlib.DeflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction deflateOnData(chunk) {\n  this[kBuffers].push(chunk);\n  this[kTotalLength] += chunk.length;\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction inflateOnData(chunk) {\n  this[kTotalLength] += chunk.length;\n\n  if (\n    this[kPerMessageDeflate]._maxPayload < 1 ||\n    this[kTotalLength] <= this[kPerMessageDeflate]._maxPayload\n  ) {\n    this[kBuffers].push(chunk);\n    return;\n  }\n\n  this[kError] = new RangeError('Max payload size exceeded');\n  this[kError].code = 'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH';\n  this[kError][kStatusCode] = 1009;\n  this.removeListener('data', inflateOnData);\n  this.reset();\n}\n\n/**\n * The listener of the `zlib.InflateRaw` stream `'error'` event.\n *\n * @param {Error} err The emitted error\n * @private\n */\nfunction inflateOnError(err) {\n  //\n  // There is no need to call `Zlib#close()` as the handle is automatically\n  // closed when an error is emitted.\n  //\n  this[kPerMessageDeflate]._inflate = null;\n  err[kStatusCode] = 1007;\n  this[kCallback](err);\n}\n","'use strict';\n\nconst { Writable } = require('stream');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  kStatusCode,\n  kWebSocket\n} = require('./constants');\nconst { concat, toArrayBuffer, unmask } = require('./buffer-util');\nconst { isValidStatusCode, isValidUTF8 } = require('./validation');\n\nconst FastBuffer = Buffer[Symbol.species];\n\nconst GET_INFO = 0;\nconst GET_PAYLOAD_LENGTH_16 = 1;\nconst GET_PAYLOAD_LENGTH_64 = 2;\nconst GET_MASK = 3;\nconst GET_DATA = 4;\nconst INFLATING = 5;\nconst DEFER_EVENT = 6;\n\n/**\n * HyBi Receiver implementation.\n *\n * @extends Writable\n */\nclass Receiver extends Writable {\n  /**\n   * Creates a Receiver instance.\n   *\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {String} [options.binaryType=nodebuffer] The type for binary data\n   * @param {Object} [options.extensions] An object containing the negotiated\n   *     extensions\n   * @param {Boolean} [options.isServer=false] Specifies whether to operate in\n   *     client or server mode\n   * @param {Number} [options.maxPayload=0] The maximum allowed message length\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   */\n  constructor(options = {}) {\n    super();\n\n    this._allowSynchronousEvents =\n      options.allowSynchronousEvents !== undefined\n        ? options.allowSynchronousEvents\n        : true;\n    this._binaryType = options.binaryType || BINARY_TYPES[0];\n    this._extensions = options.extensions || {};\n    this._isServer = !!options.isServer;\n    this._maxPayload = options.maxPayload | 0;\n    this._skipUTF8Validation = !!options.skipUTF8Validation;\n    this[kWebSocket] = undefined;\n\n    this._bufferedBytes = 0;\n    this._buffers = [];\n\n    this._compressed = false;\n    this._payloadLength = 0;\n    this._mask = undefined;\n    this._fragmented = 0;\n    this._masked = false;\n    this._fin = false;\n    this._opcode = 0;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragments = [];\n\n    this._errored = false;\n    this._loop = false;\n    this._state = GET_INFO;\n  }\n\n  /**\n   * Implements `Writable.prototype._write()`.\n   *\n   * @param {Buffer} chunk The chunk of data to write\n   * @param {String} encoding The character encoding of `chunk`\n   * @param {Function} cb Callback\n   * @private\n   */\n  _write(chunk, encoding, cb) {\n    if (this._opcode === 0x08 && this._state == GET_INFO) return cb();\n\n    this._bufferedBytes += chunk.length;\n    this._buffers.push(chunk);\n    this.startLoop(cb);\n  }\n\n  /**\n   * Consumes `n` bytes from the buffered data.\n   *\n   * @param {Number} n The number of bytes to consume\n   * @return {Buffer} The consumed bytes\n   * @private\n   */\n  consume(n) {\n    this._bufferedBytes -= n;\n\n    if (n === this._buffers[0].length) return this._buffers.shift();\n\n    if (n < this._buffers[0].length) {\n      const buf = this._buffers[0];\n      this._buffers[0] = new FastBuffer(\n        buf.buffer,\n        buf.byteOffset + n,\n        buf.length - n\n      );\n\n      return new FastBuffer(buf.buffer, buf.byteOffset, n);\n    }\n\n    const dst = Buffer.allocUnsafe(n);\n\n    do {\n      const buf = this._buffers[0];\n      const offset = dst.length - n;\n\n      if (n >= buf.length) {\n        dst.set(this._buffers.shift(), offset);\n      } else {\n        dst.set(new Uint8Array(buf.buffer, buf.byteOffset, n), offset);\n        this._buffers[0] = new FastBuffer(\n          buf.buffer,\n          buf.byteOffset + n,\n          buf.length - n\n        );\n      }\n\n      n -= buf.length;\n    } while (n > 0);\n\n    return dst;\n  }\n\n  /**\n   * Starts the parsing loop.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  startLoop(cb) {\n    this._loop = true;\n\n    do {\n      switch (this._state) {\n        case GET_INFO:\n          this.getInfo(cb);\n          break;\n        case GET_PAYLOAD_LENGTH_16:\n          this.getPayloadLength16(cb);\n          break;\n        case GET_PAYLOAD_LENGTH_64:\n          this.getPayloadLength64(cb);\n          break;\n        case GET_MASK:\n          this.getMask();\n          break;\n        case GET_DATA:\n          this.getData(cb);\n          break;\n        case INFLATING:\n        case DEFER_EVENT:\n          this._loop = false;\n          return;\n      }\n    } while (this._loop);\n\n    if (!this._errored) cb();\n  }\n\n  /**\n   * Reads the first two bytes of a frame.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getInfo(cb) {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(2);\n\n    if ((buf[0] & 0x30) !== 0x00) {\n      const error = this.createError(\n        RangeError,\n        'RSV2 and RSV3 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_2_3'\n      );\n\n      cb(error);\n      return;\n    }\n\n    const compressed = (buf[0] & 0x40) === 0x40;\n\n    if (compressed && !this._extensions[PerMessageDeflate.extensionName]) {\n      const error = this.createError(\n        RangeError,\n        'RSV1 must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_RSV_1'\n      );\n\n      cb(error);\n      return;\n    }\n\n    this._fin = (buf[0] & 0x80) === 0x80;\n    this._opcode = buf[0] & 0x0f;\n    this._payloadLength = buf[1] & 0x7f;\n\n    if (this._opcode === 0x00) {\n      if (compressed) {\n        const error = this.createError(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (!this._fragmented) {\n        const error = this.createError(\n          RangeError,\n          'invalid opcode 0',\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n\n        cb(error);\n        return;\n      }\n\n      this._opcode = this._fragmented;\n    } else if (this._opcode === 0x01 || this._opcode === 0x02) {\n      if (this._fragmented) {\n        const error = this.createError(\n          RangeError,\n          `invalid opcode ${this._opcode}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_OPCODE'\n        );\n\n        cb(error);\n        return;\n      }\n\n      this._compressed = compressed;\n    } else if (this._opcode > 0x07 && this._opcode < 0x0b) {\n      if (!this._fin) {\n        const error = this.createError(\n          RangeError,\n          'FIN must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_FIN'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (compressed) {\n        const error = this.createError(\n          RangeError,\n          'RSV1 must be clear',\n          true,\n          1002,\n          'WS_ERR_UNEXPECTED_RSV_1'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (\n        this._payloadLength > 0x7d ||\n        (this._opcode === 0x08 && this._payloadLength === 1)\n      ) {\n        const error = this.createError(\n          RangeError,\n          `invalid payload length ${this._payloadLength}`,\n          true,\n          1002,\n          'WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH'\n        );\n\n        cb(error);\n        return;\n      }\n    } else {\n      const error = this.createError(\n        RangeError,\n        `invalid opcode ${this._opcode}`,\n        true,\n        1002,\n        'WS_ERR_INVALID_OPCODE'\n      );\n\n      cb(error);\n      return;\n    }\n\n    if (!this._fin && !this._fragmented) this._fragmented = this._opcode;\n    this._masked = (buf[1] & 0x80) === 0x80;\n\n    if (this._isServer) {\n      if (!this._masked) {\n        const error = this.createError(\n          RangeError,\n          'MASK must be set',\n          true,\n          1002,\n          'WS_ERR_EXPECTED_MASK'\n        );\n\n        cb(error);\n        return;\n      }\n    } else if (this._masked) {\n      const error = this.createError(\n        RangeError,\n        'MASK must be clear',\n        true,\n        1002,\n        'WS_ERR_UNEXPECTED_MASK'\n      );\n\n      cb(error);\n      return;\n    }\n\n    if (this._payloadLength === 126) this._state = GET_PAYLOAD_LENGTH_16;\n    else if (this._payloadLength === 127) this._state = GET_PAYLOAD_LENGTH_64;\n    else this.haveLength(cb);\n  }\n\n  /**\n   * Gets extended payload length (7+16).\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getPayloadLength16(cb) {\n    if (this._bufferedBytes < 2) {\n      this._loop = false;\n      return;\n    }\n\n    this._payloadLength = this.consume(2).readUInt16BE(0);\n    this.haveLength(cb);\n  }\n\n  /**\n   * Gets extended payload length (7+64).\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getPayloadLength64(cb) {\n    if (this._bufferedBytes < 8) {\n      this._loop = false;\n      return;\n    }\n\n    const buf = this.consume(8);\n    const num = buf.readUInt32BE(0);\n\n    //\n    // The maximum safe integer in JavaScript is 2^53 - 1. An error is returned\n    // if payload length is greater than this number.\n    //\n    if (num > Math.pow(2, 53 - 32) - 1) {\n      const error = this.createError(\n        RangeError,\n        'Unsupported WebSocket frame: payload length > 2^53 - 1',\n        false,\n        1009,\n        'WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH'\n      );\n\n      cb(error);\n      return;\n    }\n\n    this._payloadLength = num * Math.pow(2, 32) + buf.readUInt32BE(4);\n    this.haveLength(cb);\n  }\n\n  /**\n   * Payload length has been read.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  haveLength(cb) {\n    if (this._payloadLength && this._opcode < 0x08) {\n      this._totalPayloadLength += this._payloadLength;\n      if (this._totalPayloadLength > this._maxPayload && this._maxPayload > 0) {\n        const error = this.createError(\n          RangeError,\n          'Max payload size exceeded',\n          false,\n          1009,\n          'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n        );\n\n        cb(error);\n        return;\n      }\n    }\n\n    if (this._masked) this._state = GET_MASK;\n    else this._state = GET_DATA;\n  }\n\n  /**\n   * Reads mask bytes.\n   *\n   * @private\n   */\n  getMask() {\n    if (this._bufferedBytes < 4) {\n      this._loop = false;\n      return;\n    }\n\n    this._mask = this.consume(4);\n    this._state = GET_DATA;\n  }\n\n  /**\n   * Reads data bytes.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  getData(cb) {\n    let data = EMPTY_BUFFER;\n\n    if (this._payloadLength) {\n      if (this._bufferedBytes < this._payloadLength) {\n        this._loop = false;\n        return;\n      }\n\n      data = this.consume(this._payloadLength);\n\n      if (\n        this._masked &&\n        (this._mask[0] | this._mask[1] | this._mask[2] | this._mask[3]) !== 0\n      ) {\n        unmask(data, this._mask);\n      }\n    }\n\n    if (this._opcode > 0x07) {\n      this.controlMessage(data, cb);\n      return;\n    }\n\n    if (this._compressed) {\n      this._state = INFLATING;\n      this.decompress(data, cb);\n      return;\n    }\n\n    if (data.length) {\n      //\n      // This message is not compressed so its length is the sum of the payload\n      // length of all fragments.\n      //\n      this._messageLength = this._totalPayloadLength;\n      this._fragments.push(data);\n    }\n\n    this.dataMessage(cb);\n  }\n\n  /**\n   * Decompresses data.\n   *\n   * @param {Buffer} data Compressed data\n   * @param {Function} cb Callback\n   * @private\n   */\n  decompress(data, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    perMessageDeflate.decompress(data, this._fin, (err, buf) => {\n      if (err) return cb(err);\n\n      if (buf.length) {\n        this._messageLength += buf.length;\n        if (this._messageLength > this._maxPayload && this._maxPayload > 0) {\n          const error = this.createError(\n            RangeError,\n            'Max payload size exceeded',\n            false,\n            1009,\n            'WS_ERR_UNSUPPORTED_MESSAGE_LENGTH'\n          );\n\n          cb(error);\n          return;\n        }\n\n        this._fragments.push(buf);\n      }\n\n      this.dataMessage(cb);\n      if (this._state === GET_INFO) this.startLoop(cb);\n    });\n  }\n\n  /**\n   * Handles a data message.\n   *\n   * @param {Function} cb Callback\n   * @private\n   */\n  dataMessage(cb) {\n    if (!this._fin) {\n      this._state = GET_INFO;\n      return;\n    }\n\n    const messageLength = this._messageLength;\n    const fragments = this._fragments;\n\n    this._totalPayloadLength = 0;\n    this._messageLength = 0;\n    this._fragmented = 0;\n    this._fragments = [];\n\n    if (this._opcode === 2) {\n      let data;\n\n      if (this._binaryType === 'nodebuffer') {\n        data = concat(fragments, messageLength);\n      } else if (this._binaryType === 'arraybuffer') {\n        data = toArrayBuffer(concat(fragments, messageLength));\n      } else if (this._binaryType === 'blob') {\n        data = new Blob(fragments);\n      } else {\n        data = fragments;\n      }\n\n      if (this._allowSynchronousEvents) {\n        this.emit('message', data, true);\n        this._state = GET_INFO;\n      } else {\n        this._state = DEFER_EVENT;\n        setImmediate(() => {\n          this.emit('message', data, true);\n          this._state = GET_INFO;\n          this.startLoop(cb);\n        });\n      }\n    } else {\n      const buf = concat(fragments, messageLength);\n\n      if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n        const error = this.createError(\n          Error,\n          'invalid UTF-8 sequence',\n          true,\n          1007,\n          'WS_ERR_INVALID_UTF8'\n        );\n\n        cb(error);\n        return;\n      }\n\n      if (this._state === INFLATING || this._allowSynchronousEvents) {\n        this.emit('message', buf, false);\n        this._state = GET_INFO;\n      } else {\n        this._state = DEFER_EVENT;\n        setImmediate(() => {\n          this.emit('message', buf, false);\n          this._state = GET_INFO;\n          this.startLoop(cb);\n        });\n      }\n    }\n  }\n\n  /**\n   * Handles a control message.\n   *\n   * @param {Buffer} data Data to handle\n   * @return {(Error|RangeError|undefined)} A possible error\n   * @private\n   */\n  controlMessage(data, cb) {\n    if (this._opcode === 0x08) {\n      if (data.length === 0) {\n        this._loop = false;\n        this.emit('conclude', 1005, EMPTY_BUFFER);\n        this.end();\n      } else {\n        const code = data.readUInt16BE(0);\n\n        if (!isValidStatusCode(code)) {\n          const error = this.createError(\n            RangeError,\n            `invalid status code ${code}`,\n            true,\n            1002,\n            'WS_ERR_INVALID_CLOSE_CODE'\n          );\n\n          cb(error);\n          return;\n        }\n\n        const buf = new FastBuffer(\n          data.buffer,\n          data.byteOffset + 2,\n          data.length - 2\n        );\n\n        if (!this._skipUTF8Validation && !isValidUTF8(buf)) {\n          const error = this.createError(\n            Error,\n            'invalid UTF-8 sequence',\n            true,\n            1007,\n            'WS_ERR_INVALID_UTF8'\n          );\n\n          cb(error);\n          return;\n        }\n\n        this._loop = false;\n        this.emit('conclude', code, buf);\n        this.end();\n      }\n\n      this._state = GET_INFO;\n      return;\n    }\n\n    if (this._allowSynchronousEvents) {\n      this.emit(this._opcode === 0x09 ? 'ping' : 'pong', data);\n      this._state = GET_INFO;\n    } else {\n      this._state = DEFER_EVENT;\n      setImmediate(() => {\n        this.emit(this._opcode === 0x09 ? 'ping' : 'pong', data);\n        this._state = GET_INFO;\n        this.startLoop(cb);\n      });\n    }\n  }\n\n  /**\n   * Builds an error object.\n   *\n   * @param {function(new:Error|RangeError)} ErrorCtor The error constructor\n   * @param {String} message The error message\n   * @param {Boolean} prefix Specifies whether or not to add a default prefix to\n   *     `message`\n   * @param {Number} statusCode The status code\n   * @param {String} errorCode The exposed error code\n   * @return {(Error|RangeError)} The error\n   * @private\n   */\n  createError(ErrorCtor, message, prefix, statusCode, errorCode) {\n    this._loop = false;\n    this._errored = true;\n\n    const err = new ErrorCtor(\n      prefix ? `Invalid WebSocket frame: ${message}` : message\n    );\n\n    Error.captureStackTrace(err, this.createError);\n    err.code = errorCode;\n    err[kStatusCode] = statusCode;\n    return err;\n  }\n}\n\nmodule.exports = Receiver;\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex\" }] */\n\n'use strict';\n\nconst { Duplex } = require('stream');\nconst { randomFillSync } = require('crypto');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst { EMPTY_BUFFER, kWebSocket, NOOP } = require('./constants');\nconst { isBlob, isValidStatusCode } = require('./validation');\nconst { mask: applyMask, toBuffer } = require('./buffer-util');\n\nconst kByteLength = Symbol('kByteLength');\nconst maskBuffer = Buffer.alloc(4);\nconst RANDOM_POOL_SIZE = 8 * 1024;\nlet randomPool;\nlet randomPoolPointer = RANDOM_POOL_SIZE;\n\nconst DEFAULT = 0;\nconst DEFLATING = 1;\nconst GET_BLOB_DATA = 2;\n\n/**\n * HyBi Sender implementation.\n */\nclass Sender {\n  /**\n   * Creates a Sender instance.\n   *\n   * @param {Duplex} socket The connection socket\n   * @param {Object} [extensions] An object containing the negotiated extensions\n   * @param {Function} [generateMask] The function used to generate the masking\n   *     key\n   */\n  constructor(socket, extensions, generateMask) {\n    this._extensions = extensions || {};\n\n    if (generateMask) {\n      this._generateMask = generateMask;\n      this._maskBuffer = Buffer.alloc(4);\n    }\n\n    this._socket = socket;\n\n    this._firstFragment = true;\n    this._compress = false;\n\n    this._bufferedBytes = 0;\n    this._queue = [];\n    this._state = DEFAULT;\n    this.onerror = NOOP;\n    this[kWebSocket] = undefined;\n  }\n\n  /**\n   * Frames a piece of data according to the HyBi WebSocket protocol.\n   *\n   * @param {(Buffer|String)} data The data to frame\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @return {(Buffer|String)[]} The framed data\n   * @public\n   */\n  static frame(data, options) {\n    let mask;\n    let merge = false;\n    let offset = 2;\n    let skipMasking = false;\n\n    if (options.mask) {\n      mask = options.maskBuffer || maskBuffer;\n\n      if (options.generateMask) {\n        options.generateMask(mask);\n      } else {\n        if (randomPoolPointer === RANDOM_POOL_SIZE) {\n          /* istanbul ignore else  */\n          if (randomPool === undefined) {\n            //\n            // This is lazily initialized because server-sent frames must not\n            // be masked so it may never be used.\n            //\n            randomPool = Buffer.alloc(RANDOM_POOL_SIZE);\n          }\n\n          randomFillSync(randomPool, 0, RANDOM_POOL_SIZE);\n          randomPoolPointer = 0;\n        }\n\n        mask[0] = randomPool[randomPoolPointer++];\n        mask[1] = randomPool[randomPoolPointer++];\n        mask[2] = randomPool[randomPoolPointer++];\n        mask[3] = randomPool[randomPoolPointer++];\n      }\n\n      skipMasking = (mask[0] | mask[1] | mask[2] | mask[3]) === 0;\n      offset = 6;\n    }\n\n    let dataLength;\n\n    if (typeof data === 'string') {\n      if (\n        (!options.mask || skipMasking) &&\n        options[kByteLength] !== undefined\n      ) {\n        dataLength = options[kByteLength];\n      } else {\n        data = Buffer.from(data);\n        dataLength = data.length;\n      }\n    } else {\n      dataLength = data.length;\n      merge = options.mask && options.readOnly && !skipMasking;\n    }\n\n    let payloadLength = dataLength;\n\n    if (dataLength >= 65536) {\n      offset += 8;\n      payloadLength = 127;\n    } else if (dataLength > 125) {\n      offset += 2;\n      payloadLength = 126;\n    }\n\n    const target = Buffer.allocUnsafe(merge ? dataLength + offset : offset);\n\n    target[0] = options.fin ? options.opcode | 0x80 : options.opcode;\n    if (options.rsv1) target[0] |= 0x40;\n\n    target[1] = payloadLength;\n\n    if (payloadLength === 126) {\n      target.writeUInt16BE(dataLength, 2);\n    } else if (payloadLength === 127) {\n      target[2] = target[3] = 0;\n      target.writeUIntBE(dataLength, 4, 6);\n    }\n\n    if (!options.mask) return [target, data];\n\n    target[1] |= 0x80;\n    target[offset - 4] = mask[0];\n    target[offset - 3] = mask[1];\n    target[offset - 2] = mask[2];\n    target[offset - 1] = mask[3];\n\n    if (skipMasking) return [target, data];\n\n    if (merge) {\n      applyMask(data, mask, target, offset, dataLength);\n      return [target];\n    }\n\n    applyMask(data, mask, data, 0, dataLength);\n    return [target, data];\n  }\n\n  /**\n   * Sends a close message to the other peer.\n   *\n   * @param {Number} [code] The status code component of the body\n   * @param {(String|Buffer)} [data] The message component of the body\n   * @param {Boolean} [mask=false] Specifies whether or not to mask the message\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  close(code, data, mask, cb) {\n    let buf;\n\n    if (code === undefined) {\n      buf = EMPTY_BUFFER;\n    } else if (typeof code !== 'number' || !isValidStatusCode(code)) {\n      throw new TypeError('First argument must be a valid error code number');\n    } else if (data === undefined || !data.length) {\n      buf = Buffer.allocUnsafe(2);\n      buf.writeUInt16BE(code, 0);\n    } else {\n      const length = Buffer.byteLength(data);\n\n      if (length > 123) {\n        throw new RangeError('The message must not be greater than 123 bytes');\n      }\n\n      buf = Buffer.allocUnsafe(2 + length);\n      buf.writeUInt16BE(code, 0);\n\n      if (typeof data === 'string') {\n        buf.write(data, 2);\n      } else {\n        buf.set(data, 2);\n      }\n    }\n\n    const options = {\n      [kByteLength]: buf.length,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x08,\n      readOnly: false,\n      rsv1: false\n    };\n\n    if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, buf, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(buf, options), cb);\n    }\n  }\n\n  /**\n   * Sends a ping message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  ping(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x09,\n      readOnly,\n      rsv1: false\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, false, options, cb]);\n      } else {\n        this.getBlobData(data, false, options, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a pong message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Boolean} [mask=false] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  pong(data, mask, cb) {\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (byteLength > 125) {\n      throw new RangeError('The data size must not be greater than 125 bytes');\n    }\n\n    const options = {\n      [kByteLength]: byteLength,\n      fin: true,\n      generateMask: this._generateMask,\n      mask,\n      maskBuffer: this._maskBuffer,\n      opcode: 0x0a,\n      readOnly,\n      rsv1: false\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, false, options, cb]);\n      } else {\n        this.getBlobData(data, false, options, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, false, options, cb]);\n    } else {\n      this.sendFrame(Sender.frame(data, options), cb);\n    }\n  }\n\n  /**\n   * Sends a data message to the other peer.\n   *\n   * @param {*} data The message to send\n   * @param {Object} options Options object\n   * @param {Boolean} [options.binary=false] Specifies whether `data` is binary\n   *     or text\n   * @param {Boolean} [options.compress=false] Specifies whether or not to\n   *     compress `data`\n   * @param {Boolean} [options.fin=false] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Function} [cb] Callback\n   * @public\n   */\n  send(data, options, cb) {\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n    let opcode = options.binary ? 2 : 1;\n    let rsv1 = options.compress;\n\n    let byteLength;\n    let readOnly;\n\n    if (typeof data === 'string') {\n      byteLength = Buffer.byteLength(data);\n      readOnly = false;\n    } else if (isBlob(data)) {\n      byteLength = data.size;\n      readOnly = false;\n    } else {\n      data = toBuffer(data);\n      byteLength = data.length;\n      readOnly = toBuffer.readOnly;\n    }\n\n    if (this._firstFragment) {\n      this._firstFragment = false;\n      if (\n        rsv1 &&\n        perMessageDeflate &&\n        perMessageDeflate.params[\n          perMessageDeflate._isServer\n            ? 'server_no_context_takeover'\n            : 'client_no_context_takeover'\n        ]\n      ) {\n        rsv1 = byteLength >= perMessageDeflate._threshold;\n      }\n      this._compress = rsv1;\n    } else {\n      rsv1 = false;\n      opcode = 0;\n    }\n\n    if (options.fin) this._firstFragment = true;\n\n    const opts = {\n      [kByteLength]: byteLength,\n      fin: options.fin,\n      generateMask: this._generateMask,\n      mask: options.mask,\n      maskBuffer: this._maskBuffer,\n      opcode,\n      readOnly,\n      rsv1\n    };\n\n    if (isBlob(data)) {\n      if (this._state !== DEFAULT) {\n        this.enqueue([this.getBlobData, data, this._compress, opts, cb]);\n      } else {\n        this.getBlobData(data, this._compress, opts, cb);\n      }\n    } else if (this._state !== DEFAULT) {\n      this.enqueue([this.dispatch, data, this._compress, opts, cb]);\n    } else {\n      this.dispatch(data, this._compress, opts, cb);\n    }\n  }\n\n  /**\n   * Gets the contents of a blob as binary data.\n   *\n   * @param {Blob} blob The blob\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     the data\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  getBlobData(blob, compress, options, cb) {\n    this._bufferedBytes += options[kByteLength];\n    this._state = GET_BLOB_DATA;\n\n    blob\n      .arrayBuffer()\n      .then((arrayBuffer) => {\n        if (this._socket.destroyed) {\n          const err = new Error(\n            'The socket was closed while the blob was being read'\n          );\n\n          //\n          // `callCallbacks` is called in the next tick to ensure that errors\n          // that might be thrown in the callbacks behave like errors thrown\n          // outside the promise chain.\n          //\n          process.nextTick(callCallbacks, this, err, cb);\n          return;\n        }\n\n        this._bufferedBytes -= options[kByteLength];\n        const data = toBuffer(arrayBuffer);\n\n        if (!compress) {\n          this._state = DEFAULT;\n          this.sendFrame(Sender.frame(data, options), cb);\n          this.dequeue();\n        } else {\n          this.dispatch(data, compress, options, cb);\n        }\n      })\n      .catch((err) => {\n        //\n        // `onError` is called in the next tick for the same reason that\n        // `callCallbacks` above is.\n        //\n        process.nextTick(onError, this, err, cb);\n      });\n  }\n\n  /**\n   * Dispatches a message.\n   *\n   * @param {(Buffer|String)} data The message to send\n   * @param {Boolean} [compress=false] Specifies whether or not to compress\n   *     `data`\n   * @param {Object} options Options object\n   * @param {Boolean} [options.fin=false] Specifies whether or not to set the\n   *     FIN bit\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Boolean} [options.mask=false] Specifies whether or not to mask\n   *     `data`\n   * @param {Buffer} [options.maskBuffer] The buffer used to store the masking\n   *     key\n   * @param {Number} options.opcode The opcode\n   * @param {Boolean} [options.readOnly=false] Specifies whether `data` can be\n   *     modified\n   * @param {Boolean} [options.rsv1=false] Specifies whether or not to set the\n   *     RSV1 bit\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  dispatch(data, compress, options, cb) {\n    if (!compress) {\n      this.sendFrame(Sender.frame(data, options), cb);\n      return;\n    }\n\n    const perMessageDeflate = this._extensions[PerMessageDeflate.extensionName];\n\n    this._bufferedBytes += options[kByteLength];\n    this._state = DEFLATING;\n    perMessageDeflate.compress(data, options.fin, (_, buf) => {\n      if (this._socket.destroyed) {\n        const err = new Error(\n          'The socket was closed while data was being compressed'\n        );\n\n        callCallbacks(this, err, cb);\n        return;\n      }\n\n      this._bufferedBytes -= options[kByteLength];\n      this._state = DEFAULT;\n      options.readOnly = false;\n      this.sendFrame(Sender.frame(buf, options), cb);\n      this.dequeue();\n    });\n  }\n\n  /**\n   * Executes queued send operations.\n   *\n   * @private\n   */\n  dequeue() {\n    while (this._state === DEFAULT && this._queue.length) {\n      const params = this._queue.shift();\n\n      this._bufferedBytes -= params[3][kByteLength];\n      Reflect.apply(params[0], this, params.slice(1));\n    }\n  }\n\n  /**\n   * Enqueues a send operation.\n   *\n   * @param {Array} params Send operation parameters.\n   * @private\n   */\n  enqueue(params) {\n    this._bufferedBytes += params[3][kByteLength];\n    this._queue.push(params);\n  }\n\n  /**\n   * Sends a frame.\n   *\n   * @param {Buffer[]} list The frame to send\n   * @param {Function} [cb] Callback\n   * @private\n   */\n  sendFrame(list, cb) {\n    if (list.length === 2) {\n      this._socket.cork();\n      this._socket.write(list[0]);\n      this._socket.write(list[1], cb);\n      this._socket.uncork();\n    } else {\n      this._socket.write(list[0], cb);\n    }\n  }\n}\n\nmodule.exports = Sender;\n\n/**\n * Calls queued callbacks with an error.\n *\n * @param {Sender} sender The `Sender` instance\n * @param {Error} err The error to call the callbacks with\n * @param {Function} [cb] The first callback\n * @private\n */\nfunction callCallbacks(sender, err, cb) {\n  if (typeof cb === 'function') cb(err);\n\n  for (let i = 0; i < sender._queue.length; i++) {\n    const params = sender._queue[i];\n    const callback = params[params.length - 1];\n\n    if (typeof callback === 'function') callback(err);\n  }\n}\n\n/**\n * Handles a `Sender` error.\n *\n * @param {Sender} sender The `Sender` instance\n * @param {Error} err The error\n * @param {Function} [cb] The first pending callback\n * @private\n */\nfunction onError(sender, err, cb) {\n  callCallbacks(sender, err, cb);\n  sender.onerror(err);\n}\n","'use strict';\n\nconst { Duplex } = require('stream');\n\n/**\n * Emits the `'close'` event on a stream.\n *\n * @param {Duplex} stream The stream.\n * @private\n */\nfunction emitClose(stream) {\n  stream.emit('close');\n}\n\n/**\n * The listener of the `'end'` event.\n *\n * @private\n */\nfunction duplexOnEnd() {\n  if (!this.destroyed && this._writableState.finished) {\n    this.destroy();\n  }\n}\n\n/**\n * The listener of the `'error'` event.\n *\n * @param {Error} err The error\n * @private\n */\nfunction duplexOnError(err) {\n  this.removeListener('error', duplexOnError);\n  this.destroy();\n  if (this.listenerCount('error') === 0) {\n    // Do not suppress the throwing behavior.\n    this.emit('error', err);\n  }\n}\n\n/**\n * Wraps a `WebSocket` in a duplex stream.\n *\n * @param {WebSocket} ws The `WebSocket` to wrap\n * @param {Object} [options] The options for the `Duplex` constructor\n * @return {Duplex} The duplex stream\n * @public\n */\nfunction createWebSocketStream(ws, options) {\n  let terminateOnDestroy = true;\n\n  const duplex = new Duplex({\n    ...options,\n    autoDestroy: false,\n    emitClose: false,\n    objectMode: false,\n    writableObjectMode: false\n  });\n\n  ws.on('message', function message(msg, isBinary) {\n    const data =\n      !isBinary && duplex._readableState.objectMode ? msg.toString() : msg;\n\n    if (!duplex.push(data)) ws.pause();\n  });\n\n  ws.once('error', function error(err) {\n    if (duplex.destroyed) return;\n\n    // Prevent `ws.terminate()` from being called by `duplex._destroy()`.\n    //\n    // - If the `'error'` event is emitted before the `'open'` event, then\n    //   `ws.terminate()` is a noop as no socket is assigned.\n    // - Otherwise, the error is re-emitted by the listener of the `'error'`\n    //   event of the `Receiver` object. The listener already closes the\n    //   connection by calling `ws.close()`. This allows a close frame to be\n    //   sent to the other peer. If `ws.terminate()` is called right after this,\n    //   then the close frame might not be sent.\n    terminateOnDestroy = false;\n    duplex.destroy(err);\n  });\n\n  ws.once('close', function close() {\n    if (duplex.destroyed) return;\n\n    duplex.push(null);\n  });\n\n  duplex._destroy = function (err, callback) {\n    if (ws.readyState === ws.CLOSED) {\n      callback(err);\n      process.nextTick(emitClose, duplex);\n      return;\n    }\n\n    let called = false;\n\n    ws.once('error', function error(err) {\n      called = true;\n      callback(err);\n    });\n\n    ws.once('close', function close() {\n      if (!called) callback(err);\n      process.nextTick(emitClose, duplex);\n    });\n\n    if (terminateOnDestroy) ws.terminate();\n  };\n\n  duplex._final = function (callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._final(callback);\n      });\n      return;\n    }\n\n    // If the value of the `_socket` property is `null` it means that `ws` is a\n    // client websocket and the handshake failed. In fact, when this happens, a\n    // socket is never assigned to the websocket. Wait for the `'error'` event\n    // that will be emitted by the websocket.\n    if (ws._socket === null) return;\n\n    if (ws._socket._writableState.finished) {\n      callback();\n      if (duplex._readableState.endEmitted) duplex.destroy();\n    } else {\n      ws._socket.once('finish', function finish() {\n        // `duplex` is not destroyed here because the `'end'` event will be\n        // emitted on `duplex` after this `'finish'` event. The EOF signaling\n        // `null` chunk is, in fact, pushed when the websocket emits `'close'`.\n        callback();\n      });\n      ws.close();\n    }\n  };\n\n  duplex._read = function () {\n    if (ws.isPaused) ws.resume();\n  };\n\n  duplex._write = function (chunk, encoding, callback) {\n    if (ws.readyState === ws.CONNECTING) {\n      ws.once('open', function open() {\n        duplex._write(chunk, encoding, callback);\n      });\n      return;\n    }\n\n    ws.send(chunk, callback);\n  };\n\n  duplex.on('end', duplexOnEnd);\n  duplex.on('error', duplexOnError);\n  return duplex;\n}\n\nmodule.exports = createWebSocketStream;\n","'use strict';\n\nconst { tokenChars } = require('./validation');\n\n/**\n * Parses the `Sec-WebSocket-Protocol` header into a set of subprotocol names.\n *\n * @param {String} header The field value of the header\n * @return {Set} The subprotocol names\n * @public\n */\nfunction parse(header) {\n  const protocols = new Set();\n  let start = -1;\n  let end = -1;\n  let i = 0;\n\n  for (i; i < header.length; i++) {\n    const code = header.charCodeAt(i);\n\n    if (end === -1 && tokenChars[code] === 1) {\n      if (start === -1) start = i;\n    } else if (\n      i !== 0 &&\n      (code === 0x20 /* ' ' */ || code === 0x09) /* '\\t' */\n    ) {\n      if (end === -1 && start !== -1) end = i;\n    } else if (code === 0x2c /* ',' */) {\n      if (start === -1) {\n        throw new SyntaxError(`Unexpected character at index ${i}`);\n      }\n\n      if (end === -1) end = i;\n\n      const protocol = header.slice(start, end);\n\n      if (protocols.has(protocol)) {\n        throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n      }\n\n      protocols.add(protocol);\n      start = end = -1;\n    } else {\n      throw new SyntaxError(`Unexpected character at index ${i}`);\n    }\n  }\n\n  if (start === -1 || end !== -1) {\n    throw new SyntaxError('Unexpected end of input');\n  }\n\n  const protocol = header.slice(start, i);\n\n  if (protocols.has(protocol)) {\n    throw new SyntaxError(`The \"${protocol}\" subprotocol is duplicated`);\n  }\n\n  protocols.add(protocol);\n  return protocols;\n}\n\nmodule.exports = { parse };\n","'use strict';\n\nconst { isUtf8 } = require('buffer');\n\nconst { hasBlob } = require('./constants');\n\n//\n// Allowed token characters:\n//\n// '!', '#', '$', '%', '&', ''', '*', '+', '-',\n// '.', 0-9, A-Z, '^', '_', '`', a-z, '|', '~'\n//\n// tokenChars[32] === 0 // ' '\n// tokenChars[33] === 1 // '!'\n// tokenChars[34] === 0 // '\"'\n// ...\n//\n// prettier-ignore\nconst tokenChars = [\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 0 - 15\n  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, // 16 - 31\n  0, 1, 0, 1, 1, 1, 1, 1, 0, 0, 1, 1, 0, 1, 1, 0, // 32 - 47\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, // 48 - 63\n  0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 64 - 79\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 1, 1, // 80 - 95\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, // 96 - 111\n  1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 1, 0 // 112 - 127\n];\n\n/**\n * Checks if a status code is allowed in a close frame.\n *\n * @param {Number} code The status code\n * @return {Boolean} `true` if the status code is valid, else `false`\n * @public\n */\nfunction isValidStatusCode(code) {\n  return (\n    (code >= 1000 &&\n      code <= 1014 &&\n      code !== 1004 &&\n      code !== 1005 &&\n      code !== 1006) ||\n    (code >= 3000 && code <= 4999)\n  );\n}\n\n/**\n * Checks if a given buffer contains only correct UTF-8.\n * Ported from https://www.cl.cam.ac.uk/%7Emgk25/ucs/utf8_check.c by\n * Markus Kuhn.\n *\n * @param {Buffer} buf The buffer to check\n * @return {Boolean} `true` if `buf` contains only correct UTF-8, else `false`\n * @public\n */\nfunction _isValidUTF8(buf) {\n  const len = buf.length;\n  let i = 0;\n\n  while (i < len) {\n    if ((buf[i] & 0x80) === 0) {\n      // 0xxxxxxx\n      i++;\n    } else if ((buf[i] & 0xe0) === 0xc0) {\n      // 110xxxxx 10xxxxxx\n      if (\n        i + 1 === len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i] & 0xfe) === 0xc0 // Overlong\n      ) {\n        return false;\n      }\n\n      i += 2;\n    } else if ((buf[i] & 0xf0) === 0xe0) {\n      // 1110xxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 2 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xe0 && (buf[i + 1] & 0xe0) === 0x80) || // Overlong\n        (buf[i] === 0xed && (buf[i + 1] & 0xe0) === 0xa0) // Surrogate (U+D800 - U+DFFF)\n      ) {\n        return false;\n      }\n\n      i += 3;\n    } else if ((buf[i] & 0xf8) === 0xf0) {\n      // 11110xxx 10xxxxxx 10xxxxxx 10xxxxxx\n      if (\n        i + 3 >= len ||\n        (buf[i + 1] & 0xc0) !== 0x80 ||\n        (buf[i + 2] & 0xc0) !== 0x80 ||\n        (buf[i + 3] & 0xc0) !== 0x80 ||\n        (buf[i] === 0xf0 && (buf[i + 1] & 0xf0) === 0x80) || // Overlong\n        (buf[i] === 0xf4 && buf[i + 1] > 0x8f) ||\n        buf[i] > 0xf4 // > U+10FFFF\n      ) {\n        return false;\n      }\n\n      i += 4;\n    } else {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Determines whether a value is a `Blob`.\n *\n * @param {*} value The value to be tested\n * @return {Boolean} `true` if `value` is a `Blob`, else `false`\n * @private\n */\nfunction isBlob(value) {\n  return (\n    hasBlob &&\n    typeof value === 'object' &&\n    typeof value.arrayBuffer === 'function' &&\n    typeof value.type === 'string' &&\n    typeof value.stream === 'function' &&\n    (value[Symbol.toStringTag] === 'Blob' ||\n      value[Symbol.toStringTag] === 'File')\n  );\n}\n\nmodule.exports = {\n  isBlob,\n  isValidStatusCode,\n  isValidUTF8: _isValidUTF8,\n  tokenChars\n};\n\nif (isUtf8) {\n  module.exports.isValidUTF8 = function (buf) {\n    return buf.length < 24 ? _isValidUTF8(buf) : isUtf8(buf);\n  };\n} /* istanbul ignore else  */ else if (!process.env.WS_NO_UTF_8_VALIDATE) {\n  try {\n    const isValidUTF8 = require('utf-8-validate');\n\n    module.exports.isValidUTF8 = function (buf) {\n      return buf.length < 32 ? _isValidUTF8(buf) : isValidUTF8(buf);\n    };\n  } catch (e) {\n    // Continue regardless of the error.\n  }\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex$\", \"caughtErrors\": \"none\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst http = require('http');\nconst { Duplex } = require('stream');\nconst { createHash } = require('crypto');\n\nconst extension = require('./extension');\nconst PerMessageDeflate = require('./permessage-deflate');\nconst subprotocol = require('./subprotocol');\nconst WebSocket = require('./websocket');\nconst { GUID, kWebSocket } = require('./constants');\n\nconst keyRegex = /^[+/0-9A-Za-z]{22}==$/;\n\nconst RUNNING = 0;\nconst CLOSING = 1;\nconst CLOSED = 2;\n\n/**\n * Class representing a WebSocket server.\n *\n * @extends EventEmitter\n */\nclass WebSocketServer extends EventEmitter {\n  /**\n   * Create a `WebSocketServer` instance.\n   *\n   * @param {Object} options Configuration options\n   * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {Boolean} [options.autoPong=true] Specifies whether or not to\n   *     automatically send a pong in response to a ping\n   * @param {Number} [options.backlog=511] The maximum length of the queue of\n   *     pending connections\n   * @param {Boolean} [options.clientTracking=true] Specifies whether or not to\n   *     track clients\n   * @param {Function} [options.handleProtocols] A hook to handle protocols\n   * @param {String} [options.host] The hostname where to bind the server\n   * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n   *     size\n   * @param {Boolean} [options.noServer=false] Enable no server mode\n   * @param {String} [options.path] Accept only connections matching this path\n   * @param {(Boolean|Object)} [options.perMessageDeflate=false] Enable/disable\n   *     permessage-deflate\n   * @param {Number} [options.port] The port where to bind the server\n   * @param {(http.Server|https.Server)} [options.server] A pre-created HTTP/S\n   *     server to use\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @param {Function} [options.verifyClient] A hook to reject connections\n   * @param {Function} [options.WebSocket=WebSocket] Specifies the `WebSocket`\n   *     class to use. It must be the `WebSocket` class or class that extends it\n   * @param {Function} [callback] A listener for the `listening` event\n   */\n  constructor(options, callback) {\n    super();\n\n    options = {\n      allowSynchronousEvents: true,\n      autoPong: true,\n      maxPayload: 100 * 1024 * 1024,\n      skipUTF8Validation: false,\n      perMessageDeflate: false,\n      handleProtocols: null,\n      clientTracking: true,\n      verifyClient: null,\n      noServer: false,\n      backlog: null, // use default (511 as implemented in net.js)\n      server: null,\n      host: null,\n      path: null,\n      port: null,\n      WebSocket,\n      ...options\n    };\n\n    if (\n      (options.port == null && !options.server && !options.noServer) ||\n      (options.port != null && (options.server || options.noServer)) ||\n      (options.server && options.noServer)\n    ) {\n      throw new TypeError(\n        'One and only one of the \"port\", \"server\", or \"noServer\" options ' +\n          'must be specified'\n      );\n    }\n\n    if (options.port != null) {\n      this._server = http.createServer((req, res) => {\n        const body = http.STATUS_CODES[426];\n\n        res.writeHead(426, {\n          'Content-Length': body.length,\n          'Content-Type': 'text/plain'\n        });\n        res.end(body);\n      });\n      this._server.listen(\n        options.port,\n        options.host,\n        options.backlog,\n        callback\n      );\n    } else if (options.server) {\n      this._server = options.server;\n    }\n\n    if (this._server) {\n      const emitConnection = this.emit.bind(this, 'connection');\n\n      this._removeListeners = addListeners(this._server, {\n        listening: this.emit.bind(this, 'listening'),\n        error: this.emit.bind(this, 'error'),\n        upgrade: (req, socket, head) => {\n          this.handleUpgrade(req, socket, head, emitConnection);\n        }\n      });\n    }\n\n    if (options.perMessageDeflate === true) options.perMessageDeflate = {};\n    if (options.clientTracking) {\n      this.clients = new Set();\n      this._shouldEmitClose = false;\n    }\n\n    this.options = options;\n    this._state = RUNNING;\n  }\n\n  /**\n   * Returns the bound address, the address family name, and port of the server\n   * as reported by the operating system if listening on an IP socket.\n   * If the server is listening on a pipe or UNIX domain socket, the name is\n   * returned as a string.\n   *\n   * @return {(Object|String|null)} The address of the server\n   * @public\n   */\n  address() {\n    if (this.options.noServer) {\n      throw new Error('The server is operating in \"noServer\" mode');\n    }\n\n    if (!this._server) return null;\n    return this._server.address();\n  }\n\n  /**\n   * Stop the server from accepting new connections and emit the `'close'` event\n   * when all existing connections are closed.\n   *\n   * @param {Function} [cb] A one-time listener for the `'close'` event\n   * @public\n   */\n  close(cb) {\n    if (this._state === CLOSED) {\n      if (cb) {\n        this.once('close', () => {\n          cb(new Error('The server is not running'));\n        });\n      }\n\n      process.nextTick(emitClose, this);\n      return;\n    }\n\n    if (cb) this.once('close', cb);\n\n    if (this._state === CLOSING) return;\n    this._state = CLOSING;\n\n    if (this.options.noServer || this.options.server) {\n      if (this._server) {\n        this._removeListeners();\n        this._removeListeners = this._server = null;\n      }\n\n      if (this.clients) {\n        if (!this.clients.size) {\n          process.nextTick(emitClose, this);\n        } else {\n          this._shouldEmitClose = true;\n        }\n      } else {\n        process.nextTick(emitClose, this);\n      }\n    } else {\n      const server = this._server;\n\n      this._removeListeners();\n      this._removeListeners = this._server = null;\n\n      //\n      // The HTTP/S server was created internally. Close it, and rely on its\n      // `'close'` event.\n      //\n      server.close(() => {\n        emitClose(this);\n      });\n    }\n  }\n\n  /**\n   * See if a given request should be handled by this server instance.\n   *\n   * @param {http.IncomingMessage} req Request object to inspect\n   * @return {Boolean} `true` if the request is valid, else `false`\n   * @public\n   */\n  shouldHandle(req) {\n    if (this.options.path) {\n      const index = req.url.indexOf('?');\n      const pathname = index !== -1 ? req.url.slice(0, index) : req.url;\n\n      if (pathname !== this.options.path) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Handle a HTTP Upgrade request.\n   *\n   * @param {http.IncomingMessage} req The request object\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @public\n   */\n  handleUpgrade(req, socket, head, cb) {\n    socket.on('error', socketOnError);\n\n    const key = req.headers['sec-websocket-key'];\n    const upgrade = req.headers.upgrade;\n    const version = +req.headers['sec-websocket-version'];\n\n    if (req.method !== 'GET') {\n      const message = 'Invalid HTTP method';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 405, message);\n      return;\n    }\n\n    if (upgrade === undefined || upgrade.toLowerCase() !== 'websocket') {\n      const message = 'Invalid Upgrade header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (key === undefined || !keyRegex.test(key)) {\n      const message = 'Missing or invalid Sec-WebSocket-Key header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (version !== 8 && version !== 13) {\n      const message = 'Missing or invalid Sec-WebSocket-Version header';\n      abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n      return;\n    }\n\n    if (!this.shouldHandle(req)) {\n      abortHandshake(socket, 400);\n      return;\n    }\n\n    const secWebSocketProtocol = req.headers['sec-websocket-protocol'];\n    let protocols = new Set();\n\n    if (secWebSocketProtocol !== undefined) {\n      try {\n        protocols = subprotocol.parse(secWebSocketProtocol);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Protocol header';\n        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n        return;\n      }\n    }\n\n    const secWebSocketExtensions = req.headers['sec-websocket-extensions'];\n    const extensions = {};\n\n    if (\n      this.options.perMessageDeflate &&\n      secWebSocketExtensions !== undefined\n    ) {\n      const perMessageDeflate = new PerMessageDeflate(\n        this.options.perMessageDeflate,\n        true,\n        this.options.maxPayload\n      );\n\n      try {\n        const offers = extension.parse(secWebSocketExtensions);\n\n        if (offers[PerMessageDeflate.extensionName]) {\n          perMessageDeflate.accept(offers[PerMessageDeflate.extensionName]);\n          extensions[PerMessageDeflate.extensionName] = perMessageDeflate;\n        }\n      } catch (err) {\n        const message =\n          'Invalid or unacceptable Sec-WebSocket-Extensions header';\n        abortHandshakeOrEmitwsClientError(this, req, socket, 400, message);\n        return;\n      }\n    }\n\n    //\n    // Optionally call external client verification handler.\n    //\n    if (this.options.verifyClient) {\n      const info = {\n        origin:\n          req.headers[`${version === 8 ? 'sec-websocket-origin' : 'origin'}`],\n        secure: !!(req.socket.authorized || req.socket.encrypted),\n        req\n      };\n\n      if (this.options.verifyClient.length === 2) {\n        this.options.verifyClient(info, (verified, code, message, headers) => {\n          if (!verified) {\n            return abortHandshake(socket, code || 401, message, headers);\n          }\n\n          this.completeUpgrade(\n            extensions,\n            key,\n            protocols,\n            req,\n            socket,\n            head,\n            cb\n          );\n        });\n        return;\n      }\n\n      if (!this.options.verifyClient(info)) return abortHandshake(socket, 401);\n    }\n\n    this.completeUpgrade(extensions, key, protocols, req, socket, head, cb);\n  }\n\n  /**\n   * Upgrade the connection to WebSocket.\n   *\n   * @param {Object} extensions The accepted extensions\n   * @param {String} key The value of the `Sec-WebSocket-Key` header\n   * @param {Set} protocols The subprotocols\n   * @param {http.IncomingMessage} req The request object\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Function} cb Callback\n   * @throws {Error} If called more than once with the same socket\n   * @private\n   */\n  completeUpgrade(extensions, key, protocols, req, socket, head, cb) {\n    //\n    // Destroy the socket if the client has already sent a FIN packet.\n    //\n    if (!socket.readable || !socket.writable) return socket.destroy();\n\n    if (socket[kWebSocket]) {\n      throw new Error(\n        'server.handleUpgrade() was called more than once with the same ' +\n          'socket, possibly due to a misconfiguration'\n      );\n    }\n\n    if (this._state > RUNNING) return abortHandshake(socket, 503);\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    const headers = [\n      'HTTP/1.1 101 Switching Protocols',\n      'Upgrade: websocket',\n      'Connection: Upgrade',\n      `Sec-WebSocket-Accept: ${digest}`\n    ];\n\n    const ws = new this.options.WebSocket(null, undefined, this.options);\n\n    if (protocols.size) {\n      //\n      // Optionally call external protocol selection handler.\n      //\n      const protocol = this.options.handleProtocols\n        ? this.options.handleProtocols(protocols, req)\n        : protocols.values().next().value;\n\n      if (protocol) {\n        headers.push(`Sec-WebSocket-Protocol: ${protocol}`);\n        ws._protocol = protocol;\n      }\n    }\n\n    if (extensions[PerMessageDeflate.extensionName]) {\n      const params = extensions[PerMessageDeflate.extensionName].params;\n      const value = extension.format({\n        [PerMessageDeflate.extensionName]: [params]\n      });\n      headers.push(`Sec-WebSocket-Extensions: ${value}`);\n      ws._extensions = extensions;\n    }\n\n    //\n    // Allow external modification/inspection of handshake headers.\n    //\n    this.emit('headers', headers, req);\n\n    socket.write(headers.concat('\\r\\n').join('\\r\\n'));\n    socket.removeListener('error', socketOnError);\n\n    ws.setSocket(socket, head, {\n      allowSynchronousEvents: this.options.allowSynchronousEvents,\n      maxPayload: this.options.maxPayload,\n      skipUTF8Validation: this.options.skipUTF8Validation\n    });\n\n    if (this.clients) {\n      this.clients.add(ws);\n      ws.on('close', () => {\n        this.clients.delete(ws);\n\n        if (this._shouldEmitClose && !this.clients.size) {\n          process.nextTick(emitClose, this);\n        }\n      });\n    }\n\n    cb(ws, req);\n  }\n}\n\nmodule.exports = WebSocketServer;\n\n/**\n * Add event listeners on an `EventEmitter` using a map of <event, listener>\n * pairs.\n *\n * @param {EventEmitter} server The event emitter\n * @param {Object.<String, Function>} map The listeners to add\n * @return {Function} A function that will remove the added listeners when\n *     called\n * @private\n */\nfunction addListeners(server, map) {\n  for (const event of Object.keys(map)) server.on(event, map[event]);\n\n  return function removeListeners() {\n    for (const event of Object.keys(map)) {\n      server.removeListener(event, map[event]);\n    }\n  };\n}\n\n/**\n * Emit a `'close'` event on an `EventEmitter`.\n *\n * @param {EventEmitter} server The event emitter\n * @private\n */\nfunction emitClose(server) {\n  server._state = CLOSED;\n  server.emit('close');\n}\n\n/**\n * Handle socket errors.\n *\n * @private\n */\nfunction socketOnError() {\n  this.destroy();\n}\n\n/**\n * Close the connection when preconditions are not fulfilled.\n *\n * @param {Duplex} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} [message] The HTTP response body\n * @param {Object} [headers] Additional HTTP response headers\n * @private\n */\nfunction abortHandshake(socket, code, message, headers) {\n  //\n  // The socket is writable unless the user destroyed or ended it before calling\n  // `server.handleUpgrade()` or in the `verifyClient` function, which is a user\n  // error. Handling this does not make much sense as the worst that can happen\n  // is that some of the data written by the user might be discarded due to the\n  // call to `socket.end()` below, which triggers an `'error'` event that in\n  // turn causes the socket to be destroyed.\n  //\n  message = message || http.STATUS_CODES[code];\n  headers = {\n    Connection: 'close',\n    'Content-Type': 'text/html',\n    'Content-Length': Buffer.byteLength(message),\n    ...headers\n  };\n\n  socket.once('finish', socket.destroy);\n\n  socket.end(\n    `HTTP/1.1 ${code} ${http.STATUS_CODES[code]}\\r\\n` +\n      Object.keys(headers)\n        .map((h) => `${h}: ${headers[h]}`)\n        .join('\\r\\n') +\n      '\\r\\n\\r\\n' +\n      message\n  );\n}\n\n/**\n * Emit a `'wsClientError'` event on a `WebSocketServer` if there is at least\n * one listener for it, otherwise call `abortHandshake()`.\n *\n * @param {WebSocketServer} server The WebSocket server\n * @param {http.IncomingMessage} req The request object\n * @param {Duplex} socket The socket of the upgrade request\n * @param {Number} code The HTTP response status code\n * @param {String} message The HTTP response body\n * @private\n */\nfunction abortHandshakeOrEmitwsClientError(server, req, socket, code, message) {\n  if (server.listenerCount('wsClientError')) {\n    const err = new Error(message);\n    Error.captureStackTrace(err, abortHandshakeOrEmitwsClientError);\n\n    server.emit('wsClientError', err, socket, req);\n  } else {\n    abortHandshake(socket, code, message);\n  }\n}\n","/* eslint no-unused-vars: [\"error\", { \"varsIgnorePattern\": \"^Duplex|Readable$\", \"caughtErrors\": \"none\" }] */\n\n'use strict';\n\nconst EventEmitter = require('events');\nconst https = require('https');\nconst http = require('http');\nconst net = require('net');\nconst tls = require('tls');\nconst { randomBytes, createHash } = require('crypto');\nconst { Duplex, Readable } = require('stream');\nconst { URL } = require('url');\n\nconst PerMessageDeflate = require('./permessage-deflate');\nconst Receiver = require('./receiver');\nconst Sender = require('./sender');\nconst { isBlob } = require('./validation');\n\nconst {\n  BINARY_TYPES,\n  EMPTY_BUFFER,\n  GUID,\n  kForOnEventAttribute,\n  kListener,\n  kStatusCode,\n  kWebSocket,\n  NOOP\n} = require('./constants');\nconst {\n  EventTarget: { addEventListener, removeEventListener }\n} = require('./event-target');\nconst { format, parse } = require('./extension');\nconst { toBuffer } = require('./buffer-util');\n\nconst closeTimeout = 30 * 1000;\nconst kAborted = Symbol('kAborted');\nconst protocolVersions = [8, 13];\nconst readyStates = ['CONNECTING', 'OPEN', 'CLOSING', 'CLOSED'];\nconst subprotocolRegex = /^[!#$%&'*+\\-.0-9A-Z^_`|a-z~]+$/;\n\n/**\n * Class representing a WebSocket.\n *\n * @extends EventEmitter\n */\nclass WebSocket extends EventEmitter {\n  /**\n   * Create a new `WebSocket`.\n   *\n   * @param {(String|URL)} address The URL to which to connect\n   * @param {(String|String[])} [protocols] The subprotocols\n   * @param {Object} [options] Connection options\n   */\n  constructor(address, protocols, options) {\n    super();\n\n    this._binaryType = BINARY_TYPES[0];\n    this._closeCode = 1006;\n    this._closeFrameReceived = false;\n    this._closeFrameSent = false;\n    this._closeMessage = EMPTY_BUFFER;\n    this._closeTimer = null;\n    this._errorEmitted = false;\n    this._extensions = {};\n    this._paused = false;\n    this._protocol = '';\n    this._readyState = WebSocket.CONNECTING;\n    this._receiver = null;\n    this._sender = null;\n    this._socket = null;\n\n    if (address !== null) {\n      this._bufferedAmount = 0;\n      this._isServer = false;\n      this._redirects = 0;\n\n      if (protocols === undefined) {\n        protocols = [];\n      } else if (!Array.isArray(protocols)) {\n        if (typeof protocols === 'object' && protocols !== null) {\n          options = protocols;\n          protocols = [];\n        } else {\n          protocols = [protocols];\n        }\n      }\n\n      initAsClient(this, address, protocols, options);\n    } else {\n      this._autoPong = options.autoPong;\n      this._isServer = true;\n    }\n  }\n\n  /**\n   * For historical reasons, the custom \"nodebuffer\" type is used by the default\n   * instead of \"blob\".\n   *\n   * @type {String}\n   */\n  get binaryType() {\n    return this._binaryType;\n  }\n\n  set binaryType(type) {\n    if (!BINARY_TYPES.includes(type)) return;\n\n    this._binaryType = type;\n\n    //\n    // Allow to change `binaryType` on the fly.\n    //\n    if (this._receiver) this._receiver._binaryType = type;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get bufferedAmount() {\n    if (!this._socket) return this._bufferedAmount;\n\n    return this._socket._writableState.length + this._sender._bufferedBytes;\n  }\n\n  /**\n   * @type {String}\n   */\n  get extensions() {\n    return Object.keys(this._extensions).join();\n  }\n\n  /**\n   * @type {Boolean}\n   */\n  get isPaused() {\n    return this._paused;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onclose() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onerror() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onopen() {\n    return null;\n  }\n\n  /**\n   * @type {Function}\n   */\n  /* istanbul ignore next */\n  get onmessage() {\n    return null;\n  }\n\n  /**\n   * @type {String}\n   */\n  get protocol() {\n    return this._protocol;\n  }\n\n  /**\n   * @type {Number}\n   */\n  get readyState() {\n    return this._readyState;\n  }\n\n  /**\n   * @type {String}\n   */\n  get url() {\n    return this._url;\n  }\n\n  /**\n   * Set up the socket and the internal resources.\n   *\n   * @param {Duplex} socket The network socket between the server and client\n   * @param {Buffer} head The first packet of the upgraded stream\n   * @param {Object} options Options object\n   * @param {Boolean} [options.allowSynchronousEvents=false] Specifies whether\n   *     any of the `'message'`, `'ping'`, and `'pong'` events can be emitted\n   *     multiple times in the same tick\n   * @param {Function} [options.generateMask] The function used to generate the\n   *     masking key\n   * @param {Number} [options.maxPayload=0] The maximum allowed message size\n   * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n   *     not to skip UTF-8 validation for text and close messages\n   * @private\n   */\n  setSocket(socket, head, options) {\n    const receiver = new Receiver({\n      allowSynchronousEvents: options.allowSynchronousEvents,\n      binaryType: this.binaryType,\n      extensions: this._extensions,\n      isServer: this._isServer,\n      maxPayload: options.maxPayload,\n      skipUTF8Validation: options.skipUTF8Validation\n    });\n\n    const sender = new Sender(socket, this._extensions, options.generateMask);\n\n    this._receiver = receiver;\n    this._sender = sender;\n    this._socket = socket;\n\n    receiver[kWebSocket] = this;\n    sender[kWebSocket] = this;\n    socket[kWebSocket] = this;\n\n    receiver.on('conclude', receiverOnConclude);\n    receiver.on('drain', receiverOnDrain);\n    receiver.on('error', receiverOnError);\n    receiver.on('message', receiverOnMessage);\n    receiver.on('ping', receiverOnPing);\n    receiver.on('pong', receiverOnPong);\n\n    sender.onerror = senderOnError;\n\n    //\n    // These methods may not be available if `socket` is just a `Duplex`.\n    //\n    if (socket.setTimeout) socket.setTimeout(0);\n    if (socket.setNoDelay) socket.setNoDelay();\n\n    if (head.length > 0) socket.unshift(head);\n\n    socket.on('close', socketOnClose);\n    socket.on('data', socketOnData);\n    socket.on('end', socketOnEnd);\n    socket.on('error', socketOnError);\n\n    this._readyState = WebSocket.OPEN;\n    this.emit('open');\n  }\n\n  /**\n   * Emit the `'close'` event.\n   *\n   * @private\n   */\n  emitClose() {\n    if (!this._socket) {\n      this._readyState = WebSocket.CLOSED;\n      this.emit('close', this._closeCode, this._closeMessage);\n      return;\n    }\n\n    if (this._extensions[PerMessageDeflate.extensionName]) {\n      this._extensions[PerMessageDeflate.extensionName].cleanup();\n    }\n\n    this._receiver.removeAllListeners();\n    this._readyState = WebSocket.CLOSED;\n    this.emit('close', this._closeCode, this._closeMessage);\n  }\n\n  /**\n   * Start a closing handshake.\n   *\n   *          +----------+   +-----------+   +----------+\n   *     - - -|ws.close()|-->|close frame|-->|ws.close()|- - -\n   *    |     +----------+   +-----------+   +----------+     |\n   *          +----------+   +-----------+         |\n   * CLOSING  |ws.close()|<--|close frame|<--+-----+       CLOSING\n   *          +----------+   +-----------+   |\n   *    |           |                        |   +---+        |\n   *                +------------------------+-->|fin| - - - -\n   *    |         +---+                      |   +---+\n   *     - - - - -|fin|<---------------------+\n   *              +---+\n   *\n   * @param {Number} [code] Status code explaining why the connection is closing\n   * @param {(String|Buffer)} [data] The reason why the connection is\n   *     closing\n   * @public\n   */\n  close(code, data) {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      abortHandshake(this, this._req, msg);\n      return;\n    }\n\n    if (this.readyState === WebSocket.CLOSING) {\n      if (\n        this._closeFrameSent &&\n        (this._closeFrameReceived || this._receiver._writableState.errorEmitted)\n      ) {\n        this._socket.end();\n      }\n\n      return;\n    }\n\n    this._readyState = WebSocket.CLOSING;\n    this._sender.close(code, data, !this._isServer, (err) => {\n      //\n      // This error is handled by the `'error'` listener on the socket. We only\n      // want to know if the close frame has been sent here.\n      //\n      if (err) return;\n\n      this._closeFrameSent = true;\n\n      if (\n        this._closeFrameReceived ||\n        this._receiver._writableState.errorEmitted\n      ) {\n        this._socket.end();\n      }\n    });\n\n    setCloseTimer(this);\n  }\n\n  /**\n   * Pause the socket.\n   *\n   * @public\n   */\n  pause() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = true;\n    this._socket.pause();\n  }\n\n  /**\n   * Send a ping.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the ping is sent\n   * @public\n   */\n  ping(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.ping(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Send a pong.\n   *\n   * @param {*} [data] The data to send\n   * @param {Boolean} [mask] Indicates whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when the pong is sent\n   * @public\n   */\n  pong(data, mask, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof data === 'function') {\n      cb = data;\n      data = mask = undefined;\n    } else if (typeof mask === 'function') {\n      cb = mask;\n      mask = undefined;\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    if (mask === undefined) mask = !this._isServer;\n    this._sender.pong(data || EMPTY_BUFFER, mask, cb);\n  }\n\n  /**\n   * Resume the socket.\n   *\n   * @public\n   */\n  resume() {\n    if (\n      this.readyState === WebSocket.CONNECTING ||\n      this.readyState === WebSocket.CLOSED\n    ) {\n      return;\n    }\n\n    this._paused = false;\n    if (!this._receiver._writableState.needDrain) this._socket.resume();\n  }\n\n  /**\n   * Send a data message.\n   *\n   * @param {*} data The message to send\n   * @param {Object} [options] Options object\n   * @param {Boolean} [options.binary] Specifies whether `data` is binary or\n   *     text\n   * @param {Boolean} [options.compress] Specifies whether or not to compress\n   *     `data`\n   * @param {Boolean} [options.fin=true] Specifies whether the fragment is the\n   *     last one\n   * @param {Boolean} [options.mask] Specifies whether or not to mask `data`\n   * @param {Function} [cb] Callback which is executed when data is written out\n   * @public\n   */\n  send(data, options, cb) {\n    if (this.readyState === WebSocket.CONNECTING) {\n      throw new Error('WebSocket is not open: readyState 0 (CONNECTING)');\n    }\n\n    if (typeof options === 'function') {\n      cb = options;\n      options = {};\n    }\n\n    if (typeof data === 'number') data = data.toString();\n\n    if (this.readyState !== WebSocket.OPEN) {\n      sendAfterClose(this, data, cb);\n      return;\n    }\n\n    const opts = {\n      binary: typeof data !== 'string',\n      mask: !this._isServer,\n      compress: true,\n      fin: true,\n      ...options\n    };\n\n    if (!this._extensions[PerMessageDeflate.extensionName]) {\n      opts.compress = false;\n    }\n\n    this._sender.send(data || EMPTY_BUFFER, opts, cb);\n  }\n\n  /**\n   * Forcibly close the connection.\n   *\n   * @public\n   */\n  terminate() {\n    if (this.readyState === WebSocket.CLOSED) return;\n    if (this.readyState === WebSocket.CONNECTING) {\n      const msg = 'WebSocket was closed before the connection was established';\n      abortHandshake(this, this._req, msg);\n      return;\n    }\n\n    if (this._socket) {\n      this._readyState = WebSocket.CLOSING;\n      this._socket.destroy();\n    }\n  }\n}\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} CONNECTING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CONNECTING', {\n  enumerable: true,\n  value: readyStates.indexOf('CONNECTING')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} OPEN\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'OPEN', {\n  enumerable: true,\n  value: readyStates.indexOf('OPEN')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSING\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSING', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSING')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket\n */\nObject.defineProperty(WebSocket, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n/**\n * @constant {Number} CLOSED\n * @memberof WebSocket.prototype\n */\nObject.defineProperty(WebSocket.prototype, 'CLOSED', {\n  enumerable: true,\n  value: readyStates.indexOf('CLOSED')\n});\n\n[\n  'binaryType',\n  'bufferedAmount',\n  'extensions',\n  'isPaused',\n  'protocol',\n  'readyState',\n  'url'\n].forEach((property) => {\n  Object.defineProperty(WebSocket.prototype, property, { enumerable: true });\n});\n\n//\n// Add the `onopen`, `onerror`, `onclose`, and `onmessage` attributes.\n// See https://html.spec.whatwg.org/multipage/comms.html#the-websocket-interface\n//\n['open', 'error', 'close', 'message'].forEach((method) => {\n  Object.defineProperty(WebSocket.prototype, `on${method}`, {\n    enumerable: true,\n    get() {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) return listener[kListener];\n      }\n\n      return null;\n    },\n    set(handler) {\n      for (const listener of this.listeners(method)) {\n        if (listener[kForOnEventAttribute]) {\n          this.removeListener(method, listener);\n          break;\n        }\n      }\n\n      if (typeof handler !== 'function') return;\n\n      this.addEventListener(method, handler, {\n        [kForOnEventAttribute]: true\n      });\n    }\n  });\n});\n\nWebSocket.prototype.addEventListener = addEventListener;\nWebSocket.prototype.removeEventListener = removeEventListener;\n\nmodule.exports = WebSocket;\n\n/**\n * Initialize a WebSocket client.\n *\n * @param {WebSocket} websocket The client to initialize\n * @param {(String|URL)} address The URL to which to connect\n * @param {Array} protocols The subprotocols\n * @param {Object} [options] Connection options\n * @param {Boolean} [options.allowSynchronousEvents=true] Specifies whether any\n *     of the `'message'`, `'ping'`, and `'pong'` events can be emitted multiple\n *     times in the same tick\n * @param {Boolean} [options.autoPong=true] Specifies whether or not to\n *     automatically send a pong in response to a ping\n * @param {Function} [options.finishRequest] A function which can be used to\n *     customize the headers of each http request before it is sent\n * @param {Boolean} [options.followRedirects=false] Whether or not to follow\n *     redirects\n * @param {Function} [options.generateMask] The function used to generate the\n *     masking key\n * @param {Number} [options.handshakeTimeout] Timeout in milliseconds for the\n *     handshake request\n * @param {Number} [options.maxPayload=104857600] The maximum allowed message\n *     size\n * @param {Number} [options.maxRedirects=10] The maximum number of redirects\n *     allowed\n * @param {String} [options.origin] Value of the `Origin` or\n *     `Sec-WebSocket-Origin` header\n * @param {(Boolean|Object)} [options.perMessageDeflate=true] Enable/disable\n *     permessage-deflate\n * @param {Number} [options.protocolVersion=13] Value of the\n *     `Sec-WebSocket-Version` header\n * @param {Boolean} [options.skipUTF8Validation=false] Specifies whether or\n *     not to skip UTF-8 validation for text and close messages\n * @private\n */\nfunction initAsClient(websocket, address, protocols, options) {\n  const opts = {\n    allowSynchronousEvents: true,\n    autoPong: true,\n    protocolVersion: protocolVersions[1],\n    maxPayload: 100 * 1024 * 1024,\n    skipUTF8Validation: false,\n    perMessageDeflate: true,\n    followRedirects: false,\n    maxRedirects: 10,\n    ...options,\n    socketPath: undefined,\n    hostname: undefined,\n    protocol: undefined,\n    timeout: undefined,\n    method: 'GET',\n    host: undefined,\n    path: undefined,\n    port: undefined\n  };\n\n  websocket._autoPong = opts.autoPong;\n\n  if (!protocolVersions.includes(opts.protocolVersion)) {\n    throw new RangeError(\n      `Unsupported protocol version: ${opts.protocolVersion} ` +\n        `(supported versions: ${protocolVersions.join(', ')})`\n    );\n  }\n\n  let parsedUrl;\n\n  if (address instanceof URL) {\n    parsedUrl = address;\n  } else {\n    try {\n      parsedUrl = new URL(address);\n    } catch (e) {\n      throw new SyntaxError(`Invalid URL: ${address}`);\n    }\n  }\n\n  if (parsedUrl.protocol === 'http:') {\n    parsedUrl.protocol = 'ws:';\n  } else if (parsedUrl.protocol === 'https:') {\n    parsedUrl.protocol = 'wss:';\n  }\n\n  websocket._url = parsedUrl.href;\n\n  const isSecure = parsedUrl.protocol === 'wss:';\n  const isIpcUrl = parsedUrl.protocol === 'ws+unix:';\n  let invalidUrlMessage;\n\n  if (parsedUrl.protocol !== 'ws:' && !isSecure && !isIpcUrl) {\n    invalidUrlMessage =\n      'The URL\\'s protocol must be one of \"ws:\", \"wss:\", ' +\n      '\"http:\", \"https\", or \"ws+unix:\"';\n  } else if (isIpcUrl && !parsedUrl.pathname) {\n    invalidUrlMessage = \"The URL's pathname is empty\";\n  } else if (parsedUrl.hash) {\n    invalidUrlMessage = 'The URL contains a fragment identifier';\n  }\n\n  if (invalidUrlMessage) {\n    const err = new SyntaxError(invalidUrlMessage);\n\n    if (websocket._redirects === 0) {\n      throw err;\n    } else {\n      emitErrorAndClose(websocket, err);\n      return;\n    }\n  }\n\n  const defaultPort = isSecure ? 443 : 80;\n  const key = randomBytes(16).toString('base64');\n  const request = isSecure ? https.request : http.request;\n  const protocolSet = new Set();\n  let perMessageDeflate;\n\n  opts.createConnection =\n    opts.createConnection || (isSecure ? tlsConnect : netConnect);\n  opts.defaultPort = opts.defaultPort || defaultPort;\n  opts.port = parsedUrl.port || defaultPort;\n  opts.host = parsedUrl.hostname.startsWith('[')\n    ? parsedUrl.hostname.slice(1, -1)\n    : parsedUrl.hostname;\n  opts.headers = {\n    ...opts.headers,\n    'Sec-WebSocket-Version': opts.protocolVersion,\n    'Sec-WebSocket-Key': key,\n    Connection: 'Upgrade',\n    Upgrade: 'websocket'\n  };\n  opts.path = parsedUrl.pathname + parsedUrl.search;\n  opts.timeout = opts.handshakeTimeout;\n\n  if (opts.perMessageDeflate) {\n    perMessageDeflate = new PerMessageDeflate(\n      opts.perMessageDeflate !== true ? opts.perMessageDeflate : {},\n      false,\n      opts.maxPayload\n    );\n    opts.headers['Sec-WebSocket-Extensions'] = format({\n      [PerMessageDeflate.extensionName]: perMessageDeflate.offer()\n    });\n  }\n  if (protocols.length) {\n    for (const protocol of protocols) {\n      if (\n        typeof protocol !== 'string' ||\n        !subprotocolRegex.test(protocol) ||\n        protocolSet.has(protocol)\n      ) {\n        throw new SyntaxError(\n          'An invalid or duplicated subprotocol was specified'\n        );\n      }\n\n      protocolSet.add(protocol);\n    }\n\n    opts.headers['Sec-WebSocket-Protocol'] = protocols.join(',');\n  }\n  if (opts.origin) {\n    if (opts.protocolVersion < 13) {\n      opts.headers['Sec-WebSocket-Origin'] = opts.origin;\n    } else {\n      opts.headers.Origin = opts.origin;\n    }\n  }\n  if (parsedUrl.username || parsedUrl.password) {\n    opts.auth = `${parsedUrl.username}:${parsedUrl.password}`;\n  }\n\n  if (isIpcUrl) {\n    const parts = opts.path.split(':');\n\n    opts.socketPath = parts[0];\n    opts.path = parts[1];\n  }\n\n  let req;\n\n  if (opts.followRedirects) {\n    if (websocket._redirects === 0) {\n      websocket._originalIpc = isIpcUrl;\n      websocket._originalSecure = isSecure;\n      websocket._originalHostOrSocketPath = isIpcUrl\n        ? opts.socketPath\n        : parsedUrl.host;\n\n      const headers = options && options.headers;\n\n      //\n      // Shallow copy the user provided options so that headers can be changed\n      // without mutating the original object.\n      //\n      options = { ...options, headers: {} };\n\n      if (headers) {\n        for (const [key, value] of Object.entries(headers)) {\n          options.headers[key.toLowerCase()] = value;\n        }\n      }\n    } else if (websocket.listenerCount('redirect') === 0) {\n      const isSameHost = isIpcUrl\n        ? websocket._originalIpc\n          ? opts.socketPath === websocket._originalHostOrSocketPath\n          : false\n        : websocket._originalIpc\n          ? false\n          : parsedUrl.host === websocket._originalHostOrSocketPath;\n\n      if (!isSameHost || (websocket._originalSecure && !isSecure)) {\n        //\n        // Match curl 7.77.0 behavior and drop the following headers. These\n        // headers are also dropped when following a redirect to a subdomain.\n        //\n        delete opts.headers.authorization;\n        delete opts.headers.cookie;\n\n        if (!isSameHost) delete opts.headers.host;\n\n        opts.auth = undefined;\n      }\n    }\n\n    //\n    // Match curl 7.77.0 behavior and make the first `Authorization` header win.\n    // If the `Authorization` header is set, then there is nothing to do as it\n    // will take precedence.\n    //\n    if (opts.auth && !options.headers.authorization) {\n      options.headers.authorization =\n        'Basic ' + Buffer.from(opts.auth).toString('base64');\n    }\n\n    req = websocket._req = request(opts);\n\n    if (websocket._redirects) {\n      //\n      // Unlike what is done for the `'upgrade'` event, no early exit is\n      // triggered here if the user calls `websocket.close()` or\n      // `websocket.terminate()` from a listener of the `'redirect'` event. This\n      // is because the user can also call `request.destroy()` with an error\n      // before calling `websocket.close()` or `websocket.terminate()` and this\n      // would result in an error being emitted on the `request` object with no\n      // `'error'` event listeners attached.\n      //\n      websocket.emit('redirect', websocket.url, req);\n    }\n  } else {\n    req = websocket._req = request(opts);\n  }\n\n  if (opts.timeout) {\n    req.on('timeout', () => {\n      abortHandshake(websocket, req, 'Opening handshake has timed out');\n    });\n  }\n\n  req.on('error', (err) => {\n    if (req === null || req[kAborted]) return;\n\n    req = websocket._req = null;\n    emitErrorAndClose(websocket, err);\n  });\n\n  req.on('response', (res) => {\n    const location = res.headers.location;\n    const statusCode = res.statusCode;\n\n    if (\n      location &&\n      opts.followRedirects &&\n      statusCode >= 300 &&\n      statusCode < 400\n    ) {\n      if (++websocket._redirects > opts.maxRedirects) {\n        abortHandshake(websocket, req, 'Maximum redirects exceeded');\n        return;\n      }\n\n      req.abort();\n\n      let addr;\n\n      try {\n        addr = new URL(location, address);\n      } catch (e) {\n        const err = new SyntaxError(`Invalid URL: ${location}`);\n        emitErrorAndClose(websocket, err);\n        return;\n      }\n\n      initAsClient(websocket, addr, protocols, options);\n    } else if (!websocket.emit('unexpected-response', req, res)) {\n      abortHandshake(\n        websocket,\n        req,\n        `Unexpected server response: ${res.statusCode}`\n      );\n    }\n  });\n\n  req.on('upgrade', (res, socket, head) => {\n    websocket.emit('upgrade', res);\n\n    //\n    // The user may have closed the connection from a listener of the\n    // `'upgrade'` event.\n    //\n    if (websocket.readyState !== WebSocket.CONNECTING) return;\n\n    req = websocket._req = null;\n\n    const upgrade = res.headers.upgrade;\n\n    if (upgrade === undefined || upgrade.toLowerCase() !== 'websocket') {\n      abortHandshake(websocket, socket, 'Invalid Upgrade header');\n      return;\n    }\n\n    const digest = createHash('sha1')\n      .update(key + GUID)\n      .digest('base64');\n\n    if (res.headers['sec-websocket-accept'] !== digest) {\n      abortHandshake(websocket, socket, 'Invalid Sec-WebSocket-Accept header');\n      return;\n    }\n\n    const serverProt = res.headers['sec-websocket-protocol'];\n    let protError;\n\n    if (serverProt !== undefined) {\n      if (!protocolSet.size) {\n        protError = 'Server sent a subprotocol but none was requested';\n      } else if (!protocolSet.has(serverProt)) {\n        protError = 'Server sent an invalid subprotocol';\n      }\n    } else if (protocolSet.size) {\n      protError = 'Server sent no subprotocol';\n    }\n\n    if (protError) {\n      abortHandshake(websocket, socket, protError);\n      return;\n    }\n\n    if (serverProt) websocket._protocol = serverProt;\n\n    const secWebSocketExtensions = res.headers['sec-websocket-extensions'];\n\n    if (secWebSocketExtensions !== undefined) {\n      if (!perMessageDeflate) {\n        const message =\n          'Server sent a Sec-WebSocket-Extensions header but no extension ' +\n          'was requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      let extensions;\n\n      try {\n        extensions = parse(secWebSocketExtensions);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      const extensionNames = Object.keys(extensions);\n\n      if (\n        extensionNames.length !== 1 ||\n        extensionNames[0] !== PerMessageDeflate.extensionName\n      ) {\n        const message = 'Server indicated an extension that was not requested';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      try {\n        perMessageDeflate.accept(extensions[PerMessageDeflate.extensionName]);\n      } catch (err) {\n        const message = 'Invalid Sec-WebSocket-Extensions header';\n        abortHandshake(websocket, socket, message);\n        return;\n      }\n\n      websocket._extensions[PerMessageDeflate.extensionName] =\n        perMessageDeflate;\n    }\n\n    websocket.setSocket(socket, head, {\n      allowSynchronousEvents: opts.allowSynchronousEvents,\n      generateMask: opts.generateMask,\n      maxPayload: opts.maxPayload,\n      skipUTF8Validation: opts.skipUTF8Validation\n    });\n  });\n\n  if (opts.finishRequest) {\n    opts.finishRequest(req, websocket);\n  } else {\n    req.end();\n  }\n}\n\n/**\n * Emit the `'error'` and `'close'` events.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {Error} The error to emit\n * @private\n */\nfunction emitErrorAndClose(websocket, err) {\n  websocket._readyState = WebSocket.CLOSING;\n  //\n  // The following assignment is practically useless and is done only for\n  // consistency.\n  //\n  websocket._errorEmitted = true;\n  websocket.emit('error', err);\n  websocket.emitClose();\n}\n\n/**\n * Create a `net.Socket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {net.Socket} The newly created socket used to start the connection\n * @private\n */\nfunction netConnect(options) {\n  options.path = options.socketPath;\n  return net.connect(options);\n}\n\n/**\n * Create a `tls.TLSSocket` and initiate a connection.\n *\n * @param {Object} options Connection options\n * @return {tls.TLSSocket} The newly created socket used to start the connection\n * @private\n */\nfunction tlsConnect(options) {\n  options.path = undefined;\n\n  if (!options.servername && options.servername !== '') {\n    options.servername = net.isIP(options.host) ? '' : options.host;\n  }\n\n  return tls.connect(options);\n}\n\n/**\n * Abort the handshake and emit an error.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {(http.ClientRequest|net.Socket|tls.Socket)} stream The request to\n *     abort or the socket to destroy\n * @param {String} message The error message\n * @private\n */\nfunction abortHandshake(websocket, stream, message) {\n  websocket._readyState = WebSocket.CLOSING;\n\n  const err = new Error(message);\n  Error.captureStackTrace(err, abortHandshake);\n\n  if (stream.setHeader) {\n    stream[kAborted] = true;\n    stream.abort();\n\n    if (stream.socket && !stream.socket.destroyed) {\n      //\n      // On Node.js >= 14.3.0 `request.abort()` does not destroy the socket if\n      // called after the request completed. See\n      // https://github.com/websockets/ws/issues/1869.\n      //\n      stream.socket.destroy();\n    }\n\n    process.nextTick(emitErrorAndClose, websocket, err);\n  } else {\n    stream.destroy(err);\n    stream.once('error', websocket.emit.bind(websocket, 'error'));\n    stream.once('close', websocket.emitClose.bind(websocket));\n  }\n}\n\n/**\n * Handle cases where the `ping()`, `pong()`, or `send()` methods are called\n * when the `readyState` attribute is `CLOSING` or `CLOSED`.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @param {*} [data] The data to send\n * @param {Function} [cb] Callback\n * @private\n */\nfunction sendAfterClose(websocket, data, cb) {\n  if (data) {\n    const length = isBlob(data) ? data.size : toBuffer(data).length;\n\n    //\n    // The `_bufferedAmount` property is used only when the peer is a client and\n    // the opening handshake fails. Under these circumstances, in fact, the\n    // `setSocket()` method is not called, so the `_socket` and `_sender`\n    // properties are set to `null`.\n    //\n    if (websocket._socket) websocket._sender._bufferedBytes += length;\n    else websocket._bufferedAmount += length;\n  }\n\n  if (cb) {\n    const err = new Error(\n      `WebSocket is not open: readyState ${websocket.readyState} ` +\n        `(${readyStates[websocket.readyState]})`\n    );\n    process.nextTick(cb, err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'conclude'` event.\n *\n * @param {Number} code The status code\n * @param {Buffer} reason The reason for closing\n * @private\n */\nfunction receiverOnConclude(code, reason) {\n  const websocket = this[kWebSocket];\n\n  websocket._closeFrameReceived = true;\n  websocket._closeMessage = reason;\n  websocket._closeCode = code;\n\n  if (websocket._socket[kWebSocket] === undefined) return;\n\n  websocket._socket.removeListener('data', socketOnData);\n  process.nextTick(resume, websocket._socket);\n\n  if (code === 1005) websocket.close();\n  else websocket.close(code, reason);\n}\n\n/**\n * The listener of the `Receiver` `'drain'` event.\n *\n * @private\n */\nfunction receiverOnDrain() {\n  const websocket = this[kWebSocket];\n\n  if (!websocket.isPaused) websocket._socket.resume();\n}\n\n/**\n * The listener of the `Receiver` `'error'` event.\n *\n * @param {(RangeError|Error)} err The emitted error\n * @private\n */\nfunction receiverOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._socket[kWebSocket] !== undefined) {\n    websocket._socket.removeListener('data', socketOnData);\n\n    //\n    // On Node.js < 14.0.0 the `'error'` event is emitted synchronously. See\n    // https://github.com/websockets/ws/issues/1940.\n    //\n    process.nextTick(resume, websocket._socket);\n\n    websocket.close(err[kStatusCode]);\n  }\n\n  if (!websocket._errorEmitted) {\n    websocket._errorEmitted = true;\n    websocket.emit('error', err);\n  }\n}\n\n/**\n * The listener of the `Receiver` `'finish'` event.\n *\n * @private\n */\nfunction receiverOnFinish() {\n  this[kWebSocket].emitClose();\n}\n\n/**\n * The listener of the `Receiver` `'message'` event.\n *\n * @param {Buffer|ArrayBuffer|Buffer[])} data The message\n * @param {Boolean} isBinary Specifies whether the message is binary or not\n * @private\n */\nfunction receiverOnMessage(data, isBinary) {\n  this[kWebSocket].emit('message', data, isBinary);\n}\n\n/**\n * The listener of the `Receiver` `'ping'` event.\n *\n * @param {Buffer} data The data included in the ping frame\n * @private\n */\nfunction receiverOnPing(data) {\n  const websocket = this[kWebSocket];\n\n  if (websocket._autoPong) websocket.pong(data, !this._isServer, NOOP);\n  websocket.emit('ping', data);\n}\n\n/**\n * The listener of the `Receiver` `'pong'` event.\n *\n * @param {Buffer} data The data included in the pong frame\n * @private\n */\nfunction receiverOnPong(data) {\n  this[kWebSocket].emit('pong', data);\n}\n\n/**\n * Resume a readable stream\n *\n * @param {Readable} stream The readable stream\n * @private\n */\nfunction resume(stream) {\n  stream.resume();\n}\n\n/**\n * The `Sender` error event handler.\n *\n * @param {Error} The error\n * @private\n */\nfunction senderOnError(err) {\n  const websocket = this[kWebSocket];\n\n  if (websocket.readyState === WebSocket.CLOSED) return;\n  if (websocket.readyState === WebSocket.OPEN) {\n    websocket._readyState = WebSocket.CLOSING;\n    setCloseTimer(websocket);\n  }\n\n  //\n  // `socket.end()` is used instead of `socket.destroy()` to allow the other\n  // peer to finish sending queued data. There is no need to set a timer here\n  // because `CLOSING` means that it is already set or not needed.\n  //\n  this._socket.end();\n\n  if (!websocket._errorEmitted) {\n    websocket._errorEmitted = true;\n    websocket.emit('error', err);\n  }\n}\n\n/**\n * Set a timer to destroy the underlying raw socket of a WebSocket.\n *\n * @param {WebSocket} websocket The WebSocket instance\n * @private\n */\nfunction setCloseTimer(websocket) {\n  websocket._closeTimer = setTimeout(\n    websocket._socket.destroy.bind(websocket._socket),\n    closeTimeout\n  );\n}\n\n/**\n * The listener of the socket `'close'` event.\n *\n * @private\n */\nfunction socketOnClose() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('close', socketOnClose);\n  this.removeListener('data', socketOnData);\n  this.removeListener('end', socketOnEnd);\n\n  websocket._readyState = WebSocket.CLOSING;\n\n  let chunk;\n\n  //\n  // The close frame might not have been received or the `'end'` event emitted,\n  // for example, if the socket was destroyed due to an error. Ensure that the\n  // `receiver` stream is closed after writing any remaining buffered data to\n  // it. If the readable side of the socket is in flowing mode then there is no\n  // buffered data as everything has been already written and `readable.read()`\n  // will return `null`. If instead, the socket is paused, any possible buffered\n  // data will be read as a single chunk.\n  //\n  if (\n    !this._readableState.endEmitted &&\n    !websocket._closeFrameReceived &&\n    !websocket._receiver._writableState.errorEmitted &&\n    (chunk = websocket._socket.read()) !== null\n  ) {\n    websocket._receiver.write(chunk);\n  }\n\n  websocket._receiver.end();\n\n  this[kWebSocket] = undefined;\n\n  clearTimeout(websocket._closeTimer);\n\n  if (\n    websocket._receiver._writableState.finished ||\n    websocket._receiver._writableState.errorEmitted\n  ) {\n    websocket.emitClose();\n  } else {\n    websocket._receiver.on('error', receiverOnFinish);\n    websocket._receiver.on('finish', receiverOnFinish);\n  }\n}\n\n/**\n * The listener of the socket `'data'` event.\n *\n * @param {Buffer} chunk A chunk of data\n * @private\n */\nfunction socketOnData(chunk) {\n  if (!this[kWebSocket]._receiver.write(chunk)) {\n    this.pause();\n  }\n}\n\n/**\n * The listener of the socket `'end'` event.\n *\n * @private\n */\nfunction socketOnEnd() {\n  const websocket = this[kWebSocket];\n\n  websocket._readyState = WebSocket.CLOSING;\n  websocket._receiver.end();\n  this.end();\n}\n\n/**\n * The listener of the socket `'error'` event.\n *\n * @private\n */\nfunction socketOnError() {\n  const websocket = this[kWebSocket];\n\n  this.removeListener('error', socketOnError);\n  this.on('error', NOOP);\n\n  if (websocket) {\n    websocket._readyState = WebSocket.CLOSING;\n    this.destroy();\n  }\n}\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function (val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","// Copyright Takatoshi Kondo 2021\n//\n// Distributed under the MIT License\n\nconst NumberAllocator = require('./lib/number-allocator.js')\n\nmodule.exports.NumberAllocator = NumberAllocator\n","// Copyright Takatoshi Kondo 2021\n//\n// Distributed under the MIT License\n\n'use strict'\n\nconst SortedSet = require('js-sdsl').OrderedSet\nconst debugTrace = require('debug')('number-allocator:trace')\nconst debugError = require('debug')('number-allocator:error')\n/**\n * Interval constructor\n * @constructor\n * @param {Number} low  - The lowest value of the interval\n * @param {Number} high - The highest value of the interval\n */\nfunction Interval (low, high) {\n  this.low = low\n  this.high = high\n}\n\nInterval.prototype.equals = function (other) {\n  return this.low === other.low && this.high === other.high\n}\n\nInterval.prototype.compare = function (other) {\n  if (this.low < other.low && this.high < other.low) return -1\n  if (other.low < this.low && other.high < this.low) return 1\n  return 0\n}\n\n/**\n * NumberAllocator constructor.\n * The all numbers are set to vacant status.\n * Time Complexity O(1)\n * @constructor\n * @param {Number} min  - The maximum number of allocatable. The number must be integer.\n * @param {Number} maxh - The minimum number of allocatable. The number must be integer.\n */\nfunction NumberAllocator (min, max) {\n  if (!(this instanceof NumberAllocator)) {\n    return new NumberAllocator(min, max)\n  }\n\n  this.min = min\n  this.max = max\n\n  this.ss = new SortedSet(\n    [],\n    (lhs, rhs) => {\n      return lhs.compare(rhs)\n    }\n  )\n  debugTrace('Create')\n  this.clear()\n}\n\n/**\n * Get the first vacant number. The status of the number is not updated.\n * Time Complexity O(1)\n * @return {Number} - The first vacant number. If all numbers are occupied, return null.\n *                    When alloc() is called then the same value will be allocated.\n */\nNumberAllocator.prototype.firstVacant = function () {\n  if (this.ss.size() === 0) return null\n  return this.ss.front().low\n}\n\n/**\n * Allocate the first vacant number. The number become occupied status.\n * Time Complexity O(1)\n * @return {Number} - The first vacant number. If all numbers are occupied, return null.\n */\nNumberAllocator.prototype.alloc = function () {\n  if (this.ss.size() === 0) {\n    debugTrace('alloc():empty')\n    return null\n  }\n  const it = this.ss.begin()\n  const low = it.pointer.low\n  const high = it.pointer.high\n  const num = low\n  if (num + 1 <= high) {\n    // x|----|\n    this.ss.updateKeyByIterator(it, new Interval(low + 1, high))\n  } else {\n    this.ss.eraseElementByPos(0)\n  }\n  debugTrace('alloc():' + num)\n  return num\n}\n\n/**\n * Use the number. The number become occupied status.\n * If the number has already been occupied, then return false.\n * Time Complexity O(logN) : N is the number of intervals (not numbers)\n * @param {Number} num - The number to request use.\n * @return {Boolean} - If `num` was not occupied, then return true, otherwise return false.\n */\nNumberAllocator.prototype.use = function (num) {\n  const key = new Interval(num, num)\n  const it = this.ss.lowerBound(key)\n  if (!it.equals(this.ss.end())) {\n    const low = it.pointer.low\n    const high = it.pointer.high\n    if (it.pointer.equals(key)) {\n      // |x|\n      this.ss.eraseElementByIterator(it)\n      debugTrace('use():' + num)\n      return true\n    }\n\n    // x |-----|\n    if (low > num) return false\n\n    // |x----|\n    if (low === num) {\n      // x|----|\n      this.ss.updateKeyByIterator(it, new Interval(low + 1, high))\n      debugTrace('use():' + num)\n      return true\n    }\n\n    // |----x|\n    if (high === num) {\n      // |----|x\n      this.ss.updateKeyByIterator(it, new Interval(low, high - 1))\n      debugTrace('use():' + num)\n      return true\n    }\n\n    // |--x--|\n    // x|--|\n    this.ss.updateKeyByIterator(it, new Interval(num + 1, high))\n    // |--|x|--|\n    this.ss.insert(new Interval(low, num - 1))\n    debugTrace('use():' + num)\n    return true\n  }\n\n  debugTrace('use():failed')\n  return false\n}\n\n/**\n * Deallocate the number. The number become vacant status.\n * Time Complexity O(logN) : N is the number of intervals (not numbers)\n * @param {Number} num - The number to deallocate. The number must be occupied status.\n *                       In other words, the number must be allocated by alloc() or occupied be use().\n */\nNumberAllocator.prototype.free = function (num) {\n  if (num < this.min || num > this.max) {\n    debugError('free():' + num + ' is out of range')\n    return\n  }\n  const key = new Interval(num, num)\n  const it = this.ss.upperBound(key)\n  if (it.equals(this.ss.end())) {\n    // ....v\n    if (it.equals(this.ss.begin())) {\n      // Insert new interval\n      this.ss.insert(key)\n      return\n    }\n    it.pre()\n    const low = it.pointer.high\n    const high = it.pointer.high\n    if (high + 1 === num) {\n      // Concat to left\n      this.ss.updateKeyByIterator(it, new Interval(low, num))\n    } else {\n      // Insert new interval\n      this.ss.insert(key)\n    }\n  } else {\n    if (it.equals(this.ss.begin())) {\n      // v....\n      if (num + 1 === it.pointer.low) {\n        // Concat to right\n        const high = it.pointer.high\n        this.ss.updateKeyByIterator(it, new Interval(num, high))\n      } else {\n        // Insert new interval\n        this.ss.insert(key)\n      }\n    } else {\n      // ..v..\n      const rLow = it.pointer.low\n      const rHigh = it.pointer.high\n      it.pre()\n      const lLow = it.pointer.low\n      const lHigh = it.pointer.high\n      if (lHigh + 1 === num) {\n        if (num + 1 === rLow) {\n          // Concat to left and right\n          this.ss.eraseElementByIterator(it)\n          this.ss.updateKeyByIterator(it, new Interval(lLow, rHigh))\n        } else {\n          // Concat to left\n          this.ss.updateKeyByIterator(it, new Interval(lLow, num))\n        }\n      } else {\n        if (num + 1 === rLow) {\n          // Concat to right\n          this.ss.eraseElementByIterator(it.next())\n          this.ss.insert(new Interval(num, rHigh))\n        } else {\n          // Insert new interval\n          this.ss.insert(key)\n        }\n      }\n    }\n  }\n  debugTrace('free():' + num)\n}\n\n/**\n * Clear all occupied numbers.\n * The all numbers are set to vacant status.\n * Time Complexity O(1)\n */\nNumberAllocator.prototype.clear = function () {\n  debugTrace('clear()')\n  this.ss.clear()\n  this.ss.insert(new Interval(this.min, this.max))\n}\n\n/**\n * Get the number of intervals. Interval is internal structure of this library.\n * This function is for debugging.\n * Time Complexity O(1)\n * @return {Number} - The number of intervals.\n */\nNumberAllocator.prototype.intervalCount = function () {\n  return this.ss.size()\n}\n\n/**\n * Dump the internal structor of the library.\n * This function is for debugging.\n * Time Complexity O(N) : N is the number of intervals (not numbers)\n */\nNumberAllocator.prototype.dump = function () {\n  console.log('length:' + this.ss.size())\n  for (const element of this.ss) {\n    console.log(element)\n  }\n}\n\nmodule.exports = NumberAllocator\n","'use strict';\n\nif (typeof process === 'undefined' ||\n    !process.version ||\n    process.version.indexOf('v0.') === 0 ||\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n  module.exports = { nextTick: nextTick };\n} else {\n  module.exports = process\n}\n\nfunction nextTick(fn, arg1, arg2, arg3) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('\"callback\" argument must be a function');\n  }\n  var len = arguments.length;\n  var args, i;\n  switch (len) {\n  case 0:\n  case 1:\n    return process.nextTick(fn);\n  case 2:\n    return process.nextTick(function afterTickOne() {\n      fn.call(null, arg1);\n    });\n  case 3:\n    return process.nextTick(function afterTickTwo() {\n      fn.call(null, arg1, arg2);\n    });\n  case 4:\n    return process.nextTick(function afterTickThree() {\n      fn.call(null, arg1, arg2, arg3);\n    });\n  default:\n    args = new Array(len - 1);\n    i = 0;\n    while (i < args.length) {\n      args[i++] = arguments[i];\n    }\n    return process.nextTick(function afterTick() {\n      fn.apply(null, args);\n    });\n  }\n}\n\n","// for now just expose the builtin process global from node.js\nmodule.exports = global.process;\n","'use strict'\n\nmodule.exports = require('./index.js')()\n","'use strict'\nmodule.exports = rfdc\n\nfunction copyBuffer (cur) {\n  if (cur instanceof Buffer) {\n    return Buffer.from(cur)\n  }\n\n  return new cur.constructor(cur.buffer.slice(), cur.byteOffset, cur.length)\n}\n\nfunction rfdc (opts) {\n  opts = opts || {}\n  if (opts.circles) return rfdcCircles(opts)\n\n  const constructorHandlers = new Map()\n  constructorHandlers.set(Date, (o) => new Date(o))\n  constructorHandlers.set(Map, (o, fn) => new Map(cloneArray(Array.from(o), fn)))\n  constructorHandlers.set(Set, (o, fn) => new Set(cloneArray(Array.from(o), fn)))\n  if (opts.constructorHandlers) {\n    for (const handler of opts.constructorHandlers) {\n      constructorHandlers.set(handler[0], handler[1])\n    }\n  }\n\n  let handler = null\n\n  return opts.proto ? cloneProto : clone\n\n  function cloneArray (a, fn) {\n    const keys = Object.keys(a)\n    const a2 = new Array(keys.length)\n    for (let i = 0; i < keys.length; i++) {\n      const k = keys[i]\n      const cur = a[k]\n      if (typeof cur !== 'object' || cur === null) {\n        a2[k] = cur\n      } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {\n        a2[k] = handler(cur, fn)\n      } else if (ArrayBuffer.isView(cur)) {\n        a2[k] = copyBuffer(cur)\n      } else {\n        a2[k] = fn(cur)\n      }\n    }\n    return a2\n  }\n\n  function clone (o) {\n    if (typeof o !== 'object' || o === null) return o\n    if (Array.isArray(o)) return cloneArray(o, clone)\n    if (o.constructor !== Object && (handler = constructorHandlers.get(o.constructor))) {\n      return handler(o, clone)\n    }\n    const o2 = {}\n    for (const k in o) {\n      if (Object.hasOwnProperty.call(o, k) === false) continue\n      const cur = o[k]\n      if (typeof cur !== 'object' || cur === null) {\n        o2[k] = cur\n      } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {\n        o2[k] = handler(cur, clone)\n      } else if (ArrayBuffer.isView(cur)) {\n        o2[k] = copyBuffer(cur)\n      } else {\n        o2[k] = clone(cur)\n      }\n    }\n    return o2\n  }\n\n  function cloneProto (o) {\n    if (typeof o !== 'object' || o === null) return o\n    if (Array.isArray(o)) return cloneArray(o, cloneProto)\n    if (o.constructor !== Object && (handler = constructorHandlers.get(o.constructor))) {\n      return handler(o, cloneProto)\n    }\n    const o2 = {}\n    for (const k in o) {\n      const cur = o[k]\n      if (typeof cur !== 'object' || cur === null) {\n        o2[k] = cur\n      } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {\n        o2[k] = handler(cur, cloneProto)\n      } else if (ArrayBuffer.isView(cur)) {\n        o2[k] = copyBuffer(cur)\n      } else {\n        o2[k] = cloneProto(cur)\n      }\n    }\n    return o2\n  }\n}\n\nfunction rfdcCircles (opts) {\n  const refs = []\n  const refsNew = []\n\n  const constructorHandlers = new Map()\n  constructorHandlers.set(Date, (o) => new Date(o))\n  constructorHandlers.set(Map, (o, fn) => new Map(cloneArray(Array.from(o), fn)))\n  constructorHandlers.set(Set, (o, fn) => new Set(cloneArray(Array.from(o), fn)))\n  if (opts.constructorHandlers) {\n    for (const handler of opts.constructorHandlers) {\n      constructorHandlers.set(handler[0], handler[1])\n    }\n  }\n\n  let handler = null\n  return opts.proto ? cloneProto : clone\n\n  function cloneArray (a, fn) {\n    const keys = Object.keys(a)\n    const a2 = new Array(keys.length)\n    for (let i = 0; i < keys.length; i++) {\n      const k = keys[i]\n      const cur = a[k]\n      if (typeof cur !== 'object' || cur === null) {\n        a2[k] = cur\n      } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {\n        a2[k] = handler(cur, fn)\n      } else if (ArrayBuffer.isView(cur)) {\n        a2[k] = copyBuffer(cur)\n      } else {\n        const index = refs.indexOf(cur)\n        if (index !== -1) {\n          a2[k] = refsNew[index]\n        } else {\n          a2[k] = fn(cur)\n        }\n      }\n    }\n    return a2\n  }\n\n  function clone (o) {\n    if (typeof o !== 'object' || o === null) return o\n    if (Array.isArray(o)) return cloneArray(o, clone)\n    if (o.constructor !== Object && (handler = constructorHandlers.get(o.constructor))) {\n      return handler(o, clone)\n    }\n    const o2 = {}\n    refs.push(o)\n    refsNew.push(o2)\n    for (const k in o) {\n      if (Object.hasOwnProperty.call(o, k) === false) continue\n      const cur = o[k]\n      if (typeof cur !== 'object' || cur === null) {\n        o2[k] = cur\n      } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {\n        o2[k] = handler(cur, clone)\n      } else if (ArrayBuffer.isView(cur)) {\n        o2[k] = copyBuffer(cur)\n      } else {\n        const i = refs.indexOf(cur)\n        if (i !== -1) {\n          o2[k] = refsNew[i]\n        } else {\n          o2[k] = clone(cur)\n        }\n      }\n    }\n    refs.pop()\n    refsNew.pop()\n    return o2\n  }\n\n  function cloneProto (o) {\n    if (typeof o !== 'object' || o === null) return o\n    if (Array.isArray(o)) return cloneArray(o, cloneProto)\n    if (o.constructor !== Object && (handler = constructorHandlers.get(o.constructor))) {\n      return handler(o, cloneProto)\n    }\n    const o2 = {}\n    refs.push(o)\n    refsNew.push(o2)\n    for (const k in o) {\n      const cur = o[k]\n      if (typeof cur !== 'object' || cur === null) {\n        o2[k] = cur\n      } else if (cur.constructor !== Object && (handler = constructorHandlers.get(cur.constructor))) {\n        o2[k] = handler(cur, cloneProto)\n      } else if (ArrayBuffer.isView(cur)) {\n        o2[k] = copyBuffer(cur)\n      } else {\n        const i = refs.indexOf(cur)\n        if (i !== -1) {\n          o2[k] = refsNew[i]\n        } else {\n          o2[k] = cloneProto(cur)\n        }\n      }\n    }\n    refs.pop()\n    refsNew.pop()\n    return o2\n  }\n}\n","'use strict';\nconst os = require('os');\nconst hasFlag = require('has-flag');\n\nconst env = process.env;\n\nlet forceColor;\nif (hasFlag('no-color') ||\n\thasFlag('no-colors') ||\n\thasFlag('color=false')) {\n\tforceColor = false;\n} else if (hasFlag('color') ||\n\thasFlag('colors') ||\n\thasFlag('color=true') ||\n\thasFlag('color=always')) {\n\tforceColor = true;\n}\nif ('FORCE_COLOR' in env) {\n\tforceColor = env.FORCE_COLOR.length === 0 || parseInt(env.FORCE_COLOR, 10) !== 0;\n}\n\nfunction translateLevel(level) {\n\tif (level === 0) {\n\t\treturn false;\n\t}\n\n\treturn {\n\t\tlevel,\n\t\thasBasic: true,\n\t\thas256: level >= 2,\n\t\thas16m: level >= 3\n\t};\n}\n\nfunction supportsColor(stream) {\n\tif (forceColor === false) {\n\t\treturn 0;\n\t}\n\n\tif (hasFlag('color=16m') ||\n\t\thasFlag('color=full') ||\n\t\thasFlag('color=truecolor')) {\n\t\treturn 3;\n\t}\n\n\tif (hasFlag('color=256')) {\n\t\treturn 2;\n\t}\n\n\tif (stream && !stream.isTTY && forceColor !== true) {\n\t\treturn 0;\n\t}\n\n\tconst min = forceColor ? 1 : 0;\n\n\tif (process.platform === 'win32') {\n\t\t// Node.js 7.5.0 is the first version of Node.js to include a patch to\n\t\t// libuv that enables 256 color output on Windows. Anything earlier and it\n\t\t// won't work. However, here we target Node.js 8 at minimum as it is an LTS\n\t\t// release, and Node.js 7 is not. Windows 10 build 10586 is the first Windows\n\t\t// release that supports 256 colors. Windows 10 build 14931 is the first release\n\t\t// that supports 16m/TrueColor.\n\t\tconst osRelease = os.release().split('.');\n\t\tif (\n\t\t\tNumber(process.versions.node.split('.')[0]) >= 8 &&\n\t\t\tNumber(osRelease[0]) >= 10 &&\n\t\t\tNumber(osRelease[2]) >= 10586\n\t\t) {\n\t\t\treturn Number(osRelease[2]) >= 14931 ? 3 : 2;\n\t\t}\n\n\t\treturn 1;\n\t}\n\n\tif ('CI' in env) {\n\t\tif (['TRAVIS', 'CIRCLECI', 'APPVEYOR', 'GITLAB_CI'].some(sign => sign in env) || env.CI_NAME === 'codeship') {\n\t\t\treturn 1;\n\t\t}\n\n\t\treturn min;\n\t}\n\n\tif ('TEAMCITY_VERSION' in env) {\n\t\treturn /^(9\\.(0*[1-9]\\d*)\\.|\\d{2,}\\.)/.test(env.TEAMCITY_VERSION) ? 1 : 0;\n\t}\n\n\tif (env.COLORTERM === 'truecolor') {\n\t\treturn 3;\n\t}\n\n\tif ('TERM_PROGRAM' in env) {\n\t\tconst version = parseInt((env.TERM_PROGRAM_VERSION || '').split('.')[0], 10);\n\n\t\tswitch (env.TERM_PROGRAM) {\n\t\t\tcase 'iTerm.app':\n\t\t\t\treturn version >= 3 ? 3 : 2;\n\t\t\tcase 'Apple_Terminal':\n\t\t\t\treturn 2;\n\t\t\t// No default\n\t\t}\n\t}\n\n\tif (/-256(color)?$/i.test(env.TERM)) {\n\t\treturn 2;\n\t}\n\n\tif (/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(env.TERM)) {\n\t\treturn 1;\n\t}\n\n\tif ('COLORTERM' in env) {\n\t\treturn 1;\n\t}\n\n\tif (env.TERM === 'dumb') {\n\t\treturn min;\n\t}\n\n\treturn min;\n}\n\nfunction getSupportLevel(stream) {\n\tconst level = supportsColor(stream);\n\treturn translateLevel(level);\n}\n\nmodule.exports = {\n\tsupportsColor: getSupportLevel,\n\tstdout: getSupportLevel(process.stdout),\n\tstderr: getSupportLevel(process.stderr)\n};\n","export const createAddUniqueNumber = (generateUniqueNumber) => {\n    return (set) => {\n        const number = generateUniqueNumber(set);\n        set.add(number);\n        return number;\n    };\n};\n//# sourceMappingURL=add-unique-number.js.map","/*\n * The value of the constant Number.MAX_SAFE_INTEGER equals (2 ** 53 - 1) but it\n * is fairly new.\n */\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER === undefined ? 9007199254740991 : Number.MAX_SAFE_INTEGER;\nconst TWO_TO_THE_POWER_OF_TWENTY_NINE = 536870912;\nconst TWO_TO_THE_POWER_OF_THIRTY = TWO_TO_THE_POWER_OF_TWENTY_NINE * 2;\nexport const createGenerateUniqueNumber = (cache, lastNumberWeakMap) => {\n    return (collection) => {\n        const lastNumber = lastNumberWeakMap.get(collection);\n        /*\n         * Let's try the cheapest algorithm first. It might fail to produce a new\n         * number, but it is so cheap that it is okay to take the risk. Just\n         * increase the last number by one or reset it to 0 if we reached the upper\n         * bound of SMIs (which stands for small integers). When the last number is\n         * unknown it is assumed that the collection contains zero based consecutive\n         * numbers.\n         */\n        let nextNumber = lastNumber === undefined ? collection.size : lastNumber < TWO_TO_THE_POWER_OF_THIRTY ? lastNumber + 1 : 0;\n        if (!collection.has(nextNumber)) {\n            return cache(collection, nextNumber);\n        }\n        /*\n         * If there are less than half of 2 ** 30 numbers stored in the collection,\n         * the chance to generate a new random number in the range from 0 to 2 ** 30\n         * is at least 50%. It's benifitial to use only SMIs because they perform\n         * much better in any environment based on V8.\n         */\n        if (collection.size < TWO_TO_THE_POWER_OF_TWENTY_NINE) {\n            while (collection.has(nextNumber)) {\n                nextNumber = Math.floor(Math.random() * TWO_TO_THE_POWER_OF_THIRTY);\n            }\n            return cache(collection, nextNumber);\n        }\n        // Quickly check if there is a theoretical chance to generate a new number.\n        if (collection.size > MAX_SAFE_INTEGER) {\n            throw new Error('Congratulations, you created a collection of unique numbers which uses all available integers!');\n        }\n        // Otherwise use the full scale of safely usable integers.\n        while (collection.has(nextNumber)) {\n            nextNumber = Math.floor(Math.random() * MAX_SAFE_INTEGER);\n        }\n        return cache(collection, nextNumber);\n    };\n};\n//# sourceMappingURL=generate-unique-number.js.map","import { createAddUniqueNumber } from './factories/add-unique-number';\nimport { createCache } from './factories/cache';\nimport { createGenerateUniqueNumber } from './factories/generate-unique-number';\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './types/index';\nconst LAST_NUMBER_WEAK_MAP = new WeakMap();\nconst cache = createCache(LAST_NUMBER_WEAK_MAP);\nconst generateUniqueNumber = createGenerateUniqueNumber(cache, LAST_NUMBER_WEAK_MAP);\nconst addUniqueNumber = createAddUniqueNumber(generateUniqueNumber);\nexport { addUniqueNumber, generateUniqueNumber };\n//# sourceMappingURL=module.js.map","export const createCache = (lastNumberWeakMap) => {\n    return (collection, nextNumber) => {\n        lastNumberWeakMap.set(collection, nextNumber);\n        return nextNumber;\n    };\n};\n//# sourceMappingURL=cache.js.map","import { load } from 'worker-timers-broker';\nimport { createLoadOrReturnBroker } from './factories/load-or-return-broker';\nimport { worker } from './worker/worker';\nconst loadOrReturnBroker = createLoadOrReturnBroker(load, worker);\nexport const clearInterval = (timerId) => loadOrReturnBroker().clearInterval(timerId);\nexport const clearTimeout = (timerId) => loadOrReturnBroker().clearTimeout(timerId);\nexport const setInterval = (...args) => loadOrReturnBroker().setInterval(...args);\nexport const setTimeout = (...args) => loadOrReturnBroker().setTimeout(...args);\n//# sourceMappingURL=module.js.map","export const createLoadOrReturnBroker = (loadBroker, worker) => {\n    let broker = null;\n    return () => {\n        if (broker !== null) {\n            return broker;\n        }\n        const blob = new Blob([worker], { type: 'application/javascript; charset=utf-8' });\n        const url = URL.createObjectURL(blob);\n        broker = loadBroker(url);\n        // Bug #1: Edge up until v18 didn't like the URL to be revoked directly.\n        setTimeout(() => URL.revokeObjectURL(url));\n        return broker;\n    };\n};\n//# sourceMappingURL=load-or-return-broker.js.map","import { generateUniqueNumber } from 'fast-unique-numbers';\nimport { isCallNotification } from './guards/call-notification';\nimport { isClearResponse } from './guards/clear-response';\nexport const load = (url) => {\n    // Prefilling the Maps with a function indexed by zero is necessary to be compliant with the specification.\n    const scheduledIntervalFunctions = new Map([[0, () => { }]]); // tslint:disable-line no-empty\n    const scheduledTimeoutFunctions = new Map([[0, () => { }]]); // tslint:disable-line no-empty\n    const unrespondedRequests = new Map();\n    const worker = new Worker(url);\n    worker.addEventListener('message', ({ data }) => {\n        if (isCallNotification(data)) {\n            const { params: { timerId, timerType } } = data;\n            if (timerType === 'interval') {\n                const idOrFunc = scheduledIntervalFunctions.get(timerId);\n                if (typeof idOrFunc === 'number') {\n                    const timerIdAndTimerType = unrespondedRequests.get(idOrFunc);\n                    if (timerIdAndTimerType === undefined ||\n                        timerIdAndTimerType.timerId !== timerId ||\n                        timerIdAndTimerType.timerType !== timerType) {\n                        throw new Error('The timer is in an undefined state.');\n                    }\n                }\n                else if (typeof idOrFunc !== 'undefined') {\n                    idOrFunc();\n                }\n                else {\n                    throw new Error('The timer is in an undefined state.');\n                }\n            }\n            else if (timerType === 'timeout') {\n                const idOrFunc = scheduledTimeoutFunctions.get(timerId);\n                if (typeof idOrFunc === 'number') {\n                    const timerIdAndTimerType = unrespondedRequests.get(idOrFunc);\n                    if (timerIdAndTimerType === undefined ||\n                        timerIdAndTimerType.timerId !== timerId ||\n                        timerIdAndTimerType.timerType !== timerType) {\n                        throw new Error('The timer is in an undefined state.');\n                    }\n                }\n                else if (typeof idOrFunc !== 'undefined') {\n                    idOrFunc();\n                    // A timeout can be savely deleted because it is only called once.\n                    scheduledTimeoutFunctions.delete(timerId);\n                }\n                else {\n                    throw new Error('The timer is in an undefined state.');\n                }\n            }\n        }\n        else if (isClearResponse(data)) {\n            const { id } = data;\n            const timerIdAndTimerType = unrespondedRequests.get(id);\n            if (timerIdAndTimerType === undefined) {\n                throw new Error('The timer is in an undefined state.');\n            }\n            const { timerId, timerType } = timerIdAndTimerType;\n            unrespondedRequests.delete(id);\n            if (timerType === 'interval') {\n                scheduledIntervalFunctions.delete(timerId);\n            }\n            else {\n                scheduledTimeoutFunctions.delete(timerId);\n            }\n        }\n        else {\n            const { error: { message } } = data;\n            throw new Error(message);\n        }\n    });\n    const clearInterval = (timerId) => {\n        const id = generateUniqueNumber(unrespondedRequests);\n        unrespondedRequests.set(id, { timerId, timerType: 'interval' });\n        scheduledIntervalFunctions.set(timerId, id);\n        worker.postMessage({\n            id,\n            method: 'clear',\n            params: { timerId, timerType: 'interval' }\n        });\n    };\n    const clearTimeout = (timerId) => {\n        const id = generateUniqueNumber(unrespondedRequests);\n        unrespondedRequests.set(id, { timerId, timerType: 'timeout' });\n        scheduledTimeoutFunctions.set(timerId, id);\n        worker.postMessage({\n            id,\n            method: 'clear',\n            params: { timerId, timerType: 'timeout' }\n        });\n    };\n    const setInterval = (func, delay = 0) => {\n        const timerId = generateUniqueNumber(scheduledIntervalFunctions);\n        scheduledIntervalFunctions.set(timerId, () => {\n            func();\n            // Doublecheck if the interval should still be rescheduled because it could have been cleared inside of func().\n            if (typeof scheduledIntervalFunctions.get(timerId) === 'function') {\n                worker.postMessage({\n                    id: null,\n                    method: 'set',\n                    params: {\n                        delay,\n                        now: performance.now(),\n                        timerId,\n                        timerType: 'interval'\n                    }\n                });\n            }\n        });\n        worker.postMessage({\n            id: null,\n            method: 'set',\n            params: {\n                delay,\n                now: performance.now(),\n                timerId,\n                timerType: 'interval'\n            }\n        });\n        return timerId;\n    };\n    const setTimeout = (func, delay = 0) => {\n        const timerId = generateUniqueNumber(scheduledTimeoutFunctions);\n        scheduledTimeoutFunctions.set(timerId, func);\n        worker.postMessage({\n            id: null,\n            method: 'set',\n            params: {\n                delay,\n                now: performance.now(),\n                timerId,\n                timerType: 'timeout'\n            }\n        });\n        return timerId;\n    };\n    return {\n        clearInterval,\n        clearTimeout,\n        setInterval,\n        setTimeout\n    };\n};\n//# sourceMappingURL=module.js.map","export const isCallNotification = (message) => {\n    return message.method !== undefined && message.method === 'call';\n};\n//# sourceMappingURL=call-notification.js.map","export const isClearResponse = (message) => {\n    return message.error === null && typeof message.id === 'number';\n};\n//# sourceMappingURL=clear-response.js.map","// This is the minified and stringified code of the worker-timers-worker package.\nexport const worker = `(()=>{\"use strict\";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:\"call\",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener(\"message\",(i=>{let{data:s}=i;try{if(\"clear\"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if(\"interval\"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id \"'.concat(t,'\".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if(\"timeout\"!==i)throw new Error('The given type \"'.concat(i,'\" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id \"'.concat(e,'\".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if(\"set\"!==s.method)throw new Error('The given method \"'.concat(s.method,'\" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if(\"interval\"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,\"interval\"))})(i,a,n);else{if(\"timeout\"!==d)throw new Error('The given type \"'.concat(d,'\" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,\"timeout\"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`; // tslint:disable-line:max-line-length\n//# sourceMappingURL=worker.js.map","module.exports = require(\"buffer\");","module.exports = require(\"crypto\");","module.exports = require(\"events\");","module.exports = require(\"http\");","module.exports = require(\"https\");","module.exports = require(\"net\");","module.exports = require(\"os\");","module.exports = require(\"stream\");","module.exports = require(\"string_decoder\");","module.exports = require(\"tls\");","module.exports = require(\"tty\");","module.exports = require(\"url\");","module.exports = require(\"util\");","module.exports = require(\"zlib\");","\"use strict\";\n/**\n * @module LRUCache\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.LRUCache = void 0;\nconst perf = typeof performance === 'object' &&\n    performance &&\n    typeof performance.now === 'function'\n    ? performance\n    : Date;\nconst warned = new Set();\n/* c8 ignore start */\nconst PROCESS = (typeof process === 'object' && !!process ? process : {});\n/* c8 ignore start */\nconst emitWarning = (msg, type, code, fn) => {\n    typeof PROCESS.emitWarning === 'function'\n        ? PROCESS.emitWarning(msg, type, code, fn)\n        : console.error(`[${code}] ${type}: ${msg}`);\n};\nlet AC = globalThis.AbortController;\nlet AS = globalThis.AbortSignal;\n/* c8 ignore start */\nif (typeof AC === 'undefined') {\n    //@ts-ignore\n    AS = class AbortSignal {\n        onabort;\n        _onabort = [];\n        reason;\n        aborted = false;\n        addEventListener(_, fn) {\n            this._onabort.push(fn);\n        }\n    };\n    //@ts-ignore\n    AC = class AbortController {\n        constructor() {\n            warnACPolyfill();\n        }\n        signal = new AS();\n        abort(reason) {\n            if (this.signal.aborted)\n                return;\n            //@ts-ignore\n            this.signal.reason = reason;\n            //@ts-ignore\n            this.signal.aborted = true;\n            //@ts-ignore\n            for (const fn of this.signal._onabort) {\n                fn(reason);\n            }\n            this.signal.onabort?.(reason);\n        }\n    };\n    let printACPolyfillWarning = PROCESS.env?.LRU_CACHE_IGNORE_AC_WARNING !== '1';\n    const warnACPolyfill = () => {\n        if (!printACPolyfillWarning)\n            return;\n        printACPolyfillWarning = false;\n        emitWarning('AbortController is not defined. If using lru-cache in ' +\n            'node 14, load an AbortController polyfill from the ' +\n            '`node-abort-controller` package. A minimal polyfill is ' +\n            'provided for use by LRUCache.fetch(), but it should not be ' +\n            'relied upon in other contexts (eg, passing it to other APIs that ' +\n            'use AbortController/AbortSignal might have undesirable effects). ' +\n            'You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.', 'NO_ABORT_CONTROLLER', 'ENOTSUP', warnACPolyfill);\n    };\n}\n/* c8 ignore stop */\nconst shouldWarn = (code) => !warned.has(code);\nconst TYPE = Symbol('type');\nconst isPosInt = (n) => n && n === Math.floor(n) && n > 0 && isFinite(n);\n/* c8 ignore start */\n// This is a little bit ridiculous, tbh.\n// The maximum array length is 2^32-1 or thereabouts on most JS impls.\n// And well before that point, you're caching the entire world, I mean,\n// that's ~32GB of just integers for the next/prev links, plus whatever\n// else to hold that many keys and values.  Just filling the memory with\n// zeroes at init time is brutal when you get that big.\n// But why not be complete?\n// Maybe in the future, these limits will have expanded.\nconst getUintArray = (max) => !isPosInt(max)\n    ? null\n    : max <= Math.pow(2, 8)\n        ? Uint8Array\n        : max <= Math.pow(2, 16)\n            ? Uint16Array\n            : max <= Math.pow(2, 32)\n                ? Uint32Array\n                : max <= Number.MAX_SAFE_INTEGER\n                    ? ZeroArray\n                    : null;\n/* c8 ignore stop */\nclass ZeroArray extends Array {\n    constructor(size) {\n        super(size);\n        this.fill(0);\n    }\n}\nclass Stack {\n    heap;\n    length;\n    // private constructor\n    static #constructing = false;\n    static create(max) {\n        const HeapCls = getUintArray(max);\n        if (!HeapCls)\n            return [];\n        Stack.#constructing = true;\n        const s = new Stack(max, HeapCls);\n        Stack.#constructing = false;\n        return s;\n    }\n    constructor(max, HeapCls) {\n        /* c8 ignore start */\n        if (!Stack.#constructing) {\n            throw new TypeError('instantiate Stack using Stack.create(n)');\n        }\n        /* c8 ignore stop */\n        this.heap = new HeapCls(max);\n        this.length = 0;\n    }\n    push(n) {\n        this.heap[this.length++] = n;\n    }\n    pop() {\n        return this.heap[--this.length];\n    }\n}\n/**\n * Default export, the thing you're using this module to get.\n *\n * The `K` and `V` types define the key and value types, respectively. The\n * optional `FC` type defines the type of the `context` object passed to\n * `cache.fetch()` and `cache.memo()`.\n *\n * Keys and values **must not** be `null` or `undefined`.\n *\n * All properties from the options object (with the exception of `max`,\n * `maxSize`, `fetchMethod`, `memoMethod`, `dispose` and `disposeAfter`) are\n * added as normal public members. (The listed options are read-only getters.)\n *\n * Changing any of these will alter the defaults for subsequent method calls.\n */\nclass LRUCache {\n    // options that cannot be changed without disaster\n    #max;\n    #maxSize;\n    #dispose;\n    #disposeAfter;\n    #fetchMethod;\n    #memoMethod;\n    /**\n     * {@link LRUCache.OptionsBase.ttl}\n     */\n    ttl;\n    /**\n     * {@link LRUCache.OptionsBase.ttlResolution}\n     */\n    ttlResolution;\n    /**\n     * {@link LRUCache.OptionsBase.ttlAutopurge}\n     */\n    ttlAutopurge;\n    /**\n     * {@link LRUCache.OptionsBase.updateAgeOnGet}\n     */\n    updateAgeOnGet;\n    /**\n     * {@link LRUCache.OptionsBase.updateAgeOnHas}\n     */\n    updateAgeOnHas;\n    /**\n     * {@link LRUCache.OptionsBase.allowStale}\n     */\n    allowStale;\n    /**\n     * {@link LRUCache.OptionsBase.noDisposeOnSet}\n     */\n    noDisposeOnSet;\n    /**\n     * {@link LRUCache.OptionsBase.noUpdateTTL}\n     */\n    noUpdateTTL;\n    /**\n     * {@link LRUCache.OptionsBase.maxEntrySize}\n     */\n    maxEntrySize;\n    /**\n     * {@link LRUCache.OptionsBase.sizeCalculation}\n     */\n    sizeCalculation;\n    /**\n     * {@link LRUCache.OptionsBase.noDeleteOnFetchRejection}\n     */\n    noDeleteOnFetchRejection;\n    /**\n     * {@link LRUCache.OptionsBase.noDeleteOnStaleGet}\n     */\n    noDeleteOnStaleGet;\n    /**\n     * {@link LRUCache.OptionsBase.allowStaleOnFetchAbort}\n     */\n    allowStaleOnFetchAbort;\n    /**\n     * {@link LRUCache.OptionsBase.allowStaleOnFetchRejection}\n     */\n    allowStaleOnFetchRejection;\n    /**\n     * {@link LRUCache.OptionsBase.ignoreFetchAbort}\n     */\n    ignoreFetchAbort;\n    // computed properties\n    #size;\n    #calculatedSize;\n    #keyMap;\n    #keyList;\n    #valList;\n    #next;\n    #prev;\n    #head;\n    #tail;\n    #free;\n    #disposed;\n    #sizes;\n    #starts;\n    #ttls;\n    #hasDispose;\n    #hasFetchMethod;\n    #hasDisposeAfter;\n    /**\n     * Do not call this method unless you need to inspect the\n     * inner workings of the cache.  If anything returned by this\n     * object is modified in any way, strange breakage may occur.\n     *\n     * These fields are private for a reason!\n     *\n     * @internal\n     */\n    static unsafeExposeInternals(c) {\n        return {\n            // properties\n            starts: c.#starts,\n            ttls: c.#ttls,\n            sizes: c.#sizes,\n            keyMap: c.#keyMap,\n            keyList: c.#keyList,\n            valList: c.#valList,\n            next: c.#next,\n            prev: c.#prev,\n            get head() {\n                return c.#head;\n            },\n            get tail() {\n                return c.#tail;\n            },\n            free: c.#free,\n            // methods\n            isBackgroundFetch: (p) => c.#isBackgroundFetch(p),\n            backgroundFetch: (k, index, options, context) => c.#backgroundFetch(k, index, options, context),\n            moveToTail: (index) => c.#moveToTail(index),\n            indexes: (options) => c.#indexes(options),\n            rindexes: (options) => c.#rindexes(options),\n            isStale: (index) => c.#isStale(index),\n        };\n    }\n    // Protected read-only members\n    /**\n     * {@link LRUCache.OptionsBase.max} (read-only)\n     */\n    get max() {\n        return this.#max;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.maxSize} (read-only)\n     */\n    get maxSize() {\n        return this.#maxSize;\n    }\n    /**\n     * The total computed size of items in the cache (read-only)\n     */\n    get calculatedSize() {\n        return this.#calculatedSize;\n    }\n    /**\n     * The number of items stored in the cache (read-only)\n     */\n    get size() {\n        return this.#size;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.fetchMethod} (read-only)\n     */\n    get fetchMethod() {\n        return this.#fetchMethod;\n    }\n    get memoMethod() {\n        return this.#memoMethod;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.dispose} (read-only)\n     */\n    get dispose() {\n        return this.#dispose;\n    }\n    /**\n     * {@link LRUCache.OptionsBase.disposeAfter} (read-only)\n     */\n    get disposeAfter() {\n        return this.#disposeAfter;\n    }\n    constructor(options) {\n        const { max = 0, ttl, ttlResolution = 1, ttlAutopurge, updateAgeOnGet, updateAgeOnHas, allowStale, dispose, disposeAfter, noDisposeOnSet, noUpdateTTL, maxSize = 0, maxEntrySize = 0, sizeCalculation, fetchMethod, memoMethod, noDeleteOnFetchRejection, noDeleteOnStaleGet, allowStaleOnFetchRejection, allowStaleOnFetchAbort, ignoreFetchAbort, } = options;\n        if (max !== 0 && !isPosInt(max)) {\n            throw new TypeError('max option must be a nonnegative integer');\n        }\n        const UintArray = max ? getUintArray(max) : Array;\n        if (!UintArray) {\n            throw new Error('invalid max value: ' + max);\n        }\n        this.#max = max;\n        this.#maxSize = maxSize;\n        this.maxEntrySize = maxEntrySize || this.#maxSize;\n        this.sizeCalculation = sizeCalculation;\n        if (this.sizeCalculation) {\n            if (!this.#maxSize && !this.maxEntrySize) {\n                throw new TypeError('cannot set sizeCalculation without setting maxSize or maxEntrySize');\n            }\n            if (typeof this.sizeCalculation !== 'function') {\n                throw new TypeError('sizeCalculation set to non-function');\n            }\n        }\n        if (memoMethod !== undefined &&\n            typeof memoMethod !== 'function') {\n            throw new TypeError('memoMethod must be a function if defined');\n        }\n        this.#memoMethod = memoMethod;\n        if (fetchMethod !== undefined &&\n            typeof fetchMethod !== 'function') {\n            throw new TypeError('fetchMethod must be a function if specified');\n        }\n        this.#fetchMethod = fetchMethod;\n        this.#hasFetchMethod = !!fetchMethod;\n        this.#keyMap = new Map();\n        this.#keyList = new Array(max).fill(undefined);\n        this.#valList = new Array(max).fill(undefined);\n        this.#next = new UintArray(max);\n        this.#prev = new UintArray(max);\n        this.#head = 0;\n        this.#tail = 0;\n        this.#free = Stack.create(max);\n        this.#size = 0;\n        this.#calculatedSize = 0;\n        if (typeof dispose === 'function') {\n            this.#dispose = dispose;\n        }\n        if (typeof disposeAfter === 'function') {\n            this.#disposeAfter = disposeAfter;\n            this.#disposed = [];\n        }\n        else {\n            this.#disposeAfter = undefined;\n            this.#disposed = undefined;\n        }\n        this.#hasDispose = !!this.#dispose;\n        this.#hasDisposeAfter = !!this.#disposeAfter;\n        this.noDisposeOnSet = !!noDisposeOnSet;\n        this.noUpdateTTL = !!noUpdateTTL;\n        this.noDeleteOnFetchRejection = !!noDeleteOnFetchRejection;\n        this.allowStaleOnFetchRejection = !!allowStaleOnFetchRejection;\n        this.allowStaleOnFetchAbort = !!allowStaleOnFetchAbort;\n        this.ignoreFetchAbort = !!ignoreFetchAbort;\n        // NB: maxEntrySize is set to maxSize if it's set\n        if (this.maxEntrySize !== 0) {\n            if (this.#maxSize !== 0) {\n                if (!isPosInt(this.#maxSize)) {\n                    throw new TypeError('maxSize must be a positive integer if specified');\n                }\n            }\n            if (!isPosInt(this.maxEntrySize)) {\n                throw new TypeError('maxEntrySize must be a positive integer if specified');\n            }\n            this.#initializeSizeTracking();\n        }\n        this.allowStale = !!allowStale;\n        this.noDeleteOnStaleGet = !!noDeleteOnStaleGet;\n        this.updateAgeOnGet = !!updateAgeOnGet;\n        this.updateAgeOnHas = !!updateAgeOnHas;\n        this.ttlResolution =\n            isPosInt(ttlResolution) || ttlResolution === 0\n                ? ttlResolution\n                : 1;\n        this.ttlAutopurge = !!ttlAutopurge;\n        this.ttl = ttl || 0;\n        if (this.ttl) {\n            if (!isPosInt(this.ttl)) {\n                throw new TypeError('ttl must be a positive integer if specified');\n            }\n            this.#initializeTTLTracking();\n        }\n        // do not allow completely unbounded caches\n        if (this.#max === 0 && this.ttl === 0 && this.#maxSize === 0) {\n            throw new TypeError('At least one of max, maxSize, or ttl is required');\n        }\n        if (!this.ttlAutopurge && !this.#max && !this.#maxSize) {\n            const code = 'LRU_CACHE_UNBOUNDED';\n            if (shouldWarn(code)) {\n                warned.add(code);\n                const msg = 'TTL caching without ttlAutopurge, max, or maxSize can ' +\n                    'result in unbounded memory consumption.';\n                emitWarning(msg, 'UnboundedCacheWarning', code, LRUCache);\n            }\n        }\n    }\n    /**\n     * Return the number of ms left in the item's TTL. If item is not in cache,\n     * returns `0`. Returns `Infinity` if item is in cache without a defined TTL.\n     */\n    getRemainingTTL(key) {\n        return this.#keyMap.has(key) ? Infinity : 0;\n    }\n    #initializeTTLTracking() {\n        const ttls = new ZeroArray(this.#max);\n        const starts = new ZeroArray(this.#max);\n        this.#ttls = ttls;\n        this.#starts = starts;\n        this.#setItemTTL = (index, ttl, start = perf.now()) => {\n            starts[index] = ttl !== 0 ? start : 0;\n            ttls[index] = ttl;\n            if (ttl !== 0 && this.ttlAutopurge) {\n                const t = setTimeout(() => {\n                    if (this.#isStale(index)) {\n                        this.#delete(this.#keyList[index], 'expire');\n                    }\n                }, ttl + 1);\n                // unref() not supported on all platforms\n                /* c8 ignore start */\n                if (t.unref) {\n                    t.unref();\n                }\n                /* c8 ignore stop */\n            }\n        };\n        this.#updateItemAge = index => {\n            starts[index] = ttls[index] !== 0 ? perf.now() : 0;\n        };\n        this.#statusTTL = (status, index) => {\n            if (ttls[index]) {\n                const ttl = ttls[index];\n                const start = starts[index];\n                /* c8 ignore next */\n                if (!ttl || !start)\n                    return;\n                status.ttl = ttl;\n                status.start = start;\n                status.now = cachedNow || getNow();\n                const age = status.now - start;\n                status.remainingTTL = ttl - age;\n            }\n        };\n        // debounce calls to perf.now() to 1s so we're not hitting\n        // that costly call repeatedly.\n        let cachedNow = 0;\n        const getNow = () => {\n            const n = perf.now();\n            if (this.ttlResolution > 0) {\n                cachedNow = n;\n                const t = setTimeout(() => (cachedNow = 0), this.ttlResolution);\n                // not available on all platforms\n                /* c8 ignore start */\n                if (t.unref) {\n                    t.unref();\n                }\n                /* c8 ignore stop */\n            }\n            return n;\n        };\n        this.getRemainingTTL = key => {\n            const index = this.#keyMap.get(key);\n            if (index === undefined) {\n                return 0;\n            }\n            const ttl = ttls[index];\n            const start = starts[index];\n            if (!ttl || !start) {\n                return Infinity;\n            }\n            const age = (cachedNow || getNow()) - start;\n            return ttl - age;\n        };\n        this.#isStale = index => {\n            const s = starts[index];\n            const t = ttls[index];\n            return !!t && !!s && (cachedNow || getNow()) - s > t;\n        };\n    }\n    // conditionally set private methods related to TTL\n    #updateItemAge = () => { };\n    #statusTTL = () => { };\n    #setItemTTL = () => { };\n    /* c8 ignore stop */\n    #isStale = () => false;\n    #initializeSizeTracking() {\n        const sizes = new ZeroArray(this.#max);\n        this.#calculatedSize = 0;\n        this.#sizes = sizes;\n        this.#removeItemSize = index => {\n            this.#calculatedSize -= sizes[index];\n            sizes[index] = 0;\n        };\n        this.#requireSize = (k, v, size, sizeCalculation) => {\n            // provisionally accept background fetches.\n            // actual value size will be checked when they return.\n            if (this.#isBackgroundFetch(v)) {\n                return 0;\n            }\n            if (!isPosInt(size)) {\n                if (sizeCalculation) {\n                    if (typeof sizeCalculation !== 'function') {\n                        throw new TypeError('sizeCalculation must be a function');\n                    }\n                    size = sizeCalculation(v, k);\n                    if (!isPosInt(size)) {\n                        throw new TypeError('sizeCalculation return invalid (expect positive integer)');\n                    }\n                }\n                else {\n                    throw new TypeError('invalid size value (must be positive integer). ' +\n                        'When maxSize or maxEntrySize is used, sizeCalculation ' +\n                        'or size must be set.');\n                }\n            }\n            return size;\n        };\n        this.#addItemSize = (index, size, status) => {\n            sizes[index] = size;\n            if (this.#maxSize) {\n                const maxSize = this.#maxSize - sizes[index];\n                while (this.#calculatedSize > maxSize) {\n                    this.#evict(true);\n                }\n            }\n            this.#calculatedSize += sizes[index];\n            if (status) {\n                status.entrySize = size;\n                status.totalCalculatedSize = this.#calculatedSize;\n            }\n        };\n    }\n    #removeItemSize = _i => { };\n    #addItemSize = (_i, _s, _st) => { };\n    #requireSize = (_k, _v, size, sizeCalculation) => {\n        if (size || sizeCalculation) {\n            throw new TypeError('cannot set size without setting maxSize or maxEntrySize on cache');\n        }\n        return 0;\n    };\n    *#indexes({ allowStale = this.allowStale } = {}) {\n        if (this.#size) {\n            for (let i = this.#tail; true;) {\n                if (!this.#isValidIndex(i)) {\n                    break;\n                }\n                if (allowStale || !this.#isStale(i)) {\n                    yield i;\n                }\n                if (i === this.#head) {\n                    break;\n                }\n                else {\n                    i = this.#prev[i];\n                }\n            }\n        }\n    }\n    *#rindexes({ allowStale = this.allowStale } = {}) {\n        if (this.#size) {\n            for (let i = this.#head; true;) {\n                if (!this.#isValidIndex(i)) {\n                    break;\n                }\n                if (allowStale || !this.#isStale(i)) {\n                    yield i;\n                }\n                if (i === this.#tail) {\n                    break;\n                }\n                else {\n                    i = this.#next[i];\n                }\n            }\n        }\n    }\n    #isValidIndex(index) {\n        return (index !== undefined &&\n            this.#keyMap.get(this.#keyList[index]) === index);\n    }\n    /**\n     * Return a generator yielding `[key, value]` pairs,\n     * in order from most recently used to least recently used.\n     */\n    *entries() {\n        for (const i of this.#indexes()) {\n            if (this.#valList[i] !== undefined &&\n                this.#keyList[i] !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield [this.#keyList[i], this.#valList[i]];\n            }\n        }\n    }\n    /**\n     * Inverse order version of {@link LRUCache.entries}\n     *\n     * Return a generator yielding `[key, value]` pairs,\n     * in order from least recently used to most recently used.\n     */\n    *rentries() {\n        for (const i of this.#rindexes()) {\n            if (this.#valList[i] !== undefined &&\n                this.#keyList[i] !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield [this.#keyList[i], this.#valList[i]];\n            }\n        }\n    }\n    /**\n     * Return a generator yielding the keys in the cache,\n     * in order from most recently used to least recently used.\n     */\n    *keys() {\n        for (const i of this.#indexes()) {\n            const k = this.#keyList[i];\n            if (k !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield k;\n            }\n        }\n    }\n    /**\n     * Inverse order version of {@link LRUCache.keys}\n     *\n     * Return a generator yielding the keys in the cache,\n     * in order from least recently used to most recently used.\n     */\n    *rkeys() {\n        for (const i of this.#rindexes()) {\n            const k = this.#keyList[i];\n            if (k !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield k;\n            }\n        }\n    }\n    /**\n     * Return a generator yielding the values in the cache,\n     * in order from most recently used to least recently used.\n     */\n    *values() {\n        for (const i of this.#indexes()) {\n            const v = this.#valList[i];\n            if (v !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield this.#valList[i];\n            }\n        }\n    }\n    /**\n     * Inverse order version of {@link LRUCache.values}\n     *\n     * Return a generator yielding the values in the cache,\n     * in order from least recently used to most recently used.\n     */\n    *rvalues() {\n        for (const i of this.#rindexes()) {\n            const v = this.#valList[i];\n            if (v !== undefined &&\n                !this.#isBackgroundFetch(this.#valList[i])) {\n                yield this.#valList[i];\n            }\n        }\n    }\n    /**\n     * Iterating over the cache itself yields the same results as\n     * {@link LRUCache.entries}\n     */\n    [Symbol.iterator]() {\n        return this.entries();\n    }\n    /**\n     * A String value that is used in the creation of the default string\n     * description of an object. Called by the built-in method\n     * `Object.prototype.toString`.\n     */\n    [Symbol.toStringTag] = 'LRUCache';\n    /**\n     * Find a value for which the supplied fn method returns a truthy value,\n     * similar to `Array.find()`. fn is called as `fn(value, key, cache)`.\n     */\n    find(fn, getOptions = {}) {\n        for (const i of this.#indexes()) {\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined)\n                continue;\n            if (fn(value, this.#keyList[i], this)) {\n                return this.get(this.#keyList[i], getOptions);\n            }\n        }\n    }\n    /**\n     * Call the supplied function on each item in the cache, in order from most\n     * recently used to least recently used.\n     *\n     * `fn` is called as `fn(value, key, cache)`.\n     *\n     * If `thisp` is provided, function will be called in the `this`-context of\n     * the provided object, or the cache if no `thisp` object is provided.\n     *\n     * Does not update age or recenty of use, or iterate over stale values.\n     */\n    forEach(fn, thisp = this) {\n        for (const i of this.#indexes()) {\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined)\n                continue;\n            fn.call(thisp, value, this.#keyList[i], this);\n        }\n    }\n    /**\n     * The same as {@link LRUCache.forEach} but items are iterated over in\n     * reverse order.  (ie, less recently used items are iterated over first.)\n     */\n    rforEach(fn, thisp = this) {\n        for (const i of this.#rindexes()) {\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined)\n                continue;\n            fn.call(thisp, value, this.#keyList[i], this);\n        }\n    }\n    /**\n     * Delete any stale entries. Returns true if anything was removed,\n     * false otherwise.\n     */\n    purgeStale() {\n        let deleted = false;\n        for (const i of this.#rindexes({ allowStale: true })) {\n            if (this.#isStale(i)) {\n                this.#delete(this.#keyList[i], 'expire');\n                deleted = true;\n            }\n        }\n        return deleted;\n    }\n    /**\n     * Get the extended info about a given entry, to get its value, size, and\n     * TTL info simultaneously. Returns `undefined` if the key is not present.\n     *\n     * Unlike {@link LRUCache#dump}, which is designed to be portable and survive\n     * serialization, the `start` value is always the current timestamp, and the\n     * `ttl` is a calculated remaining time to live (negative if expired).\n     *\n     * Always returns stale values, if their info is found in the cache, so be\n     * sure to check for expirations (ie, a negative {@link LRUCache.Entry#ttl})\n     * if relevant.\n     */\n    info(key) {\n        const i = this.#keyMap.get(key);\n        if (i === undefined)\n            return undefined;\n        const v = this.#valList[i];\n        const value = this.#isBackgroundFetch(v)\n            ? v.__staleWhileFetching\n            : v;\n        if (value === undefined)\n            return undefined;\n        const entry = { value };\n        if (this.#ttls && this.#starts) {\n            const ttl = this.#ttls[i];\n            const start = this.#starts[i];\n            if (ttl && start) {\n                const remain = ttl - (perf.now() - start);\n                entry.ttl = remain;\n                entry.start = Date.now();\n            }\n        }\n        if (this.#sizes) {\n            entry.size = this.#sizes[i];\n        }\n        return entry;\n    }\n    /**\n     * Return an array of [key, {@link LRUCache.Entry}] tuples which can be\n     * passed to {@link LRLUCache#load}.\n     *\n     * The `start` fields are calculated relative to a portable `Date.now()`\n     * timestamp, even if `performance.now()` is available.\n     *\n     * Stale entries are always included in the `dump`, even if\n     * {@link LRUCache.OptionsBase.allowStale} is false.\n     *\n     * Note: this returns an actual array, not a generator, so it can be more\n     * easily passed around.\n     */\n    dump() {\n        const arr = [];\n        for (const i of this.#indexes({ allowStale: true })) {\n            const key = this.#keyList[i];\n            const v = this.#valList[i];\n            const value = this.#isBackgroundFetch(v)\n                ? v.__staleWhileFetching\n                : v;\n            if (value === undefined || key === undefined)\n                continue;\n            const entry = { value };\n            if (this.#ttls && this.#starts) {\n                entry.ttl = this.#ttls[i];\n                // always dump the start relative to a portable timestamp\n                // it's ok for this to be a bit slow, it's a rare operation.\n                const age = perf.now() - this.#starts[i];\n                entry.start = Math.floor(Date.now() - age);\n            }\n            if (this.#sizes) {\n                entry.size = this.#sizes[i];\n            }\n            arr.unshift([key, entry]);\n        }\n        return arr;\n    }\n    /**\n     * Reset the cache and load in the items in entries in the order listed.\n     *\n     * The shape of the resulting cache may be different if the same options are\n     * not used in both caches.\n     *\n     * The `start` fields are assumed to be calculated relative to a portable\n     * `Date.now()` timestamp, even if `performance.now()` is available.\n     */\n    load(arr) {\n        this.clear();\n        for (const [key, entry] of arr) {\n            if (entry.start) {\n                // entry.start is a portable timestamp, but we may be using\n                // node's performance.now(), so calculate the offset, so that\n                // we get the intended remaining TTL, no matter how long it's\n                // been on ice.\n                //\n                // it's ok for this to be a bit slow, it's a rare operation.\n                const age = Date.now() - entry.start;\n                entry.start = perf.now() - age;\n            }\n            this.set(key, entry.value, entry);\n        }\n    }\n    /**\n     * Add a value to the cache.\n     *\n     * Note: if `undefined` is specified as a value, this is an alias for\n     * {@link LRUCache#delete}\n     *\n     * Fields on the {@link LRUCache.SetOptions} options param will override\n     * their corresponding values in the constructor options for the scope\n     * of this single `set()` operation.\n     *\n     * If `start` is provided, then that will set the effective start\n     * time for the TTL calculation. Note that this must be a previous\n     * value of `performance.now()` if supported, or a previous value of\n     * `Date.now()` if not.\n     *\n     * Options object may also include `size`, which will prevent\n     * calling the `sizeCalculation` function and just use the specified\n     * number if it is a positive integer, and `noDisposeOnSet` which\n     * will prevent calling a `dispose` function in the case of\n     * overwrites.\n     *\n     * If the `size` (or return value of `sizeCalculation`) for a given\n     * entry is greater than `maxEntrySize`, then the item will not be\n     * added to the cache.\n     *\n     * Will update the recency of the entry.\n     *\n     * If the value is `undefined`, then this is an alias for\n     * `cache.delete(key)`. `undefined` is never stored in the cache.\n     */\n    set(k, v, setOptions = {}) {\n        if (v === undefined) {\n            this.delete(k);\n            return this;\n        }\n        const { ttl = this.ttl, start, noDisposeOnSet = this.noDisposeOnSet, sizeCalculation = this.sizeCalculation, status, } = setOptions;\n        let { noUpdateTTL = this.noUpdateTTL } = setOptions;\n        const size = this.#requireSize(k, v, setOptions.size || 0, sizeCalculation);\n        // if the item doesn't fit, don't do anything\n        // NB: maxEntrySize set to maxSize by default\n        if (this.maxEntrySize && size > this.maxEntrySize) {\n            if (status) {\n                status.set = 'miss';\n                status.maxEntrySizeExceeded = true;\n            }\n            // have to delete, in case something is there already.\n            this.#delete(k, 'set');\n            return this;\n        }\n        let index = this.#size === 0 ? undefined : this.#keyMap.get(k);\n        if (index === undefined) {\n            // addition\n            index = (this.#size === 0\n                ? this.#tail\n                : this.#free.length !== 0\n                    ? this.#free.pop()\n                    : this.#size === this.#max\n                        ? this.#evict(false)\n                        : this.#size);\n            this.#keyList[index] = k;\n            this.#valList[index] = v;\n            this.#keyMap.set(k, index);\n            this.#next[this.#tail] = index;\n            this.#prev[index] = this.#tail;\n            this.#tail = index;\n            this.#size++;\n            this.#addItemSize(index, size, status);\n            if (status)\n                status.set = 'add';\n            noUpdateTTL = false;\n        }\n        else {\n            // update\n            this.#moveToTail(index);\n            const oldVal = this.#valList[index];\n            if (v !== oldVal) {\n                if (this.#hasFetchMethod && this.#isBackgroundFetch(oldVal)) {\n                    oldVal.__abortController.abort(new Error('replaced'));\n                    const { __staleWhileFetching: s } = oldVal;\n                    if (s !== undefined && !noDisposeOnSet) {\n                        if (this.#hasDispose) {\n                            this.#dispose?.(s, k, 'set');\n                        }\n                        if (this.#hasDisposeAfter) {\n                            this.#disposed?.push([s, k, 'set']);\n                        }\n                    }\n                }\n                else if (!noDisposeOnSet) {\n                    if (this.#hasDispose) {\n                        this.#dispose?.(oldVal, k, 'set');\n                    }\n                    if (this.#hasDisposeAfter) {\n                        this.#disposed?.push([oldVal, k, 'set']);\n                    }\n                }\n                this.#removeItemSize(index);\n                this.#addItemSize(index, size, status);\n                this.#valList[index] = v;\n                if (status) {\n                    status.set = 'replace';\n                    const oldValue = oldVal && this.#isBackgroundFetch(oldVal)\n                        ? oldVal.__staleWhileFetching\n                        : oldVal;\n                    if (oldValue !== undefined)\n                        status.oldValue = oldValue;\n                }\n            }\n            else if (status) {\n                status.set = 'update';\n            }\n        }\n        if (ttl !== 0 && !this.#ttls) {\n            this.#initializeTTLTracking();\n        }\n        if (this.#ttls) {\n            if (!noUpdateTTL) {\n                this.#setItemTTL(index, ttl, start);\n            }\n            if (status)\n                this.#statusTTL(status, index);\n        }\n        if (!noDisposeOnSet && this.#hasDisposeAfter && this.#disposed) {\n            const dt = this.#disposed;\n            let task;\n            while ((task = dt?.shift())) {\n                this.#disposeAfter?.(...task);\n            }\n        }\n        return this;\n    }\n    /**\n     * Evict the least recently used item, returning its value or\n     * `undefined` if cache is empty.\n     */\n    pop() {\n        try {\n            while (this.#size) {\n                const val = this.#valList[this.#head];\n                this.#evict(true);\n                if (this.#isBackgroundFetch(val)) {\n                    if (val.__staleWhileFetching) {\n                        return val.__staleWhileFetching;\n                    }\n                }\n                else if (val !== undefined) {\n                    return val;\n                }\n            }\n        }\n        finally {\n            if (this.#hasDisposeAfter && this.#disposed) {\n                const dt = this.#disposed;\n                let task;\n                while ((task = dt?.shift())) {\n                    this.#disposeAfter?.(...task);\n                }\n            }\n        }\n    }\n    #evict(free) {\n        const head = this.#head;\n        const k = this.#keyList[head];\n        const v = this.#valList[head];\n        if (this.#hasFetchMethod && this.#isBackgroundFetch(v)) {\n            v.__abortController.abort(new Error('evicted'));\n        }\n        else if (this.#hasDispose || this.#hasDisposeAfter) {\n            if (this.#hasDispose) {\n                this.#dispose?.(v, k, 'evict');\n            }\n            if (this.#hasDisposeAfter) {\n                this.#disposed?.push([v, k, 'evict']);\n            }\n        }\n        this.#removeItemSize(head);\n        // if we aren't about to use the index, then null these out\n        if (free) {\n            this.#keyList[head] = undefined;\n            this.#valList[head] = undefined;\n            this.#free.push(head);\n        }\n        if (this.#size === 1) {\n            this.#head = this.#tail = 0;\n            this.#free.length = 0;\n        }\n        else {\n            this.#head = this.#next[head];\n        }\n        this.#keyMap.delete(k);\n        this.#size--;\n        return head;\n    }\n    /**\n     * Check if a key is in the cache, without updating the recency of use.\n     * Will return false if the item is stale, even though it is technically\n     * in the cache.\n     *\n     * Check if a key is in the cache, without updating the recency of\n     * use. Age is updated if {@link LRUCache.OptionsBase.updateAgeOnHas} is set\n     * to `true` in either the options or the constructor.\n     *\n     * Will return `false` if the item is stale, even though it is technically in\n     * the cache. The difference can be determined (if it matters) by using a\n     * `status` argument, and inspecting the `has` field.\n     *\n     * Will not update item age unless\n     * {@link LRUCache.OptionsBase.updateAgeOnHas} is set.\n     */\n    has(k, hasOptions = {}) {\n        const { updateAgeOnHas = this.updateAgeOnHas, status } = hasOptions;\n        const index = this.#keyMap.get(k);\n        if (index !== undefined) {\n            const v = this.#valList[index];\n            if (this.#isBackgroundFetch(v) &&\n                v.__staleWhileFetching === undefined) {\n                return false;\n            }\n            if (!this.#isStale(index)) {\n                if (updateAgeOnHas) {\n                    this.#updateItemAge(index);\n                }\n                if (status) {\n                    status.has = 'hit';\n                    this.#statusTTL(status, index);\n                }\n                return true;\n            }\n            else if (status) {\n                status.has = 'stale';\n                this.#statusTTL(status, index);\n            }\n        }\n        else if (status) {\n            status.has = 'miss';\n        }\n        return false;\n    }\n    /**\n     * Like {@link LRUCache#get} but doesn't update recency or delete stale\n     * items.\n     *\n     * Returns `undefined` if the item is stale, unless\n     * {@link LRUCache.OptionsBase.allowStale} is set.\n     */\n    peek(k, peekOptions = {}) {\n        const { allowStale = this.allowStale } = peekOptions;\n        const index = this.#keyMap.get(k);\n        if (index === undefined ||\n            (!allowStale && this.#isStale(index))) {\n            return;\n        }\n        const v = this.#valList[index];\n        // either stale and allowed, or forcing a refresh of non-stale value\n        return this.#isBackgroundFetch(v) ? v.__staleWhileFetching : v;\n    }\n    #backgroundFetch(k, index, options, context) {\n        const v = index === undefined ? undefined : this.#valList[index];\n        if (this.#isBackgroundFetch(v)) {\n            return v;\n        }\n        const ac = new AC();\n        const { signal } = options;\n        // when/if our AC signals, then stop listening to theirs.\n        signal?.addEventListener('abort', () => ac.abort(signal.reason), {\n            signal: ac.signal,\n        });\n        const fetchOpts = {\n            signal: ac.signal,\n            options,\n            context,\n        };\n        const cb = (v, updateCache = false) => {\n            const { aborted } = ac.signal;\n            const ignoreAbort = options.ignoreFetchAbort && v !== undefined;\n            if (options.status) {\n                if (aborted && !updateCache) {\n                    options.status.fetchAborted = true;\n                    options.status.fetchError = ac.signal.reason;\n                    if (ignoreAbort)\n                        options.status.fetchAbortIgnored = true;\n                }\n                else {\n                    options.status.fetchResolved = true;\n                }\n            }\n            if (aborted && !ignoreAbort && !updateCache) {\n                return fetchFail(ac.signal.reason);\n            }\n            // either we didn't abort, and are still here, or we did, and ignored\n            const bf = p;\n            if (this.#valList[index] === p) {\n                if (v === undefined) {\n                    if (bf.__staleWhileFetching) {\n                        this.#valList[index] = bf.__staleWhileFetching;\n                    }\n                    else {\n                        this.#delete(k, 'fetch');\n                    }\n                }\n                else {\n                    if (options.status)\n                        options.status.fetchUpdated = true;\n                    this.set(k, v, fetchOpts.options);\n                }\n            }\n            return v;\n        };\n        const eb = (er) => {\n            if (options.status) {\n                options.status.fetchRejected = true;\n                options.status.fetchError = er;\n            }\n            return fetchFail(er);\n        };\n        const fetchFail = (er) => {\n            const { aborted } = ac.signal;\n            const allowStaleAborted = aborted && options.allowStaleOnFetchAbort;\n            const allowStale = allowStaleAborted || options.allowStaleOnFetchRejection;\n            const noDelete = allowStale || options.noDeleteOnFetchRejection;\n            const bf = p;\n            if (this.#valList[index] === p) {\n                // if we allow stale on fetch rejections, then we need to ensure that\n                // the stale value is not removed from the cache when the fetch fails.\n                const del = !noDelete || bf.__staleWhileFetching === undefined;\n                if (del) {\n                    this.#delete(k, 'fetch');\n                }\n                else if (!allowStaleAborted) {\n                    // still replace the *promise* with the stale value,\n                    // since we are done with the promise at this point.\n                    // leave it untouched if we're still waiting for an\n                    // aborted background fetch that hasn't yet returned.\n                    this.#valList[index] = bf.__staleWhileFetching;\n                }\n            }\n            if (allowStale) {\n                if (options.status && bf.__staleWhileFetching !== undefined) {\n                    options.status.returnedStale = true;\n                }\n                return bf.__staleWhileFetching;\n            }\n            else if (bf.__returned === bf) {\n                throw er;\n            }\n        };\n        const pcall = (res, rej) => {\n            const fmp = this.#fetchMethod?.(k, v, fetchOpts);\n            if (fmp && fmp instanceof Promise) {\n                fmp.then(v => res(v === undefined ? undefined : v), rej);\n            }\n            // ignored, we go until we finish, regardless.\n            // defer check until we are actually aborting,\n            // so fetchMethod can override.\n            ac.signal.addEventListener('abort', () => {\n                if (!options.ignoreFetchAbort ||\n                    options.allowStaleOnFetchAbort) {\n                    res(undefined);\n                    // when it eventually resolves, update the cache.\n                    if (options.allowStaleOnFetchAbort) {\n                        res = v => cb(v, true);\n                    }\n                }\n            });\n        };\n        if (options.status)\n            options.status.fetchDispatched = true;\n        const p = new Promise(pcall).then(cb, eb);\n        const bf = Object.assign(p, {\n            __abortController: ac,\n            __staleWhileFetching: v,\n            __returned: undefined,\n        });\n        if (index === undefined) {\n            // internal, don't expose status.\n            this.set(k, bf, { ...fetchOpts.options, status: undefined });\n            index = this.#keyMap.get(k);\n        }\n        else {\n            this.#valList[index] = bf;\n        }\n        return bf;\n    }\n    #isBackgroundFetch(p) {\n        if (!this.#hasFetchMethod)\n            return false;\n        const b = p;\n        return (!!b &&\n            b instanceof Promise &&\n            b.hasOwnProperty('__staleWhileFetching') &&\n            b.__abortController instanceof AC);\n    }\n    async fetch(k, fetchOptions = {}) {\n        const { \n        // get options\n        allowStale = this.allowStale, updateAgeOnGet = this.updateAgeOnGet, noDeleteOnStaleGet = this.noDeleteOnStaleGet, \n        // set options\n        ttl = this.ttl, noDisposeOnSet = this.noDisposeOnSet, size = 0, sizeCalculation = this.sizeCalculation, noUpdateTTL = this.noUpdateTTL, \n        // fetch exclusive options\n        noDeleteOnFetchRejection = this.noDeleteOnFetchRejection, allowStaleOnFetchRejection = this.allowStaleOnFetchRejection, ignoreFetchAbort = this.ignoreFetchAbort, allowStaleOnFetchAbort = this.allowStaleOnFetchAbort, context, forceRefresh = false, status, signal, } = fetchOptions;\n        if (!this.#hasFetchMethod) {\n            if (status)\n                status.fetch = 'get';\n            return this.get(k, {\n                allowStale,\n                updateAgeOnGet,\n                noDeleteOnStaleGet,\n                status,\n            });\n        }\n        const options = {\n            allowStale,\n            updateAgeOnGet,\n            noDeleteOnStaleGet,\n            ttl,\n            noDisposeOnSet,\n            size,\n            sizeCalculation,\n            noUpdateTTL,\n            noDeleteOnFetchRejection,\n            allowStaleOnFetchRejection,\n            allowStaleOnFetchAbort,\n            ignoreFetchAbort,\n            status,\n            signal,\n        };\n        let index = this.#keyMap.get(k);\n        if (index === undefined) {\n            if (status)\n                status.fetch = 'miss';\n            const p = this.#backgroundFetch(k, index, options, context);\n            return (p.__returned = p);\n        }\n        else {\n            // in cache, maybe already fetching\n            const v = this.#valList[index];\n            if (this.#isBackgroundFetch(v)) {\n                const stale = allowStale && v.__staleWhileFetching !== undefined;\n                if (status) {\n                    status.fetch = 'inflight';\n                    if (stale)\n                        status.returnedStale = true;\n                }\n                return stale ? v.__staleWhileFetching : (v.__returned = v);\n            }\n            // if we force a refresh, that means do NOT serve the cached value,\n            // unless we are already in the process of refreshing the cache.\n            const isStale = this.#isStale(index);\n            if (!forceRefresh && !isStale) {\n                if (status)\n                    status.fetch = 'hit';\n                this.#moveToTail(index);\n                if (updateAgeOnGet) {\n                    this.#updateItemAge(index);\n                }\n                if (status)\n                    this.#statusTTL(status, index);\n                return v;\n            }\n            // ok, it is stale or a forced refresh, and not already fetching.\n            // refresh the cache.\n            const p = this.#backgroundFetch(k, index, options, context);\n            const hasStale = p.__staleWhileFetching !== undefined;\n            const staleVal = hasStale && allowStale;\n            if (status) {\n                status.fetch = isStale ? 'stale' : 'refresh';\n                if (staleVal && isStale)\n                    status.returnedStale = true;\n            }\n            return staleVal ? p.__staleWhileFetching : (p.__returned = p);\n        }\n    }\n    async forceFetch(k, fetchOptions = {}) {\n        const v = await this.fetch(k, fetchOptions);\n        if (v === undefined)\n            throw new Error('fetch() returned undefined');\n        return v;\n    }\n    memo(k, memoOptions = {}) {\n        const memoMethod = this.#memoMethod;\n        if (!memoMethod) {\n            throw new Error('no memoMethod provided to constructor');\n        }\n        const { context, forceRefresh, ...options } = memoOptions;\n        const v = this.get(k, options);\n        if (!forceRefresh && v !== undefined)\n            return v;\n        const vv = memoMethod(k, v, {\n            options,\n            context,\n        });\n        this.set(k, vv, options);\n        return vv;\n    }\n    /**\n     * Return a value from the cache. Will update the recency of the cache\n     * entry found.\n     *\n     * If the key is not found, get() will return `undefined`.\n     */\n    get(k, getOptions = {}) {\n        const { allowStale = this.allowStale, updateAgeOnGet = this.updateAgeOnGet, noDeleteOnStaleGet = this.noDeleteOnStaleGet, status, } = getOptions;\n        const index = this.#keyMap.get(k);\n        if (index !== undefined) {\n            const value = this.#valList[index];\n            const fetching = this.#isBackgroundFetch(value);\n            if (status)\n                this.#statusTTL(status, index);\n            if (this.#isStale(index)) {\n                if (status)\n                    status.get = 'stale';\n                // delete only if not an in-flight background fetch\n                if (!fetching) {\n                    if (!noDeleteOnStaleGet) {\n                        this.#delete(k, 'expire');\n                    }\n                    if (status && allowStale)\n                        status.returnedStale = true;\n                    return allowStale ? value : undefined;\n                }\n                else {\n                    if (status &&\n                        allowStale &&\n                        value.__staleWhileFetching !== undefined) {\n                        status.returnedStale = true;\n                    }\n                    return allowStale ? value.__staleWhileFetching : undefined;\n                }\n            }\n            else {\n                if (status)\n                    status.get = 'hit';\n                // if we're currently fetching it, we don't actually have it yet\n                // it's not stale, which means this isn't a staleWhileRefetching.\n                // If it's not stale, and fetching, AND has a __staleWhileFetching\n                // value, then that means the user fetched with {forceRefresh:true},\n                // so it's safe to return that value.\n                if (fetching) {\n                    return value.__staleWhileFetching;\n                }\n                this.#moveToTail(index);\n                if (updateAgeOnGet) {\n                    this.#updateItemAge(index);\n                }\n                return value;\n            }\n        }\n        else if (status) {\n            status.get = 'miss';\n        }\n    }\n    #connect(p, n) {\n        this.#prev[n] = p;\n        this.#next[p] = n;\n    }\n    #moveToTail(index) {\n        // if tail already, nothing to do\n        // if head, move head to next[index]\n        // else\n        //   move next[prev[index]] to next[index] (head has no prev)\n        //   move prev[next[index]] to prev[index]\n        // prev[index] = tail\n        // next[tail] = index\n        // tail = index\n        if (index !== this.#tail) {\n            if (index === this.#head) {\n                this.#head = this.#next[index];\n            }\n            else {\n                this.#connect(this.#prev[index], this.#next[index]);\n            }\n            this.#connect(this.#tail, index);\n            this.#tail = index;\n        }\n    }\n    /**\n     * Deletes a key out of the cache.\n     *\n     * Returns true if the key was deleted, false otherwise.\n     */\n    delete(k) {\n        return this.#delete(k, 'delete');\n    }\n    #delete(k, reason) {\n        let deleted = false;\n        if (this.#size !== 0) {\n            const index = this.#keyMap.get(k);\n            if (index !== undefined) {\n                deleted = true;\n                if (this.#size === 1) {\n                    this.#clear(reason);\n                }\n                else {\n                    this.#removeItemSize(index);\n                    const v = this.#valList[index];\n                    if (this.#isBackgroundFetch(v)) {\n                        v.__abortController.abort(new Error('deleted'));\n                    }\n                    else if (this.#hasDispose || this.#hasDisposeAfter) {\n                        if (this.#hasDispose) {\n                            this.#dispose?.(v, k, reason);\n                        }\n                        if (this.#hasDisposeAfter) {\n                            this.#disposed?.push([v, k, reason]);\n                        }\n                    }\n                    this.#keyMap.delete(k);\n                    this.#keyList[index] = undefined;\n                    this.#valList[index] = undefined;\n                    if (index === this.#tail) {\n                        this.#tail = this.#prev[index];\n                    }\n                    else if (index === this.#head) {\n                        this.#head = this.#next[index];\n                    }\n                    else {\n                        const pi = this.#prev[index];\n                        this.#next[pi] = this.#next[index];\n                        const ni = this.#next[index];\n                        this.#prev[ni] = this.#prev[index];\n                    }\n                    this.#size--;\n                    this.#free.push(index);\n                }\n            }\n        }\n        if (this.#hasDisposeAfter && this.#disposed?.length) {\n            const dt = this.#disposed;\n            let task;\n            while ((task = dt?.shift())) {\n                this.#disposeAfter?.(...task);\n            }\n        }\n        return deleted;\n    }\n    /**\n     * Clear the cache entirely, throwing away all values.\n     */\n    clear() {\n        return this.#clear('delete');\n    }\n    #clear(reason) {\n        for (const index of this.#rindexes({ allowStale: true })) {\n            const v = this.#valList[index];\n            if (this.#isBackgroundFetch(v)) {\n                v.__abortController.abort(new Error('deleted'));\n            }\n            else {\n                const k = this.#keyList[index];\n                if (this.#hasDispose) {\n                    this.#dispose?.(v, k, reason);\n                }\n                if (this.#hasDisposeAfter) {\n                    this.#disposed?.push([v, k, reason]);\n                }\n            }\n        }\n        this.#keyMap.clear();\n        this.#valList.fill(undefined);\n        this.#keyList.fill(undefined);\n        if (this.#ttls && this.#starts) {\n            this.#ttls.fill(0);\n            this.#starts.fill(0);\n        }\n        if (this.#sizes) {\n            this.#sizes.fill(0);\n        }\n        this.#head = 0;\n        this.#tail = 0;\n        this.#free.length = 0;\n        this.#calculatedSize = 0;\n        this.#size = 0;\n        if (this.#hasDisposeAfter && this.#disposed) {\n            const dt = this.#disposed;\n            let task;\n            while ((task = dt?.shift())) {\n                this.#disposeAfter?.(...task);\n            }\n        }\n    }\n}\nexports.LRUCache = LRUCache;\n//# sourceMappingURL=index.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(7927);\n"],"names":["__createBinding","this","Object","create","o","m","k","k2","undefined","desc","getOwnPropertyDescriptor","__esModule","writable","configurable","enumerable","get","defineProperty","__exportStar","exports","p","prototype","hasOwnProperty","call","value","sdk","MixinDeviceBase","ScryptedDeviceBase","index_1","DeviceBase","constructor","nativeId","super","storage","_storage","deviceManager","getDeviceStorage","log","_log","getDeviceLogger","console","_console","getDeviceConsole","createMediaObject","data","mimeType","mediaManager","sourceId","id","getMediaObjectConsole","mediaObject","getMixinConsole","_lazyLoadDeviceState","_deviceState","getDeviceState","onDeviceEvent","eventInterface","eventData","options","_listeners","Set","mixinDevice","mixinDeviceInterfaces","mixinStorageSuffix","mixinDeviceState","systemManager","getDeviceById","mixinProviderNativeId","__rpcproxy_traps_all_properties","createDeviceState","setState","mixinStorageKey","getMixinStorage","onMixinEvent","manageListener","listener","add","release","l","removeListener","_createGetState","state","_createSetState","warn","field","values","ScryptedInterfaceProperty","set","runtimeAPI","pluginRuntimeAPI","e","assign","endpointManager","pluginHostAPI","setScryptedInterfaceDescriptors","TYPES_VERSION","ScryptedInterfaceDescriptors","catch","error","__setModuleDefault","v","__importStar","mod","result","StorageSettings","_1","default","device","settings","hasValue","key","keys","setting","rawGet","getItem","type","JSON","parse","putSetting","ret","getSettings","onGet","entries","s","hide","getItemInternal","push","onPut","mapPut","mapGet","oldValue","putSettingInternal","noStore","removeItem","setItem","stringify","toString","ScryptedInterface","Settings","rawDevice","readDefaultValue","multiple","n","parseFloat","isNaN","parseInt","json","parseValue","persistedDefaultValue","defaultValue","ScryptedMimeTypes","MediaPlayerState","SecuritySystemObstruction","SecuritySystemMode","AirQuality","AirPurifierMode","AirPurifierStatus","ChargeState","LockState","PanTiltZoomMovement","ThermostatMode","TemperatureUnit","FanMode","HumidityMode","ScryptedDeviceType","ScryptedInterfaceMethod","ScryptedDevice","name","methods","properties","ScryptedPlugin","ScryptedPluginRuntime","OnOff","Brightness","ColorSettingTemperature","ColorSettingRgb","ColorSettingHsv","Notifier","StartStop","Pause","Dock","TemperatureSetting","Thermometer","HumiditySensor","Camera","Microphone","AudioVolumeControl","Display","VideoCamera","VideoCameraMask","VideoRecorder","VideoRecorderManagement","PanTiltZoom","EventRecorder","VideoClips","VideoCameraConfiguration","Intercom","Lock","PasswordStore","Scene","Entry","EntrySensor","DeviceProvider","DeviceDiscovery","DeviceCreator","Battery","Charger","Reboot","Refresh","MediaPlayer","Online","BufferConverter","MediaConverter","BinarySensor","TamperSensor","PowerSensor","AudioSensor","MotionSensor","AmbientLightSensor","OccupancySensor","FloodSensor","UltravioletSensor","LuminanceSensor","PositionSensor","SecuritySystem","PM10Sensor","PM25Sensor","VOCSensor","NOXSensor","CO2Sensor","AirQualitySensor","AirPurifier","FilterMaintenance","Readme","OauthClient","MixinProvider","HttpRequestHandler","EngineIOHandler","PushHandler","Program","Scriptable","ObjectTracker","ObjectDetector","ObjectDetection","ObjectDetectionPreview","ObjectDetectionGenerator","HumiditySetting","Fan","RTCSignalingChannel","RTCSignalingClient","LauncherApplication","ScryptedUser","VideoFrameGenerator","StreamService","TTY","TTYSettings","ScryptedSystemDevice","ScryptedDeviceCreator","ScryptedSettings","mqttDevice","ids","ActiveStreamsConfig","BasePlugin","pluginFriendlyName","lastSetMap","autodiscoveryPublished","storageSettings","getBaseSettings","onPluginSwitch","_","enabled","startStop","cameras","title","deviceFilter","people","choices","combobox","start","forEach","person","personIpsKey","ipsKey","currentIps","group","subgroup","mapToStreamInfo","fullIp","split","pop","ip","join","camera","getMqttTopics","cameraId","sensorTopic","sensorInfoTopic","autodiscoveryTopic","processMqttData","info","mqttClient","publish","processCamera","activeStreamsConfigs","isWhitelisted","knownPeople","cameraName","cameraStreamsInformation","filter","knownPeopleResult","activeClients","Number","find","ips","personActiveStreams","some","startsWith","map","isPersonActive","length","streams","flatMap","elem","processMqttAutodiscovery","cameraData","whitelistedCameraIds","includes","config","state_topic","json_attributes_topic","json_attributes_template","payload_on","payload_off","dev","unique_id","getMqttClient","setInterval","async","cameraIds","getSystemState","deviceId","interfaces","peopleData","totalActiveStreams","totalKnownPeopleResult","adaptivePlugin","getDeviceByName","activeStreams","personStreams","mqttHostKey","mqttUsernameKey","mqttPasswordKey","BaseMixin","plugin","baseStorageSettings","debug","immediate","currentMixinsMap","killed","getLogger","deviceConsole","logger","message","optionalParams","now","Date","toLocaleString","props","hideMqtt","pluginEnabled","mqttEnabled","devNotifier","useMqttPluginCredentials","mqttHost","description","placeholder","mqttUsename","mqttPassword","opts","onInit","setupMqttClient","disconnect","mqttSettings","getMixin","mixinGroup","groupKey","mixinKey","int","releaseMixin","mainLogger","prefix","sendNotification","body","param","pushover","priority","host","username","password","topicLastValue","end","forceReconnect","_connect","client","connectAsync","mqttPathmame","rejectUnauthorized","reschedulePings","on","setMaxListeners","Infinity","endAsync","url","urlWithoutPath","URL","pathname","endsWith","onKeepaliveTimeout","reconnect","connected","topic","inputValue","retain","Buffer","previousValue","publishAsync","getMqttTopicTopics","pluginName","getEntityTopic","entity","getDiscoveryTopic","domain","getInfoTopic","subscribeToTopic","cb","unsubscribeAsync","subscribeAsync","messageTopic","messageString","subscribe","topics","unsubscribe","eventTargetShim","AbortSignal","EventTarget","TypeError","aborted","abortedFlags","defineEventAttribute","WeakMap","defineProperties","Symbol","toStringTag","AbortController","signals","signal","createAbortSignal","getSignal","abort","dispatchEvent","controller","module","symbol","for","BufferList","buf","_init","_bufs","append","_new","_offset","offset","tot","i","_t","_reverseOffset","blOffset","bufferId","index","slice","copy","dst","dstStart","srcStart","srcEnd","alloc","off","len","bytes","bufoff","concat","allocUnsafe","shallowSlice","startOffset","endOffset","buffers","encoding","consume","Math","trunc","shift","duplicate","buffer","_appendBuffer","from","byteOffset","byteLength","Array","isArray","_isBufferList","indexOf","search","isBuffer","blIndex","buffOffset","buff","nativeSearchResult","revOffset","_match","searchOffset","readDoubleBE","readDoubleLE","readFloatBE","readFloatLE","readBigInt64BE","readBigInt64LE","readBigUInt64BE","readBigUInt64LE","readInt32BE","readInt32LE","readUInt32BE","readUInt32LE","readInt16BE","readInt16LE","readUInt16BE","readUInt16LE","readInt8","readUInt8","readIntBE","readIntLE","readUIntBE","readUIntLE","b","isBufferList","DuplexStream","inherits","BufferListStream","callback","_callback","piper","err","bind","src","_write","_read","size","min","chunk","_destroy","SymbolDispose","AbortError","codes","isNodeStream","isWebStream","kControllerErrorFunction","eos","ERR_INVALID_ARG_TYPE","addAbortListener","addAbortSignal","stream","validateAbortSignal","addAbortSignalNoValidate","onAbort","destroy","cause","reason","disposable","StringPrototypeSlice","SymbolIterator","TypedArrayPrototypeSet","Uint8Array","inspect","head","tail","entry","next","unshift","clear","hasStrings","_getString","_getBuffer","first","c","str","retLen","depth","customInspect","pipeline","Duplex","destroyer","isReadable","isWritable","isTransformStream","isWritableStream","isReadableStream","ERR_INVALID_ARG_VALUE","ERR_MISSING_ARGS","orgStreams","idx","ondrain","onfinish","onreadable","onclose","d","readable","writableObjectMode","readableObjectMode","write","_final","writer","getWriter","ready","close","toRead","read","reader","getReader","done","process","aggregateTwoErrors","ERR_MULTIPLE_CALLBACK","kIsDestroyed","isDestroyed","isFinished","isServerRequest","kDestroy","kConstruct","checkError","w","r","stack","errored","self","called","onDestroy","_readableState","_writableState","closed","nextTick","emitErrorCloseNT","emitCloseNT","emitErrorNT","closeEmitted","emitClose","emit","errorEmitted","errorOrDestroy","sync","destroyed","autoDestroy","constructNT","onConstruct","constructed","emitConstructNT","_construct","isRequest","setHeader","emitCloseLegacy","emitErrorCloseLegacy","construct","once","listenerCount","socket","req","er","undestroy","reading","ended","endEmitted","finalCalled","prefinished","ending","finished","ObjectDefineProperties","ObjectGetOwnPropertyDescriptor","ObjectKeys","ObjectSetPrototypeOf","Readable","Writable","method","allowHalfOpen","webStreamsAdapters","duplexify","lazyWebStreams","__proto__","writableHighWaterMark","writableBuffer","writableLength","writableFinished","writableCorked","writableEnded","writableNeedDrain","fromWeb","pair","newStreamDuplexFromReadableWritablePair","toWeb","duplex","newReadableWritablePairFromDuplex","bufferModule","isIterable","isReadableNodeStream","isWritableNodeStream","isDuplexNodeStream","ERR_INVALID_RETURN_VALUE","createDeferredPromise","Blob","globalThis","isBlob","FunctionPrototypeCall","Duplexify","_duplexify","wrap","onfinished","final","fn","promise","resolve","ac","_promise","_resolve","fromAsyncGen","objectMode","then","val","arrayBuffer","ERR_STREAM_PREMATURE_CLOSE","kEmptyObject","validateFunction","validateObject","validateBoolean","Promise","PromisePrototypeThen","isClosed","isReadableFinished","isReadableErrored","isWritableFinished","isWritableErrored","willEmitClose","_willEmitClose","kIsClosedPromise","nop","_options$readable","_options$writable","arguments","isAborted","originalCallback","args","apply","resolverFn","eosWeb","wState","rState","onlegacyfinish","readableFinished","onend","onerror","onclosed","onrequest","cleanup","endCallback","_opts","autoCleanup","reject","SymbolAsyncIterator","ERR_STREAM_NULL_VALUES","iterable","iterator","isAsync","highWaterMark","res","hadError","hasThrow","throw","return","ArrayIsArray","EventEmitter","EE","Stream","prependListener","emitter","event","_events","pipe","dest","source","ondata","pause","resume","_isStdio","didOnEnd","ERR_OUT_OF_RANGE","validateInteger","kWeakHandler","kResistStopPropagation","staticCompose","deprecate","ArrayPrototypePush","Boolean","MathFloor","NumberIsNaN","PromiseReject","PromiseResolve","kEmpty","kEof","concurrency","queue","signalOpt","cnt","onCatch","afterItemProcessed","maybeResume","pump","unused","ReduceAwareErrMissingArgs","toIntegerOrInfinity","number","streamReturningOperators","asIndexedPairs","_options$signal","drop","_options$signal5","_options$signal6","take","_options$signal7","_options$signal8","compose","composedStream","promiseReturningOperators","every","reduce","reducer","initialValue","_options$signal2","hasInitialValue","addEventListener","gotAnyItemFromStream","_options$signal3","toArray","_options$signal4","PassThrough","Transform","_transform","destroyImpl","ERR_STREAM_DESTROYED","writing","makeAsyncIterable","fromReadable","pumpToNode","finish","onresolve","wait","pumpToWeb","pipelineImpl","outerSignal","lastStreamCleanup","finishImpl","destroys","finishCount","_disposable","code","isLastStream","onError","_ret","_ret2","pt","endFn","popCallback","ArrayPrototypeIndexOf","NumberIsInteger","NumberParseInt","SafeSet","SymbolAsyncDispose","ReadableState","getHighWaterMark","getDefaultHighWaterMark","ERR_METHOD_NOT_IMPLEMENTED","ERR_STREAM_PUSH_AFTER_EOF","ERR_STREAM_UNSHIFT_AFTER_END_EVENT","kPaused","StringDecoder","kObjectMode","kConstructed","kSync","kEmitClose","kAutoDestroy","makeBitMapDescriptor","bit","isDuplex","pipes","flowing","defaultEncoding","awaitDrainWriters","decoder","needReadable","maybeReadMore","readableAddChunk","addToFront","_isUint8Array","_uint8ArrayToBuffer","emitReadable","emittedReadable","emitReadable_","onEofChunk","addChunk","dataEmitted","readableListening","resumeScheduled","multiAwaitDrain","readingMore","_undestroy","captureRejectionSymbol","readableEnded","isPaused","setEncoding","enc","content","howMuchToRead","flow","maybeReadMore_","updateReadableListening","nReadingNextTick","resume_","streamToAsyncIterator","iter","destroyOnReturn","createAsyncIterator","fromList","endReadable","endReadableNT","endWritableNT","NaN","nOrig","computeNewHighWaterMark","doRead","pipeOpts","stdout","stderr","unpipe","onunpipe","unpipeInfo","hasUnpiped","cleanedUp","needDrain","delete","pipeOnDrain","dests","splice","ev","addListener","removeAllListeners","paused","streamKeys","j","readableDidRead","readableAborted","readableHighWaterMark","readableBuffer","readableFlowing","readableLength","readableEncoding","pipesCount","_fromList","readableStream","newStreamReadableFromReadableStream","streamReadable","newReadableStreamFromStreamReadable","_ref","_src$readableObjectMo","defaultHighWaterMarkBytes","defaultHighWaterMarkObjectMode","duplexKey","hwm","highWaterMarkFrom","setDefaultHighWaterMark","kCallback","transform","flush","_flush","prefinish","SymbolFor","kIsErrored","kIsReadable","kIsWritable","kIsDisturbed","obj","strict","_obj$_readableState","_obj$_writableState","pipeThrough","cancel","isWritableEnded","isOutgoingMessage","_closed","_defaultKeepAlive","_removedConnection","_removedContLen","isServerResponse","_sent100","isDisturbed","_stream$kIsDisturbed","isErrored","_ref2","_ref3","_ref4","_ref5","_stream$kIsErrored","_stream$_readableStat3","_stream$_writableStat3","_stream$_readableStat4","_stream$_writableStat4","readableErrored","writableErrored","isReadableEnded","_stream$_readableStat","_stream$_readableStat2","_stream$_writableStat","_stream$_writableStat2","_stream$req","_consuming","_dumped","upgradeOrConnect","ArrayPrototypeSlice","Error","FunctionPrototypeSymbolHasInstance","ObjectDefineProperty","StringPrototypeToLowerCase","SymbolHasInstance","WritableState","ERR_STREAM_CANNOT_PIPE","ERR_STREAM_ALREADY_FINISHED","ERR_STREAM_WRITE_AFTER_END","ERR_UNKNOWN_ENCODING","kOnFinished","noDecode","decodeStrings","corked","bufferProcessing","onwrite","writecb","writelen","afterWriteTickInfo","resetBuffer","pendingcb","buffered","bufferedIndex","allBuffers","allNoop","writev","_writev","clearBuffer","finishMaybe","isEncoding","writeOrBuffer","doWrite","onwriteError","errorBuffer","count","afterWriteTick","afterWrite","_state$errored","onfinishCallbacks","_state$errored2","bufferedLength","chunks","needFinish","onFinish","callFinal","getBuffer","object","cork","uncork","setDefaultEncoding","writableAborted","writableStream","newStreamWritableFromWritableStream","streamWritable","newWritableStreamFromStreamWritable","ArrayPrototypeIncludes","ArrayPrototypeJoin","ArrayPrototypeMap","NumberMAX_SAFE_INTEGER","NumberMIN_SAFE_INTEGER","ObjectPrototypeHasOwnProperty","RegExpPrototypeExec","String","StringPrototypeToUpperCase","StringPrototypeTrim","hideStackFrames","ERR_SOCKET_BAD_PORT","ERR_UNKNOWN_SIGNAL","normalizeEncoding","isAsyncFunction","isArrayBufferView","octalReg","max","validateInt32","validateUint32","positive","validateString","validateOneOf","oneOf","allowed","getOwnPropertyValueOrDefault","allowArray","allowFunction","validateDictionary","validateArray","minLength","validateBuffer","validatePlainFunction","validateUndefined","linkValueRegExp","validateLinkHeaderFormat","isInt32","isUint32","parseFileMode","def","validateStringArray","validateBooleanArray","validateAbortSignalArray","indexedName","validateEncoding","normalizedEncoding","validateNumber","validatePort","port","allowZero","validateSignalName","validateUnion","union","validateLinkHeaderValue","hints","hintsLength","link","format","AggregateError","CustomAggregateError","kIsNodeError","kTypes","classRegExp","assert","ERR_INTERNAL_ASSERTION","addNumericalSeparator","E","Base","NodeError","msg","expectedLength","match","getMessage","hidden","expected","actual","types","instances","other","toLowerCase","test","pos","last","_actual$constructor","inspected","colors","input","_value$constructor","a","range","received","isInteger","abs","RangeError","innerError","outerError","errors","env","READABLE_STREAM","promises","CustomStream","originalDestroy","el","sep","ArrayPrototypePop","thisArgs","instance","Function","hasInstance","floor","MAX_SAFE_INTEGER","MIN_SAFE_INTEGER","prop","target","proto","setPrototypeOf","PromisePrototypeCatch","thenFn","catchFn","ReflectApply","Reflect","RegExpPrototypeTest","toUpperCase","trim","asyncIterator","dispose","asyncDispose","AsyncFunction","getPrototypeOf","freeze","rej","promisify","debuglog","replace","_unused","replacement","toFixed","is","arr","ArrayBuffer","isView","removeEventListener","queueMicrotask","_removeEventListener","AbortSignalAny","any","custom","customPromisify","ERR_ILLEGAL_CONSTRUCTOR","utils","op","pl","lastArg","formatArgs","useColors","namespace","humanize","diff","color","lastC","save","namespaces","load","DEBUG","window","__nwjs","navigator","userAgent","document","documentElement","style","WebkitAppearance","firebug","exception","table","localStorage","localstorage","warned","formatters","createDebug","prevTime","namespacesCache","enabledCache","enableOverride","curr","ms","prev","coerce","formatter","selectColor","extend","init","delimiter","newDebug","toNamespace","regexp","substring","disable","names","skips","enable","RegExp","hash","charCodeAt","browser","tty","util","inspectOpts","formatWithOptions","colorCode","hideDate","toISOString","getDate","isatty","fd","supportsColor","level","O","privateData","wrappers","pd","retv","setCancelFlag","passiveListener","cancelable","canceled","preventDefault","Event","eventTarget","eventPhase","currentTarget","stopped","immediateStopped","timeStamp","defineRedirectDescriptor","defineCallDescriptor","getWrapper","wrapper","BaseEvent","CustomEvent","isFunc","defineWrapper","isStopped","setPassiveListener","composedPath","NONE","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE","stopPropagation","stopImmediatePropagation","bubbles","defaultPrevented","composed","srcElement","cancelBubble","returnValue","initEvent","listenersMap","isObject","x","getListeners","listeners","eventTargetPrototype","eventName","node","listenerType","newNode","passive","defineEventAttributeDescriptor","defineCustomEventTarget","eventNames","CustomEventTarget","Map","optionsIsObj","capture","wrappedEvent","wrapEvent","handleEvent","setEventPhase","setCurrentTarget","flag","argv","terminatorPos","ctor","superCtor","super_","TempCtor","extendStatics","__extends","t","__","TreeNode","ee","u","K","N","rr","L","ne","te","TreeNodeEnableIndex","tr","ie","ContainerIterator","iteratorType","equals","Container","M","empty","throwIteratorAccessError","__read","f","__values","TreeContainer","W","$","re","se","h","fe","parentNode","grandParent","curNode","G","he","U","X","Y","Z","ue","ae","g","updateKeyByIterator","eraseElementByPos","eraseElementByKey","eraseElementByIterator","getElementByPos","getHeight","traversal","TreeIterator","pre","__generator","label","sent","trys","ops","verb","step","OrderedSetIterator","container","OrderedSet","insert","P","begin","rBegin","rEnd","front","back","lowerBound","upperBound","reverseLowerBound","reverseUpperBound","protocol","requiredHeaderFlags","requiredHeaderFlagsErrors","CMD_SHIFT","CMD_MASK","DUP_MASK","QOS_MASK","QOS_SHIFT","RETAIN_MASK","VARBYTEINT_MASK","VARBYTEINT_FIN_MASK","VARBYTEINT_MAX","SESSIONPRESENT_MASK","SESSIONPRESENT_HEADER","CONNACK_HEADER","connack","USERNAME_MASK","PASSWORD_MASK","WILL_RETAIN_MASK","WILL_QOS_MASK","WILL_QOS_SHIFT","WILL_FLAG_MASK","CLEAN_SESSION_MASK","CONNECT_HEADER","connect","sessionExpiryInterval","willDelayInterval","receiveMaximum","maximumPacketSize","topicAliasMaximum","requestResponseInformation","requestProblemInformation","userProperties","authenticationMethod","authenticationData","payloadFormatIndicator","messageExpiryInterval","contentType","responseTopic","correlationData","maximumQoS","retainAvailable","assignedClientIdentifier","reasonString","wildcardSubscriptionAvailable","subscriptionIdentifiersAvailable","sharedSubscriptionAvailable","serverKeepAlive","responseInformation","serverReference","topicAlias","subscriptionIdentifier","propertiesCodes","genHeader","qos","dup","writeUInt8","propertiesTypes","PUBLISH_HEADER","SUBSCRIBE_HEADER","SUBSCRIBE_OPTIONS_QOS_MASK","SUBSCRIBE_OPTIONS_NL_MASK","SUBSCRIBE_OPTIONS_NL_SHIFT","SUBSCRIBE_OPTIONS_RAP_MASK","SUBSCRIBE_OPTIONS_RAP_SHIFT","SUBSCRIBE_OPTIONS_RH_MASK","SUBSCRIBE_OPTIONS_RH_SHIFT","SUBSCRIBE_OPTIONS_RH","SUBSCRIBE_OPTIONS_NL","SUBSCRIBE_OPTIONS_RAP","SUBSCRIBE_OPTIONS_QOS","UNSUBSCRIBE_HEADER","ACKS","unsuback","puback","pubcomp","pubrel","pubrec","SUBACK_HEADER","suback","VERSION3","VERSION4","VERSION5","VERSION131","VERSION132","QOS","EMPTY","pingreq","pingresp","MQTT5_PUBACK_PUBREC_CODES","MQTT5_PUBREL_PUBCOMP_CODES","MQTT5_SUBACK_CODES","MQTT5_UNSUBACK_CODES","MQTT5_DISCONNECT_CODES","MQTT5_AUTH_CODES","writeToStream","Accumulator","_array","_i","lengths","list","packet","parser","generate","cache","SubOk","subarray","generateBuffer","generateCache","generateNumber","genBufVariableByteInt","num","digit","generate4ByteBuffer","writeUInt32BE","cmd","payload","bl","Packet","constants","Parser","opt","_states","_resetState","_list","_stateCounter","_parseHeader","zero","cmdIndex","headerFlags","_emitError","_parseLength","_parseVarByteNum","_parsePayload","_pos","_parseConnect","_parseConnack","_parsePublish","_parseConfirmation","_parseSubscribe","_parseSuback","_parseUnsubscribe","_parseUnsuback","_parseDisconnect","_parseAuth","flags","protocolId","_parseString","protocolVersion","bridgeMode","will","willRetain","willQos","clean","keepalive","_parseNum","_parseProperties","getOwnPropertyNames","clientId","willProperties","_parseBuffer","sessionPresent","reasonCode","returnCode","_parseMessageId","rh","rap","nl","subscription","subscriptions","_parseByte","granted","unsubscriptions","messageId","maybeBuffer","_parseStringPair","_parse4ByteNum","fullInfoFlag","current","mul","padding","_parseByType","currentUserProperty","currentValue","_newPacket","zeroBuf","numbers","numCache","writeNumber","writeNumberCached","toGenerate","propertiesData","getProperties","providedUsername","isStringOrBuffer","writeVarByteInt","writeStringOrBuffer","writeString","version","rc","getPropertiesByMaximumPacketSize","confirmation","subs","itopic","iqos","sub","jtopic","jqos","jnl","jrap","jrh","joptions","unsubs","emptyPacket","auth","writeNumberGenerated","varByteIntCache","string","strlen","writeStringPair","generatedNumber","toWrite","writeProperties","propertiesLength","getLengthProperty","currentLength","propName","propLength","propValueLength","propValue","valueIndex","mayEmptyProps","currentMayEmptyProp","writeProperty","generated4ByteBuffer","write4ByteNumber","bufOrString","mqtt","BufferedDuplex","readable_stream_1","buffer_1","proxy","writeQueue","isSocketOpen","writeToProxy","socketReady","processWriteQueue","__importDefault","get_timer_1","keepaliveTimeoutTimestamp","_keepaliveTimeoutTimestamp","intervalEvery","_intervalEvery","_keepalive","variant","timer","setKeepalive","timerId","reschedule","counter","keepAliveTimeout","ceil","sendPing","TypedEventEmitter","events_1","shared_1","applyMixin","topic_alias_recv_1","mqtt_packet_1","default_message_id_provider_1","default_1","validations","debug_1","store_1","handlers_1","TypedEmitter_1","KeepaliveManager_1","is_browser_1","setImmediate","defaultConnectOptions","reconnectPeriod","connectTimeout","resubscribe","writeCache","timerVariant","MqttClient","defaultId","random","substr","streamBuilder","noop","_noop","VERSION","isWebWorker","customHandleAcks","cacheNumbers","messageIdProvider","outgoingStore","incomingStore","queueQoSZero","_resubscribeTopics","messageIdToTopic","keepaliveManager","disconnecting","reconnecting","connackTimer","reconnectTimer","_storeProcessing","_packetIdsDuringStoreProcessing","_storeProcessingQueue","outgoing","_firstConnection","topicAliasRecv","deliver","_resubscribe","send","register","_sendPacket","clearTimeout","_destroyKeepaliveManager","_setupReconnect","manualConnect","handleAuth","handleMessage","_nextId","allocate","getLastMessageId","getLastAllocated","_a","completeParse","packets","_clearReconnect","disconnected","work","nextTickWork","_flushVolatile","connectPacket","_writePacket","authPacket","setTimeout","_cleanUp","cbStorePut","_checkDisconnecting","publishProc","volatile","invoke","topicObject","topicsList","invalidTopic","validateTopics","defaultOpts","parseSub","subOptions","currentOpts","subscribeProc","packet2","unsubscribeProc","topic2","force","closeStores","e1","e2","_deferredReconnect","removeOutgoingMessage","_removeOutgoingAndStoreMessage","_reconnect","_removeTopicAliasAndRecoverTopicName","alias","topicAliasSend","getTopicByAlias","clearInterval","forced","_storeAndSend","storePacket","put","err2","_applyTopicAlias","autoAssignTopicAlias","getAliasByTopic","getLruAlias","autoUseTopicAlias","_storePacket","_setupKeepaliveManager","reschedulePing","_reschedulePing","_resubscribeTopicsKeys","connackPacket","topicI","resubscribeTopic","_onConnect","startStreamProcess","outStore","createStream","remove","_flushStoreProcessingQueue","clearStoreProcessing","storeDeliver","status","allProcessed","_invokeAllStoreProcessingQueue","_invokeStoreProcessingQueue","del","deallocate","MQTTJS_VERSION","BufferedDuplex_1","my","isInitialized","hostname","websocketSubProtocol","path","wsOptions","setDefaultOpts","transformWsUrl","buildUrl","connectSocket","protocols","_proxy","sendSocketMessage","success","fail","closeSocket","buildProxy","onSocketOpen","onSocketMessage","FileReader","readAsArrayBuffer","onSocketClose","onSocketError","url_1","client_1","brokerUrl","_b","_c","_d","parsedUrl","parsedOptions","query","unixSocket","matches","parseAuthOptions","cert","forceNativeWebSocket","ws","wss","wx","wxs","ali","alis","tcp","ssl","tls","mqtts","isSecure","defaultProtocol","servers","_reconnectCount","allowRetries","promiseResolutionListeners","removePromiseResolutionListeners","net_1","createConnection","tls_1","isIP","servername","connection","handleTLSerrors","authorized","browserStreamBuilder","ws_1","WSS_OPTIONS","createWebsocket","createWebSocket","webSocketStream","createWebSocketStream","parsed","binary","setDefaultBrowserOpts","bufferSize","browserBufferSize","bufferTimeout","browserBufferTimeout","coerceToBuffer","WebSocket","binaryType","createBrowserWebSocket","pOptions","socketWrite","socketEnd","socketWriteBrowser","bufferedAmount","eventListenerSupport","onOpen","onClose","onMessage","Response","readyState","OPEN","onopen","onmessage","socketTask","errMsg","destroyRef","nextId","worker_timers_1","workerTimer","nativeTimer","func","time","isReactNativeBrowser","ReasonCodes","response","pubackRC","ErrorWithReasonCode","pubrecRC","grantedI","subackRC","ack_1","topic_alias_send_1","publish_1","auth_1","connack_1","pubrel_1","validReasonCodes","gotTopic","comp","pub","isWebWorkerEnv","isReactNativeEnv","product","isBrowser","versions","isStandardBrowserEnv","mixin","includeConstructor","inheritanceChain","base","streamsOpts","defaultStoreOptions","_inflights","toDelete","storedPacket","aliasToTopic","lru_cache_1","number_allocator_1","LRUCache","topicToAlias","numberAllocator","NumberAllocator","use","firstVacant","lastId","free","validateTopic","parts","KeepaliveManager","UniqueMessageIdProvider","DefaultMessageIdProvider","Store","Client","unique_message_id_provider_1","connect_1","Server","Receiver","Sender","WebSocketServer","EMPTY_BUFFER","FastBuffer","species","_mask","mask","output","_unmask","totalLength","toArrayBuffer","toBuffer","readOnly","unmask","WS_NO_BUFFER_UTIL","bufferUtil","BINARY_TYPES","hasBlob","GUID","kForOnEventAttribute","kListener","kStatusCode","kWebSocket","NOOP","kCode","kData","kError","kMessage","kReason","kTarget","kType","kWasClean","CloseEvent","wasClean","ErrorEvent","MessageEvent","handler","isBinary","callListener","_closeFrameReceived","_closeFrameSent","thisArg","tokenChars","extensions","extension","configurations","params","header","offers","extensionName","paramName","mustUnescape","isEscaping","inQuotes","SyntaxError","token","kDone","kRun","pending","jobs","job","zlib","Limiter","TRAILER","kPerMessageDeflate","kTotalLength","kBuffers","zlibLimiter","deflateOnData","inflateOnData","_maxPayload","reset","inflateOnError","_inflate","isServer","maxPayload","_options","_threshold","threshold","_isServer","_deflate","concurrencyLimit","offer","serverNoContextTakeover","server_no_context_takeover","clientNoContextTakeover","client_no_context_takeover","serverMaxWindowBits","server_max_window_bits","clientMaxWindowBits","client_max_window_bits","accept","normalizeParams","acceptAsServer","acceptAsClient","accepted","decompress","fin","_decompress","compress","_compress","endpoint","windowBits","Z_DEFAULT_WINDOWBITS","createInflateRaw","zlibInflateOptions","createDeflateRaw","zlibDeflateOptions","Z_SYNC_FLUSH","PerMessageDeflate","isValidStatusCode","isValidUTF8","_allowSynchronousEvents","allowSynchronousEvents","_binaryType","_extensions","_skipUTF8Validation","skipUTF8Validation","_bufferedBytes","_buffers","_compressed","_payloadLength","_fragmented","_masked","_fin","_opcode","_totalPayloadLength","_messageLength","_fragments","_errored","_loop","_state","startLoop","getInfo","getPayloadLength16","getPayloadLength64","getMask","getData","createError","compressed","haveLength","pow","controlMessage","dataMessage","messageLength","fragments","ErrorCtor","statusCode","errorCode","captureStackTrace","randomFillSync","applyMask","kByteLength","maskBuffer","RANDOM_POOL_SIZE","randomPool","randomPoolPointer","generateMask","_generateMask","_maskBuffer","_socket","_firstFragment","_queue","frame","dataLength","merge","skipMasking","payloadLength","opcode","rsv1","writeUInt16BE","writeUIntBE","enqueue","dispatch","sendFrame","ping","getBlobData","pong","perMessageDeflate","blob","callCallbacks","dequeue","sender","duplexOnEnd","duplexOnError","terminateOnDestroy","CLOSED","terminate","CONNECTING","has","isUtf8","_isValidUTF8","WS_NO_UTF_8_VALIDATE","http","createHash","subprotocol","keyRegex","server","socketOnError","abortHandshake","headers","STATUS_CODES","Connection","abortHandshakeOrEmitwsClientError","autoPong","handleProtocols","clientTracking","verifyClient","noServer","backlog","_server","createServer","writeHead","listen","emitConnection","_removeListeners","addListeners","listening","upgrade","handleUpgrade","clients","_shouldEmitClose","address","shouldHandle","secWebSocketProtocol","secWebSocketExtensions","origin","secure","encrypted","verified","completeUpgrade","update","digest","_protocol","setSocket","https","net","randomBytes","kAborted","protocolVersions","readyStates","subprotocolRegex","_closeCode","_closeMessage","_closeTimer","_errorEmitted","_paused","_readyState","_receiver","_sender","_bufferedAmount","_redirects","initAsClient","_autoPong","_url","receiver","receiverOnConclude","receiverOnDrain","receiverOnError","receiverOnMessage","receiverOnPing","receiverOnPong","senderOnError","setNoDelay","socketOnClose","socketOnData","socketOnEnd","CLOSING","setCloseTimer","_req","sendAfterClose","websocket","followRedirects","maxRedirects","socketPath","timeout","href","isIpcUrl","invalidUrlMessage","emitErrorAndClose","defaultPort","request","protocolSet","tlsConnect","netConnect","Upgrade","handshakeTimeout","Origin","_originalIpc","_originalSecure","_originalHostOrSocketPath","isSameHost","authorization","cookie","location","addr","serverProt","protError","extensionNames","finishRequest","receiverOnFinish","property","y","plural","msAbs","isPlural","round","exec","isFinite","long","fmtLong","fmtShort","SortedSet","debugTrace","debugError","Interval","low","high","ss","lhs","rhs","compare","it","pointer","rLow","rHigh","lLow","intervalCount","dump","element","arg1","arg2","arg3","global","copyBuffer","cur","circles","refs","refsNew","constructorHandlers","cloneArray","cloneProto","clone","a2","o2","rfdcCircles","os","hasFlag","forceColor","getSupportLevel","isTTY","platform","osRelease","sign","CI_NAME","TEAMCITY_VERSION","COLORTERM","TERM_PROGRAM_VERSION","TERM_PROGRAM","TERM","hasBasic","has256","has16m","translateLevel","FORCE_COLOR","TWO_TO_THE_POWER_OF_TWENTY_NINE","TWO_TO_THE_POWER_OF_THIRTY","LAST_NUMBER_WEAK_MAP","lastNumberWeakMap","generateUniqueNumber","collection","lastNumber","nextNumber","createGenerateUniqueNumber","loadOrReturnBroker","createAddUniqueNumber","loadBroker","worker","broker","createObjectURL","revokeObjectURL","createLoadOrReturnBroker","scheduledIntervalFunctions","scheduledTimeoutFunctions","unrespondedRequests","Worker","timerType","idOrFunc","timerIdAndTimerType","isClearResponse","postMessage","delay","performance","require","perf","PROCESS","emitWarning","AC","AS","onabort","_onabort","warnACPolyfill","printACPolyfillWarning","LRU_CACHE_IGNORE_AC_WARNING","isPosInt","getUintArray","Uint16Array","Uint32Array","ZeroArray","fill","Stack","heap","static","HeapCls","ttl","ttlResolution","ttlAutopurge","updateAgeOnGet","updateAgeOnHas","allowStale","noDisposeOnSet","noUpdateTTL","maxEntrySize","sizeCalculation","noDeleteOnFetchRejection","noDeleteOnStaleGet","allowStaleOnFetchAbort","allowStaleOnFetchRejection","ignoreFetchAbort","unsafeExposeInternals","starts","ttls","sizes","keyMap","keyList","valList","isBackgroundFetch","backgroundFetch","context","moveToTail","indexes","rindexes","isStale","maxSize","calculatedSize","fetchMethod","memoMethod","disposeAfter","UintArray","shouldWarn","getRemainingTTL","unref","cachedNow","getNow","age","remainingTTL","entrySize","totalCalculatedSize","_s","_st","_k","_v","rentries","rkeys","rvalues","getOptions","__staleWhileFetching","thisp","rforEach","purgeStale","deleted","remain","setOptions","maxEntrySizeExceeded","oldVal","__abortController","dt","task","hasOptions","peek","peekOptions","fetchOpts","updateCache","ignoreAbort","fetchAborted","fetchError","fetchAbortIgnored","fetchResolved","fetchFail","bf","fetchUpdated","allowStaleAborted","noDelete","returnedStale","__returned","fetchDispatched","fmp","fetchRejected","fetch","fetchOptions","forceRefresh","stale","staleVal","forceFetch","memo","memoOptions","vv","fetching","pi","ni","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","definition","__webpack_exports__"],"sourceRoot":""}